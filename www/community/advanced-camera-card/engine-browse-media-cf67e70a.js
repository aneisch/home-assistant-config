import{ec as t,ej as e,l as a,dT as r,ez as s,ev as n}from"./card-b5ed300f.js";import{C as i,G as o}from"./engine-generic-0cd987f1.js";const c=(e,a,r)=>!!e._metadata&&(a&&r?t({start:e._metadata.startDate,end:e._metadata.endDate},{start:a,end:r}):!a&&r?e._metadata.startDate<=r:!(a&&!r)||e._metadata.startDate>=a);class d extends i{constructor(){super(...arguments),this._entity=null}async initialize(t){const r=this.getConfig(),s=r.camera_entity?await t.entityRegistryManager.getEntity(t.hass,r.camera_entity):null;if(!s||!r.camera_entity)throw new e(a("error.no_camera_entity"),r);return this._entity=s,await super.initialize(t)}getEntity(){return this._entity}}class l extends o{constructor(t,e,a,r,s,n){super(e,n),this._entityRegistryManager=t,this._browseMediaWalker=a,this._resolvedMediaCache=r,this._requestCache=s}generateDefaultEventQuery(t,e,a){return[{type:r.Event,cameraIDs:e,...a}]}async getMediaDownloadPath(t,e,a){return s(t,a.getContentID(),this._resolvedMediaCache)}getQueryResultMaxAge(t){return t.type===r.Event?n:null}getMediaCapabilities(t){return{canFavorite:!1,canDownload:!0}}}export{d as B,l as a,c as i};
