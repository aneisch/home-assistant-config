function e(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o}"function"==typeof SuppressedError&&SuppressedError;
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const t=globalThis,n=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,r=Symbol(),a=new WeakMap;let i=class{constructor(e,t,n){if(this._$cssResult$=!0,n!==r)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(n&&void 0===e){const n=void 0!==t&&1===t.length;n&&(e=a.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&a.set(t,e))}return e}toString(){return this.cssText}};const o=e=>new i("string"==typeof e?e:e+"",void 0,r),s=(e,...t)=>{const n=1===e.length?e[0]:t.reduce(((t,n,r)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+e[r+1]),e[0]);return new i(n,e,r)},c=(e,r)=>{if(n)e.adoptedStyleSheets=r.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet));else for(const n of r){const r=document.createElement("style"),a=t.litNonce;void 0!==a&&r.setAttribute("nonce",a),r.textContent=n.cssText,e.appendChild(r)}},l=n?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return o(t)})(e):e
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,{is:d,defineProperty:u,getOwnPropertyDescriptor:h,getOwnPropertyNames:m,getOwnPropertySymbols:p,getPrototypeOf:f}=Object,g=globalThis,v=g.trustedTypes,_=v?v.emptyScript:"",y=g.reactiveElementPolyfillSupport,b=(e,t)=>e,w={toAttribute(e,t){switch(t){case Boolean:e=e?_:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(e){n=null}}return n}},x=(e,t)=>!d(e,t),k={attribute:!0,type:String,converter:w,reflect:!1,hasChanged:x};Symbol.metadata??=Symbol("metadata"),g.litPropertyMetadata??=new WeakMap;class M extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=k){if(t.state&&(t.attribute=!1),this._$Ei(),this.elementProperties.set(e,t),!t.noAccessor){const n=Symbol(),r=this.getPropertyDescriptor(e,n,t);void 0!==r&&u(this.prototype,e,r)}}static getPropertyDescriptor(e,t,n){const{get:r,set:a}=h(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get(){return r?.call(this)},set(t){const i=r?.call(this);a.call(this,t),this.requestUpdate(e,i,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??k}static _$Ei(){if(this.hasOwnProperty(b("elementProperties")))return;const e=f(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(b("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(b("properties"))){const e=this.properties,t=[...m(e),...p(e)];for(const n of t)this.createProperty(n,e[n])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,n]of t)this.elementProperties.set(e,n)}this._$Eh=new Map;for(const[e,t]of this.elementProperties){const n=this._$Eu(e,t);void 0!==n&&this._$Eh.set(n,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const e of n)t.unshift(l(e))}else void 0!==e&&t.push(l(e));return t}static _$Eu(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const n of t.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return c(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$EC(e,t){const n=this.constructor.elementProperties.get(e),r=this.constructor._$Eu(e,n);if(void 0!==r&&!0===n.reflect){const a=(void 0!==n.converter?.toAttribute?n.converter:w).toAttribute(t,n.type);this._$Em=e,null==a?this.removeAttribute(r):this.setAttribute(r,a),this._$Em=null}}_$AK(e,t){const n=this.constructor,r=n._$Eh.get(e);if(void 0!==r&&this._$Em!==r){const e=n.getPropertyOptions(r),a="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:w;this._$Em=r,this[r]=a.fromAttribute(t,e.type),this._$Em=null}}requestUpdate(e,t,n){if(void 0!==e){if(n??=this.constructor.getPropertyOptions(e),!(n.hasChanged??x)(this[e],t))return;this.P(e,t,n)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(e,t,n){this._$AL.has(e)||this._$AL.set(e,t),!0===n.reflect&&this._$Em!==e&&(this._$Ej??=new Set).add(e)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,n]of e)!0!==n.wrapped||this._$AL.has(t)||void 0===this[t]||this.P(t,this[t],n)}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach((e=>e.hostUpdate?.())),this.update(t)):this._$EU()}catch(t){throw e=!1,this._$EU(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach((e=>e.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Ej&&=this._$Ej.forEach((e=>this._$EC(e,this[e]))),this._$EU()}updated(e){}firstUpdated(e){}}M.elementStyles=[],M.shadowRootOptions={mode:"open"},M[b("elementProperties")]=new Map,M[b("finalized")]=new Map,y?.({ReactiveElement:M}),(g.reactiveElementVersions??=[]).push("2.0.4");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const C=globalThis,S=C.trustedTypes,E=S?S.createPolicy("lit-html",{createHTML:e=>e}):void 0,A="$lit$",T=`lit$${(Math.random()+"").slice(9)}$`,$="?"+T,I=`<${$}>`,O=document,L=()=>O.createComment(""),D=e=>null===e||"object"!=typeof e&&"function"!=typeof e,j=Array.isArray,z=e=>j(e)||"function"==typeof e?.[Symbol.iterator],P="[ \t\n\f\r]",R=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,N=/-->/g,F=/>/g,B=RegExp(`>|${P}(?:([^\\s"'>=/]+)(${P}*=${P}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),V=/'/g,H=/"/g,U=/^(?:script|style|textarea|title)$/i,q=(e=>(t,...n)=>({_$litType$:e,strings:t,values:n}))(1),W=Symbol.for("lit-noChange"),Z=Symbol.for("lit-nothing"),K=new WeakMap,Q=O.createTreeWalker(O,129);function Y(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==E?E.createHTML(t):t}const G=(e,t)=>{const n=e.length-1,r=[];let a,i=2===t?"<svg>":"",o=R;for(let t=0;t<n;t++){const n=e[t];let s,c,l=-1,d=0;for(;d<n.length&&(o.lastIndex=d,c=o.exec(n),null!==c);)d=o.lastIndex,o===R?"!--"===c[1]?o=N:void 0!==c[1]?o=F:void 0!==c[2]?(U.test(c[2])&&(a=RegExp("</"+c[2],"g")),o=B):void 0!==c[3]&&(o=B):o===B?">"===c[0]?(o=a??R,l=-1):void 0===c[1]?l=-2:(l=o.lastIndex-c[2].length,s=c[1],o=void 0===c[3]?B:'"'===c[3]?H:V):o===H||o===V?o=B:o===N||o===F?o=R:(o=B,a=void 0);const u=o===B&&e[t+1].startsWith("/>")?" ":"";i+=o===R?n+I:l>=0?(r.push(s),n.slice(0,l)+A+n.slice(l)+T+u):n+T+(-2===l?t:u)}return[Y(e,i+(e[n]||"<?>")+(2===t?"</svg>":"")),r]};class X{constructor({strings:e,_$litType$:t},n){let r;this.parts=[];let a=0,i=0;const o=e.length-1,s=this.parts,[c,l]=G(e,t);if(this.el=X.createElement(c,n),Q.currentNode=this.el.content,2===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(r=Q.nextNode())&&s.length<o;){if(1===r.nodeType){if(r.hasAttributes())for(const e of r.getAttributeNames())if(e.endsWith(A)){const t=l[i++],n=r.getAttribute(e).split(T),o=/([.?@])?(.*)/.exec(t);s.push({type:1,index:a,name:o[2],strings:n,ctor:"."===o[1]?re:"?"===o[1]?ae:"@"===o[1]?ie:ne}),r.removeAttribute(e)}else e.startsWith(T)&&(s.push({type:6,index:a}),r.removeAttribute(e));if(U.test(r.tagName)){const e=r.textContent.split(T),t=e.length-1;if(t>0){r.textContent=S?S.emptyScript:"";for(let n=0;n<t;n++)r.append(e[n],L()),Q.nextNode(),s.push({type:2,index:++a});r.append(e[t],L())}}}else if(8===r.nodeType)if(r.data===$)s.push({type:2,index:a});else{let e=-1;for(;-1!==(e=r.data.indexOf(T,e+1));)s.push({type:7,index:a}),e+=T.length-1}a++}}static createElement(e,t){const n=O.createElement("template");return n.innerHTML=e,n}}function J(e,t,n=e,r){if(t===W)return t;let a=void 0!==r?n._$Co?.[r]:n._$Cl;const i=D(t)?void 0:t._$litDirective$;return a?.constructor!==i&&(a?._$AO?.(!1),void 0===i?a=void 0:(a=new i(e),a._$AT(e,n,r)),void 0!==r?(n._$Co??=[])[r]=a:n._$Cl=a),void 0!==a&&(t=J(e,a._$AS(e,t.values),a,r)),t}let ee=class{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:n}=this._$AD,r=(e?.creationScope??O).importNode(t,!0);Q.currentNode=r;let a=Q.nextNode(),i=0,o=0,s=n[0];for(;void 0!==s;){if(i===s.index){let t;2===s.type?t=new te(a,a.nextSibling,this,e):1===s.type?t=new s.ctor(a,s.name,s.strings,this,e):6===s.type&&(t=new oe(a,this,e)),this._$AV.push(t),s=n[++o]}i!==s?.index&&(a=Q.nextNode(),i++)}return Q.currentNode=O,r}p(e){let t=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}};class te{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,n,r){this.type=2,this._$AH=Z,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=r,this._$Cv=r?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=J(this,e,t),D(e)?e===Z||null==e||""===e?(this._$AH!==Z&&this._$AR(),this._$AH=Z):e!==this._$AH&&e!==W&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):z(e)?this.k(e):this._(e)}S(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.S(e))}_(e){this._$AH!==Z&&D(this._$AH)?this._$AA.nextSibling.data=e:this.T(O.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:n}=e,r="number"==typeof n?this._$AC(e):(void 0===n.el&&(n.el=X.createElement(Y(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===r)this._$AH.p(t);else{const e=new ee(r,this),n=e.u(this.options);e.p(t),this.T(n),this._$AH=e}}_$AC(e){let t=K.get(e.strings);return void 0===t&&K.set(e.strings,t=new X(e)),t}k(e){j(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,r=0;for(const a of e)r===t.length?t.push(n=new te(this.S(L()),this.S(L()),this,this.options)):n=t[r],n._$AI(a),r++;r<t.length&&(this._$AR(n&&n._$AB.nextSibling,r),t.length=r)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}class ne{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,n,r,a){this.type=1,this._$AH=Z,this._$AN=void 0,this.element=e,this.name=t,this._$AM=r,this.options=a,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=Z}_$AI(e,t=this,n,r){const a=this.strings;let i=!1;if(void 0===a)e=J(this,e,t,0),i=!D(e)||e!==this._$AH&&e!==W,i&&(this._$AH=e);else{const r=e;let o,s;for(e=a[0],o=0;o<a.length-1;o++)s=J(this,r[n+o],t,o),s===W&&(s=this._$AH[o]),i||=!D(s)||s!==this._$AH[o],s===Z?e=Z:e!==Z&&(e+=(s??"")+a[o+1]),this._$AH[o]=s}i&&!r&&this.j(e)}j(e){e===Z?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class re extends ne{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Z?void 0:e}}class ae extends ne{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Z)}}class ie extends ne{constructor(e,t,n,r,a){super(e,t,n,r,a),this.type=5}_$AI(e,t=this){if((e=J(this,e,t,0)??Z)===W)return;const n=this._$AH,r=e===Z&&n!==Z||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,a=e!==Z&&(n===Z||r);r&&this.element.removeEventListener(this.name,this,n),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class oe{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){J(this,e)}}const se={P:A,A:T,C:$,M:1,L:G,R:ee,D:z,V:J,I:te,H:ne,N:ae,U:ie,B:re,F:oe},ce=C.litHtmlPolyfillSupport;ce?.(X,te),(C.litHtmlVersions??=[]).push("3.1.2");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
let le=class extends M{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,n)=>{const r=n?.renderBefore??t;let a=r._$litPart$;if(void 0===a){const e=n?.renderBefore??null;r._$litPart$=a=new te(t.insertBefore(L(),e),e,void 0,n??{})}return a._$AI(e),a})(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return W}};le._$litElement$=!0,le.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:le});const de=globalThis.litElementPolyfillSupport;de?.({LitElement:le}),(globalThis.litElementVersions??=[]).push("4.0.4");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const ue=e=>(t,n)=>{void 0!==n?n.addInitializer((()=>{customElements.define(e,t)})):customElements.define(e,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,he={attribute:!0,type:String,converter:w,reflect:!1,hasChanged:x},me=(e=he,t,n)=>{const{kind:r,metadata:a}=n;let i=globalThis.litPropertyMetadata.get(a);if(void 0===i&&globalThis.litPropertyMetadata.set(a,i=new Map),i.set(n.name,e),"accessor"===r){const{name:r}=n;return{set(n){const a=t.get.call(this);t.set.call(this,n),this.requestUpdate(r,a,e)},init(t){return void 0!==t&&this.P(r,void 0,e),t}}}if("setter"===r){const{name:r}=n;return function(n){const a=this[r];t.call(this,n),this.requestUpdate(r,a,e)}}throw Error("Unsupported decorator location: "+r)};function pe(e){return(t,n)=>"object"==typeof n?me(e,t,n):((e,t,n)=>{const r=t.hasOwnProperty(n);return t.constructor.createProperty(n,r?{...e,wrapped:!0}:e),r?Object.getOwnPropertyDescriptor(t,n):void 0})(e,t,n)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}function fe(e){return pe({...e,state:!0,attribute:!1})}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ge={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},ve=e=>(...t)=>({_$litDirective$:e,values:t});let _e=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,n){this._$Ct=e,this._$AM=t,this._$Ci=n}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}};
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ye=ve(class extends _e{constructor(e){if(super(e),e.type!==ge.ATTRIBUTE||"class"!==e.name||e.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter((t=>e[t])).join(" ")+" "}update(e,[t]){if(void 0===this.st){this.st=new Set,void 0!==e.strings&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter((e=>""!==e))));for(const e in t)t[e]&&!this.nt?.has(e)&&this.st.add(e);return this.render(t)}const n=e.element.classList;for(const e of this.st)e in t||(n.remove(e),this.st.delete(e));for(const e in t){const r=!!t[e];r===this.st.has(e)||this.nt?.has(e)||(r?(n.add(e),this.st.add(e)):(n.remove(e),this.st.delete(e)))}return W}}),be=e=>e??Z
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,{I:we}=se,xe=e=>void 0===e.strings,ke=()=>document.createComment(""),Me=(e,t,n)=>{const r=e._$AA.parentNode,a=void 0===t?e._$AB:t._$AA;if(void 0===n){const t=r.insertBefore(ke(),a),i=r.insertBefore(ke(),a);n=new we(t,i,e,e.options)}else{const t=n._$AB.nextSibling,i=n._$AM,o=i!==e;if(o){let t;n._$AQ?.(e),n._$AM=e,void 0!==n._$AP&&(t=e._$AU)!==i._$AU&&n._$AP(t)}if(t!==a||o){let e=n._$AA;for(;e!==t;){const t=e.nextSibling;r.insertBefore(e,a),e=t}}}return n},Ce=(e,t,n=e)=>(e._$AI(t,n),e),Se={},Ee=(e,t=Se)=>e._$AH=t,Ae=e=>e._$AH,Te=e=>{e._$AP?.(!1,!0);let t=e._$AA;const n=e._$AB.nextSibling;for(;t!==n;){const e=t.nextSibling;t.remove(),t=e}},$e=(e,t)=>{const n=e._$AN;if(void 0===n)return!1;for(const e of n)e._$AO?.(t,!1),$e(e,t);return!0},Ie=e=>{let t,n;do{if(void 0===(t=e._$AM))break;n=t._$AN,n.delete(e),e=t}while(0===n?.size)},Oe=e=>{for(let t;t=e._$AM;e=t){let n=t._$AN;if(void 0===n)t._$AN=n=new Set;else if(n.has(e))break;n.add(e),je(t)}};
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Le(e){void 0!==this._$AN?(Ie(this),this._$AM=e,Oe(this)):this._$AM=e}function De(e,t=!1,n=0){const r=this._$AH,a=this._$AN;if(void 0!==a&&0!==a.size)if(t)if(Array.isArray(r))for(let e=n;e<r.length;e++)$e(r[e],!1),Ie(r[e]);else null!=r&&($e(r,!1),Ie(r));else $e(this,e)}const je=e=>{e.type==ge.CHILD&&(e._$AP??=De,e._$AQ??=Le)};class ze extends _e{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,n){super._$AT(e,t,n),Oe(this),this.isConnected=e._$AU}_$AO(e,t=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),t&&($e(this,e),Ie(this))}setValue(e){if(xe(this._$Ct))this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}}
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Pe=()=>new Re;let Re=class{};const Ne=new WeakMap,Fe=ve(class extends ze{render(e){return Z}update(e,[t]){const n=t!==this.Y;return n&&void 0!==this.Y&&this.rt(void 0),(n||this.lt!==this.ct)&&(this.Y=t,this.ht=e.options?.host,this.rt(this.ct=e.element)),Z}rt(e){if("function"==typeof this.Y){const t=this.ht??globalThis;let n=Ne.get(t);void 0===n&&(n=new WeakMap,Ne.set(t,n)),void 0!==n.get(this.Y)&&this.Y.call(this.ht,void 0),n.set(this.Y,e),void 0!==e&&this.Y.call(this.ht,e)}else this.Y.value=e}get lt(){return"function"==typeof this.Y?Ne.get(this.ht??globalThis)?.get(this.Y):this.Y?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}}),Be="important",Ve=" !"+Be,He=ve(class extends _e{constructor(e){if(super(e),e.type!==ge.ATTRIBUTE||"style"!==e.name||e.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce(((t,n)=>{const r=e[n];return null==r?t:t+`${n=n.includes("-")?n:n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`}),"")}update(e,[t]){const{style:n}=e.element;if(void 0===this.ft)return this.ft=new Set(Object.keys(t)),this.render(t);for(const e of this.ft)null==t[e]&&(this.ft.delete(e),e.includes("-")?n.removeProperty(e):n[e]=null);for(const e in t){const r=t[e];if(null!=r){this.ft.add(e);const t="string"==typeof r&&r.endsWith(Ve);e.includes("-")||t?n.setProperty(e,t?r.slice(0,-11):r,t?Be:""):n[e]=r}}return W}});
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Ue(e,t,n,r=20,a=0){let i=[];if(a>=r)return i;const o=e=>{const i=e.assignedNodes().filter((e=>1===e.nodeType));return i.length>0?Ue(i[0].parentElement,t,n,r,a+1):[]},s=Array.from(e.children||[]);for(const e of s)t(e)||(n(e)&&i.push(e),null!=e.shadowRoot?i.push(...Ue(e.shadowRoot,t,n,r,a+1)):"SLOT"===e.tagName?i.push(...o(e)):i.push(...Ue(e,t,n,r,a+1)));return i}function qe(e){return e.hasAttribute("hidden")||e.hasAttribute("aria-hidden")&&"false"!==e.getAttribute("aria-hidden")||"none"===e.style.display||"0"===e.style.opacity||"hidden"===e.style.visibility||"collapse"===e.style.visibility}function We(e){return"-1"!==e.getAttribute("tabindex")&&!qe(e)&&!function(e){return e.hasAttribute("disabled")||e.hasAttribute("aria-disabled")&&"false"!==e.getAttribute("aria-disabled")}(e)&&(e.hasAttribute("tabindex")||(e instanceof HTMLAnchorElement||e instanceof HTMLAreaElement)&&e.hasAttribute("href")||e instanceof HTMLButtonElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement||e instanceof HTMLIFrameElement)}const Ze=new Map;const Ke=document.createElement("template");Ke.innerHTML='\n\t<div id="start"></div>\n\t<div id="backup"></div>\n\t<slot></slot>\n\t<div id="end"></div>\n';class Qe extends HTMLElement{constructor(){super(),this.debounceId=Math.random().toString(),this._focused=!1;const e=this.attachShadow({mode:"open"});e.appendChild(Ke.content.cloneNode(!0)),this.$backup=e.querySelector("#backup"),this.$start=e.querySelector("#start"),this.$end=e.querySelector("#end"),this.focusLastElement=this.focusLastElement.bind(this),this.focusFirstElement=this.focusFirstElement.bind(this),this.onFocusIn=this.onFocusIn.bind(this),this.onFocusOut=this.onFocusOut.bind(this)}static get observedAttributes(){return["inactive"]}get inactive(){return this.hasAttribute("inactive")}set inactive(e){e?this.setAttribute("inactive",""):this.removeAttribute("inactive")}get focused(){return this._focused}connectedCallback(){this.$start.addEventListener("focus",this.focusLastElement),this.$end.addEventListener("focus",this.focusFirstElement),this.addEventListener("focusin",this.onFocusIn),this.addEventListener("focusout",this.onFocusOut),this.render()}disconnectedCallback(){this.$start.removeEventListener("focus",this.focusLastElement),this.$end.removeEventListener("focus",this.focusFirstElement),this.removeEventListener("focusin",this.onFocusIn),this.removeEventListener("focusout",this.onFocusOut)}attributeChangedCallback(){this.render()}focusFirstElement(){this.trapFocus()}focusLastElement(){this.trapFocus(!0)}getFocusableElements(){return Ue(this,qe,We)}trapFocus(e){if(this.inactive)return;let t=this.getFocusableElements();t.length>0?(e?t[t.length-1].focus():t[0].focus(),this.$backup.setAttribute("tabindex","-1")):(this.$backup.setAttribute("tabindex","0"),this.$backup.focus())}onFocusIn(){this.updateFocused(!0)}onFocusOut(){this.updateFocused(!1)}updateFocused(e){!function(e,t,n){const r=Ze.get(n);null!=r&&window.clearTimeout(r),Ze.set(n,window.setTimeout((()=>{e(),Ze.delete(n)}),t))}((()=>{this.focused!==e&&(this._focused=e,this.render())}),0,this.debounceId)}render(){this.$start.setAttribute("tabindex",!this.focused||this.inactive?"-1":"0"),this.$end.setAttribute("tabindex",!this.focused||this.inactive?"-1":"0"),this.focused?this.setAttribute("focused",""):this.removeAttribute("focused")}}function Ye(e){return Number(e.getAttribute("data-dialog-count"))||0}function Ge(e,t){e.setAttribute("data-dialog-count",t.toString())}function Xe(e=document.activeElement){return null!=e&&null!=e.shadowRoot&&null!=e.shadowRoot.activeElement?Xe(e.shadowRoot.activeElement):e}window.customElements.define("focus-trap",Qe);const Je=document.createElement("template");Je.innerHTML='\n  <style>*{box-sizing:border-box}:host{padding:var(--dialog-container-padding,5vw 24px);z-index:var(--dialog-z-index,12345678);outline:none}#backdrop,:host{position:fixed;top:0;left:0;bottom:0;right:0}:host,:host([center]) #dialog{overflow-x:var(--dialog-overflow-x,hidden);overflow-y:var(--dialog-overflow-y,auto);overscroll-behavior:contain;-webkit-overflow-scrolling:touch}:host([center]){display:flex;align-items:center;justify-content:center;overflow:hidden}:host([center]) #dialog{max-height:var(--dialog-max-height,100%)}:host(:not(:defined)),:host(:not([open])){display:none}#backdrop{background:var(--dialog-backdrop-bg,rgba(0,0,0,.6));animation:fadeIn var(--dialog-animation-duration,.1s) var(--dialog-animation-easing,ease-out);z-index:-1}#dialog{animation:scaleIn var(--dialog-animation-duration,.1s) var(--dialog-animation-easing,ease-out);border-radius:var(--dialog-border-radius,12px);box-shadow:var(--dialog-box-shadow,0 2px 10px -5px rgba(0,0,0,.6));max-width:var(--dialog-max-width,700px);width:var(--dialog-width,100%);padding:var(--dialog-padding,24px);max-height:var(--dialog-max-height,unset);height:var(--dialog-height,auto);color:var(--dialog-color,currentColor);background:var(--dialog-bg,#fff);z-index:1;position:relative;display:flex;flex-direction:column;margin:0 auto;border:none}::slotted(article),article{flex-grow:1;overflow-y:auto;-webkit-overflow-scrolling:touch}::slotted(footer),::slotted(header),footer,header{flex-shrink:0}@keyframes scaleIn{0%{transform:scale(.9) translateY(30px);opacity:0}to{transform:scale(1) translateY(0);opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}</style>\n  <div id="backdrop" part="backdrop"></div>\n  <focus-trap id="dialog" part="dialog">\n    <slot></slot>\n  </focus-trap>\n';class et extends HTMLElement{constructor(){super(),this.$scrollContainer=document.documentElement,this.$previousActiveElement=null;const e=this.attachShadow({mode:"open"});e.appendChild(Je.content.cloneNode(!0)),this.$dialog=e.querySelector("#dialog"),this.$backdrop=e.querySelector("#backdrop"),this.onBackdropClick=this.onBackdropClick.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.setAttribute("aria-modal","true"),this.$dialog.setAttribute("role","alertdialog")}static get observedAttributes(){return["open","center"]}get open(){return this.hasAttribute("open")}set open(e){e?this.setAttribute("open",""):this.removeAttribute("open")}get center(){return this.hasAttribute("center")}set center(e){e?this.setAttribute("center",""):this.removeAttribute("center")}connectedCallback(){this.$backdrop.addEventListener("click",this.onBackdropClick)}disconnectedCallback(){this.$backdrop.removeEventListener("click",this.onBackdropClick),this.open&&this.didClose()}show(){this.open=!0}close(e){this.result=e,this.open=!1}onBackdropClick(){this.assertClosing()&&this.close()}onKeyDown(e){if("Escape"===e.code)this.assertClosing()&&(this.close(),e.stopImmediatePropagation())}assertClosing(){return this.dispatchEvent(new CustomEvent("closing",{cancelable:!0}))}didOpen(){this.$previousActiveElement=Xe(document.activeElement),requestAnimationFrame((()=>{this.$dialog.focusFirstElement()})),this.tabIndex=0,this.$scrollContainer.style.overflow="hidden",this.addEventListener("keydown",this.onKeyDown,{capture:!0,passive:!0}),Ge(this.$scrollContainer,Ye(this.$scrollContainer)+1),this.dispatchEvent(new CustomEvent("open"))}didClose(){this.removeEventListener("keydown",this.onKeyDown,{capture:!0}),Ge(this.$scrollContainer,Math.max(0,Ye(this.$scrollContainer)-1)),Ye(this.$scrollContainer)<=0&&(this.$scrollContainer.style.overflow=""),this.tabIndex=-1,null!=this.$previousActiveElement&&(this.$previousActiveElement.focus(),this.$previousActiveElement=null),this.dispatchEvent(new CustomEvent("close",{detail:this.result}))}attributeChangedCallback(e,t,n){if("open"===e)this.open?this.didOpen():this.didClose()}}customElements.define("web-dialog",et);const tt=(e,t,n,r)=>{e.dispatchEvent(new CustomEvent(t,{bubbles:r?.bubbles??!0,composed:r?.composed??!0,cancelable:r?.cancelable??!1,detail:n}))};var nt,rt;!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),r={};for(const e of n)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(nt||(nt={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(rt||(rt={}));const at=nt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),it=e=>{switch(typeof e){case"undefined":return at.undefined;case"string":return at.string;case"number":return isNaN(e)?at.nan:at.number;case"boolean":return at.boolean;case"function":return at.function;case"bigint":return at.bigint;case"symbol":return at.symbol;case"object":return Array.isArray(e)?at.array:null===e?at.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?at.promise:"undefined"!=typeof Map&&e instanceof Map?at.map:"undefined"!=typeof Set&&e instanceof Set?at.set:"undefined"!=typeof Date&&e instanceof Date?at.date:at.object;default:return at.unknown}},ot=nt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class st extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(const a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(r);else if("invalid_return_type"===a.code)r(a.returnTypeError);else if("invalid_arguments"===a.code)r(a.argumentsError);else if(0===a.path.length)n._errors.push(t(a));else{let e=n,r=0;for(;r<a.path.length;){const n=a.path[r];r===a.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(a))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}static assert(e){if(!(e instanceof st))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,nt.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},n=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}st.create=e=>new st(e);const ct=(e,t)=>{let n;switch(e.code){case ot.invalid_type:n=e.received===at.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case ot.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,nt.jsonStringifyReplacer)}`;break;case ot.unrecognized_keys:n=`Unrecognized key(s) in object: ${nt.joinValues(e.keys,", ")}`;break;case ot.invalid_union:n="Invalid input";break;case ot.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${nt.joinValues(e.options)}`;break;case ot.invalid_enum_value:n=`Invalid enum value. Expected ${nt.joinValues(e.options)}, received '${e.received}'`;break;case ot.invalid_arguments:n="Invalid function arguments";break;case ot.invalid_return_type:n="Invalid function return type";break;case ot.invalid_date:n="Invalid date";break;case ot.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:nt.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case ot.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case ot.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case ot.custom:n="Invalid input";break;case ot.invalid_intersection_types:n="Intersection results could not be merged";break;case ot.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case ot.not_finite:n="Number must be finite";break;default:n=t.defaultError,nt.assertNever(e)}return{message:n}};let lt=ct;function dt(){return lt}const ut=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],o={...a,path:i};if(void 0!==a.message)return{...a,path:i,message:a.message};let s="";const c=r.filter((e=>!!e)).slice().reverse();for(const e of c)s=e(o,{data:t,defaultError:s}).message;return{...a,path:i,message:s}};function ht(e,t){const n=dt(),r=ut({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===ct?void 0:ct].filter((e=>!!e))});e.common.issues.push(r)}class mt{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if("aborted"===r.status)return pt;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const e of t){const t=await e.key,r=await e.value;n.push({key:t,value:r})}return mt.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:t,value:a}=r;if("aborted"===t.status)return pt;if("aborted"===a.status)return pt;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"===t.value||void 0===a.value&&!r.alwaysSet||(n[t.value]=a.value)}return{status:e.value,value:n}}}const pt=Object.freeze({status:"aborted"}),ft=e=>({status:"dirty",value:e}),gt=e=>({status:"valid",value:e}),vt=e=>"aborted"===e.status,_t=e=>"dirty"===e.status,yt=e=>"valid"===e.status,bt=e=>"undefined"!=typeof Promise&&e instanceof Promise;function wt(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function xt(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n}var kt,Mt,Ct;"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(kt||(kt={}));class St{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Et=(e,t)=>{if(yt(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new st(e.common.issues);return this._error=t,this._error}}};function At(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:a};return{errorMap:(t,a)=>{var i,o;const{message:s}=e;return"invalid_enum_value"===t.code?{message:null!=s?s:a.defaultError}:void 0===a.data?{message:null!==(i=null!=s?s:r)&&void 0!==i?i:a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:null!==(o=null!=s?s:n)&&void 0!==o?o:a.defaultError}},description:a}}class Tt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return it(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:it(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new mt,ctx:{common:e.parent.common,data:e.data,parsedType:it(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(bt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const r={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:it(e)},a=this._parseSync({data:e,path:r.path,parent:r});return Et(r,a)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:it(e)},r=this._parse({data:e,path:n.path,parent:n}),a=await(bt(r)?r:Promise.resolve(r));return Et(n,a)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,r)=>{const a=e(t),i=()=>r.addIssue({code:ot.custom,...n(t)});return"undefined"!=typeof Promise&&a instanceof Promise?a.then((e=>!!e||(i(),!1))):!!a||(i(),!1)}))}refinement(e,t){return this._refinement(((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1)))}_refinement(e){return new Cn({schema:this,typeName:Pn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Sn.create(this,this._def)}nullable(){return En.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return on.create(this,this._def)}promise(){return Mn.create(this,this._def)}or(e){return ln.create([this,e],this._def)}and(e){return mn.create(this,e,this._def)}transform(e){return new Cn({...At(this._def),schema:this,typeName:Pn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new An({...At(this._def),innerType:this,defaultValue:t,typeName:Pn.ZodDefault})}brand(){return new On({typeName:Pn.ZodBranded,type:this,...At(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new Tn({...At(this._def),innerType:this,catchValue:t,typeName:Pn.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Ln.create(this,e)}readonly(){return Dn.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const $t=/^c[^\s-]{8,}$/i,It=/^[0-9a-z]+$/,Ot=/^[0-9A-HJKMNP-TV-Z]{26}$/,Lt=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Dt=/^[a-z0-9_-]{21}$/i,jt=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,zt=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Pt;const Rt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Nt=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Ft=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Bt="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Vt=new RegExp(`^${Bt}$`);function Ht(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function Ut(e){let t=`${Bt}T${Ht(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function qt(e,t){return!("v4"!==t&&t||!Rt.test(e))||!("v6"!==t&&t||!Nt.test(e))}class Wt extends Tt{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==at.string){const t=this._getOrReturnCtx(e);return ht(t,{code:ot.invalid_type,expected:at.string,received:t.parsedType}),pt}const t=new mt;let n;for(const r of this._def.checks)if("min"===r.kind)e.data.length<r.value&&(n=this._getOrReturnCtx(e,n),ht(n,{code:ot.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("max"===r.kind)e.data.length>r.value&&(n=this._getOrReturnCtx(e,n),ht(n,{code:ot.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("length"===r.kind){const a=e.data.length>r.value,i=e.data.length<r.value;(a||i)&&(n=this._getOrReturnCtx(e,n),a?ht(n,{code:ot.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):i&&ht(n,{code:ot.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),t.dirty())}else if("email"===r.kind)zt.test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{validation:"email",code:ot.invalid_string,message:r.message}),t.dirty());else if("emoji"===r.kind)Pt||(Pt=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Pt.test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{validation:"emoji",code:ot.invalid_string,message:r.message}),t.dirty());else if("uuid"===r.kind)Lt.test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{validation:"uuid",code:ot.invalid_string,message:r.message}),t.dirty());else if("nanoid"===r.kind)Dt.test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{validation:"nanoid",code:ot.invalid_string,message:r.message}),t.dirty());else if("cuid"===r.kind)$t.test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{validation:"cuid",code:ot.invalid_string,message:r.message}),t.dirty());else if("cuid2"===r.kind)It.test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{validation:"cuid2",code:ot.invalid_string,message:r.message}),t.dirty());else if("ulid"===r.kind)Ot.test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{validation:"ulid",code:ot.invalid_string,message:r.message}),t.dirty());else if("url"===r.kind)try{new URL(e.data)}catch(a){n=this._getOrReturnCtx(e,n),ht(n,{validation:"url",code:ot.invalid_string,message:r.message}),t.dirty()}else if("regex"===r.kind){r.regex.lastIndex=0;r.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{validation:"regex",code:ot.invalid_string,message:r.message}),t.dirty())}else if("trim"===r.kind)e.data=e.data.trim();else if("includes"===r.kind)e.data.includes(r.value,r.position)||(n=this._getOrReturnCtx(e,n),ht(n,{code:ot.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),t.dirty());else if("toLowerCase"===r.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===r.kind)e.data=e.data.toUpperCase();else if("startsWith"===r.kind)e.data.startsWith(r.value)||(n=this._getOrReturnCtx(e,n),ht(n,{code:ot.invalid_string,validation:{startsWith:r.value},message:r.message}),t.dirty());else if("endsWith"===r.kind)e.data.endsWith(r.value)||(n=this._getOrReturnCtx(e,n),ht(n,{code:ot.invalid_string,validation:{endsWith:r.value},message:r.message}),t.dirty());else if("datetime"===r.kind){Ut(r).test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{code:ot.invalid_string,validation:"datetime",message:r.message}),t.dirty())}else if("date"===r.kind){Vt.test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{code:ot.invalid_string,validation:"date",message:r.message}),t.dirty())}else if("time"===r.kind){new RegExp(`^${Ht(r)}$`).test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{code:ot.invalid_string,validation:"time",message:r.message}),t.dirty())}else"duration"===r.kind?jt.test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{validation:"duration",code:ot.invalid_string,message:r.message}),t.dirty()):"ip"===r.kind?qt(e.data,r.version)||(n=this._getOrReturnCtx(e,n),ht(n,{validation:"ip",code:ot.invalid_string,message:r.message}),t.dirty()):"base64"===r.kind?Ft.test(e.data)||(n=this._getOrReturnCtx(e,n),ht(n,{validation:"base64",code:ot.invalid_string,message:r.message}),t.dirty()):nt.assertNever(r);return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement((t=>e.test(t)),{validation:t,code:ot.invalid_string,...kt.errToObj(n)})}_addCheck(e){return new Wt({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...kt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...kt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...kt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...kt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...kt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...kt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...kt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...kt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...kt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...kt.errToObj(e)})}datetime(e){var t,n;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(n=null==e?void 0:e.local)&&void 0!==n&&n,...kt.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...kt.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...kt.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...kt.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...kt.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...kt.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...kt.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...kt.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...kt.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...kt.errToObj(t)})}nonempty(e){return this.min(1,kt.errToObj(e))}trim(){return new Wt({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Wt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Wt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Zt(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r;return parseInt(e.toFixed(a).replace(".",""))%parseInt(t.toFixed(a).replace(".",""))/Math.pow(10,a)}Wt.create=e=>{var t;return new Wt({checks:[],typeName:Pn.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...At(e)})};class Kt extends Tt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==at.number){const t=this._getOrReturnCtx(e);return ht(t,{code:ot.invalid_type,expected:at.number,received:t.parsedType}),pt}let t;const n=new mt;for(const r of this._def.checks)if("int"===r.kind)nt.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),ht(t,{code:ot.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty());else if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),ht(t,{code:ot.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),ht(t,{code:ot.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else"multipleOf"===r.kind?0!==Zt(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),ht(t,{code:ot.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),ht(t,{code:ot.not_finite,message:r.message}),n.dirty()):nt.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,kt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,kt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,kt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,kt.toString(t))}setLimit(e,t,n,r){return new Kt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:kt.toString(r)}]})}_addCheck(e){return new Kt({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:kt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:kt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:kt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:kt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:kt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:kt.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:kt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:kt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:kt.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&nt.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Kt.create=e=>new Kt({checks:[],typeName:Pn.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...At(e)});class Qt extends Tt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==at.bigint){const t=this._getOrReturnCtx(e);return ht(t,{code:ot.invalid_type,expected:at.bigint,received:t.parsedType}),pt}let t;const n=new mt;for(const r of this._def.checks)if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),ht(t,{code:ot.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),ht(t,{code:ot.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),ht(t,{code:ot.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):nt.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,kt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,kt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,kt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,kt.toString(t))}setLimit(e,t,n,r){return new Qt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:kt.toString(r)}]})}_addCheck(e){return new Qt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:kt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:kt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:kt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:kt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:kt.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Qt.create=e=>{var t;return new Qt({checks:[],typeName:Pn.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...At(e)})};class Yt extends Tt{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==at.boolean){const t=this._getOrReturnCtx(e);return ht(t,{code:ot.invalid_type,expected:at.boolean,received:t.parsedType}),pt}return gt(e.data)}}Yt.create=e=>new Yt({typeName:Pn.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...At(e)});class Gt extends Tt{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==at.date){const t=this._getOrReturnCtx(e);return ht(t,{code:ot.invalid_type,expected:at.date,received:t.parsedType}),pt}if(isNaN(e.data.getTime())){return ht(this._getOrReturnCtx(e),{code:ot.invalid_date}),pt}const t=new mt;let n;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(n=this._getOrReturnCtx(e,n),ht(n,{code:ot.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(n=this._getOrReturnCtx(e,n),ht(n,{code:ot.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):nt.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Gt({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:kt.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:kt.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Gt.create=e=>new Gt({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:Pn.ZodDate,...At(e)});class Xt extends Tt{_parse(e){if(this._getType(e)!==at.symbol){const t=this._getOrReturnCtx(e);return ht(t,{code:ot.invalid_type,expected:at.symbol,received:t.parsedType}),pt}return gt(e.data)}}Xt.create=e=>new Xt({typeName:Pn.ZodSymbol,...At(e)});class Jt extends Tt{_parse(e){if(this._getType(e)!==at.undefined){const t=this._getOrReturnCtx(e);return ht(t,{code:ot.invalid_type,expected:at.undefined,received:t.parsedType}),pt}return gt(e.data)}}Jt.create=e=>new Jt({typeName:Pn.ZodUndefined,...At(e)});class en extends Tt{_parse(e){if(this._getType(e)!==at.null){const t=this._getOrReturnCtx(e);return ht(t,{code:ot.invalid_type,expected:at.null,received:t.parsedType}),pt}return gt(e.data)}}en.create=e=>new en({typeName:Pn.ZodNull,...At(e)});class tn extends Tt{constructor(){super(...arguments),this._any=!0}_parse(e){return gt(e.data)}}tn.create=e=>new tn({typeName:Pn.ZodAny,...At(e)});class nn extends Tt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return gt(e.data)}}nn.create=e=>new nn({typeName:Pn.ZodUnknown,...At(e)});class rn extends Tt{_parse(e){const t=this._getOrReturnCtx(e);return ht(t,{code:ot.invalid_type,expected:at.never,received:t.parsedType}),pt}}rn.create=e=>new rn({typeName:Pn.ZodNever,...At(e)});class an extends Tt{_parse(e){if(this._getType(e)!==at.undefined){const t=this._getOrReturnCtx(e);return ht(t,{code:ot.invalid_type,expected:at.void,received:t.parsedType}),pt}return gt(e.data)}}an.create=e=>new an({typeName:Pn.ZodVoid,...At(e)});class on extends Tt{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==at.array)return ht(t,{code:ot.invalid_type,expected:at.array,received:t.parsedType}),pt;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,a=t.data.length<r.exactLength.value;(e||a)&&(ht(t,{code:e?ot.too_big:ot.too_small,minimum:a?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(ht(t,{code:ot.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(ht(t,{code:ot.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>r.type._parseAsync(new St(t,e,t.path,n))))).then((e=>mt.mergeArray(n,e)));const a=[...t.data].map(((e,n)=>r.type._parseSync(new St(t,e,t.path,n))));return mt.mergeArray(n,a)}get element(){return this._def.type}min(e,t){return new on({...this._def,minLength:{value:e,message:kt.toString(t)}})}max(e,t){return new on({...this._def,maxLength:{value:e,message:kt.toString(t)}})}length(e,t){return new on({...this._def,exactLength:{value:e,message:kt.toString(t)}})}nonempty(e){return this.min(1,e)}}function sn(e){if(e instanceof cn){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Sn.create(sn(r))}return new cn({...e._def,shape:()=>t})}return e instanceof on?new on({...e._def,type:sn(e.element)}):e instanceof Sn?Sn.create(sn(e.unwrap())):e instanceof En?En.create(sn(e.unwrap())):e instanceof pn?pn.create(e.items.map((e=>sn(e)))):e}on.create=(e,t)=>new on({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Pn.ZodArray,...At(t)});class cn extends Tt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=nt.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==at.object){const t=this._getOrReturnCtx(e);return ht(t,{code:ot.invalid_type,expected:at.object,received:t.parsedType}),pt}const{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:a}=this._getCached(),i=[];if(!(this._def.catchall instanceof rn&&"strip"===this._def.unknownKeys))for(const e in n.data)a.includes(e)||i.push(e);const o=[];for(const e of a){const t=r[e],a=n.data[e];o.push({key:{status:"valid",value:e},value:t._parse(new St(n,a,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof rn){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of i)o.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)i.length>0&&(ht(n,{code:ot.unrecognized_keys,keys:i}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of i){const r=n.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new St(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of o){const n=await t.key,r=await t.value;e.push({key:n,value:r,alwaysSet:t.alwaysSet})}return e})).then((e=>mt.mergeObjectSync(t,e))):mt.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return kt.errToObj,new cn({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var r,a,i,o;const s=null!==(i=null===(a=(r=this._def).errorMap)||void 0===a?void 0:a.call(r,t,n).message)&&void 0!==i?i:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(o=kt.errToObj(e).message)&&void 0!==o?o:s}:{message:s}}}:{}})}strip(){return new cn({...this._def,unknownKeys:"strip"})}passthrough(){return new cn({...this._def,unknownKeys:"passthrough"})}extend(e){return new cn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new cn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Pn.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new cn({...this._def,catchall:e})}pick(e){const t={};return nt.objectKeys(e).forEach((n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])})),new cn({...this._def,shape:()=>t})}omit(e){const t={};return nt.objectKeys(this.shape).forEach((n=>{e[n]||(t[n]=this.shape[n])})),new cn({...this._def,shape:()=>t})}deepPartial(){return sn(this)}partial(e){const t={};return nt.objectKeys(this.shape).forEach((n=>{const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()})),new cn({...this._def,shape:()=>t})}required(e){const t={};return nt.objectKeys(this.shape).forEach((n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof Sn;)e=e._def.innerType;t[n]=e}})),new cn({...this._def,shape:()=>t})}keyof(){return wn(nt.objectKeys(this.shape))}}cn.create=(e,t)=>new cn({shape:()=>e,unknownKeys:"strip",catchall:rn.create(),typeName:Pn.ZodObject,...At(t)}),cn.strictCreate=(e,t)=>new cn({shape:()=>e,unknownKeys:"strict",catchall:rn.create(),typeName:Pn.ZodObject,...At(t)}),cn.lazycreate=(e,t)=>new cn({shape:e,unknownKeys:"strip",catchall:rn.create(),typeName:Pn.ZodObject,...At(t)});class ln extends Tt{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const n=e.map((e=>new st(e.ctx.common.issues)));return ht(t,{code:ot.invalid_union,unionErrors:n}),pt}));{let e;const r=[];for(const a of n){const n={...t,common:{...t.common,issues:[]},parent:null},i=a._parseSync({data:t.data,path:t.path,parent:n});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const a=r.map((e=>new st(e)));return ht(t,{code:ot.invalid_union,unionErrors:a}),pt}}get options(){return this._def.options}}ln.create=(e,t)=>new ln({options:e,typeName:Pn.ZodUnion,...At(t)});const dn=e=>e instanceof yn?dn(e.schema):e instanceof Cn?dn(e.innerType()):e instanceof bn?[e.value]:e instanceof xn?e.options:e instanceof kn?nt.objectValues(e.enum):e instanceof An?dn(e._def.innerType):e instanceof Jt?[void 0]:e instanceof en?[null]:e instanceof Sn?[void 0,...dn(e.unwrap())]:e instanceof En?[null,...dn(e.unwrap())]:e instanceof On||e instanceof Dn?dn(e.unwrap()):e instanceof Tn?dn(e._def.innerType):[];class un extends Tt{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==at.object)return ht(t,{code:ot.invalid_type,expected:at.object,received:t.parsedType}),pt;const n=this.discriminator,r=t.data[n],a=this.optionsMap.get(r);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(ht(t,{code:ot.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),pt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const r=new Map;for(const n of t){const t=dn(n.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of t){if(r.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);r.set(a,n)}}return new un({typeName:Pn.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...At(n)})}}function hn(e,t){const n=it(e),r=it(t);if(e===t)return{valid:!0,data:e};if(n===at.object&&r===at.object){const n=nt.objectKeys(t),r=nt.objectKeys(e).filter((e=>-1!==n.indexOf(e))),a={...e,...t};for(const n of r){const r=hn(e[n],t[n]);if(!r.valid)return{valid:!1};a[n]=r.data}return{valid:!0,data:a}}if(n===at.array&&r===at.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let r=0;r<e.length;r++){const a=hn(e[r],t[r]);if(!a.valid)return{valid:!1};n.push(a.data)}return{valid:!0,data:n}}return n===at.date&&r===at.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class mn extends Tt{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(vt(e)||vt(r))return pt;const a=hn(e.value,r.value);return a.valid?((_t(e)||_t(r))&&t.dirty(),{status:t.value,value:a.data}):(ht(n,{code:ot.invalid_intersection_types}),pt)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([e,t])=>r(e,t))):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}mn.create=(e,t,n)=>new mn({left:e,right:t,typeName:Pn.ZodIntersection,...At(n)});class pn extends Tt{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==at.array)return ht(n,{code:ot.invalid_type,expected:at.array,received:n.parsedType}),pt;if(n.data.length<this._def.items.length)return ht(n,{code:ot.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),pt;!this._def.rest&&n.data.length>this._def.items.length&&(ht(n,{code:ot.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map(((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new St(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(r).then((e=>mt.mergeArray(t,e))):mt.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new pn({...this._def,rest:e})}}pn.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new pn({items:e,typeName:Pn.ZodTuple,rest:null,...At(t)})};class fn extends Tt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==at.object)return ht(n,{code:ot.invalid_type,expected:at.object,received:n.parsedType}),pt;const r=[],a=this._def.keyType,i=this._def.valueType;for(const e in n.data)r.push({key:a._parse(new St(n,e,n.path,e)),value:i._parse(new St(n,n.data[e],n.path,e)),alwaysSet:e in n.data});return n.common.async?mt.mergeObjectAsync(t,r):mt.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return new fn(t instanceof Tt?{keyType:e,valueType:t,typeName:Pn.ZodRecord,...At(n)}:{keyType:Wt.create(),valueType:e,typeName:Pn.ZodRecord,...At(t)})}}class gn extends Tt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==at.map)return ht(n,{code:ot.invalid_type,expected:at.map,received:n.parsedType}),pt;const r=this._def.keyType,a=this._def.valueType,i=[...n.data.entries()].map((([e,t],i)=>({key:r._parse(new St(n,e,n.path,[i,"key"])),value:a._parse(new St(n,t,n.path,[i,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of i){const r=await n.key,a=await n.value;if("aborted"===r.status||"aborted"===a.status)return pt;"dirty"!==r.status&&"dirty"!==a.status||t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of i){const r=n.key,a=n.value;if("aborted"===r.status||"aborted"===a.status)return pt;"dirty"!==r.status&&"dirty"!==a.status||t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}}}}gn.create=(e,t,n)=>new gn({valueType:t,keyType:e,typeName:Pn.ZodMap,...At(n)});class vn extends Tt{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==at.set)return ht(n,{code:ot.invalid_type,expected:at.set,received:n.parsedType}),pt;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(ht(n,{code:ot.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(ht(n,{code:ot.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const a=this._def.valueType;function i(e){const n=new Set;for(const r of e){if("aborted"===r.status)return pt;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}const o=[...n.data.values()].map(((e,t)=>a._parse(new St(n,e,n.path,t))));return n.common.async?Promise.all(o).then((e=>i(e))):i(o)}min(e,t){return new vn({...this._def,minSize:{value:e,message:kt.toString(t)}})}max(e,t){return new vn({...this._def,maxSize:{value:e,message:kt.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}vn.create=(e,t)=>new vn({valueType:e,minSize:null,maxSize:null,typeName:Pn.ZodSet,...At(t)});class _n extends Tt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==at.function)return ht(t,{code:ot.invalid_type,expected:at.function,received:t.parsedType}),pt;function n(e,n){return ut({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,dt(),ct].filter((e=>!!e)),issueData:{code:ot.invalid_arguments,argumentsError:n}})}function r(e,n){return ut({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,dt(),ct].filter((e=>!!e)),issueData:{code:ot.invalid_return_type,returnTypeError:n}})}const a={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof Mn){const e=this;return gt((async function(...t){const o=new st([]),s=await e._def.args.parseAsync(t,a).catch((e=>{throw o.addIssue(n(t,e)),o})),c=await Reflect.apply(i,this,s),l=await e._def.returns._def.type.parseAsync(c,a).catch((e=>{throw o.addIssue(r(c,e)),o}));return l}))}{const e=this;return gt((function(...t){const o=e._def.args.safeParse(t,a);if(!o.success)throw new st([n(t,o.error)]);const s=Reflect.apply(i,this,o.data),c=e._def.returns.safeParse(s,a);if(!c.success)throw new st([r(s,c.error)]);return c.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new _n({...this._def,args:pn.create(e).rest(nn.create())})}returns(e){return new _n({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new _n({args:e||pn.create([]).rest(nn.create()),returns:t||nn.create(),typeName:Pn.ZodFunction,...At(n)})}}class yn extends Tt{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}yn.create=(e,t)=>new yn({getter:e,typeName:Pn.ZodLazy,...At(t)});class bn extends Tt{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return ht(t,{received:t.data,code:ot.invalid_literal,expected:this._def.value}),pt}return{status:"valid",value:e.data}}get value(){return this._def.value}}function wn(e,t){return new xn({values:e,typeName:Pn.ZodEnum,...At(t)})}bn.create=(e,t)=>new bn({value:e,typeName:Pn.ZodLiteral,...At(t)});class xn extends Tt{constructor(){super(...arguments),Mt.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return ht(t,{expected:nt.joinValues(n),received:t.parsedType,code:ot.invalid_type}),pt}if(wt(this,Mt,"f")||xt(this,Mt,new Set(this._def.values),"f"),!wt(this,Mt,"f").has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return ht(t,{received:t.data,code:ot.invalid_enum_value,options:n}),pt}return gt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return xn.create(e,{...this._def,...t})}exclude(e,t=this._def){return xn.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}Mt=new WeakMap,xn.create=wn;class kn extends Tt{constructor(){super(...arguments),Ct.set(this,void 0)}_parse(e){const t=nt.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==at.string&&n.parsedType!==at.number){const e=nt.objectValues(t);return ht(n,{expected:nt.joinValues(e),received:n.parsedType,code:ot.invalid_type}),pt}if(wt(this,Ct,"f")||xt(this,Ct,new Set(nt.getValidEnumValues(this._def.values)),"f"),!wt(this,Ct,"f").has(e.data)){const e=nt.objectValues(t);return ht(n,{received:n.data,code:ot.invalid_enum_value,options:e}),pt}return gt(e.data)}get enum(){return this._def.values}}Ct=new WeakMap,kn.create=(e,t)=>new kn({values:e,typeName:Pn.ZodNativeEnum,...At(t)});class Mn extends Tt{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==at.promise&&!1===t.common.async)return ht(t,{code:ot.invalid_type,expected:at.promise,received:t.parsedType}),pt;const n=t.parsedType===at.promise?t.data:Promise.resolve(t.data);return gt(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}Mn.create=(e,t)=>new Mn({type:e,typeName:Pn.ZodPromise,...At(t)});class Cn extends Tt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Pn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,a={addIssue:e=>{ht(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===r.type){const e=r.transform(n.data,a);if(n.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return pt;const r=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===r.status?pt:"dirty"===r.status||"dirty"===t.value?ft(r.value):r}));{if("aborted"===t.value)return pt;const r=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===r.status?pt:"dirty"===r.status||"dirty"===t.value?ft(r.value):r}}if("refinement"===r.type){const e=e=>{const t=r.refinement(e,a);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?pt:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?pt:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===r.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!yt(e))return e;const i=r.transform(e.value,a);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>yt(e)?Promise.resolve(r.transform(e.value,a)).then((e=>({status:t.value,value:e}))):e))}nt.assertNever(r)}}Cn.create=(e,t,n)=>new Cn({schema:e,typeName:Pn.ZodEffects,effect:t,...At(n)}),Cn.createWithPreprocess=(e,t,n)=>new Cn({schema:t,effect:{type:"preprocess",transform:e},typeName:Pn.ZodEffects,...At(n)});class Sn extends Tt{_parse(e){return this._getType(e)===at.undefined?gt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Sn.create=(e,t)=>new Sn({innerType:e,typeName:Pn.ZodOptional,...At(t)});class En extends Tt{_parse(e){return this._getType(e)===at.null?gt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}En.create=(e,t)=>new En({innerType:e,typeName:Pn.ZodNullable,...At(t)});class An extends Tt{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===at.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}An.create=(e,t)=>new An({innerType:e,typeName:Pn.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...At(t)});class Tn extends Tt{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return bt(r)?r.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new st(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new st(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Tn.create=(e,t)=>new Tn({innerType:e,typeName:Pn.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...At(t)});class $n extends Tt{_parse(e){if(this._getType(e)!==at.nan){const t=this._getOrReturnCtx(e);return ht(t,{code:ot.invalid_type,expected:at.nan,received:t.parsedType}),pt}return{status:"valid",value:e.data}}}$n.create=e=>new $n({typeName:Pn.ZodNaN,...At(e)});const In=Symbol("zod_brand");class On extends Tt{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Ln extends Tt{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?pt:"dirty"===e.status?(t.dirty(),ft(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?pt:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new Ln({in:e,out:t,typeName:Pn.ZodPipeline})}}class Dn extends Tt{_parse(e){const t=this._def.innerType._parse(e),n=e=>(yt(e)&&(e.value=Object.freeze(e.value)),e);return bt(t)?t.then((e=>n(e))):n(t)}unwrap(){return this._def.innerType}}function jn(e,t={},n){return e?tn.create().superRefine(((r,a)=>{var i,o;if(!e(r)){const e="function"==typeof t?t(r):"string"==typeof t?{message:t}:t,s=null===(o=null!==(i=e.fatal)&&void 0!==i?i:n)||void 0===o||o,c="string"==typeof e?{message:e}:e;a.addIssue({code:"custom",...c,fatal:s})}})):tn.create()}Dn.create=(e,t)=>new Dn({innerType:e,typeName:Pn.ZodReadonly,...At(t)});const zn={object:cn.lazycreate};var Pn;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Pn||(Pn={}));const Rn=Wt.create,Nn=Kt.create,Fn=$n.create,Bn=Qt.create,Vn=Yt.create,Hn=Gt.create,Un=Xt.create,qn=Jt.create,Wn=en.create,Zn=tn.create,Kn=nn.create,Qn=rn.create,Yn=an.create,Gn=on.create,Xn=cn.create,Jn=cn.strictCreate,er=ln.create,tr=un.create,nr=mn.create,rr=pn.create,ar=fn.create,ir=gn.create,or=vn.create,sr=_n.create,cr=yn.create,lr=bn.create,dr=xn.create,ur=kn.create,hr=Mn.create,mr=Cn.create,pr=Sn.create,fr=En.create,gr=Cn.createWithPreprocess,vr=Ln.create,_r={string:e=>Wt.create({...e,coerce:!0}),number:e=>Kt.create({...e,coerce:!0}),boolean:e=>Yt.create({...e,coerce:!0}),bigint:e=>Qt.create({...e,coerce:!0}),date:e=>Gt.create({...e,coerce:!0})},yr=pt;var br=Object.freeze({__proto__:null,defaultErrorMap:ct,setErrorMap:function(e){lt=e},getErrorMap:dt,makeIssue:ut,EMPTY_PATH:[],addIssueToContext:ht,ParseStatus:mt,INVALID:pt,DIRTY:ft,OK:gt,isAborted:vt,isDirty:_t,isValid:yt,isAsync:bt,get util(){return nt},get objectUtil(){return rt},ZodParsedType:at,getParsedType:it,ZodType:Tt,datetimeRegex:Ut,ZodString:Wt,ZodNumber:Kt,ZodBigInt:Qt,ZodBoolean:Yt,ZodDate:Gt,ZodSymbol:Xt,ZodUndefined:Jt,ZodNull:en,ZodAny:tn,ZodUnknown:nn,ZodNever:rn,ZodVoid:an,ZodArray:on,ZodObject:cn,ZodUnion:ln,ZodDiscriminatedUnion:un,ZodIntersection:mn,ZodTuple:pn,ZodRecord:fn,ZodMap:gn,ZodSet:vn,ZodFunction:_n,ZodLazy:yn,ZodLiteral:bn,ZodEnum:xn,ZodNativeEnum:kn,ZodPromise:Mn,ZodEffects:Cn,ZodTransformer:Cn,ZodOptional:Sn,ZodNullable:En,ZodDefault:An,ZodCatch:Tn,ZodNaN:$n,BRAND:In,ZodBranded:On,ZodPipeline:Ln,ZodReadonly:Dn,custom:jn,Schema:Tt,ZodSchema:Tt,late:zn,get ZodFirstPartyTypeKind(){return Pn},coerce:_r,any:Zn,array:Gn,bigint:Bn,boolean:Vn,date:Hn,discriminatedUnion:tr,effect:mr,enum:dr,function:sr,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>jn((t=>t instanceof e),t),intersection:nr,lazy:cr,literal:lr,map:ir,nan:Fn,nativeEnum:ur,never:Qn,null:Wn,nullable:fr,number:Nn,object:Xn,oboolean:()=>Vn().optional(),onumber:()=>Nn().optional(),optional:pr,ostring:()=>Rn().optional(),pipeline:vr,preprocess:gr,promise:hr,record:ar,set:or,strictObject:Jn,string:Rn,symbol:Un,transformer:mr,tuple:rr,undefined:qn,union:er,unknown:Kn,void:Yn,NEVER:yr,ZodIssueCode:ot,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:st});const wr=/^[-\w]+$/,xr=100,kr=100,Mr=20,Cr="live",Sr=["diagnostics","live","clip","clips","folder","folders","snapshot","snapshots","recording","recordings","image","timeline"],Er=br.object({confirmation:br.boolean().or(br.object({text:br.string().optional(),exemptions:br.object({user:br.string()}).array().optional()})).optional(),card_id:br.string().regex(wr,"card_id parameter can only contain [a-z][A-Z][0-9_]-").optional()}),Ar=Er.extend({action:br.literal("fire-dom-event").or(br.literal("custom:advanced-camera-card-action").transform((()=>"fire-dom-event")))}),Tr="__INTERNAL_CALLBACK_ACTION__",$r=Ar.extend({advanced_camera_card_action:br.literal(Tr),callback:br.function().args(br.any()).returns(br.promise(br.void()))});function Ir(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function Or(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Lr(e,t){const n=Ir(e);return isNaN(t)?Or(e,NaN):t?(n.setDate(n.getDate()+t),n):n}function Dr(e,t){const n=Ir(e);if(isNaN(t))return Or(e,NaN);if(!t)return n;const r=n.getDate(),a=Or(e,n.getTime());a.setMonth(n.getMonth()+t+1,0);return r>=a.getDate()?a:(n.setFullYear(a.getFullYear(),a.getMonth(),r),n)}function jr(e,t){const{years:n=0,months:r=0,weeks:a=0,days:i=0,hours:o=0,minutes:s=0,seconds:c=0}=t,l=Ir(e),d=r||n?Dr(l,r+12*n):l,u=1e3*(c+60*(s+60*o));return Or(e,(i||a?Lr(d,i+7*a):d).getTime()+u)}const zr=6048e5,Pr=864e5,Rr=6e4,Nr=36e5;let Fr={};function Br(){return Fr}function Vr(e,t){const n=Br(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=Ir(e),i=a.getDay(),o=(i<r?7:0)+i-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Hr(e){return Vr(e,{weekStartsOn:1})}function Ur(e){const t=Ir(e),n=t.getFullYear(),r=Or(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const a=Hr(r),i=Or(e,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=Hr(i);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function qr(e){const t=Ir(e);return t.setHours(0,0,0,0),t}function Wr(e){const t=Ir(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Zr(e){if(!(t=e,t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)||"number"==typeof e))return!1;var t;const n=Ir(e);return!isNaN(Number(n))}function Kr(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return 0===n?0:n}}function Qr(e,t){return+Ir(e)-+Ir(t)}function Yr(e,t,n){const r=Qr(e,t)/1e3;return Kr(n?.roundingMethod)(r)}const Gr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Xr(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Jr={date:Xr({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Xr({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Xr({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ea={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function ta(e){return(t,n)=>{let r;if("formatting"===(n?.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,a=n?.width?String(n.width):t;r=e.formattingValues[a]||e.formattingValues[t]}else{const t=e.defaultWidth,a=n?.width?String(n.width):e.defaultWidth;r=e.values[a]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function na(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(s)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(s,(e=>e.test(o))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(s,(e=>e.test(o)));let l;l=e.valueCallback?e.valueCallback(c):c,l=n.valueCallback?n.valueCallback(l):l;return{value:l,rest:t.slice(o.length)}}}var ra;const aa={code:"en-US",formatDistance:(e,t,n)=>{let r;const a=Gr[e];return r="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:Jr,formatRelative:(e,t,n,r)=>ea[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:ta({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:ta({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:ta({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:ta({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:ta({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(ra={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const n=e.match(ra.matchPattern);if(!n)return null;const r=n[0],a=e.match(ra.parsePattern);if(!a)return null;let i=ra.valueCallback?ra.valueCallback(a[0]):a[0];return i=t.valueCallback?t.valueCallback(i):i,{value:i,rest:e.slice(r.length)}}),era:na({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:na({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:na({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:na({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:na({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function ia(e){const t=Ir(e),n=function(e,t){const n=qr(e),r=qr(t),a=+n-Wr(n),i=+r-Wr(r);return Math.round((a-i)/Pr)}(t,function(e){const t=Ir(e),n=Or(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}(t));return n+1}function oa(e){const t=Ir(e),n=+Hr(t)-+function(e){const t=Ur(e),n=Or(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Hr(n)}(t);return Math.round(n/zr)+1}function sa(e,t){const n=Ir(e),r=n.getFullYear(),a=Br(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,o=Or(e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const s=Vr(o,t),c=Or(e,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const l=Vr(c,t);return n.getTime()>=s.getTime()?r+1:n.getTime()>=l.getTime()?r:r-1}function ca(e,t){const n=Ir(e),r=+Vr(n,t)-+function(e,t){const n=Br(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,a=sa(e,t),i=Or(e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),Vr(i,t)}(n,t);return Math.round(r/zr)+1}function la(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const da={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return la("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):la(n+1,2)},d:(e,t)=>la(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>la(e.getHours()%12||12,t.length),H:(e,t)=>la(e.getHours(),t.length),m:(e,t)=>la(e.getMinutes(),t.length),s:(e,t)=>la(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return la(Math.trunc(r*Math.pow(10,n-3)),t.length)}},ua="midnight",ha="noon",ma="morning",pa="afternoon",fa="evening",ga="night",va={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return da.y(e,t)},Y:function(e,t,n,r){const a=sa(e,r),i=a>0?a:1-a;if("YY"===t){return la(i%100,2)}return"Yo"===t?n.ordinalNumber(i,{unit:"year"}):la(i,t.length)},R:function(e,t){return la(Ur(e),t.length)},u:function(e,t){return la(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return la(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return la(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return da.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return la(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=ca(e,r);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):la(a,t.length)},I:function(e,t,n){const r=oa(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):la(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):da.d(e,t)},D:function(e,t,n){const r=ia(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):la(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return la(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return la(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=0===r?7:r;switch(t){case"i":return String(a);case"ii":return la(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(a=12===r?ha:0===r?ua:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(a=r>=17?fa:r>=12?pa:r>=4?ma:ga,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return da.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):da.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):la(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):la(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):da.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):da.s(e,t)},S:function(e,t){return da.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return ya(r);case"XXXX":case"XX":return ba(r);default:return ba(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return ya(r);case"xxxx":case"xx":return ba(r);default:return ba(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+_a(r,":");default:return"GMT"+ba(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+_a(r,":");default:return"GMT"+ba(r,":")}},t:function(e,t,n){return la(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,n){return la(e.getTime(),t.length)}};function _a(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return 0===i?n+String(a):n+String(a)+t+la(i,2)}function ya(e,t){if(e%60==0){return(e>0?"-":"+")+la(Math.abs(e)/60,2)}return ba(e,t)}function ba(e,t=""){const n=e>0?"-":"+",r=Math.abs(e);return n+la(Math.trunc(r/60),2)+t+la(r%60,2)}const wa=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},xa=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},ka={p:xa,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return wa(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;default:i=t.dateTime({width:"full"})}return i.replace("{{date}}",wa(r,t)).replace("{{time}}",xa(a,t))}},Ma=/^D+$/,Ca=/^Y+$/,Sa=["D","DD","YY","YYYY"];function Ea(e){return Ma.test(e)}function Aa(e){return Ca.test(e)}function Ta(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(console.warn(r),Sa.includes(e))throw new RangeError(r)}const $a=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ia=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Oa=/^'([^]*?)'?$/,La=/''/g,Da=/[a-zA-Z]/;function ja(e,t,n){const r=Br(),a=n?.locale??r.locale??aa,i=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=Ir(e);if(!Zr(s))throw new RangeError("Invalid time value");let c=t.match(Ia).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,ka[t])(e,a.formatLong)}return e})).join("").match($a).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:za(e)};if(va[t])return{isToken:!0,value:e};if(t.match(Da))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));a.localize.preprocessor&&(c=a.localize.preprocessor(s,c));const l={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map((r=>{if(!r.isToken)return r.value;const i=r.value;(!n?.useAdditionalWeekYearTokens&&Aa(i)||!n?.useAdditionalDayOfYearTokens&&Ea(i))&&Ta(i,t,String(e));return(0,va[i[0]])(s,i,a.localize,l)})).join("")}function za(e){const t=e.match(Oa);return t?t[1].replace(La,"'"):e}class Pa{subPriority=0;validate(e,t){return!0}}class Ra extends Pa{constructor(e,t,n,r,a){super(),this.value=e,this.validateValue=t,this.setValue=n,this.priority=r,a&&(this.subPriority=a)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,n){return this.setValue(e,t,this.value,n)}}class Na extends Pa{priority=10;subPriority=-1;set(e,t){return t.timestampIsSet?e:Or(e,function(e,t){const n=t instanceof Date?Or(t,0):new t(0);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n}(e,Date))}}class Fa{run(e,t,n,r){const a=this.parse(e,t,n,r);return a?{setter:new Ra(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,t,n){return!0}}const Ba=/^(1[0-2]|0?\d)/,Va=/^(3[0-1]|[0-2]?\d)/,Ha=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,Ua=/^(5[0-3]|[0-4]?\d)/,qa=/^(2[0-3]|[0-1]?\d)/,Wa=/^(2[0-4]|[0-1]?\d)/,Za=/^(1[0-1]|0?\d)/,Ka=/^(1[0-2]|0?\d)/,Qa=/^[0-5]?\d/,Ya=/^[0-5]?\d/,Ga=/^\d/,Xa=/^\d{1,2}/,Ja=/^\d{1,3}/,ei=/^\d{1,4}/,ti=/^-?\d+/,ni=/^-?\d/,ri=/^-?\d{1,2}/,ai=/^-?\d{1,3}/,ii=/^-?\d{1,4}/,oi=/^([+-])(\d{2})(\d{2})?|Z/,si=/^([+-])(\d{2})(\d{2})|Z/,ci=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,li=/^([+-])(\d{2}):(\d{2})|Z/,di=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function ui(e,t){return e?{value:t(e.value),rest:e.rest}:e}function hi(e,t){const n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function mi(e,t){const n=t.match(e);if(!n)return null;if("Z"===n[0])return{value:0,rest:t.slice(1)};const r="+"===n[1]?1:-1,a=n[2]?parseInt(n[2],10):0,i=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(a*Nr+i*Rr+1e3*o),rest:t.slice(n[0].length)}}function pi(e){return hi(ti,e)}function fi(e,t){switch(e){case 1:return hi(Ga,t);case 2:return hi(Xa,t);case 3:return hi(Ja,t);case 4:return hi(ei,t);default:return hi(new RegExp("^\\d{1,"+e+"}"),t)}}function gi(e,t){switch(e){case 1:return hi(ni,t);case 2:return hi(ri,t);case 3:return hi(ai,t);case 4:return hi(ii,t);default:return hi(new RegExp("^-?\\d{1,"+e+"}"),t)}}function vi(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function _i(e,t){const n=t>0,r=n?t:1-t;let a;if(r<=50)a=e||100;else{const t=r+50;a=e+100*Math.trunc(t/100)-(e>=t%100?100:0)}return n?a:1-a}function yi(e){return e%400==0||e%4==0&&e%100!=0}const bi=[31,28,31,30,31,30,31,31,30,31,30,31],wi=[31,29,31,30,31,30,31,31,30,31,30,31];function xi(e,t,n){const r=Br(),a=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,i=Ir(e),o=i.getDay(),s=7-a;return Lr(i,t<0||t>6?t-(o+s)%7:((t%7+7)%7+s)%7-(o+s)%7)}function ki(e,t){const n=Ir(e),r=function(e){let t=Ir(e).getDay();return 0===t&&(t=7),t}(n);return Lr(n,t-r)}const Mi={G:new class extends Fa{priority=140;parse(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}set(e,t,n){return t.era=n,e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]},y:new class extends Fa{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,n){const r=e=>({year:e,isTwoDigitYear:"yy"===t});switch(t){case"y":return ui(fi(4,e),r);case"yo":return ui(n.ordinalNumber(e,{unit:"year"}),r);default:return ui(fi(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n){const r=e.getFullYear();if(n.isTwoDigitYear){const t=_i(n.year,r);return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}const a="era"in t&&1!==t.era?1-n.year:n.year;return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}},Y:new class extends Fa{priority=130;parse(e,t,n){const r=e=>({year:e,isTwoDigitYear:"YY"===t});switch(t){case"Y":return ui(fi(4,e),r);case"Yo":return ui(n.ordinalNumber(e,{unit:"year"}),r);default:return ui(fi(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,n,r){const a=sa(e,r);if(n.isTwoDigitYear){const t=_i(n.year,a);return e.setFullYear(t,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),Vr(e,r)}const i="era"in t&&1!==t.era?1-n.year:n.year;return e.setFullYear(i,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),Vr(e,r)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:new class extends Fa{priority=130;parse(e,t){return gi("R"===t?4:t.length,e)}set(e,t,n){const r=Or(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Hr(r)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:new class extends Fa{priority=130;parse(e,t){return gi("u"===t?4:t.length,e)}set(e,t,n){return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]},Q:new class extends Fa{priority=120;parse(e,t,n){switch(t){case"Q":case"QQ":return fi(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth(3*(n-1),1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:new class extends Fa{priority=120;parse(e,t,n){switch(t){case"q":case"qq":return fi(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,n){return e.setMonth(3*(n-1),1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:new class extends Fa{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,n){const r=e=>e-1;switch(t){case"M":return ui(hi(Ba,e),r);case"MM":return ui(fi(2,e),r);case"Mo":return ui(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}},L:new class extends Fa{priority=110;parse(e,t,n){const r=e=>e-1;switch(t){case"L":return ui(hi(Ba,e),r);case"LL":return ui(fi(2,e),r);case"Lo":return ui(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:new class extends Fa{priority=100;parse(e,t,n){switch(t){case"w":return hi(Ua,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return fi(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n,r){return Vr(function(e,t,n){const r=Ir(e),a=ca(r,n)-t;return r.setDate(r.getDate()-7*a),r}(e,n,r),r)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:new class extends Fa{priority=100;parse(e,t,n){switch(t){case"I":return hi(Ua,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return fi(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,n){return Hr(function(e,t){const n=Ir(e),r=oa(n)-t;return n.setDate(n.getDate()-7*r),n}(e,n))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:new class extends Fa{priority=90;subPriority=1;parse(e,t,n){switch(t){case"d":return hi(Va,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return fi(t.length,e)}}validate(e,t){const n=yi(e.getFullYear()),r=e.getMonth();return n?t>=1&&t<=wi[r]:t>=1&&t<=bi[r]}set(e,t,n){return e.setDate(n),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:new class extends Fa{priority=90;subpriority=1;parse(e,t,n){switch(t){case"D":case"DD":return hi(Ha,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return fi(t.length,e)}}validate(e,t){return yi(e.getFullYear())?t>=1&&t<=366:t>=1&&t<=365}set(e,t,n){return e.setMonth(0,n),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:new class extends Fa{priority=90;parse(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=xi(e,n,r)).setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]},e:new class extends Fa{priority=90;parse(e,t,n,r){const a=e=>{const t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return ui(fi(t.length,e),a);case"eo":return ui(n.ordinalNumber(e,{unit:"day"}),a);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=xi(e,n,r)).setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:new class extends Fa{priority=90;parse(e,t,n,r){const a=e=>{const t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return ui(fi(t.length,e),a);case"co":return ui(n.ordinalNumber(e,{unit:"day"}),a);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,n,r){return(e=xi(e,n,r)).setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:new class extends Fa{priority=90;parse(e,t,n){const r=e=>0===e?7:e;switch(t){case"i":case"ii":return fi(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return ui(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return ui(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return ui(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);default:return ui(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}validate(e,t){return t>=1&&t<=7}set(e,t,n){return(e=ki(e,n)).setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:new class extends Fa{priority=80;parse(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(vi(n),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]},b:new class extends Fa{priority=80;parse(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(vi(n),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]},B:new class extends Fa{priority=80;parse(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,n){return e.setHours(vi(n),0,0,0),e}incompatibleTokens=["a","b","t","T"]},h:new class extends Fa{priority=70;parse(e,t,n){switch(t){case"h":return hi(Ka,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return fi(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,n){const r=e.getHours()>=12;return r&&n<12?e.setHours(n+12,0,0,0):r||12!==n?e.setHours(n,0,0,0):e.setHours(0,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]},H:new class extends Fa{priority=70;parse(e,t,n){switch(t){case"H":return hi(qa,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return fi(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,n){return e.setHours(n,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]},K:new class extends Fa{priority=70;parse(e,t,n){switch(t){case"K":return hi(Za,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return fi(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,n){return e.getHours()>=12&&n<12?e.setHours(n+12,0,0,0):e.setHours(n,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]},k:new class extends Fa{priority=70;parse(e,t,n){switch(t){case"k":return hi(Wa,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return fi(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,n){const r=n<=24?n%24:n;return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]},m:new class extends Fa{priority=60;parse(e,t,n){switch(t){case"m":return hi(Qa,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return fi(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setMinutes(n,0,0),e}incompatibleTokens=["t","T"]},s:new class extends Fa{priority=50;parse(e,t,n){switch(t){case"s":return hi(Ya,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return fi(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,n){return e.setSeconds(n,0),e}incompatibleTokens=["t","T"]},S:new class extends Fa{priority=30;parse(e,t){return ui(fi(t.length,e),(e=>Math.trunc(e*Math.pow(10,3-t.length))))}set(e,t,n){return e.setMilliseconds(n),e}incompatibleTokens=["t","T"]},X:new class extends Fa{priority=10;parse(e,t){switch(t){case"X":return mi(oi,e);case"XX":return mi(si,e);case"XXXX":return mi(ci,e);case"XXXXX":return mi(di,e);default:return mi(li,e)}}set(e,t,n){return t.timestampIsSet?e:Or(e,e.getTime()-Wr(e)-n)}incompatibleTokens=["t","T","x"]},x:new class extends Fa{priority=10;parse(e,t){switch(t){case"x":return mi(oi,e);case"xx":return mi(si,e);case"xxxx":return mi(ci,e);case"xxxxx":return mi(di,e);default:return mi(li,e)}}set(e,t,n){return t.timestampIsSet?e:Or(e,e.getTime()-Wr(e)-n)}incompatibleTokens=["t","T","X"]},t:new class extends Fa{priority=40;parse(e){return pi(e)}set(e,t,n){return[Or(e,1e3*n),{timestampIsSet:!0}]}incompatibleTokens="*"},T:new class extends Fa{priority=20;parse(e){return pi(e)}set(e,t,n){return[Or(e,n),{timestampIsSet:!0}]}incompatibleTokens="*"}},Ci=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Si=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ei=/^'([^]*?)'?$/,Ai=/''/g,Ti=/\S/,$i=/[a-zA-Z]/;function Ii(e,t,n,r){const a=Object.assign({},Br()),i=r?.locale??a.locale??aa,o=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,s=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0;if(""===t)return""===e?Ir(n):Or(n,NaN);const c={firstWeekContainsDate:o,weekStartsOn:s,locale:i},l=[new Na],d=t.match(Si).map((e=>{const t=e[0];if(t in ka){return(0,ka[t])(e,i.formatLong)}return e})).join("").match(Ci),u=[];for(let a of d){!r?.useAdditionalWeekYearTokens&&Aa(a)&&Ta(a,t,e),!r?.useAdditionalDayOfYearTokens&&Ea(a)&&Ta(a,t,e);const o=a[0],s=Mi[o];if(s){const{incompatibleTokens:t}=s;if(Array.isArray(t)){const e=u.find((e=>t.includes(e.token)||e.token===o));if(e)throw new RangeError(`The format string mustn't contain \`${e.fullToken}\` and \`${a}\` at the same time`)}else if("*"===s.incompatibleTokens&&u.length>0)throw new RangeError(`The format string mustn't contain \`${a}\` and any other token at the same time`);u.push({token:o,fullToken:a});const r=s.run(e,a,i.match,c);if(!r)return Or(n,NaN);l.push(r.setter),e=r.rest}else{if(o.match($i))throw new RangeError("Format string contains an unescaped latin alphabet character `"+o+"`");if("''"===a?a="'":"'"===o&&(a=a.match(Ei)[1].replace(Ai,"'")),0!==e.indexOf(a))return Or(n,NaN);e=e.slice(a.length)}}if(e.length>0&&Ti.test(e))return Or(n,NaN);const h=l.map((e=>e.priority)).sort(((e,t)=>t-e)).filter(((e,t,n)=>n.indexOf(e)===t)).map((e=>l.filter((t=>t.priority===e)).sort(((e,t)=>t.subPriority-e.subPriority)))).map((e=>e[0]));let m=Ir(n);if(isNaN(m.getTime()))return Or(n,NaN);const p={};for(const e of h){if(!e.validate(m,c))return Or(n,NaN);const t=e.set(m,p,c);Array.isArray(t)?(m=t[0],Object.assign(p,t[1])):m=t}return Or(n,m)}function Oi(e,t){const{years:n=0,months:r=0,weeks:a=0,days:i=0,hours:o=0,minutes:s=0,seconds:c=0}=t,l=function(e,t){return Dr(e,-t)}(e,r+12*n),d=function(e,t){return Lr(e,-t)}(l,i+7*a),u=1e3*(c+60*(s+60*o));return Or(e,d.getTime()-u)}var Li="object"==typeof global&&global&&global.Object===Object&&global,Di="object"==typeof self&&self&&self.Object===Object&&self,ji=Li||Di||Function("return this")(),zi=ji.Symbol,Pi=Object.prototype,Ri=Pi.hasOwnProperty,Ni=Pi.toString,Fi=zi?zi.toStringTag:void 0;var Bi=Object.prototype.toString;var Vi="[object Null]",Hi="[object Undefined]",Ui=zi?zi.toStringTag:void 0;function qi(e){return null==e?void 0===e?Hi:Vi:Ui&&Ui in Object(e)?function(e){var t=Ri.call(e,Fi),n=e[Fi];try{e[Fi]=void 0;var r=!0}catch(e){}var a=Ni.call(e);return r&&(t?e[Fi]=n:delete e[Fi]),a}(e):function(e){return Bi.call(e)}(e)}function Wi(e){return null!=e&&"object"==typeof e}var Zi="[object Symbol]";function Ki(e){return"symbol"==typeof e||Wi(e)&&qi(e)==Zi}function Qi(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}var Yi=Array.isArray,Gi=1/0,Xi=zi?zi.prototype:void 0,Ji=Xi?Xi.toString:void 0;function eo(e){if("string"==typeof e)return e;if(Yi(e))return Qi(e,eo)+"";if(Ki(e))return Ji?Ji.call(e):"";var t=e+"";return"0"==t&&1/e==-Gi?"-0":t}var to=/\s/;var no=/^\s+/;function ro(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&to.test(e.charAt(t)););return t}(e)+1).replace(no,""):e}function ao(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var io=NaN,oo=/^[-+]0x[0-9a-f]+$/i,so=/^0b[01]+$/i,co=/^0o[0-7]+$/i,lo=parseInt;function uo(e){if("number"==typeof e)return e;if(Ki(e))return io;if(ao(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ao(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=ro(e);var n=so.test(e);return n||co.test(e)?lo(e.slice(2),n?2:8):oo.test(e)?io:+e}var ho=1/0,mo=17976931348623157e292;function po(e){var t=function(e){return e?(e=uo(e))===ho||e===-ho?(e<0?-1:1)*mo:e==e?e:0:0===e?e:0}(e),n=t%1;return t==t?n?t-n:t:0}function fo(e){return e}var go="[object AsyncFunction]",vo="[object Function]",_o="[object GeneratorFunction]",yo="[object Proxy]";function bo(e){if(!ao(e))return!1;var t=qi(e);return t==vo||t==_o||t==go||t==yo}var wo,xo=ji["__core-js_shared__"],ko=(wo=/[^.]+$/.exec(xo&&xo.keys&&xo.keys.IE_PROTO||""))?"Symbol(src)_1."+wo:"";var Mo=Function.prototype.toString;function Co(e){if(null!=e){try{return Mo.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var So=/^\[object .+?Constructor\]$/,Eo=Function.prototype,Ao=Object.prototype,To=Eo.toString,$o=Ao.hasOwnProperty,Io=RegExp("^"+To.call($o).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Oo(e){return!(!ao(e)||(t=e,ko&&ko in t))&&(bo(e)?Io:So).test(Co(e));var t}function Lo(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Oo(n)?n:void 0}var Do=Lo(ji,"WeakMap"),jo=Object.create,zo=function(){function e(){}return function(t){if(!ao(t))return{};if(jo)return jo(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Po(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var Ro=Date.now;var No,Fo,Bo,Vo=function(){try{var e=Lo(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Ho=Vo,Uo=Ho?function(e,t){return Ho(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:fo,qo=(No=Uo,Fo=0,Bo=0,function(){var e=Ro(),t=16-(e-Bo);if(Bo=e,t>0){if(++Fo>=800)return arguments[0]}else Fo=0;return No.apply(void 0,arguments)});function Wo(e){return e!=e}function Zo(e,t){return!!(null==e?0:e.length)&&function(e,t,n){return t==t?function(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}(e,t,n):function(e,t,n,r){for(var a=e.length,i=n+(r?1:-1);r?i--:++i<a;)if(t(e[i],i,e))return i;return-1}(e,Wo,n)}(e,t,0)>-1}var Ko=9007199254740991,Qo=/^(?:0|[1-9]\d*)$/;function Yo(e,t){var n=typeof e;return!!(t=null==t?Ko:t)&&("number"==n||"symbol"!=n&&Qo.test(e))&&e>-1&&e%1==0&&e<t}function Go(e,t,n){"__proto__"==t&&Ho?Ho(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Xo(e,t){return e===t||e!=e&&t!=t}var Jo=Object.prototype.hasOwnProperty;function es(e,t,n){var r=e[t];Jo.call(e,t)&&Xo(r,n)&&(void 0!==n||t in e)||Go(e,t,n)}function ts(e,t,n,r){var a=!n;n||(n={});for(var i=-1,o=t.length;++i<o;){var s=t[i],c=r?r(n[s],e[s],s,n,e):void 0;void 0===c&&(c=e[s]),a?Go(n,s,c):es(n,s,c)}return n}var ns=Math.max;function rs(e,t){return qo(function(e,t,n){return t=ns(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,i=ns(r.length-t,0),o=Array(i);++a<i;)o[a]=r[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=r[a];return s[t]=n(o),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,s)}}(e,t,fo),e+"")}var as=9007199254740991;function is(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=as}function os(e){return null!=e&&is(e.length)&&!bo(e)}function ss(e,t,n){if(!ao(n))return!1;var r=typeof t;return!!("number"==r?os(n)&&Yo(t,n.length):"string"==r&&t in n)&&Xo(n[t],e)}function cs(e){return rs((function(t,n){var r=-1,a=n.length,i=a>1?n[a-1]:void 0,o=a>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(a--,i):void 0,o&&ss(n[0],n[1],o)&&(i=a<3?void 0:i,a=1),t=Object(t);++r<a;){var s=n[r];s&&e(t,s,r,i)}return t}))}var ls=Object.prototype;function ds(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ls)}function us(e){return Wi(e)&&"[object Arguments]"==qi(e)}var hs=Object.prototype,ms=hs.hasOwnProperty,ps=hs.propertyIsEnumerable,fs=us(function(){return arguments}())?us:function(e){return Wi(e)&&ms.call(e,"callee")&&!ps.call(e,"callee")};var gs="object"==typeof exports&&exports&&!exports.nodeType&&exports,vs=gs&&"object"==typeof module&&module&&!module.nodeType&&module,_s=vs&&vs.exports===gs?ji.Buffer:void 0,ys=(_s?_s.isBuffer:void 0)||function(){return!1},bs={};function ws(e){return function(t){return e(t)}}bs["[object Float32Array]"]=bs["[object Float64Array]"]=bs["[object Int8Array]"]=bs["[object Int16Array]"]=bs["[object Int32Array]"]=bs["[object Uint8Array]"]=bs["[object Uint8ClampedArray]"]=bs["[object Uint16Array]"]=bs["[object Uint32Array]"]=!0,bs["[object Arguments]"]=bs["[object Array]"]=bs["[object ArrayBuffer]"]=bs["[object Boolean]"]=bs["[object DataView]"]=bs["[object Date]"]=bs["[object Error]"]=bs["[object Function]"]=bs["[object Map]"]=bs["[object Number]"]=bs["[object Object]"]=bs["[object RegExp]"]=bs["[object Set]"]=bs["[object String]"]=bs["[object WeakMap]"]=!1;var xs="object"==typeof exports&&exports&&!exports.nodeType&&exports,ks=xs&&"object"==typeof module&&module&&!module.nodeType&&module,Ms=ks&&ks.exports===xs&&Li.process,Cs=function(){try{var e=ks&&ks.require&&ks.require("util").types;return e||Ms&&Ms.binding&&Ms.binding("util")}catch(e){}}(),Ss=Cs,Es=Ss&&Ss.isTypedArray,As=Es?ws(Es):function(e){return Wi(e)&&is(e.length)&&!!bs[qi(e)]},Ts=Object.prototype.hasOwnProperty;function $s(e,t){var n=Yi(e),r=!n&&fs(e),a=!n&&!r&&ys(e),i=!n&&!r&&!a&&As(e),o=n||r||a||i,s=o?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=s.length;for(var l in e)!t&&!Ts.call(e,l)||o&&("length"==l||a&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Yo(l,c))||s.push(l);return s}function Is(e,t){return function(n){return e(t(n))}}var Os=Is(Object.keys,Object),Ls=Object.prototype.hasOwnProperty;function Ds(e){return os(e)?$s(e):function(e){if(!ds(e))return Os(e);var t=[];for(var n in Object(e))Ls.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}var js=Object.prototype.hasOwnProperty;function zs(e){if(!ao(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=ds(e),n=[];for(var r in e)("constructor"!=r||!t&&js.call(e,r))&&n.push(r);return n}function Ps(e){return os(e)?$s(e,!0):zs(e)}var Rs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ns=/^\w*$/;function Fs(e,t){if(Yi(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ki(e))||(Ns.test(e)||!Rs.test(e)||null!=t&&e in Object(t))}var Bs=Lo(Object,"create");var Vs=Object.prototype.hasOwnProperty;var Hs=Object.prototype.hasOwnProperty;function Us(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qs(e,t){for(var n=e.length;n--;)if(Xo(e[n][0],t))return n;return-1}Us.prototype.clear=function(){this.__data__=Bs?Bs(null):{},this.size=0},Us.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Us.prototype.get=function(e){var t=this.__data__;if(Bs){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Vs.call(t,e)?t[e]:void 0},Us.prototype.has=function(e){var t=this.__data__;return Bs?void 0!==t[e]:Hs.call(t,e)},Us.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Bs&&void 0===t?"__lodash_hash_undefined__":t,this};var Ws=Array.prototype.splice;function Zs(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Zs.prototype.clear=function(){this.__data__=[],this.size=0},Zs.prototype.delete=function(e){var t=this.__data__,n=qs(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ws.call(t,n,1),--this.size,!0)},Zs.prototype.get=function(e){var t=this.__data__,n=qs(t,e);return n<0?void 0:t[n][1]},Zs.prototype.has=function(e){return qs(this.__data__,e)>-1},Zs.prototype.set=function(e,t){var n=this.__data__,r=qs(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var Ks=Lo(ji,"Map");function Qs(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Ys(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ys.prototype.clear=function(){this.size=0,this.__data__={hash:new Us,map:new(Ks||Zs),string:new Us}},Ys.prototype.delete=function(e){var t=Qs(this,e).delete(e);return this.size-=t?1:0,t},Ys.prototype.get=function(e){return Qs(this,e).get(e)},Ys.prototype.has=function(e){return Qs(this,e).has(e)},Ys.prototype.set=function(e,t){var n=Qs(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var Gs="Expected a function";function Xs(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Gs);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o)||i,o};return n.cache=new(Xs.Cache||Ys),n}Xs.Cache=Ys;var Js=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ec=/\\(\\)?/g,tc=function(e){var t=Xs(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Js,(function(e,n,r,a){t.push(r?a.replace(ec,"$1"):n||e)})),t})),nc=tc;function rc(e){return null==e?"":eo(e)}function ac(e,t){return Yi(e)?e:Fs(e,t)?[e]:nc(rc(e))}var ic=1/0;function oc(e){if("string"==typeof e||Ki(e))return e;var t=e+"";return"0"==t&&1/e==-ic?"-0":t}function sc(e,t){for(var n=0,r=(t=ac(t,e)).length;null!=e&&n<r;)e=e[oc(t[n++])];return n&&n==r?e:void 0}function cc(e,t,n){var r=null==e?void 0:sc(e,t);return void 0===r?n:r}function lc(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var dc=Is(Object.getPrototypeOf,Object),uc="[object Object]",hc=Function.prototype,mc=Object.prototype,pc=hc.toString,fc=mc.hasOwnProperty,gc=pc.call(Object);function vc(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(a);++r<a;)i[r]=e[r+t];return i}var _c=ji.isFinite,yc=Math.min;var bc=Math.ceil,wc=Math.max;function xc(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=uo(n))==n?n:0),void 0!==t&&(t=(t=uo(t))==t?t:0),function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}(uo(e),t,n)}function kc(e){var t=this.__data__=new Zs(e);this.size=t.size}kc.prototype.clear=function(){this.__data__=new Zs,this.size=0},kc.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},kc.prototype.get=function(e){return this.__data__.get(e)},kc.prototype.has=function(e){return this.__data__.has(e)},kc.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Zs){var r=n.__data__;if(!Ks||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ys(r)}return n.set(e,t),this.size=n.size,this};var Mc="object"==typeof exports&&exports&&!exports.nodeType&&exports,Cc=Mc&&"object"==typeof module&&module&&!module.nodeType&&module,Sc=Cc&&Cc.exports===Mc?ji.Buffer:void 0,Ec=Sc?Sc.allocUnsafe:void 0;function Ac(e,t){if(t)return e.slice();var n=e.length,r=Ec?Ec(n):new e.constructor(n);return e.copy(r),r}function Tc(){return[]}var $c=Object.prototype.propertyIsEnumerable,Ic=Object.getOwnPropertySymbols,Oc=Ic?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}(Ic(e),(function(t){return $c.call(e,t)})))}:Tc;var Lc=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)lc(t,Oc(e)),e=dc(e);return t}:Tc;function Dc(e,t,n){var r=t(e);return Yi(e)?r:lc(r,n(e))}function jc(e){return Dc(e,Ds,Oc)}function zc(e){return Dc(e,Ps,Lc)}var Pc=Lo(ji,"DataView"),Rc=Lo(ji,"Promise"),Nc=Lo(ji,"Set"),Fc="[object Map]",Bc="[object Promise]",Vc="[object Set]",Hc="[object WeakMap]",Uc="[object DataView]",qc=Co(Pc),Wc=Co(Ks),Zc=Co(Rc),Kc=Co(Nc),Qc=Co(Do),Yc=qi;(Pc&&Yc(new Pc(new ArrayBuffer(1)))!=Uc||Ks&&Yc(new Ks)!=Fc||Rc&&Yc(Rc.resolve())!=Bc||Nc&&Yc(new Nc)!=Vc||Do&&Yc(new Do)!=Hc)&&(Yc=function(e){var t=qi(e),n="[object Object]"==t?e.constructor:void 0,r=n?Co(n):"";if(r)switch(r){case qc:return Uc;case Wc:return Fc;case Zc:return Bc;case Kc:return Vc;case Qc:return Hc}return t});var Gc=Yc,Xc=Object.prototype.hasOwnProperty;var Jc=ji.Uint8Array;function el(e){var t=new e.constructor(e.byteLength);return new Jc(t).set(new Jc(e)),t}var tl=/\w*$/;var nl=zi?zi.prototype:void 0,rl=nl?nl.valueOf:void 0;function al(e,t){var n=t?el(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var il="[object Boolean]",ol="[object Date]",sl="[object Map]",cl="[object Number]",ll="[object RegExp]",dl="[object Set]",ul="[object String]",hl="[object Symbol]",ml="[object ArrayBuffer]",pl="[object DataView]",fl="[object Float32Array]",gl="[object Float64Array]",vl="[object Int8Array]",_l="[object Int16Array]",yl="[object Int32Array]",bl="[object Uint8Array]",wl="[object Uint8ClampedArray]",xl="[object Uint16Array]",kl="[object Uint32Array]";function Ml(e,t,n){var r,a,i,o=e.constructor;switch(t){case ml:return el(e);case il:case ol:return new o(+e);case pl:return function(e,t){var n=t?el(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case fl:case gl:case vl:case _l:case yl:case bl:case wl:case xl:case kl:return al(e,n);case sl:return new o;case cl:case ul:return new o(e);case ll:return(i=new(a=e).constructor(a.source,tl.exec(a))).lastIndex=a.lastIndex,i;case dl:return new o;case hl:return r=e,rl?Object(rl.call(r)):{}}}function Cl(e){return"function"!=typeof e.constructor||ds(e)?{}:zo(dc(e))}var Sl=Ss&&Ss.isMap,El=Sl?ws(Sl):function(e){return Wi(e)&&"[object Map]"==Gc(e)};var Al=Ss&&Ss.isSet,Tl=Al?ws(Al):function(e){return Wi(e)&&"[object Set]"==Gc(e)},$l=1,Il=2,Ol=4,Ll="[object Arguments]",Dl="[object Function]",jl="[object GeneratorFunction]",zl="[object Object]",Pl={};function Rl(e,t,n,r,a,i){var o,s=t&$l,c=t&Il,l=t&Ol;if(n&&(o=a?n(e,r,a,i):n(e)),void 0!==o)return o;if(!ao(e))return e;var d=Yi(e);if(d){if(o=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Xc.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!s)return Po(e,o)}else{var u=Gc(e),h=u==Dl||u==jl;if(ys(e))return Ac(e,s);if(u==zl||u==Ll||h&&!a){if(o=c||h?{}:Cl(e),!s)return c?function(e,t){return ts(e,Lc(e),t)}(e,function(e,t){return e&&ts(t,Ps(t),e)}(o,e)):function(e,t){return ts(e,Oc(e),t)}(e,function(e,t){return e&&ts(t,Ds(t),e)}(o,e))}else{if(!Pl[u])return a?e:{};o=Ml(e,u,s)}}i||(i=new kc);var m=i.get(e);if(m)return m;i.set(e,o),Tl(e)?e.forEach((function(r){o.add(Rl(r,t,n,r,e,i))})):El(e)&&e.forEach((function(r,a){o.set(a,Rl(r,t,n,a,e,i))}));var p=d?void 0:(l?c?zc:jc:c?Ps:Ds)(e);return function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););}(p||e,(function(r,a){p&&(r=e[a=r]),es(o,a,Rl(r,t,n,a,e,i))})),o}Pl[Ll]=Pl["[object Array]"]=Pl["[object ArrayBuffer]"]=Pl["[object DataView]"]=Pl["[object Boolean]"]=Pl["[object Date]"]=Pl["[object Float32Array]"]=Pl["[object Float64Array]"]=Pl["[object Int8Array]"]=Pl["[object Int16Array]"]=Pl["[object Int32Array]"]=Pl["[object Map]"]=Pl["[object Number]"]=Pl[zl]=Pl["[object RegExp]"]=Pl["[object Set]"]=Pl["[object String]"]=Pl["[object Symbol]"]=Pl["[object Uint8Array]"]=Pl["[object Uint8ClampedArray]"]=Pl["[object Uint16Array]"]=Pl["[object Uint32Array]"]=!0,Pl["[object Error]"]=Pl[Dl]=Pl["[object WeakMap]"]=!1;function Nl(e){return Rl(e,5)}function Fl(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Ys;++t<n;)this.add(e[t])}function Bl(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function Vl(e,t){return e.has(t)}Fl.prototype.add=Fl.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Fl.prototype.has=function(e){return this.__data__.has(e)};var Hl=1,Ul=2;function ql(e,t,n,r,a,i){var o=n&Hl,s=e.length,c=t.length;if(s!=c&&!(o&&c>s))return!1;var l=i.get(e),d=i.get(t);if(l&&d)return l==t&&d==e;var u=-1,h=!0,m=n&Ul?new Fl:void 0;for(i.set(e,t),i.set(t,e);++u<s;){var p=e[u],f=t[u];if(r)var g=o?r(f,p,u,t,e,i):r(p,f,u,e,t,i);if(void 0!==g){if(g)continue;h=!1;break}if(m){if(!Bl(t,(function(e,t){if(!Vl(m,t)&&(p===e||a(p,e,n,r,i)))return m.push(t)}))){h=!1;break}}else if(p!==f&&!a(p,f,n,r,i)){h=!1;break}}return i.delete(e),i.delete(t),h}function Wl(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Zl(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var Kl=1,Ql=2,Yl="[object Boolean]",Gl="[object Date]",Xl="[object Error]",Jl="[object Map]",ed="[object Number]",td="[object RegExp]",nd="[object Set]",rd="[object String]",ad="[object Symbol]",id="[object ArrayBuffer]",od="[object DataView]",sd=zi?zi.prototype:void 0,cd=sd?sd.valueOf:void 0;var ld=1,dd=Object.prototype.hasOwnProperty;var ud=1,hd="[object Arguments]",md="[object Array]",pd="[object Object]",fd=Object.prototype.hasOwnProperty;function gd(e,t,n,r,a,i){var o=Yi(e),s=Yi(t),c=o?md:Gc(e),l=s?md:Gc(t),d=(c=c==hd?pd:c)==pd,u=(l=l==hd?pd:l)==pd,h=c==l;if(h&&ys(e)){if(!ys(t))return!1;o=!0,d=!1}if(h&&!d)return i||(i=new kc),o||As(e)?ql(e,t,n,r,a,i):function(e,t,n,r,a,i,o){switch(n){case od:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case id:return!(e.byteLength!=t.byteLength||!i(new Jc(e),new Jc(t)));case Yl:case Gl:case ed:return Xo(+e,+t);case Xl:return e.name==t.name&&e.message==t.message;case td:case rd:return e==t+"";case Jl:var s=Wl;case nd:var c=r&Kl;if(s||(s=Zl),e.size!=t.size&&!c)return!1;var l=o.get(e);if(l)return l==t;r|=Ql,o.set(e,t);var d=ql(s(e),s(t),r,a,i,o);return o.delete(e),d;case ad:if(cd)return cd.call(e)==cd.call(t)}return!1}(e,t,c,n,r,a,i);if(!(n&ud)){var m=d&&fd.call(e,"__wrapped__"),p=u&&fd.call(t,"__wrapped__");if(m||p){var f=m?e.value():e,g=p?t.value():t;return i||(i=new kc),a(f,g,n,r,i)}}return!!h&&(i||(i=new kc),function(e,t,n,r,a,i){var o=n&ld,s=jc(e),c=s.length;if(c!=jc(t).length&&!o)return!1;for(var l=c;l--;){var d=s[l];if(!(o?d in t:dd.call(t,d)))return!1}var u=i.get(e),h=i.get(t);if(u&&h)return u==t&&h==e;var m=!0;i.set(e,t),i.set(t,e);for(var p=o;++l<c;){var f=e[d=s[l]],g=t[d];if(r)var v=o?r(g,f,d,t,e,i):r(f,g,d,e,t,i);if(!(void 0===v?f===g||a(f,g,n,r,i):v)){m=!1;break}p||(p="constructor"==d)}if(m&&!p){var _=e.constructor,y=t.constructor;_==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof y&&y instanceof y||(m=!1)}return i.delete(e),i.delete(t),m}(e,t,n,r,a,i))}function vd(e,t,n,r,a){return e===t||(null==e||null==t||!Wi(e)&&!Wi(t)?e!=e&&t!=t:gd(e,t,n,r,vd,a))}var _d=1,yd=2;function bd(e){return e==e&&!ao(e)}function wd(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function xd(e){var t=function(e){for(var t=Ds(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,bd(a)]}return t}(e);return 1==t.length&&t[0][2]?wd(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var a=n.length,i=a,o=!r;if(null==e)return!i;for(e=Object(e);a--;){var s=n[a];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<i;){var c=(s=n[a])[0],l=e[c],d=s[1];if(o&&s[2]){if(void 0===l&&!(c in e))return!1}else{var u=new kc;if(r)var h=r(l,d,c,e,t,u);if(!(void 0===h?vd(d,l,_d|yd,r,u):h))return!1}}return!0}(n,e,t)}}function kd(e,t){return null!=e&&t in Object(e)}function Md(e,t){return null!=e&&function(e,t,n){for(var r=-1,a=(t=ac(t,e)).length,i=!1;++r<a;){var o=oc(t[r]);if(!(i=null!=e&&n(e,o)))break;e=e[o]}return i||++r!=a?i:!!(a=null==e?0:e.length)&&is(a)&&Yo(o,a)&&(Yi(e)||fs(e))}(e,t,kd)}var Cd=1,Sd=2;function Ed(e){return Fs(e)?(t=oc(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return sc(t,e)}}(e);var t}function Ad(e){return"function"==typeof e?e:null==e?fo:"object"==typeof e?Yi(e)?(t=e[0],n=e[1],Fs(t)&&bd(n)?wd(oc(t),n):function(e){var r=cc(e,t);return void 0===r&&r===n?Md(e,t):vd(n,r,Cd|Sd)}):xd(e):Ed(e);var t,n}var Td,$d=function(e,t,n){for(var r=-1,a=Object(e),i=n(e),o=i.length;o--;){var s=i[Td?o:++r];if(!1===t(a[s],s,a))break}return e};var Id=function(e,t){return function(n,r){if(null==n)return n;if(!os(n))return e(n,r);for(var a=n.length,i=t?a:-1,o=Object(n);(t?i--:++i<a)&&!1!==r(o[i],i,o););return n}}((function(e,t){return e&&$d(e,t,Ds)})),Od=Id,Ld=function(){return ji.Date.now()},Dd="Expected a function",jd=Math.max,zd=Math.min;function Pd(e,t,n){var r,a,i,o,s,c,l=0,d=!1,u=!1,h=!0;if("function"!=typeof e)throw new TypeError(Dd);function m(t){var n=r,i=a;return r=a=void 0,l=t,o=e.apply(i,n)}function p(e){var n=e-c;return void 0===c||n>=t||n<0||u&&e-l>=i}function f(){var e=Ld();if(p(e))return g(e);s=setTimeout(f,function(e){var n=t-(e-c);return u?zd(n,i-(e-l)):n}(e))}function g(e){return s=void 0,h&&r?m(e):(r=a=void 0,o)}function v(){var e=Ld(),n=p(e);if(r=arguments,a=this,c=e,n){if(void 0===s)return function(e){return l=e,s=setTimeout(f,t),d?m(e):o}(c);if(u)return clearTimeout(s),s=setTimeout(f,t),m(c)}return void 0===s&&(s=setTimeout(f,t)),o}return t=uo(t)||0,ao(n)&&(d=!!n.leading,i=(u="maxWait"in n)?jd(uo(n.maxWait)||0,t):i,h="trailing"in n?!!n.trailing:h),v.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=a=s=void 0},v.flush=function(){return void 0===s?o:g(Ld())},v}function Rd(e,t,n){(void 0!==n&&!Xo(e[t],n)||void 0===n&&!(t in e))&&Go(e,t,n)}function Nd(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function Fd(e,t,n,r,a,i,o){var s=Nd(e,n),c=Nd(t,n),l=o.get(c);if(l)Rd(e,n,l);else{var d,u=i?i(s,c,n+"",e,t,o):void 0,h=void 0===u;if(h){var m=Yi(c),p=!m&&ys(c),f=!m&&!p&&As(c);u=c,m||p||f?Yi(s)?u=s:Wi(d=s)&&os(d)?u=Po(s):p?(h=!1,u=Ac(c,!0)):f?(h=!1,u=al(c,!0)):u=[]:function(e){if(!Wi(e)||qi(e)!=uc)return!1;var t=dc(e);if(null===t)return!0;var n=fc.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&pc.call(n)==gc}(c)||fs(c)?(u=s,fs(s)?u=function(e){return ts(e,Ps(e))}(s):ao(s)&&!bo(s)||(u=Cl(c))):h=!1}h&&(o.set(c,u),a(u,c,r,i,o),o.delete(c)),Rd(e,n,u)}}function Bd(e,t,n,r,a){e!==t&&$d(t,(function(i,o){if(a||(a=new kc),ao(i))Fd(e,t,o,n,Bd,r,a);else{var s=r?r(Nd(e,o),i,o+"",e,t,a):void 0;void 0===s&&(s=i),Rd(e,o,s)}}),Ps)}var Vd=cs((function(e,t,n,r){Bd(e,t,n,r)}));function Hd(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}function Ud(e,t){return e>t}function qd(e,t){return vd(e,t)}function Wd(e,t){return e&&e.length?function(e,t,n){for(var r=-1,a=e.length;++r<a;){var i=e[r],o=t(i);if(null!=o&&(void 0===s?o==o&&!Ki(o):n(o,s)))var s=o,c=i}return c}(e,Ad(t),Ud):void 0}var Zd=cs((function(e,t,n){Bd(e,t,n)}));function Kd(e,t){return null==(e=function(e,t){return t.length<2?e:sc(e,vc(t,0,-1))}(e,t=ac(t,e)))||delete e[oc((n=t,r=null==n?0:n.length,r?n[r-1]:void 0))];var n,r}function Qd(e,t){if(e!==t){var n=void 0!==e,r=null===e,a=e==e,i=Ki(e),o=void 0!==t,s=null===t,c=t==t,l=Ki(t);if(!s&&!l&&!i&&e>t||i&&o&&c&&!s&&!l||r&&o&&c||!n&&c||!a)return 1;if(!r&&!i&&!l&&e<t||l&&n&&a&&!r&&!i||s&&n&&a||!o&&a||!c)return-1}return 0}function Yd(e,t,n){t=t.length?Qi(t,(function(e){return Yi(e)?function(t){return sc(t,1===e.length?e[0]:e)}:e})):[fo];var r=-1;t=Qi(t,ws(Ad));var a=function(e,t){var n=-1,r=os(e)?Array(e.length):[];return Od(e,(function(e,a,i){r[++n]=t(e,a,i)})),r}(e,(function(e,n,a){return{criteria:Qi(t,(function(t){return t(e)})),index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(a,(function(e,t){return function(e,t,n){for(var r=-1,a=e.criteria,i=t.criteria,o=a.length,s=n.length;++r<o;){var c=Qd(a[r],i[r]);if(c)return r>=s?c:c*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Gd(e,t,n,r){return null==e?[]:(Yi(t)||(t=null==t?[]:[t]),Yi(n=r?void 0:n)||(n=null==n?[]:[n]),Yd(e,t,n))}var Xd=function(e){var t=Math[e];return function(e,n){if(e=uo(e),(n=null==n?0:yc(po(n),292))&&_c(e)){var r=(rc(e)+"e").split("e");return+((r=(rc(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}("round"),Jd=Xd;function eu(e,t,n){return null==e?e:function(e,t,n,r){if(!ao(e))return e;for(var a=-1,i=(t=ac(t,e)).length,o=i-1,s=e;null!=s&&++a<i;){var c=oc(t[a]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(a!=o){var d=s[c];void 0===(l=r?r(d,c,s):void 0)&&(l=ao(d)?d:Yo(t[a+1])?[]:{})}es(s,c,l),s=s[c]}return e}(e,t,n)}function tu(e,t){return e&&e.length?function(e,t){for(var n=-1,r=e.length,a=0,i=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!Xo(s,c)){var c=s;i[a++]=0===o?0:o}}return i}(e,Ad(t)):[]}function nu(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return ao(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),Pd(e,t,{leading:r,maxWait:t,trailing:a})}var ru,au=Nc&&1/Zl(new Nc([,-0]))[1]==1/0?function(e){return new Nc(e)}:function(){},iu=200;function ou(e,t,n){var r=-1,a=Zo,i=e.length,o=!0,s=[],c=s;if(n)o=!1,a=Hd;else if(i>=iu){var l=t?null:au(e);if(l)return Zl(l);o=!1,a=Vl,c=new Fl}else c=t?[]:s;e:for(;++r<i;){var d=e[r],u=t?t(d):d;if(d=n||0!==d?d:0,o&&u==u){for(var h=c.length;h--;)if(c[h]===u)continue e;t&&c.push(u),s.push(d)}else a(c,u,n)||(c!==s&&c.push(u),s.push(d))}return s}function su(e,t){return t="function"==typeof t?t:void 0,e&&e.length?ou(e,void 0,t):[]}class cu extends Error{constructor(e,t){super(e),this.context=t}}!function(e){e.Relative="relative",e.Continuous="continuous"}(ru||(ru={}));const lu=["clips","remote-control-entity","favorite-events","favorite-recordings","live","menu","ptz","recordings","seek","snapshots","substream","2-way-audio","trigger"],du=br.object({path:br.string()});function uu(e){if(!e)return;return e.trim().split(/[_\s]+/).map((e=>e[0].toUpperCase()+e.substring(1))).join(" ")}function hu(e,t,n){const r=e[t];return e.splice(t,1),e.splice(n,0,r),e}const mu=e=>e?Array.isArray(e)?e:[e]:[],pu=e=>e instanceof Set?e:new Set(mu(e));function fu(e,t,n){return!function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?vd(e,t,void 0,n):!!r}(e,t,n)}function gu(e,t=console.warn){e instanceof cu&&e.context?t(e,e.context):t("object"==typeof e&&"message"in e?e.message:e)}const vu=()=>window.matchMedia("(hover: hover) and (pointer: fine)").matches,_u=(e,t)=>ja(e,"yyyy-MM-dd HH:mm"+(t?":ss":"")),yu=e=>ja(e,"yyyy-MM-dd"),bu=(e,t)=>{window.requestIdleCallback?window.requestIdleCallback(e,{...t&&{timeout:t}}):e()};function wu(e,t){const n=function(e,t,n){const r=Qr(e,t)/Nr;return Kr(n?.roundingMethod)(r)}(t,e),r=function(e,t,n){const r=Qr(e,t)/Rr;return Kr(n?.roundingMethod)(r)}(t,e)-60*n;let a="";return n&&(a+=`${n}h `),r&&(a+=`${r}m `),a+=`${Yr(t,e)-60*n*60-60*r}s`,a}const xu=async(e,t)=>await Promise.all(Array.from(e).map((e=>t(e)))),ku=e=>new Date(`${e}T00:00:00`),Mu=e=>!isNaN(e.getTime()),Cu=(e,t,n,r)=>{t?e.setAttribute(n,r??""):e.removeAttribute(n)},Su=(e,t,n,r)=>{t?e.style.setProperty(n,r??""):e.style.removeProperty(n)},Eu=e=>!!e,Au=e=>e instanceof HTMLElement,Tu=e=>(e instanceof HTMLSlotElement?e.assignedElements({flatten:!0}):[...e.children]).filter(Au),$u=e=>e?.ratio&&2===e.ratio.length?`${e.ratio[0]} / ${e.ratio[1]}`:e?.defaultStatic?"16 / 9":"auto",Iu=e=>({"aspect-ratio":$u(e)}),Ou=e=>{if(Array.isArray(e))return e.filter((e=>void 0!==e)).map((e=>Ou(e)));if("object"==typeof e&&null!==e){const t={};for(const n in e)t[n]=Ou(e[n]);return t}return e},Lu=(e,t,n)=>Jd(e,n)===Jd(t,n),Du=e=>e.replace(/^http/i,"ws"),ju=e=>{e.offsetHeight};function zu(e,t){return{action:"fire-dom-event",advanced_camera_card_action:e,...t?.cardID&&{card_id:t.cardID}}}function Pu(e,t){return{action:"fire-dom-event",advanced_camera_card_action:e,...t?.cardID&&{card_id:t.cardID},...t?.folderID&&{folder:t.folderID}}}function Ru(e,t,n){return{action:"fire-dom-event",advanced_camera_card_action:e,camera:t,...n?.cardID&&{card_id:n.cardID}}}function Nu(e,t,n){return{action:"fire-dom-event",advanced_camera_card_action:"media_player",media_player:e,media_player_action:t,...n?.cardID&&{card_id:n.cardID}}}function Fu(e){return{action:"fire-dom-event",advanced_camera_card_action:"ptz_multi",...e?.cardID&&{card_id:e.cardID},...e?.ptzAction&&{ptz_action:e.ptzAction},...e?.ptzPhase&&{ptz_phase:e.ptzPhase},...e?.ptzPreset&&{ptz_preset:e.ptzPreset},...e?.targetID&&{target_id:e.targetID}}}function Bu(e,t){return{action:"fire-dom-event",advanced_camera_card_action:Tr,callback:e,...t?.cardID&&{card_id:t.cardID}}}function Vu(e,t,n,r){return function(e,t){return{action:"perform-action",perform_action:e,...t?.target&&{target:t.target},...t?.data&&{data:t.data},...t?.cardID&&{card_id:t.cardID}}}(`${e}.select_option`,{...r,target:{entity_id:t},data:{option:n}})}function Hu(e,t){return e&&t?"tap"===e&&t.tap_action?t.tap_action:"tap"===e&&t.entity?{action:"more-info"}:"hold"===e&&t.hold_action?t.hold_action:"double_tap"===e&&t.double_tap_action?t.double_tap_action:"end_tap"===e&&t.end_tap_action?t.end_tap_action:"start_tap"===e&&t.start_tap_action?t.start_tap_action:null:null}const Uu=e=>mu(e).some((e=>"none"!==e.action)),qu=e=>"fire-dom-event"===e.action&&"advanced_camera_card_action"in e&&"string"==typeof e.advanced_camera_card_action,Wu=e=>{e.stopPropagation()};class Zu{constructor(){this._timer=null,this._repeated=!1}stop(){this._timer&&(this._repeated?window.clearInterval(this._timer):window.clearTimeout(this._timer),this._timer=null)}isRunning(){return null!==this._timer}start(e,t){this.stop(),this._timer=window.setTimeout((()=>{this._timer=null,t()}),1e3*e),this._repeated=!1}startRepeated(e,t){this.stop(),this._timer=window.setInterval((()=>{t()}),1e3*e),this._repeated=!0}}class Ku extends HTMLElement{constructor(){super(...arguments),this.holdTime=.4,this.holdTimer=new Zu,this.doubleClickTimer=new Zu,this.held=!1,this.started=!1}connectedCallback(){["touchcancel","mouseout","mouseup","touchmove","mousewheel","wheel","scroll"].forEach((e=>{document.addEventListener(e,(()=>{this.holdTimer.stop()}),{passive:!0})}))}bind(e,t){if(e.actionHandlerOptions)return void(e.actionHandlerOptions=t);e.actionHandlerOptions=t,e.addEventListener("contextmenu",(e=>{const t=e||window.event;return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.returnValue=!1,!1}));const n=()=>{this.held=!1,this.holdTimer.start(this.holdTime,(()=>{this.held=!0})),this.started||(this.started=!0,tt(e,"action",{action:"start_tap"}))},r=t=>{this.holdTimer.stop(),this.started&&(this.started=!1,tt(e,"action",{action:"end_tap"}))},a=t=>{const n=e.actionHandlerOptions;n?.allowPropagation||Wu(t),["touchend","touchcancel"].includes(t.type)&&!this.held||(r(),n?.hasHold&&this.held?tt(e,"action",{action:"hold"}):n?.hasDoubleClick?"click"===t.type&&t.detail<2||!this.doubleClickTimer.isRunning()?this.doubleClickTimer.start(.25,(()=>tt(e,"action",{action:"tap"}))):(this.doubleClickTimer.stop(),tt(e,"action",{action:"double_tap"})):tt(e,"action",{action:"tap"}))};e.addEventListener("touchstart",n,{passive:!0}),e.addEventListener("touchend",a),e.addEventListener("touchcancel",a),e.addEventListener("mousedown",n,{passive:!0}),e.addEventListener("click",a),e.addEventListener("keyup",(e=>{"Enter"===e.key&&a(e)})),e.addEventListener("mouseleave",r)}}customElements.define("action-handler-advanced-camera-card",Ku);const Qu=(e,t)=>{const n=(()=>{const e=document.body;if(e.querySelector("action-handler-advanced-camera-card"))return e.querySelector("action-handler-advanced-camera-card");const t=document.createElement("action-handler-advanced-camera-card");return e.appendChild(t),t})();n&&n.bind(e,t)},Yu=ve(class extends _e{update(e,[t]){return Qu(e.element,t),W}render(e){}});var Gu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Xu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ju={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new a(r,i||e,o),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,a=[];if(0===this._eventsCount)return a;for(r in e=this._events)t.call(e,r)&&a.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,i=r.length,o=new Array(i);a<i;a++)o[a]=r[a].fn;return o},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,a,i,o){var s=n?n+e:e;if(!this._events[s])return!1;var c,l,d=this._events[s],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,a),!0;case 5:return d.fn.call(d.context,t,r,a,i),!0;case 6:return d.fn.call(d.context,t,r,a,i,o),!0}for(l=1,c=new Array(u-1);l<u;l++)c[l-1]=arguments[l];d.fn.apply(d.context,c)}else{var h,m=d.length;for(l=0;l<m;l++)switch(d[l].once&&this.removeListener(e,d[l].fn,void 0,!0),u){case 1:d[l].fn.call(d[l].context);break;case 2:d[l].fn.call(d[l].context,t);break;case 3:d[l].fn.call(d[l].context,t,r);break;case 4:d[l].fn.call(d[l].context,t,r,a);break;default:if(!c)for(h=1,c=new Array(u-1);h<u;h++)c[h-1]=arguments[h];d[l].fn.apply(d[l].context,c)}}return!0},s.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,a){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||a&&!s.once||r&&s.context!==r||o(this,i);else{for(var c=0,l=[],d=s.length;c<d;c++)(s[c].fn!==t||a&&!s[c].once||r&&s[c].context!==r)&&l.push(s[c]);l.length?this._events[i]=1===l.length?l[0]:l:o(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(Ju);var eh=Xu(Ju.exports);class th extends Error{constructor(e){super(e),this.name="TimeoutError"}}class nh extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const rh=e=>void 0===globalThis.DOMException?new nh(e):new DOMException(e),ah=e=>{const t=void 0===e.reason?rh("This operation was aborted."):e.reason;return t instanceof Error?t:rh(t)};class ih{#e=[];enqueue(e,t){const n={priority:(t={priority:0,...t}).priority,run:e};if(this.size&&this.#e[this.size-1].priority>=t.priority)return void this.#e.push(n);const r=function(e,t,n){let r=0,a=e.length;for(;a>0;){const i=Math.trunc(a/2);let o=r+i;n(e[o],t)<=0?(r=++o,a-=i+1):a=i}return r}(this.#e,n,((e,t)=>t.priority-e.priority));this.#e.splice(r,0,n)}dequeue(){const e=this.#e.shift();return e?.run}filter(e){return this.#e.filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return this.#e.length}}class oh extends eh{#t;#n;#r=0;#a;#i;#o=0;#s;#c;#e;#l;#d=0;#u;#h;#m;timeout;constructor(e){if(super(),!("number"==typeof(e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:ih,...e}).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap?.toString()??""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval?.toString()??""}\` (${typeof e.interval})`);this.#t=e.carryoverConcurrencyCount,this.#n=e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,this.#a=e.intervalCap,this.#i=e.interval,this.#e=new e.queueClass,this.#l=e.queueClass,this.concurrency=e.concurrency,this.timeout=e.timeout,this.#m=!0===e.throwOnTimeout,this.#h=!1===e.autoStart}get#p(){return this.#n||this.#r<this.#a}get#f(){return this.#d<this.#u}#g(){this.#d--,this.#v(),this.emit("next")}#_(){this.#y(),this.#b(),this.#c=void 0}get#w(){const e=Date.now();if(void 0===this.#s){const t=this.#o-e;if(!(t<0))return void 0===this.#c&&(this.#c=setTimeout((()=>{this.#_()}),t)),!0;this.#r=this.#t?this.#d:0}return!1}#v(){if(0===this.#e.size)return this.#s&&clearInterval(this.#s),this.#s=void 0,this.emit("empty"),0===this.#d&&this.emit("idle"),!1;if(!this.#h){const e=!this.#w;if(this.#p&&this.#f){const t=this.#e.dequeue();return!!t&&(this.emit("active"),t(),e&&this.#b(),!0)}}return!1}#b(){this.#n||void 0!==this.#s||(this.#s=setInterval((()=>{this.#y()}),this.#i),this.#o=Date.now()+this.#i)}#y(){0===this.#r&&0===this.#d&&this.#s&&(clearInterval(this.#s),this.#s=void 0),this.#r=this.#t?this.#d:0,this.#x()}#x(){for(;this.#v(););}get concurrency(){return this.#u}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this.#u=e,this.#x()}async#k(e){return new Promise(((t,n)=>{e.addEventListener("abort",(()=>{n(e.reason)}),{once:!0})}))}async add(e,t={}){return t={timeout:this.timeout,throwOnTimeout:this.#m,...t},new Promise(((n,r)=>{this.#e.enqueue((async()=>{this.#d++,this.#r++;try{t.signal?.throwIfAborted();let r=e({signal:t.signal});t.timeout&&(r=function(e,t){const{milliseconds:n,fallback:r,message:a,customTimers:i={setTimeout:setTimeout,clearTimeout:clearTimeout}}=t;let o;const s=new Promise(((s,c)=>{if("number"!=typeof n||1!==Math.sign(n))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${n}\``);if(t.signal){const{signal:e}=t;e.aborted&&c(ah(e)),e.addEventListener("abort",(()=>{c(ah(e))}))}if(n===Number.POSITIVE_INFINITY)return void e.then(s,c);const l=new th;o=i.setTimeout.call(void 0,(()=>{if(r)try{s(r())}catch(e){c(e)}else"function"==typeof e.cancel&&e.cancel(),!1===a?s():a instanceof Error?c(a):(l.message=a??`Promise timed out after ${n} milliseconds`,c(l))}),n),(async()=>{try{s(await e)}catch(e){c(e)}})()})),c=s.finally((()=>{c.clear()}));return c.clear=()=>{i.clearTimeout.call(void 0,o),o=void 0},c}(Promise.resolve(r),{milliseconds:t.timeout})),t.signal&&(r=Promise.race([r,this.#k(t.signal)]));const a=await r;n(a),this.emit("completed",a)}catch(e){if(e instanceof th&&!t.throwOnTimeout)return void n();r(e),this.emit("error",e)}finally{this.#g()}}),t),this.emit("add"),this.#v()}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this.#h?(this.#h=!1,this.#x(),this):this}pause(){this.#h=!0}clear(){this.#e=new this.#l}async onEmpty(){0!==this.#e.size&&await this.#M("empty")}async onSizeLessThan(e){this.#e.size<e||await this.#M("next",(()=>this.#e.size<e))}async onIdle(){0===this.#d&&0===this.#e.size||await this.#M("idle")}async#M(e,t){return new Promise((n=>{const r=()=>{t&&!t()||(this.off(e,r),n())};this.on(e,r)}))}get size(){return this.#e.size}sizeBy(e){return this.#e.filter(e).length}get pending(){return this.#d}get isPaused(){return this.#h}}var sh,ch;!function(e){e.Clip="clip",e.Snapshot="snapshot",e.Recording="recording"}(sh||(sh={})),function(e){e.MP4="mp4",e.HLS="hls"}(ch||(ch={}));class lh{constructor(e,t){this._mediaType=e,this._cameraID=t?.cameraID??null,this._folder=t?.folder??null}getCameraID(){return this._cameraID}getFolder(){return this._folder}getMediaType(){return this._mediaType}getVideoContentType(){return null}getID(){return null}getStartTime(){return null}getEndTime(){return null}getUsableEndTime(){return this.getEndTime()??(this.inProgress()?new Date:this.getStartTime())}inProgress(){return null}getContentID(){return null}getTitle(){return null}getThumbnail(){return null}getIcon(){return null}isFavorite(){return null}includesTime(e){const t=this.getStartTime(),n=this.getUsableEndTime();return!!t&&!!n&&e>=t&&e<=n}setFavorite(e){}getWhere(){return null}}class dh{constructor(e,t){this._folder=e,this._icon=t?.icon??null,this._id=t?.id??null,this._title=t?.title??null,this._thumbnail=t?.thumbnail??null}getFolder(){return this._folder}getID(){return this._id}getTitle(){return this._title}getThumbnail(){return this._thumbnail}getIcon(){return this._icon}isFavorite(){return null}}class uh{static isMedia(e){return e instanceof lh}static isFolder(e){return e instanceof dh}static isEvent(e){return this.isMedia(e)&&(this.isClip(e)||this.isSnapshot(e))}static isRecording(e){return this.isMedia(e)&&"recording"===e.getMediaType()}static isClip(e){return this.isMedia(e)&&"clip"===e.getMediaType()}static isSnapshot(e){return this.isMedia(e)&&"snapshot"===e.getMediaType()}static isVideo(e){return this.isMedia(e)&&(this.isClip(e)||this.isRecording(e))}}const hh=e=>{return Gd((n=e=>e.getID()??e,(t=e)&&t.length?ou(t,Ad(n)):[]),[e=>!uh.isFolder(e),e=>uh.isMedia(e)?e.getStartTime()??e.getID():e.getID()],["asc","asc"]);var t,n},mh=["up","right","down","left"],ph=[...mh,"zoom_in","zoom_out"],fh=[...ph,"preset"],gh=["start","stop"],vh=Ar.extend({advanced_camera_card_action:br.literal("ptz"),camera:br.string().optional(),ptz_action:br.enum(fh).optional(),ptz_phase:br.enum(gh).optional(),ptz_preset:br.string().optional()}),_h="https://card.camera",yh=`${_h}/#/troubleshooting`,bh=`${yh}?id=stream-does-not-load`,wh=`${_h}/#/configuration`,xh=`${wh}/folders`,kh="cameras",Mh=`${kh}.#.always_error_if_entity_unavailable`,Ch=`${kh}.#.camera_entity`,Sh=`${kh}.#.frigate.camera_name`,Eh=`${kh}.#.capabilities.disable`,Ah=`${kh}.#.capabilities.disable_except`,Th=`${kh}.#.cast.method`,$h=`${kh}.#.cast.dashboard.dashboard_path`,Ih=`${kh}.#.cast.dashboard.view_path`,Oh=`${kh}.#.dimensions.aspect_ratio`,Lh=`${kh}.#.dimensions.rotation`,Dh=`${kh}.#.frigate.client_id`,jh=`${kh}.#.frigate.labels`,zh=`${kh}.#.frigate.url`,Ph=`${kh}.#.frigate.zones`,Rh=`${kh}.#.go2rtc.modes`,Nh=`${kh}.#.go2rtc.stream`,Fh=`${kh}.#.go2rtc.url`,Bh=`${kh}.#.icon`,Vh=`${kh}.#.id`,Hh=`${kh}.#.image.entity`,Uh=`${kh}.#.image.entity_parameters`,qh=`${kh}.#.image.mode`,Wh=`${kh}.#.image.refresh_seconds`,Zh=`${kh}.#.image.url`,Kh=`${kh}.#.motioneye.images.directory_pattern`,Qh=`${kh}.#.motioneye.images.file_pattern`,Yh=`${kh}.#.motioneye.movies.directory_pattern`,Gh=`${kh}.#.motioneye.movies.file_pattern`,Xh=`${kh}.#.motioneye.url`,Jh=`${kh}.#.title`,em=`${kh}.#.webrtc_card.entity`,tm=`${kh}.#.webrtc_card.url`,nm=`${kh}.#.live_provider`,rm=`${kh}.#.dependencies.cameras`,am=`${kh}.#.dependencies.all_cameras`,im=`${kh}.#.dimensions.layout.fit`,om=`${kh}.#.dimensions.layout.pan.x`,sm=`${kh}.#.dimensions.layout.pan.y`,cm=`${kh}.#.dimensions.layout.position.x`,lm=`${kh}.#.dimensions.layout.position.y`,dm=`${kh}.#.dimensions.layout.view_box.top`,um=`${kh}.#.dimensions.layout.view_box.bottom`,hm=`${kh}.#.dimensions.layout.view_box.left`,mm=`${kh}.#.dimensions.layout.view_box.right`,pm=`${kh}.#.dimensions.layout.zoom`,fm=`${kh}.#.proxy.dynamic`,gm=`${kh}.#.proxy.live`,vm=`${kh}.#.proxy.media`,_m=`${kh}.#.proxy.ssl_ciphers`,ym=`${kh}.#.proxy.ssl_verification`,bm=`${kh}.#.reolink.media_resolution`,wm=`${kh}.#.reolink.url`,xm=`${kh}.#.triggers.motion`,km=`${kh}.#.triggers.occupancy`,Mm=`${kh}.#.triggers.entities`,Cm=`${kh}.#.triggers.events`,Sm="cameras_global",Em=`${Sm}.live_provider`,Am=`${Sm}.triggers.occupancy`,Tm=`${Sm}.image.refresh_seconds`,$m=`${Sm}.dimensions.layout`,Im=`${Sm}.ptz`,Om="elements",Lm="folders",Dm=`${Lm}.#.ha.url`,jm=`${Lm}.#.icon`,zm=`${Lm}.#.id`,Pm=`${Lm}.#.title`,Rm=`${Lm}.#.type`,Nm="view",Fm=`${Nm}.camera_select`,Bm=`${Nm}.default`,Vm=`${Nm}.dim`,Hm=`${Nm}.interaction_seconds`,Um=`${Nm}.keyboard_shortcuts`,qm=`${Nm}.keyboard_shortcuts.enabled`,Wm=`${Um}.ptz_left`,Zm=`${Um}.ptz_right`,Km=`${Um}.ptz_up`,Qm=`${Um}.ptz_down`,Ym=`${Um}.ptz_zoom_in`,Gm=`${Um}.ptz_zoom_out`,Xm=`${Um}.ptz_home`,Jm=`${Nm}.default_cycle_camera`,ep=`${Nm}.default_reset`,tp=`${ep}.interaction_mode`,np=`${ep}.every_seconds`,rp=`${ep}.entities`,ap=`${ep}.after_interaction`,ip=`${Nm}.theme.themes`,op=`${Nm}.triggers`,sp=`${op}.show_trigger_status`,cp=`${op}.filter_selected_camera`,lp=`${op}.untrigger_seconds`,dp=`${op}.actions`,up=`${dp}.trigger`,hp=`${dp}.untrigger`,mp=`${dp}.interaction_mode`,pp="media_gallery",fp=`${pp}.controls.filter.mode`,gp=`${pp}.controls.thumbnails.show_details`,vp=`${pp}.controls.thumbnails.show_download_control`,_p=`${pp}.controls.thumbnails.show_favorite_control`,yp=`${pp}.controls.thumbnails.show_timeline_control`,bp=`${pp}.controls.thumbnails.size`,wp="media_viewer",xp=`${wp}.auto_play`,kp=`${wp}.auto_pause`,Mp=`${wp}.auto_mute`,Cp=`${wp}.auto_unmute`,Sp=`${wp}.display.mode`,Ep=`${wp}.display.grid_columns`,Ap=`${wp}.display.grid_max_columns`,Tp=`${wp}.display.grid_selected_position`,$p=`${wp}.display.grid_selected_width_factor`,Ip=`${wp}.draggable`,Op=`${wp}.lazy_load`,Lp=`${wp}.snapshot_click_plays_clip`,Dp=`${wp}.transition_effect`,jp=`${wp}.controls.builtin`,zp=`${wp}.controls.next_previous.style`,Pp=`${wp}.controls.next_previous.size`,Rp=`${wp}.controls.thumbnails.mode`,Np=`${wp}.controls.thumbnails.show_details`,Fp=`${wp}.controls.thumbnails.show_download_control`,Bp=`${wp}.controls.thumbnails.show_favorite_control`,Vp=`${wp}.controls.thumbnails.show_timeline_control`,Hp=`${wp}.controls.thumbnails.size`,Up=`${wp}.controls.timeline.clustering_threshold`,qp=`${wp}.controls.timeline.events_media_type`,Wp=`${wp}.controls.timeline.format.24h`,Zp=`${wp}.controls.timeline.mode`,Kp=`${wp}.controls.timeline.pan_mode`,Qp=`${wp}.controls.timeline.show_recordings`,Yp=`${wp}.controls.timeline.style`,Gp=`${wp}.controls.timeline.window_seconds`,Xp=`${wp}.controls.wheel`,Jp=`${wp}.zoomable`,ef="live",tf=`${ef}.auto_play`,nf=`${ef}.auto_pause`,rf=`${ef}.auto_mute`,af=`${ef}.auto_unmute`,of=`${ef}.controls.builtin`,sf=`${ef}.controls.next_previous.style`,cf=`${ef}.controls.next_previous.size`,lf=`${ef}.controls.ptz.hide_home`,df=`${ef}.controls.ptz.hide_pan_tilt`,uf=`${ef}.controls.ptz.hide_zoom`,hf=`${ef}.controls.ptz.mode`,mf=`${ef}.controls.ptz.orientation`,pf=`${ef}.controls.ptz.position`,ff=`${ef}.controls.wheel`,gf=`${ef}.controls.thumbnails.media_type`,vf=`${ef}.controls.thumbnails.events_media_type`,_f=`${ef}.controls.thumbnails.mode`,yf=`${ef}.controls.thumbnails.size`,bf=`${ef}.controls.thumbnails.show_details`,wf=`${ef}.controls.thumbnails.show_download_control`,xf=`${ef}.controls.thumbnails.show_favorite_control`,kf=`${ef}.controls.thumbnails.show_timeline_control`,Mf=`${ef}.controls.timeline.clustering_threshold`,Cf=`${ef}.controls.timeline.events_media_type`,Sf=`${ef}.controls.timeline.format.24h`,Ef=`${ef}.controls.timeline.mode`,Af=`${ef}.controls.timeline.pan_mode`,Tf=`${ef}.controls.timeline.show_recordings`,$f=`${ef}.controls.timeline.style`,If=`${ef}.controls.timeline.window_seconds`,Of=`${ef}.display.mode`,Lf=`${ef}.display.grid_columns`,Df=`${ef}.display.grid_max_columns`,jf=`${ef}.display.grid_selected_position`,zf=`${ef}.display.grid_selected_width_factor`,Pf=`${ef}.draggable`,Rf=`${ef}.lazy_load`,Nf=`${ef}.lazy_unload`,Ff=`${ef}.preload`,Bf=`${ef}.transition_effect`,Vf=`${ef}.show_image_during_load`,Hf=`${ef}.microphone.disconnect_seconds`,Uf=`${ef}.microphone.mute_after_microphone_mute_seconds`,qf=`${ef}.microphone.always_connected`,Wf=`${ef}.zoomable`,Zf="image",Kf=`${Zf}.entity`,Qf=`${Zf}.entity_parameters`,Yf=`${Zf}.mode`,Gf=`${Zf}.refresh_seconds`,Xf=`${Zf}.url`,Jf="timeline",eg=`${Jf}.window_seconds`,tg=`${Jf}.clustering_threshold`,ng=`${Jf}.events_media_type`,rg=`${Jf}.format.24h`,ag=`${Jf}.show_recordings`,ig=`${Jf}.style`,og=`${Jf}.controls.thumbnails.mode`,sg=`${Jf}.controls.thumbnails.size`,cg=`${Jf}.controls.thumbnails.show_details`,lg=`${Jf}.controls.thumbnails.show_download_control`,dg=`${Jf}.controls.thumbnails.show_favorite_control`,ug=`${Jf}.controls.thumbnails.show_timeline_control`,hg="menu",mg=`${hg}.alignment`,pg=`${hg}.position`,fg=`${hg}.style`,gg=`${hg}.button_size`,vg=`${hg}.buttons`,_g=`${vg}.fullscreen`,yg=`${vg}.iris`,bg=`${vg}.play`,wg=`${vg}.mute`,xg=`${vg}.media_player`,kg=`${vg}.timeline`,Mg="status_bar",Cg=`${Mg}.position`,Sg=`${Mg}.style`,Eg=`${Mg}.popup_seconds`,Ag=`${Mg}.height`,Tg=`${Mg}.items`,$g="dimensions",Ig=`${$g}.aspect_ratio`,Og=`${$g}.aspect_ratio_mode`,Lg=`${$g}.height`,Dg="overrides",jg="performance",zg=`${jg}.features.animated_progress_indicator`,Pg=`${jg}.features.card_loading_effects`,Rg=`${jg}.features.card_loading_indicator`,Ng=`${jg}.features.media_chunk_size`,Fg=`${jg}.features.max_simultaneous_engine_requests`,Bg=`${jg}.profile`,Vg=`${jg}.style.box_shadow`,Hg=`${jg}.style.border_radius`,Ug="profiles",qg="remote_control.entities.camera",Wg=1e3,Zg="__IMAGE_VIEW_ZOOM__";var Kg={abort:"Aborted action",confirmation:"Are you sure you want to perform this action"},Qg={advanced_camera_card:"Advanced Camera Card",advanced_camera_card_description:"An Advanced Camera Card",folder:"Folder",live:"Live",no_folder:"No folder to display",no_media:"No media to display",recordings:"Recordings",version:"Version"},Yg={cameras:{always_error_if_entity_unavailable:"Always treat entity unavailability as error",camera_entity:"Camera Entity",capabilities:{capabilities:{clips:"Clips","favorite-events":"Favorite Events","favorite-recordings":"Favorite Recordings",live:"Live",menu:"Menu",ptz:"PTZ",recordings:"Recordings",seek:"Seeking",snapshots:"Snapshots",substream:"Substream"},disable:"Disable",disable_except:"Disable except",editor_label:"Camera capabilities"},cast:{dashboard:{dashboard_path:"Dashboard path",view_path:"View path"},editor_label:"Cast options",method:"Cast method",methods:{dashboard:"Dashboard",standard:"Standard"}},dependencies:{all_cameras:"Show events for all cameras with this camera",cameras:"Show events for specific cameras with this camera",editor_label:"Dependency options"},dimensions:{aspect_ratio:"Static aspect ratio",editor_label:"Camera dimensions",layout:{editor_label:"Camera Layout",fit:"Layout fit",fits:{contain:"Media is contained/letterboxed",cover:"Media expands proportionally to cover the card",fill:"Media is stretched to fill the card"},pan:{x:"Pan horizontal percentage",y:"Pan vertical percentage"},position:{editor_label:"Layout Cover Position",x:"Horizontal placement percentage",y:"Vertical placement percentage"},view_box:{bottom:"Bottom inset percentage",editor_label:"Layout View Box",left:"Left inset percentage",right:"Right inset percentage",top:"Top inset percentage"},zoom:"Zoom factor"},rotation:"Rotation",rotations:{0:"No rotation",90:"90 degrees clockwise",180:"180 degrees clockwise",270:"270 degrees clockwise"}},engines:{editor_label:"Camera engine options"},frigate:{camera_name:"Frigate camera name (Autodetected from entity)",client_id:"Frigate client id (For >1 Frigate server)",editor_label:"Frigate options",labels:"Frigate labels/object filters",url:"Frigate server URL",zones:"Frigate zones"},go2rtc:{editor_label:"go2rtc Options",modes:{editor_label:"go2rtc Modes",mjpeg:"Motion JPEG (MJPEG)",mp4:"MPEG-4 (MP4)",mse:"Media Source Extensions (MSE)",webrtc:"Web Real-Time Communication (WebRTC)"},stream:"go2rtc stream name",url:"go2rtc URL"},icon:"Icon for this camera (Autodetected from entity)",id:"Unique ID for this camera in this card",image:{editor_label:"Image Options",refresh_seconds:"Number of seconds after which to refresh live image (0=never)",url:"Image URL to use instead of camera entity snapshot"},live_provider:"Live view provider for this camera",live_provider_options:{editor_label:"Live provider options"},live_providers:{auto:"Automatic",go2rtc:"go2rtc",ha:"Home Assistant video stream (i.e. HLS, LL-HLS, WebRTC via HA)",image:"Image",jsmpeg:"JSMpeg","webrtc-card":"WebRTC Card (i.e. AlexxIT's WebRTC Card)"},motioneye:{editor_label:"MotionEye options",images:{directory_pattern:"Images directory pattern",file_pattern:"Images file pattern"},movies:{directory_pattern:"Movies directory pattern",file_pattern:"Movies file pattern"},url:"MotionEye UI URL"},proxy:{dynamic:"Dynamic proxying",editor_label:"Camera proxying",live:"Live proxying",media:"Media proxying",modes:{auto:"Proxying automatically configured",false:"Proxying disabled",true:"Proxying enabled"},ssl_ciphers:{auto:"SSL ciphers automatically configured",default:"Default SSL ciphers",editor_label:"SSL ciphers",insecure:"Insecure SSL ciphers",intermediate:"Intermediate SSL ciphers",modern:"Modern SSL ciphers"},ssl_verification:{auto:"SSL verification automatically configured",editor_label:"SSL verification",false:"SSL verification disabled",true:"SSL verification enabled"}},reolink:{editor_label:"Reolink options",media_resolution:{editor_label:"Media Resolution",high:"High Resolution",low:"Low Resolution"},url:"Reolink UI URL"},title:"Title for this camera (Autodetected from entity)",triggers:{editor_label:"Trigger options",entities:"Trigger from other entities",events:{clips:"Events with new clips",editor_label:"Trigger Events",events:"All events",snapshots:"Events with new snapshots"},motion:"Trigger by auto-detecting the motion sensor",occupancy:"Trigger by auto-detecting the occupancy sensor"},webrtc_card:{editor_label:"WebRTC Card Options",entity:"WebRTC Card Camera Entity",url:"WebRTC Card Camera URL"}},common:{controls:{builtin:"Built-in video controls",filter:{editor_label:"Media Filter",mode:"Filter mode",modes:{left:"Media filter in a drawer to the left",none:"No media filter",right:"Media filter in a drawer to the right"}},next_previous:{editor_label:"Next & Previous",size:"Next & previous control size in pixels",style:"Next & previous control style",styles:{chevrons:"Chevrons",icons:"Icons",none:"None",thumbnails:"Thumbnails"}},thumbnails:{editor_label:"Thumbnails",events_media_type:"Whether to show event thumbnails of clips or snapshots",events_media_types:{clips:"Clip thumbnails",snapshots:"Snapshot thumbnails"},media_type:"Whether to show thumnails of events or recordings",media_types:{events:"Events",recordings:"Recordings"},mode:"Thumbnails mode",modes:{above:"Thumbnails above",below:"Thumbnails below",left:"Thumbnails in a drawer to the left",none:"No thumbnails",right:"Thumbnails in a drawer to the right"},show_details:"Show details with thumbnails",show_download_control:"Show download control on thumbnails",show_favorite_control:"Show favorite control on thumbnails",show_timeline_control:"Show timeline control on thumbnails",size:"Thumbnails size in pixels"},timeline:{editor_label:"Mini Timeline",format:{"24h":"Use 24-hour clock",editor_label:"Time & date format"},mode:"Mode",modes:{above:"Above",below:"Below",none:"None"},pan_mode:"Default pan mode",pan_modes:{pan:"Pan",seek:"Pan seeks across all media","seek-in-camera":"Pan seeks within selected camera only","seek-in-media":"Pan seeks within selected media item only"}},wheel:"Scroll wheel scrolls media carousel"},display:{editor_label:"Display",grid_columns:"Exact number of grid columns",grid_max_columns:"Maximum number of grid columns",grid_selected_position:"Position of selected media in grid",grid_selected_positions:{default:"Selected item in default position",first:"Selected item is first in grid",last:"Selected item is last in grid"},grid_selected_width_factor:"Increase selected media width by this factor",mode:"Mode"},image:{entity:"Entity for use with entity mode",entity_parameters:"Query parameters added to the entity-based picture URLs (e.g. width=1920&height=1080)",mode:"Image mode",modes:{camera:"Home Assistant camera snapshot of camera entity",entity:"Entity with entity_picture attribute",screensaver:"Embedded screensaver image",url:"Arbitrary image specified by URL"},refresh_seconds:"Number of seconds after which to refresh (0=never)",url:"Static image URL"},media_action_conditions:{all:"All opportunities",hidden:"On browser/tab hiding",microphone_mute:"On microphone mute",microphone_unmute:"On microphone unmute",never:"Never",selected:"On selection",unselected:"On unselection",visible:"On browser/tab visibility"},timeline:{clustering_threshold:"The count of events at which they are clustered (0=no clustering)",events_media_type:"The events media the timeline displays",events_media_types:{all:"All event media types",clips:"Clips",snapshots:"Snapshots"},show_recordings:"Show recordings",style:"Timeline style",styles:{ribbon:"Events on a single ribbon",stack:"Stacked & clustered events"},window_seconds:"The default length of the timeline view in seconds"}},dimensions:{aspect_ratio:"Default aspect ratio (e.g. '16:9')",aspect_ratio_mode:"Aspect ratio mode",aspect_ratio_modes:{dynamic:"Aspect ratio adjusts to media",static:"Static aspect ratio",unconstrained:"Unconstrained aspect ratio"},height:"Card height in CSS units (e.g. '500px')"},folders:{ha:{editor_label:"Home Assistant Media Folder Options",path_info:"Additional path matching functionality is available in the text editor",url:"URL of media folder"},icon:"Icon for this folder",id:"Unique ID for this folder in this card",title:"Title for this folder",type:"Folder type",types:{ha:"Home Assistant Media Folder"}},live:{auto_mute:"Automatically mute live cameras",auto_pause:"Automatically pause live cameras",auto_play:"Automatically play live cameras",auto_unmute:"Automatically unmute live cameras",controls:{editor_label:"Live Controls",ptz:{editor_label:"PTZ",hide_home:"Hide home & preset controls",hide_pan_tilt:"Hide pan & tilt control",hide_zoom:"Hide zoom control",mode:"Mode",modes:{off:"Off",on:"On"},orientation:"Orientation",orientations:{horizontal:"Horizontal",vertical:"Vertical"},position:"Position",positions:{"bottom-left":"Bottom left","bottom-right":"Bottom right","top-left":"Top left","top-right":"Top right"}}},draggable:"Live cameras view can be dragged/swiped",lazy_load:"Live cameras are lazily loaded",lazy_unload:"Live cameras are lazily unloaded",microphone:{always_connected:"Always keep the microphone connected",disconnect_seconds:"Seconds after which to disconnect microphone (0=never)",editor_label:"Microphone",enabled:"Microphone enabled",mute_after_microphone_mute_seconds:"Seconds after microphone mute to mute inbound audio"},preload:"Preload live view in the background",show_image_during_load:"Show still image while the live stream is loading",transition_effect:"Live camera transition effect",zoomable:"Live cameras can be zoomed/panned"},media_viewer:{auto_mute:"Automatically mute media",auto_pause:"Automatically pause media",auto_play:"Automatically play media",auto_unmute:"Automatically unmute media",controls:{editor_label:"Media Viewer Controls"},draggable:"Media Viewer can be dragged/swiped",lazy_load:"Media Viewer media is lazily loaded in carousel",snapshot_click_plays_clip:"Clicking on a snapshot plays a related clip",transition_effect:"Media Viewer transition effect",transition_effects:{none:"No transition",slide:"Slide transition"},zoomable:"Media Viewer can be zoomed/panned"},menu:{alignment:"Menu alignment",alignments:{bottom:"Aligned to the bottom",left:"Aligned to the left",right:"Aligned to the right",top:"Aligned to the top"},button_size:"Menu button size in pixels",buttons:{alignment:"Button alignment",alignments:{matching:"Matching the menu alignment",opposing:"Opposing the menu alignment"},camera_ui:"Camera user interface",cameras:"Cameras",clips:"Clips",display_mode:"Display mode",download:"Download",enabled:"Button enabled",expand:"Expand",folders:"Folders",fullscreen:"Fullscreen",icon:"Icon",image:"Image",iris:"Iris / Default View / Unhide menu",live:"Live",media_player:"Send to media player",microphone:"Microphone",mute:"Mute / Unmute",permanent:"Show when the menu is hidden",play:"Play / Pause",priority:"Priority",ptz_controls:"Show PTZ controls",ptz_home:"PTZ Home",recordings:"Recordings",screenshot:"Screenshot",snapshots:"Snapshots",substreams:"Substream(s)",timeline:"Timeline",type:"Button type",types:{momentary:"Momentary",toggle:"Toggle"}},position:"Menu position",positions:{bottom:"Positioned on the bottom",left:"Positioned on the left",right:"Positioned on the right",top:"Positioned on the top"},style:"Menu style",styles:{hidden:"Hidden menu",hover:"Hover menu","hover-card":"Hover menu (card-wide)",none:"No menu",outside:"Outside menu",overlay:"Overlay menu"}},overrides:{info:"This card configuration has manually specified overrides configured which may override values shown in the visual editor, please consult the code editor to view/modify these overrides"},performance:{features:{animated_progress_indicator:"Animated Progress Indicator",card_loading_effects:"Card Loading Effects",card_loading_indicator:"Card Loading Indicator",editor_label:"Feature Options",max_simultaneous_engine_requests:"Max simultaneous camera engine requests",media_chunk_size:"Media chunk size"},style:{border_radius:"Curves",box_shadow:"Shadows",editor_label:"Style Options"},warning:"This card is in low profile mode so defaults have changed to optimize performance"},profiles:{casting:"Casting",editor_label:"Configuration profiles","low-performance":"Low performance",scrubbing:"Video scrubbing"},remote_control:{entities:{camera:"Input Select entity to control camera",editor_label:"Remote Control Entities"}},status_bar:{height:"Status bar height in pixels",items:{enabled:"Item enabled",engine:"Camera engine",live_provider:"Live provider",priority:"Item priority",resolution:"Resolution",technology:"Technology",title:"Title"},popup_seconds:"Status bar popup seconds",position:"Status bar position",positions:{bottom:"Positioned on the bottom",top:"Positioned on the top"},style:"Status bar style",styles:{hover:"Hover status bar","hover-card":"Hover status bar (card-wide)",none:"No status bar",outside:"Outside status bar",overlay:"Overlay status bar",popup:"Popup status bar"}},view:{camera_select:"View for newly selected cameras",default:"Default view",default_cycle_camera:"Cycle through cameras when default view updates",default_reset:{after_interaction:"Reset to the default view after user interaction ends",editor_label:"Default view reset behavior",entities:"Reset to the default view on entity state change",every_seconds:"Reset to default view every X seconds (0=never)",interaction_mode:"How default reset behaves when the card has human interaction",interaction_modes:{active:"Only allow reset when card has active human interaction",all:"Reset regardless of human interaction",inactive:"Only reset when card has no human interaction"}},dim:"Dim when no interaction",interaction_seconds:"Seconds after user action to remain interacted with (0=never)",keyboard_shortcuts:{editor_label:"Keyboard shortcuts",enabled:"Keyboard shortcuts enabled",ptz_down:"PTZ Down",ptz_home:"PTZ Home",ptz_left:"PTZ Left",ptz_right:"PTZ Right",ptz_up:"PTZ Up",ptz_zoom_in:"PTZ Zoom In",ptz_zoom_out:"PTZ Zoom Out"},theme:{themes:{dark:"Dark",editor_label:"Themes",ha:"Home Assistant",light:"Light",traditional:"Traditional"}},triggers:{actions:{editor_label:"Trigger actions",interaction_mode:"How to handle actions when the card has human interaction",interaction_modes:{active:"Only trigger actions when card has human interaction",all:"Trigger actions regardless of human interaction",inactive:"Only trigger actions when card has no human interaction"},trigger:"Trigger action",triggers:{default:"Change to or update default view",live:"Change to or update live view",media:"Change to the relevant media view for new media",none:"No action"},untrigger:"Untrigger action",untriggers:{default:"Change to default view/camera",none:"No action"}},editor_label:"Trigger behavior",filter_selected_camera:"Only trigger on selected camera",show_trigger_status:"Show pulsing border when triggered",untrigger_seconds:"Seconds after inactive state change to untrigger"},views:{clip:"Most recent clip",clips:"Clips gallery",current:"Current view",folder:"Folder media",folders:"Folders gallery",image:"Static image",live:"Live view",recording:"Most recent recording",recordings:"Recordings gallery",snapshot:"Most recent snapshot",snapshots:"Snapshots gallery",timeline:"Timeline view"}}},Gg={grid:"Show media viewer for each camera in a grid",single:"Show single media viewer"},Xg={add_new_camera:"Add new camera",add_new_folder:"Add new folder",button:"Button",camera:"Camera",cameras:"Cameras",cameras_secondary:"What cameras to render on this card",delete:"Delete",dimensions:"Card dimensions",dimensions_secondary:"Card dimensions & shape options",folders:"Folders",folders_secondary:"What folders to render on this card",image:"Image",image_secondary:"Static image view options",live:"Live",live_secondary:"Live camera view options",media_gallery:"Media gallery",media_gallery_secondary:"Media gallery options",media_viewer:"Media viewer",media_viewer_secondary:"Viewer for static media (clips, snapshots or recordings)",menu:"Menu",menu_secondary:"Menu look & feel options",move_down:"Move down",move_up:"Move up",overrides:"Overrides are active",overrides_secondary:"Dynamic configuration overrides detected",performance:"Performance",performance_secondary:"Card performance options",profiles:"Configuration profiles",profiles_secondary:"Choose pre-configured sets of defaults",remote_control:"Remote Control",remote_control_secondary:"Options for remote controlling the card",status_bar:"Status bar",status_bar_secondary:"Status bar look & feel options",timeline:"Timeline",timeline_secondary:"Event timeline options",upgrade:"Upgrade",upgrade_available:"An automatic card configuration upgrade is available",view:"View",view_secondary:"What the card should show and how to show it"},Jg={ptz:{down:"Down",home:"Home",left:"Left",presets:"Presets",right:"Right",up:"Up",zoom_in:"Zoom In",zoom_out:"Zoom Out"}},ev={awaiting_folder:"Waiting for folder to load",awaiting_live:"Waiting for live stream to load ...",awaiting_media:"Waiting for media to load",camera_initialization:"Camera initialization failed",camera_initialization_reolink:"Could not initialize Reolink camera",configuration:"Check configuration",could_not_render_elements:"Could not render picture elements",could_not_resolve:"Could not resolve media URL",diagnostics:"Card diagnostics. Please review for confidential information prior to sharing",download_no_media:"No media to download",download_sign_failed:"Could not sign media URL for download",duplicate_camera_id:"Duplicate camera id for the following camera, use the 'id' parameter to uniquely identify cameras",duplicate_folder_id:"Duplicate folder id for the following folder, use the 'id' parameter to uniquely identify folders",empty_response:"Received empty response from Home Assistant for request",failed_fetch:"Could not fetch URL",failed_proxy:"Could not proxy via Home Assistant",failed_response:"Failed to receive response from Home Assistant for request",failed_retain:"Could not retain event",failed_sign:"Could not sign Home Assistant URL",fetching_diagnostics:"Fetching diagnostics",image_load_error:"The image could not be loaded",invalid_configuration:"Invalid configuration",invalid_configuration_no_hint:"No location hint available (bad or missing type?)",invalid_configuration_override:"Invalid override configuration",invalid_elements_config:"Invalid picture elements configuration",invalid_response:"Received invalid response from Home Assistant for request",jsmpeg_no_player:"Could not start JSMPEG player",live_camera_no_endpoint:"Could not get camera endpoint for this live provider (incomplete configuration?)",live_camera_not_found:"The configured camera_entity was not found",live_camera_unavailable:"Camera unavailable",no_camera_engine:"Could not determine suitable engine for camera",no_camera_entity:"Could not find camera entity",no_camera_entity_for_triggers:"A camera entity is required in order to autodetect triggers",no_camera_id:"Could not determine camera id for the following camera, may need to set 'id' parameter manually",no_camera_or_media_for_timeline:"No camera or media available for timeline",no_dashboard_or_view:"Both 'dashboard_path' and 'view_path' parameters are required for the 'dashboard' cast method",no_live_camera:"The camera_entity parameter must be set and valid for this live provider",no_supported_camera:"The selected camera or media does not support this view",no_supported_cameras:"No cameras support this view",reconnecting:"Reconnecting",stream_not_loading:"The video stream has not yet loaded. This is could for any number of reasons. If configured (and by default), there will be an image refreshing every second until the stream loads correctly",too_many_automations:"Too many nested automation calls, please check your configuration for loops",troubleshooting:"Check troubleshooting",unknown:"Unknown error",upgrade_available:"An automated card configuration upgrade is available, please visit the visual card editor",webrtc_card_reported_error:"WebRTC Card reported an error",webrtc_card_waiting:"Waiting for WebRTC Card to load ..."},tv={assign:"Assign",modifiers:{alt:"Alt",ctrl:"Ctrl",meta:"Meta",shift:"Shift"},unassign:"Unassign"},nv={all:"All",camera:"Camera",favorite:"Favorite",media_type:"Media Type",media_types:{clips:"Clips",recordings:"Recordings",snapshots:"Snapshots"},not_favorite:"Not Favorite",select_camera:"Select camera...",select_favorite:"Select favorite...",select_media_type:"Select media type...",select_tag:"Select tag...",select_what:"Select what...",select_when:"Select when...",select_where:"Select where...",tag:"Tag",what:"What",when:"When",whens:{custom:"Custom",past_month:"Past Month",past_week:"Past Week",today:"Today",yesterday:"Yesterday"},where:"Where"},rv={unseekable:"Seek time not found in media"},av={camera:"Camera",download:"Download media",duration:"Duration",events:"Events",in_progress:"In Progress",no_thumbnail:"No thumbnail available",retain_indefinitely:"Media will be indefinitely retained",score:"Score",seek:"Seek",start:"Start",tag:"Tag",timeline:"See media in timeline",title:"Title",what:"What",where:"Where"},iv={select_date:"Choose date"},ov={actions:Kg,common:Qg,config:Yg,display_modes:Gg,editor:Xg,elements:Jg,error:ev,key_assigner:tv,media_filter:nv,media_viewer:rv,thumbnail:av,timeline:iv},sv=Object.freeze({__proto__:null,actions:Kg,common:Qg,config:Yg,default:ov,display_modes:Gg,editor:Xg,elements:Jg,error:ev,key_assigner:tv,media_filter:nv,media_viewer:rv,thumbnail:av,timeline:iv});const cv="en",lv={[cv]:sv};let dv;function uv(e){const t=e=>e.replace("-","_"),n=e?.language??e?.selectedLanguage;if(n)return t(n);const r=localStorage.getItem("selectedLanguage");if(r){const e=JSON.parse(r);if(e)return t(e)}for(const e of navigator.languages){const n=t(e);if(n&&n in lv)return n}return cv}function hv(e,t="",n=""){let r="";try{r=e.split(".").reduce(((e,t)=>e[t]),lv[dv??cv])}catch(e){}return r||(r=e.split(".").reduce(((e,t)=>e[t]),lv[cv])),""!==t&&""!==n&&(r=r.replace(t,n)),r}function mv(e){return"string"==typeof e?.id&&e.id||"string"==typeof e?.camera_entity&&e.camera_entity||"object"==typeof e?.webrtc_card&&e.webrtc_card&&("string"==typeof e.webrtc_card.entity&&e.webrtc_card.entity||"string"==typeof e.webrtc_card.url&&e.webrtc_card.url)||"object"==typeof e?.go2rtc&&e.go2rtc&&"string"==typeof e.go2rtc.url&&"string"==typeof e.go2rtc.stream&&`${e.go2rtc.url}#${e.go2rtc.stream}`||"object"==typeof e?.frigate&&e.frigate&&"string"==typeof e?.frigate.camera_name&&e.frigate.camera_name||""}const pv=(e,...t)=>{e?.debug?.logging&&console.debug(...t)};class fv{constructor(e,t){this._capabilities=e;for(const e of t?.disable??[])this._disable(e);for(const e of lu)t?.disableExcept?.length&&!t.disableExcept.includes(e)&&this._disable(e)}_disable(e){delete this._capabilities[e]}matches(e){let t=!0;return"string"==typeof e&&(t&&=this.has(e)),"object"==typeof e&&e.allCapabilities&&(t&&=e.allCapabilities.every((e=>this.has(e)))),"object"==typeof e&&e.anyCapabilities&&(t&&=e.anyCapabilities.some((e=>this.has(e)))),t}has(e){return!!this._capabilities[e]}getPTZCapabilities(){return this._capabilities.ptz??null}hasPTZCapability(){return!!(this._capabilities.ptz?.down?.length||this._capabilities.ptz?.up?.length||this._capabilities.ptz?.left?.length||this._capabilities.ptz?.right?.length||this._capabilities.ptz?.zoomIn?.length||this._capabilities.ptz?.zoomOut?.length||this._capabilities.ptz?.presets?.length)}getRawCapabilities(){return this._capabilities}}async function gv(e,t,n,r=!1){let a;try{a=await e.callWS(n)}catch(e){throw new cu(hv("error.failed_response"),{request:n,response:e})}if(!a)throw new cu(hv("error.empty_response"),{request:n});try{return t.parse(r?JSON.parse(a):a)}catch(e){throw new cu(hv("error.invalid_response"),{request:n,response:a,error:e})}}class vv{constructor(e){this._cache=e}has(e){return this._cache.has(e)}entries(){return this._cache.entries()}delete(e){return this._cache.delete(e)}clear(){this._cache.clear()}get(e){return this._cache.get(e)??null}getMatches(e){return[...this._cache.values()].filter(e)}set(e,t){this._cache.set(e,t)}}class _v{constructor(){this._data=[]}get[Symbol.toStringTag](){return"EqualityMap"}has(e){return!!this.get(e)}get(e){for(const t of this._data)if(qd(t.key,e))return t.value}set(e,t){return this.delete(e),this._data.push({key:e,value:t}),this}delete(e){for(let t=0;t<this._data.length;t++)if(qd(this._data[t].key,e))return this._data.splice(t,1),!0;return!1}clear(){this._data=[]}*entries(){for(const e of this._data)yield[e.key,e.value]}forEach(e,t){for(const n of this._data)e.call(t,n.value,n.key,this)}get size(){return this._data.length}[Symbol.iterator](){return this.entries()}keys(){return this._data.map((e=>e.key)).values()}values(){return this._data.map((e=>e.value)).values()}}class yv extends vv{constructor(){super(new _v)}}class bv{constructor(){this._data=new yv}get(e){const t=this._data.get(e),n=new Date;return t&&(!t.expires||n<=t.expires)?t.value:null}has(e){return!!this.get(e)}set(e,t,n){this._data.set(e,{value:t,expires:n}),this._expireOldValues()}delete(e){return this._data.delete(e)}clear(){this._data.clear()}*entries(){const e=new Date;for(const[t,n]of this._data.entries())(!n.expires||e<=n.expires)&&(yield[t,n.value])}getMatches(e){const t=[];for(const[n,r]of this.entries())e(r)&&t.push(r);return t}_expireOldValues(){const e=new Date;for(const[t,n]of this._data.entries())n.expires&&e>n.expires&&this._data.delete(t)}}const wv=br.lazy((()=>br.object({title:br.string(),media_class:br.string(),media_content_type:br.string(),media_content_id:br.string(),can_play:br.boolean(),can_expand:br.boolean(),children_media_class:br.string().nullable().optional(),thumbnail:br.string().nullable(),children:br.array(wv).nullable().optional()})));class xv extends bv{}const kv="video",Mv="image",Cv=60;class Sv{async walk(e,t,n){return t&&t.length?(await xu(t,(async t=>await this._walkBrowseMedia(e,t,n)))).flat():[]}async _walkBrowseMedia(e,t,n){let r=[];for(const a of function(e,t,n){t=(n?ss(e,t,n):void 0===t)?1:wc(po(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var a=0,i=0,o=Array(bc(r/t));a<r;)o[i++]=vc(e,a,a+=t);return o}(t.targets,t.concurrency??1/0)){const i=await xu(a,(async r=>await this._browseMedia(e,r,{cache:n?.cache,metadataGenerator:t.metadataGenerator})));for(const e of i)for(const n of e.children??[])t.matcher&&!t.matcher(n)||r.push(n);if(t.sorter&&(r=t.sorter(r)),t.earlyExit&&t.earlyExit(r))break}const a=t.advance?t.advance(r):null;return a?.length?await this.walk(e,a,n):r}async _browseMedia(e,t,n){const r="object"==typeof t?t.media_content_id:t,a=n?.cache?n.cache.get(r):null;if(a)return a;const i={type:"media_source/browse_media",media_content_id:r},o=await gv(e,wv,i);if(n?.metadataGenerator)for(const e of o.children??[])e._metadata=n.metadataGenerator(e,"object"==typeof t?t:void 0)??void 0;return n?.cache&&n.cache.set(r,o,jr(new Date,{seconds:60})),o}}class Ev{constructor(e){this._ranges=e??[]}hasCoverage(e){return this._ranges.some((t=>Tv(t,e)))}add(e){this._ranges.push(e),this._ranges=Iv(this._ranges)}clear(){this._ranges=[]}}class Av{constructor(e){this._ranges=e??[]}hasCoverage(e){const t=new Date;return this._ranges.some((n=>t<n.expires&&Tv(n,e)))}add(e){this._ranges.push(e),this._expireOldRanges()}_expireOldRanges(){const e=new Date;this._ranges=this._ranges.filter((t=>e<t.expires))}clear(){this._ranges=[]}}const Tv=(e,t)=>t.start>=e.start&&t.end<=e.end,$v=(e,t)=>e.start>=t.start&&e.start<=t.end||e.end>=t.start&&e.end<=t.end||e.start<=t.start&&e.end>=t.end,Iv=(e,t=0)=>{const n=[];e=Gd(e,(e=>e.start),"asc");let r=null;for(const a of e){const e=a.start instanceof Date?a.start.getTime():a.start;if(!r){r={...a};continue}(r.end instanceof Date?r.end.getTime():r.end)+1e3*t>=e?a.end>r.end&&(r.end=a.end):(n.push(r),r={...a})}return r&&n.push(r),n};class Ov{constructor(e,t){this._ranges=new Ev,this._data=[],this._timeFunc=e,this._idFunc=t}add(e,t){this._ranges.add(e),this._data=tu(Gd(this._data.concat(t),this._timeFunc,"asc"),this._idFunc)}hasCoverage(e){return this._ranges.hasCoverage(e)}get(e){if(!this.hasCoverage(e))return null;const t=[];for(const n of this._data){const r=this._timeFunc(n);if(r>=e.start.getTime()){if(r>e.end.getTime())break;t.push(n)}}return t}getSize(){return this._data.length}expireMatches(e){this._data=this._data.filter((t=>!e(t)))}}class Lv{constructor(){this._segments=new Map}add(e,t,n){let r=this._segments.get(e);r||(r=new Ov((e=>1e3*e.start_time),(e=>e.id)),this._segments.set(e,r)),r.add(t,n)}clear(){this._segments.clear()}hasCoverage(e,t){return!!this._segments.get(e)?.hasCoverage(t)}get(e,t){return this._segments.get(e)?.get(t)??null}getSize(e){return this._segments.get(e)?.getSize()??null}getCameraIDs(){return[...this._segments.keys()]}expireMatches(e,t){this._segments.get(e)?.expireMatches(t)}}class Dv extends cu{}class jv extends cu{}var zv,Pv,Rv;!function(e){e.Event="event-query",e.Recording="recording-query",e.RecordingSegments="recording-segments-query",e.MediaMetadata="media-metadata"}(zv||(zv={})),function(e){e.Event="event-results",e.Recording="recording-results",e.RecordingSegments="recording-segments-results",e.MediaMetadata="media-metadata-results"}(Pv||(Pv={})),function(e){e.Frigate="frigate",e.Generic="generic",e.MotionEye="motioneye",e.Reolink="reolink",e.TPLink="tplink"}(Rv||(Rv={}));class Nv extends bv{}const Fv=e=>e?.camera_entity??e?.webrtc_card?.entity??null;class Bv{constructor(e,t){this._entityRegistryManager=e,this._deviceRegistryManager=t}async createEngine(e,t){let n;switch(e){case Rv.Generic:const{GenericCameraManagerEngine:e}=await import("./engine-generic-6a462c39.js").then((function(e){return e.e}));n=new e(t.stateWatcher,t.eventCallback);break;case Rv.Frigate:const{FrigateCameraManagerEngine:r}=await import("./engine-frigate-1550bf03.js");n=new r(this._entityRegistryManager,t.stateWatcher,new Lv,new Nv,t.eventCallback);break;case Rv.MotionEye:const{MotionEyeCameraManagerEngine:a}=await import("./engine-motioneye-ec03e87e.js");n=new a(this._entityRegistryManager,t.stateWatcher,new Sv,t.resolvedMediaCache,new Nv,t.eventCallback);break;case Rv.Reolink:const{ReolinkCameraManagerEngine:i}=await import("./engine-reolink-670ce9ad.js");n=new i(this._entityRegistryManager,this._deviceRegistryManager,t.stateWatcher,new Sv,t.resolvedMediaCache,new Nv,t.eventCallback);break;case Rv.TPLink:const{TPLinkCameraManagerEngine:o}=await import("./engine-tplink-fedae775.js");n=new o(this._entityRegistryManager,t.stateWatcher,t.eventCallback)}return n}async getEngineForCamera(e,t){let n=null;if("frigate"===t.engine)n=Rv.Frigate;else if("motioneye"===t.engine)n=Rv.MotionEye;else if("generic"===t.engine)n=Rv.Generic;else if("reolink"===t.engine)n=Rv.Reolink;else if("tplink"===t.engine)n=Rv.TPLink;else{const r=Fv(t);if(r){const a=await this._entityRegistryManager.getEntity(e,r);if(!a){if(e.states[r])return Rv.Generic;throw new Dv(hv("error.no_camera_entity"),t)}switch(a?.platform){case"frigate":n=Rv.Frigate;break;case"motioneye":n=Rv.MotionEye;break;case"reolink":n=Rv.Reolink;break;case"tplink":n=Rv.TPLink;break;default:n=Rv.Generic}}else t.frigate.camera_name?n=Rv.Frigate:(t.webrtc_card?.url||t.go2rtc?.url&&t.go2rtc?.stream)&&(n=Rv.Generic)}return n}}class Vv{constructor(){this._cameras=new Map,this._enginesByType=new Map}addCamera(e){this._cameras.set(e.getID(),e),this._enginesByType.set(e.getEngine().getEngineType(),e.getEngine())}async setCameras(e){for(const t of e){const e=this._cameras.get(t.getID());e!==t&&(this.addCamera(t),await(e?.destroy()))}for(const t of this._cameras.values())e.includes(t)||(await t.destroy(),this._cameras.delete(t.getID()))}async reset(){await xu(this._cameras.values(),(e=>e.destroy())),this._cameras.clear(),this._enginesByType.clear()}getCamera(e){return this._cameras.get(e)??null}getCameras(){return this._cameras}getCameraConfig(e){return this._cameras.get(e)?.getConfig()??null}hasCameraID(e){return this._cameras.has(e)}getCameraCount(){return this._cameras.size}getDefaultCameraID(){return this._cameras.keys().next().value??null}*getCameraConfigs(e){for(const[t,n]of this.getCameraConfigEntries(e))yield n}*getCameraConfigEntries(e){for(const t of e??this._cameras.keys()){const e=this.getCameraConfig(t);e&&(yield[t,e])}}getCameraIDs(){return new Set(this._cameras.keys())}getCameraIDsWithCapability(e,t){const n=new Set;for(const r of this._cameras.values())this.getAllDependentCameras(r.getID(),e,t).forEach((e=>{n.add(e)}));return n}getCameraConfigForMedia(e){const t=e.getCameraID();return t?this.getCameraConfig(t):null}getEngineOfType(e){return this._enginesByType.get(e)??null}getEngineForCameraID(e){return this._cameras.get(e)?.getEngine()??null}getEnginesForCameraIDs(e){const t=new Map;for(const n of e){const e=this.getEngineForCameraID(n);e&&(t.has(e)||t.set(e,new Set),t.get(e)?.add(n))}return t.size?t:null}getEngineForMedia(e){const t=e.getCameraID();return t?this.getEngineForCameraID(t):null}getAllDependentCameras(e,t,n){const r=new Set,a=e=>{r.add(e);const i=new Set,o=this.getCamera(e),s=o?.getConfig();if(!o||!s)return i;const c=new Set;s.dependencies.cameras.forEach((e=>c.add(e))),s.dependencies.all_cameras&&this.getCameraIDs().forEach((e=>c.add(e)));const l=new Set;for(const e of c)r.has(e)||a(e).forEach((e=>l.add(e)));return new Set([...!t||o.getCapabilities()?.matches(t)||n?.inclusive&&l.size?[e]:[],...l])};return a(e)}}class Hv{static isEventQuery(e){return e.type===zv.Event}static isRecordingQuery(e){return e.type===zv.Recording}static isRecordingSegmentsQuery(e){return e.type===zv.RecordingSegments}static isMediaMetadataQuery(e){return e.type===zv.MediaMetadata}}class Uv{static isEventQueryResult(e){return e?.type===Pv.Event}static isRecordingQueryResult(e){return e?.type===Pv.Recording}static isRecordingSegmentsQueryResult(e){return e?.type===Pv.RecordingSegments}static isMediaMetadataQueryResult(e){return e?.type===Pv.MediaMetadata}}class qv{constructor(e,t){this._requestLimit=new oh,this._api=e,this._engineFactory=t?.factory??new Bv(this._api.getEntityRegistryManager(),this._api.getDeviceRegistryManager()),this._store=t?.store??new Vv}async initializeCamerasFromConfig(){const e=this._api.getConfigManager().getConfig(),t=this._api.getHASSManager().getHASS();if(!e||!t)return!1;this._requestLimit.concurrency=e.performance.features.max_simultaneous_engine_requests??1/0;const n=e.cameras.map((t=>{return n={},r=Nl(e?.cameras_global),Vd(n,r,t,((e,t)=>Array.isArray(t)?t:void 0));var n,r}));try{await this._initializeCameras(n)}catch(e){return this._api.getMessageManager().setErrorIfHigherPriority(e,hv("error.camera_initialization")),!1}return!0}async destroy(){await this._store.reset()}async _getEnginesForCameras(e){const t=new Map,n=new Map,r=this._api.getHASSManager().getHASS();
/* istanbul ignore if: the if path cannot be reached -- @preserve */
if(!r)return t;const a=await(async e=>await xu(e,(e=>this._engineFactory.getEngineForCamera(r,e))))(e);for(const[r,i]of e.entries()){const e=a[r],o=e?n.get(e)??await this._engineFactory.createEngine(e,{eventCallback:e=>this._api.getTriggersManager().handleCameraEvent(e),stateWatcher:this._api.getHASSManager().getStateWatcher(),resolvedMediaCache:this._api.getResolvedMediaCache()}):null;if(!o||!e)throw new Dv(hv("error.no_camera_engine"),Nl(i));n.set(e,o),t.set(i,o)}return t}async _initializeCameras(e){const t=new Date,n=this._api.getHASSManager().getHASS();
/* istanbul ignore if: the if path cannot be reached -- @preserve */
if(!n)return;e.some((e=>(e=>e.triggers.motion||e.triggers.occupancy)(e)))&&await this._api.getEntityRegistryManager().fetchEntityList(n);const r=await this._getEnginesForCameras(e),a=await xu(r.entries(),(async([e,t])=>await t.createCamera(n,e))),i=async()=>{a.forEach((e=>e.destroy()))},o=new Set;for(const e of a){const t=mv(e.getConfig());if(!t)throw await i(),new Dv(hv("error.no_camera_id"),e.getConfig());if(o.has(t))throw await i(),new Dv(hv("error.duplicate_camera_id"),e.getConfig());e.setID(t),o.add(t)}await this._store.setCameras(a),pv(this._api.getConfigManager().getCardWideConfig(),"Advanced Camera Card CameraManager initialized (Cameras: ",this._store.getCameras(),`, Duration: ${((new Date).getTime()-t.getTime())/1e3}s,`,")")}isInitialized(){return this._store.getCameraCount()>0}getStore(){return this._store}generateDefaultEventQueries(e,t){return this._generateDefaultQueries(e,{type:zv.Event,...t})}generateDefaultRecordingQueries(e,t){return this._generateDefaultQueries(e,{type:zv.Recording,...t})}generateDefaultRecordingSegmentsQueries(e,t){return this._generateDefaultQueries(e,{type:zv.RecordingSegments,...t})}_generateDefaultQueries(e,t){const n=[],r=pu(e),a=this._store.getEnginesForCameraIDs(r);if(!a)return null;for(const[e,r]of a){let a=null;
/* istanbul ignore else: the else path cannot be reached -- @preserve */Hv.isEventQuery(t)?a=e.generateDefaultEventQuery(this._store,r,t):Hv.isRecordingQuery(t)?a=e.generateDefaultRecordingQuery(this._store,r,t):Hv.isRecordingSegmentsQuery(t)&&(a=e.generateDefaultRecordingSegmentsQuery(this._store,r,t));for(const e of a??[])n.push(e)}return n.length?n:null}async getMediaMetadata(){const e=new Set,t=new Set,n=new Set,r=new Set,a={type:zv.MediaMetadata,cameraIDs:this._store.getCameraIDs()},i=await this._handleQuery(a);for(const a of i.values())a.metadata.tags&&a.metadata.tags.forEach(e.add,e),a.metadata.what&&a.metadata.what.forEach(t.add,t),a.metadata.where&&a.metadata.where.forEach(n.add,n),a.metadata.days&&a.metadata.days.forEach(r.add,r);return t.size||n.size||r.size||e.size?{...e.size&&{tags:e},...t.size&&{what:t},...n.size&&{where:n},...r.size&&{days:r}}:null}async getEvents(e,t){return await this._handleQuery(e,t)}async getRecordings(e,t){return await this._handleQuery(e,t)}async getRecordingSegments(e,t){return await this._handleQuery(e,t)}async executeMediaQueries(e,t){return this._convertQueryResultsToMedia(await this._handleQuery(e,t))}async extendMediaQueries(e,t,n,r){if(!this._api.getHASSManager().getHASS())return null;const a=e=>{let n=null;for(const r of t){if(!uh.isMedia(r))continue;const t=r.getStartTime();t&&(!n||"earliest"===e&&t<n||"latest"===e&&t>n)&&(n=t)}return n},i=this._api.getConfigManager().getCardWideConfig()?.performance?.features.media_chunk_size??50,o=[],s=[];for(const t of e){const e={...t};
/* istanbul ignore else: the else path cannot be reached -- @preserve */if("later"===n){const t=a("latest");t&&(e.start=t,delete e.end)}else if("earlier"===n){const t=a("earliest");t&&(e.end=t,delete e.start)}e.limit=i,s.push({...t,limit:(t.limit??0)+i}),o.push(e)}const c=this._convertQueryResultsToMedia(await this._handleQuery(o,r));if(!c.length)return null;const l=hh(t.concat(c));return l.length===t.length?null:{queries:s,results:l}}async getMediaDownloadPath(e){const t=this._store.getCameraConfigForMedia(e),n=this._store.getEngineForMedia(e),r=this._api.getHASSManager().getHASS();return t&&n&&r?await n.getMediaDownloadPath(r,t,e):null}getMediaCapabilities(e){const t=this._store.getEngineForMedia(e);return t?t.getMediaCapabilities(e):null}async favoriteMedia(e,t){const n=this._store.getCameraConfigForMedia(e),r=this._store.getEngineForMedia(e),a=this._api.getHASSManager().getHASS();if(!n||!r||!a)return;const i=new Date;await this._requestLimit.add((()=>r.favoriteMedia(a,n,e,t))),pv(this._api.getConfigManager().getCardWideConfig(),"Advanced Camera Card CameraManager favorite request (",`Duration: ${((new Date).getTime()-i.getTime())/1e3}s,`,"Media:",e.getID(),", Favorite:",t,")")}areMediaQueriesResultsFresh(e,t){if(!t)return!1;const n=new Date;for(const r of t){const t=this._store.getEnginesForCameraIDs(r.cameraIDs);for(const[a,i]of t??[]){const t=a.getQueryResultMaxAge({...r,cameraIDs:i});if(null!==t&&jr(e,{seconds:t})<n)return!1}}return!0}async getMediaSeekTime(e,t){const n=e.getStartTime(),r=e.getEndTime(),a=this._store.getEngineForMedia(e),i=this._api.getHASSManager().getHASS();return!i||!a||!n||!r||t<n||t>r?null:await this._requestLimit.add((()=>a.getMediaSeekTime(i,this._store,e,t)))??null}async _handleQuery(e,t){const n=mu(e),r=new Map,a=new Date,i=this._api.getHASSManager().getHASS();if(!i)return r;const o=async(e,n)=>{let a=null;
/* istanbul ignore else: the else path cannot be reached -- @preserve */Hv.isEventQuery(n)?a=await e.getEvents(i,this._store,n,t):Hv.isRecordingQuery(n)?a=await e.getRecordings(i,this._store,n,t):Hv.isRecordingSegmentsQuery(n)?a=await e.getRecordingSegments(i,this._store,n,t):Hv.isMediaMetadataQuery(n)&&(a=await e.getMediaMetadata(i,this._store,n,t)),a?.forEach(((e,t)=>r.set(t,e)))},s=async e=>{const t=this._store.getEnginesForCameraIDs(e.cameraIDs);t&&await Promise.all(Array.from(t.keys()).map((n=>this._requestLimit.add((()=>o(n,{...e,cameraIDs:t.get(n)}))))))};await Promise.all(n.map((e=>s(e))));const c=(l=Array.from(r.values()).map((e=>Number(e.cached??0))))&&l.length?function(e,t){for(var n,r=-1,a=e.length;++r<a;){var i=t(e[r]);void 0!==i&&(n=void 0===n?i:n+i)}return n}(l,fo):0;var l;return pv(this._api.getConfigManager().getCardWideConfig(),"Advanced Camera Card CameraManager request [Input queries:",n.length,", Cached output queries:",c,", Total output queries:",r.size,", Duration:",((new Date).getTime()-a.getTime())/1e3+"s,",", Queries:",n,", Results:",r,", Options:",t??{},"]"),r}_convertQueryResultsToMedia(e){const t=[],n=this._api.getHASSManager().getHASS();if(!n)return t;for(const[r,a]of e.entries()){const e=this._store.getEngineOfType(a.engine);if(e){let i=null;
/* istanbul ignore else: the else path cannot be reached -- @preserve */Hv.isEventQuery(r)&&Uv.isEventQueryResult(a)?i=e.generateMediaFromEvents(n,this._store,r,a):Hv.isRecordingQuery(r)&&Uv.isRecordingQueryResult(a)&&(i=e.generateMediaFromRecordings(n,this._store,r,a)),i&&t.push(...i)}}return hh(t)}getCameraEndpoints(e,t){return this._store.getCamera(e)?.getEndpoints(t)??null}getCameraMetadata(e){const t=this._store.getCameraConfig(e),n=this._store.getEngineForCameraID(e),r=this._api.getHASSManager().getHASS();return t&&n&&r?n.getCameraMetadata(r,t):null}getCameraCapabilities(e){return this._store.getCamera(e)?.getCapabilities()??null}getAggregateCameraCapabilities(e){const t=[...e??this._store.getCameraIDs()].map((e=>this._store.getCamera(e))).filter(Eu);return new fv({live:t.some((e=>e.getCapabilities()?.has("live"))),clips:t.some((e=>e.getCapabilities()?.has("clips"))),recordings:t.some((e=>e.getCapabilities()?.has("recordings"))),snapshots:t.some((e=>e.getCapabilities()?.has("snapshots"))),"favorite-events":t.some((e=>e.getCapabilities()?.has("favorite-events"))),"favorite-recordings":t.some((e=>e.getCapabilities()?.has("favorite-recordings"))),seek:t.some((e=>e.getCapabilities()?.has("seek"))),menu:t.some((e=>e.getCapabilities()?.has("menu")))})}_rotatePTZAction(e,t){if(!t)return e;const n=mh.indexOf(e);if(-1===n)return e;return mh[(n+(4-t/90)%4)%4]}async executePTZAction(e,t,n){const r=this._store.getCamera(e);if(!r)return;const a=this._rotatePTZAction(t,r.getConfig().dimensions?.rotation);await this._requestLimit.add((()=>r.executePTZAction(this._api.getActionsManager(),a,n)))}}class Wv{constructor(){this._listeners=[],this._state={},this._callListeners=e=>{this._listeners.forEach((t=>t(e)))}}addListener(e){this._listeners.push(e)}removeListener(e){this._listeners=this._listeners.filter((t=>t!==e))}getState(){return this._state}setState(e){this._processStateChange(this._calculateTrueChange(e))}_processStateChange(e){if(!Object.keys(e).length)return;const t=this._state;this._state={...t,...e},this._callListeners({old:t,change:e,new:this._state})}_calculateTrueChange(e){const t={};for(const n of Object.keys(e))qd(e[n],this._state[n])||(t[n]=e[n]);return t}}class Zv extends vv{constructor(){super(new Map)}}const Kv=br.object({id:br.string(),model:br.string().nullable(),config_entries:br.string().array(),manufacturer:br.string().nullable(),configuration_url:br.string().nullable().optional()}).array();class Qv extends Zv{}class Yv{constructor(e){this._fetchedDeviceList=!1,this._cache=e}async getDevice(e,t){return this._cache.has(t)?this._cache.get(t):(await this._fetchDeviceList(e),this._cache.get(t)??null)}async getMatchingDevices(e,t){return await this._fetchDeviceList(e),this._cache.getMatches(t)}async _fetchDeviceList(e){if(this._fetchedDeviceList)return;let t=null;try{t=await gv(e,Kv,{type:"config/device_registry/list"})}catch(e){return void gu(e)}t.forEach((e=>{this._cache.set(e.id,e)})),this._fetchedDeviceList=!0}}const Gv=br.object({config_entry_id:br.string().nullable(),device_id:br.string().nullable(),disabled_by:br.string().nullable(),entity_id:br.string(),hidden_by:br.string().nullable(),platform:br.string(),translation_key:br.string().nullable(),unique_id:br.string().or(br.number()).optional()}),Xv=Gv.array();class Jv extends Zv{}class e_{constructor(e){this._fetchedEntityList=!1,this._cache=e}async getEntity(e,t){const n=this._cache.get(t);if(n)return n;let r=null;try{r=await gv(e,Gv,{type:"config/entity_registry/get",entity_id:t})}catch(e){return gu(e),null}return this._cache.set(r.entity_id,r),r}async getMatchingEntities(e,t){return await this.fetchEntityList(e),this._cache.getMatches(t)}async getEntities(e,t){const n=new Map;return await Promise.all(t.map((async t=>{const r=await this.getEntity(e,t);r&&n.set(t,r)}))),n}async fetchEntityList(e){if(this._fetchedEntityList)return;let t=null;try{t=await gv(e,Xv,{type:"config/entity_registry/list"})}catch(e){return void gu(e)}t.forEach((e=>{this._cache.set(e.entity_id,e)})),this._fetchedEntityList=!0}}class t_ extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if("number"==typeof e.maxAge&&0===e.maxAge)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if("function"==typeof this.onEviction)for(const[t,n]of e)this.onEviction(t,n.value)}_deleteIfExpired(e,t){return"number"==typeof t.expiry&&t.expiry<=Date.now()&&("function"==typeof this.onEviction&&this.onEviction(e,t.value),this.delete(e))}_getOrDeleteIfExpired(e,t){if(!1===this._deleteIfExpired(e,t))return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){const n=t.get(e);return this._getItemValue(e,n)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(const e of this.oldCache){const[t,n]=e;if(!this.cache.has(t)){!1===this._deleteIfExpired(t,n)&&(yield e)}}for(const e of this.cache){const[t,n]=e;!1===this._deleteIfExpired(t,n)&&(yield e)}}get(e){if(this.cache.has(e)){const t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){const t=this.oldCache.get(e);if(!1===this._deleteIfExpired(e,t))return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:n=this.maxAge}={}){const r="number"==typeof n&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;return this.cache.has(e)?this.cache.set(e,{value:t,expiry:r}):this._set(e,{value:t,expiry:r}),this}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):!!this.oldCache.has(e)&&!this._deleteIfExpired(e,this.oldCache.get(e))}peek(e){return this.cache.has(e)?this._peek(e,this.cache):this.oldCache.has(e)?this._peek(e,this.oldCache):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const t=[...this._entriesAscending()],n=t.length-e;n<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(n>0&&this._emitEvictions(t.slice(0,n)),this.oldCache=new Map(t.slice(n)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[t,n]=e;!1===this._deleteIfExpired(t,n)&&(yield[t,n.value])}for(const e of this.oldCache){const[t,n]=e;if(!this.cache.has(t)){!1===this._deleteIfExpired(t,n)&&(yield[t,n.value])}}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){const n=e[t],[r,a]=n;!1===this._deleteIfExpired(r,a)&&(yield[r,a.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){const n=e[t],[r,a]=n;if(!this.cache.has(r)){!1===this._deleteIfExpired(r,a)&&(yield[r,a.value])}}}*entriesAscending(){for(const[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(const[n,r]of this.entriesAscending())e.call(t,r,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}class n_ extends vv{constructor(e){super(new t_({maxSize:e}))}}const r_=br.object({url:br.string(),mime_type:br.string()});class a_ extends n_{constructor(){super(1e3)}}const i_=async(e,t,n)=>{const r=n?.get(t)??null;if(r)return r;const a={type:"media_source/resolve_media",media_content_id:t};let i=null;try{i=await gv(e,r_,a)}catch(e){gu(e)}return n&&i&&n.set(t,i),i},o_=e=>{tt(window,"haptic",e)};class s_ extends cu{}class c_{constructor(e,t,n){this._context=e,this._action=t,this._config=n}_shouldSeekConfirmation(e){const t=e.getHASSManager().getHASS();return"boolean"==typeof this._action.confirmation&&this._action.confirmation||"object"==typeof this._action.confirmation&&(!this._action.confirmation.exemptions||!this._action.confirmation.exemptions.some((e=>e.user===t?.user.id)))}async execute(e){if(this._shouldSeekConfirmation(e)){const e=qu(this._action)?this._action.advanced_camera_card_action:this._action.action,t=("object"==typeof this._action.confirmation?this._action.confirmation.text:null)??`${hv("actions.confirmation")}: ${e}`;if(!confirm(t))throw new s_(hv("actions.abort"))}}async stop(){}}class l_ extends c_{}class d_ extends l_{async execute(e){await super.execute(e);const t=e.getHASSManager().getHASS();if(!t)return;const[n,r]=this._action.service.split(".",2);await t.callService(n,r,this._action.data,this._action.target)}}class u_ extends l_{async execute(e){await super.execute(e);const t=this._action.camera??(this._action.triggered?e.getTriggersManager().getMostRecentlyTriggeredCameraID():null),n=e.getViewManager().getView(),r=e.getConfigManager().getConfig();if(t&&n&&t!==n.camera){const a=r?.view.camera_select??"current",i="current"===a?n.view:a;await e.getViewManager().setViewByParametersWithNewQuery({params:{view:i,camera:t},failSafe:!0})}}}class h_ extends l_{async execute(e){await super.execute(e),e.getCameraURLManager().openURL()}}class m_ extends l_{async execute(e){await super.execute(e),tt(e.getCardElementManager().getElement(),"ll-custom",this._action)}}class p_ extends l_{async execute(e){await super.execute(e),await e.getViewManager().setViewDefaultWithNewQuery()}}class f_ extends l_{async execute(e){await super.execute(e),await e.getViewManager().setViewByParametersWithNewQuery({params:{displayMode:this._action.display_mode}})}}class g_ extends l_{async execute(e){await super.execute(e);const t=e.getViewManager().getView()?.queryResults?.getSelectedResult();t&&await e.getViewItemManager().download(t)}}class v_ extends l_{async execute(e){await super.execute(e),e.getExpandManager().toggleExpanded()}}class __ extends l_{async execute(e){switch(await super.execute(e),this._action.effect_action){case"start":e.getEffectsControllerAPI()?.startEffect(this._action.effect);break;case"stop":e.getEffectsControllerAPI()?.stopEffect(this._action.effect);break;case"toggle":e.getEffectsControllerAPI()?.toggleEffect(this._action.effect)}}}class y_ extends l_{async execute(e){await super.execute(e),e.getFullscreenManager().toggleFullscreen()}}class b_ extends l_{async execute(e){await super.execute(e),await this._action.callback(e)}}class w_ extends l_{async execute(e){await super.execute(e),console[this._action.level](this._action.message)}}const x_=(e,t)=>e.context?.live?.overrides?.get(t??e.camera)??t??e.camera,k_=e=>x_(e)!==e.camera,M_=(e,t)=>{const n=e.context?.live?.overrides??new Map;n.set(e.camera,t),e.mergeInContext({live:{overrides:n}})};class C_ extends l_{async execute(e){await super.execute(e);const t=this._action.media_player,n=e.getMediaPlayerManager();if("stop"===this._action.media_player_action)return void await n.stop(t);const r=e.getViewManager().getView(),a=r?.queryResults?.getSelectedResult()??null;r?.is("live")?await n.playLive(t,x_(r)):r?.isViewerView()&&a&&uh.isMedia(a)&&await n.playMedia(t,a)}}class S_ extends l_{async execute(e){await super.execute(e),e.getCardElementManager().toggleMenu()}}class E_ extends l_{async execute(e){await super.execute(e),await e.getMicrophoneManager().connect()}}class A_ extends l_{async execute(e){await super.execute(e),e.getMicrophoneManager().disconnect()}}class T_ extends l_{async execute(e){await super.execute(e),e.getMicrophoneManager().mute()}}class $_ extends l_{async execute(e){await super.execute(e),await e.getMicrophoneManager().unmute()}}class I_ extends l_{async execute(e){await super.execute(e);const t=this._action.entity??this._config?.entity??null;t&&tt(e.getCardElementManager().getElement(),"hass-more-info",{entityId:t})}}class O_ extends l_{async execute(e){await super.execute(e),await(e.getMediaLoadedInfoManager().get()?.mediaPlayerController?.mute())}}class L_ extends l_{async execute(e){await super.execute(e),this._action.navigation_replace?history.replaceState(null,"",this._action.navigation_path):history.pushState(null,"",this._action.navigation_path),tt(window,"location-changed",{replace:!!this._action.navigation_replace})}}class D_ extends l_{async execute(e){await super.execute(e)}}class j_ extends l_{async execute(e){await super.execute(e),await(e.getMediaLoadedInfoManager().get()?.mediaPlayerController?.pause())}}class z_ extends l_{async execute(e){await super.execute(e);const t=e.getHASSManager().getHASS();if(!t)return;const[n,r]=this._action.perform_action.split(".",2);await t.callService(n,r,this._action.data,this._action.target)}}class P_ extends l_{async execute(e){await super.execute(e),await(e.getMediaLoadedInfoManager().get()?.mediaPlayerController?.play())}}const R_=(e,t)=>{if(e.isViewerView()){const n=e.queryResults?.getSelectedResult()?.getID()??null;return"ptz"!==t?.type&&n?{targetID:n,type:"digital"}:null}if(e.is("live")){const n=x_(e);let r="digital";return"digital"!==t?.type&&t?.cameraManager&&(N_(t.cameraManager,n)&&(r="ptz"),"ptz"!==r&&"ptz"===t?.type)?null:{targetID:n,type:r}}return e.is("image")?{targetID:Zg,type:"digital"}:null},N_=(e,t)=>!!e.getStore().getCamera(t)?.getCapabilities()?.hasPTZCapability(),F_=async(e,t)=>{await(t?.[e]?.inProgressAction?.stop())},B_=(e,t,n,r)=>{Zd(t,{[n]:{[e]:{inProgressAction:r}}})};class V_ extends l_{constructor(){super(...arguments),this._timer=new Zu,this._stopped=!1}async stop(){this._stopped=!0,this._timer.stop()}async execute(e){await super.execute(e);const t=e.getViewManager().getView();if(!t)return;const n=this._action.camera??R_(t,{type:"ptz",cameraManager:e.getCameraManager()})?.targetID??null,r=n?e.getCameraManager().getCameraCapabilities(n)?.getPTZCapabilities():null,a=n?e.getCameraManager().getStore().getCameraConfig(n)?.ptz:null;if(!n||!r||!a)return;if(!this._action.ptz_action)return void(r.presets&&r.presets.length>=1&&await e.getCameraManager().executePTZAction(n,"preset",{phase:this._action.ptz_phase,preset:r.presets[0]}));const i=(e=>{switch(e){case"left":case"right":case"up":case"down":return e;case"zoom_in":return"zoomIn";case"zoom_out":return"zoomOut"}return null})(this._action.ptz_action);if(i&&r[i]?.includes(this._action.ptz_phase?ru.Continuous:ru.Relative)||"preset"===this._action.ptz_action)return await e.getCameraManager().executePTZAction(n,this._action.ptz_action,{phase:this._action.ptz_phase,preset:this._action.ptz_preset});if("start"===this._action.ptz_phase){await F_(n,this._context.ptz),B_(n,this._context,"ptz",this);const t=async()=>{
/* istanbul ignore else: the else path cannot be reached as ptz_action
                being present is checked above -- @preserve */
this._action.ptz_action&&await e.getCameraManager().executePTZAction(n,this._action.ptz_action,{preset:this._action.ptz_preset}),this._stopped||this._timer.start(a.r2c_delay_between_calls_seconds,t)};this._stopped=!1,await t()}else"stop"===this._action.ptz_phase?await F_(n,this._context.ptz):(this._stopped=!1,await e.getCameraManager().executePTZAction(n,this._action.ptz_action,{preset:this._action.ptz_preset,phase:"start"}),this._timer.start(a.c2r_delay_between_calls_seconds,(async()=>{
/* istanbul ignore else: the else path cannot be reached as ptz_action
                being present is checked above -- @preserve */
this._action.ptz_action&&await e.getCameraManager().executePTZAction(n,this._action.ptz_action,{preset:this._action.ptz_preset,phase:"stop"})})))}}class H_ extends l_{async execute(e){await super.execute(e),e.getViewManager().setViewWithMergedContext({ptzControls:{enabled:this._action.enabled}})}}const U_=50,q_=50,W_=1,Z_=4,K_=e=>void 0===e?.pan?.x&&void 0===e?.pan?.y&&void 0===e?.zoom;class Q_{constructor(e){this._context=e}modify(e){e.mergeInContext(this._context)}}const Y_=(e,t)=>({zoom:{[e]:{observed:t?.observed??void 0,requested:t?.requested??null}}}),G_=(e,t,n)=>{t&&n&&t.setViewByParameters({modifiers:[new Q_(Y_(n,{observed:e.detail}))]})},X_=1,J_=10,ey=br.number().min(1).max(10);class ty extends l_{constructor(){super(...arguments),this._timer=new Zu}async _stepChange(e,t){e.getViewManager().setViewWithMergedContext(Y_(t,{requested:this._convertActionToZoomSettings(e.getViewManager().getView()?.context?.zoom?.[t]?.observed)}))}async stop(){this._timer.stop()}async execute(e){await super.execute(e);const t=e.getViewManager().getView();if(!t)return;const n=this._action.target_id??R_(t,{type:"digital",cameraManager:e.getCameraManager()})?.targetID;return n?this._action.absolute||!this._action.ptz_phase?await this._stepChange(e,n):
/* istanbul ignore else: the else path cannot be reached -- @preserve */
void("start"===this._action.ptz_phase?(await F_(n,this._context.ptzDigital),B_(n,this._context,"ptzDigital",this),await this._stepChange(e,n),this._timer.startRepeated(.1,(()=>this._stepChange(e,n)))):"stop"===this._action.ptz_phase&&(await F_(n,this._context.ptzDigital),delete this._context.ptzDigital?.[n])):void 0}_convertActionToZoomSettings(e){if(!this._action.absolute&&!this._action.ptz_action)return{};if(this._action.absolute)return this._action.absolute;const t=e?.zoom??1,n=e?.pan?.x??50,r=e?.pan?.y??50,a="zoom_in"===this._action.ptz_action?.1:"zoom_out"===this._action.ptz_action?-.1:0,i="left"===this._action.ptz_action?-5:"right"===this._action.ptz_action?5:0,o="up"===this._action.ptz_action?-5:"down"===this._action.ptz_action?5:0;return{zoom:xc(t+a,1,10),pan:{x:xc(n+i,0,100),y:xc(r+o,0,100)}}}}class ny extends l_{async execute(e){await super.execute(e);const t=e.getViewManager().getView();let n=null,r=null;if(this._action.target_id)n=this._action.target_id,r=N_(e.getCameraManager(),n)?"ptz":"digital";else if(t){const a=R_(t,{cameraManager:e.getCameraManager()});n=a?.targetID??null,r=a?.type??null}n&&null!==r&&("ptz"===r?this._toPTZAction(n):this._toPTZDigitalAction(n)).execute(e)}_toPTZAction(e){return new V_(this._context,(t={cardID:this._action.card_id,cameraID:e,ptzAction:this._action.ptz_action,ptzPhase:this._action.ptz_phase,ptzPreset:this._action.ptz_preset},{action:"fire-dom-event",advanced_camera_card_action:"ptz",...t?.cardID&&{card_id:t.cardID},...t?.ptzAction&&{ptz_action:t.ptzAction},...t?.ptzPhase&&{ptz_phase:t.ptzPhase},...t?.ptzPreset&&{ptz_preset:t.ptzPreset},...t?.cameraID&&{camera:t.cameraID}}),this._config);var t}_toPTZDigitalAction(e){return new ty(this._context,(t={cardID:this._action.card_id,ptzPhase:this._action.ptz_phase,ptzAction:this._action.ptz_action,targetID:e},{action:"fire-dom-event",advanced_camera_card_action:"ptz_digital",...t?.cardID&&{card_id:t.cardID},...t?.ptzAction&&{ptz_action:t.ptzAction},...t?.ptzPhase&&{ptz_phase:t.ptzPhase},...t?.absolute&&{absolute:t.absolute},...t?.targetID&&{target_id:t.targetID}}),this._config);var t}}class ry extends l_{async execute(e){await super.execute(e),window.location.reload()}}const ay=(e,t="download")=>{const n=new URL(e).origin===window.location.origin,r=e.startsWith("data:");if(!n&&!r)return void window.open(e,"_blank");const a=document.createElement("a");a.setAttribute("download",t),a.href=e,a.click(),a.remove()},iy=e=>sy(e,e.naturalWidth,e.naturalHeight),oy=e=>sy(e,e.videoWidth,e.videoHeight),sy=(e,t,n)=>{const r=document.createElement("canvas");r.width=t,r.height=n;const a=r.getContext("2d");return a?(a.drawImage(e,0,0,r.width,r.height),r.toDataURL("image/jpeg")):null};class cy extends l_{async execute(e){await super.execute(e);const t=await(e.getMediaLoadedInfoManager().get()?.mediaPlayerController?.getScreenshotURL());t&&ay(t,(e=>{if(e?.is("live")||e?.is("image"))return`${e.view}_${e.camera}_${ja(new Date,"yyyy-MM-dd-HH-mm-ss")}.jpg`;if(e?.isViewerView()){const t=e.queryResults?.getSelectedResult(),n=t?.getID()??null;return`${e.view}_${e.camera}${n?`_${n}`:""}.jpg`}return"screenshot.jpg"})(e.getViewManager().getView()))}}const ly=async e=>{await new Promise((t=>setTimeout(t,1e3*e)))};class dy extends l_{async execute(e){var t;await super.execute(e),await ly((t=this._action.duration,3600*(t.h??0)+60*(t.m??0)+(t.s??0)+(t.ms??0)/1e3))}}class uy extends l_{async execute(e){switch(await super.execute(e),this._action.status_bar_action){case"reset":e.getStatusBarItemManager().removeAllDynamicStatusBarItems();break;case"add":this._action.items?.forEach((t=>e.getStatusBarItemManager().addDynamicStatusBarItem(t)));break;case"remove":this._action.items?.forEach((t=>e.getStatusBarItemManager().removeDynamicStatusBarItem(t)))}}}class hy{modify(e){(e=>{const t=e.context?.live?.overrides;t&&t.has(e.camera)&&e.context?.live?.overrides?.delete(e.camera)})(e)}}class my extends l_{async execute(e){await super.execute(e),e.getViewManager().setViewByParameters({modifiers:[new hy]})}}class py{constructor(e){this._api=e}modify(e){const t=[...this._api.getCameraManager().getStore().getAllDependentCameras(e.camera,"substream")];if(t.length<=1)return;const n=x_(e),r=t.indexOf(n),a=r<0?0:(r+1)%t.length;M_(e,t[a])}}class fy extends l_{async execute(e){await super.execute(e),e.getViewManager().setViewByParameters({modifiers:[new py(e)]})}}class gy{constructor(e){this._substreamID=e}modify(e){M_(e,this._substreamID)}}class vy extends l_{async execute(e){await super.execute(e),e.getViewManager().setViewByParameters({modifiers:[new gy(this._action.camera)]})}}const _y=e=>e.substring(0,e.indexOf(".")),yy=["off","closed","locked"],by=["on","open","unlocked"];class wy extends l_{async execute(e){await super.execute(e);const t=e.getHASSManager().getHASS(),n=this._config?.entity;if(!t||!n)return;const r=t.states[n]?.state;if(!r)return;const a=yy.includes(r),i=_y(n),o="group"===i?"homeassistant":i,s="lock"===i?a?"unlock":"lock":"cover"===i?a?"open_cover":"close_cover":a?"turn_on":"turn_off";await t.callService(o,s,{entity_id:n})}}class xy extends l_{async execute(e){await super.execute(e),await(e.getMediaLoadedInfoManager().get()?.mediaPlayerController?.unmute())}}class ky extends l_{async execute(e){await super.execute(e),window.open(this._action.url_path)}}class My extends l_{async execute(e){await super.execute(e),await e.getViewManager().setViewByParametersWithNewQuery({params:{view:this._action.advanced_camera_card_action},...this._action.folder&&{queryExecutorOptions:{folder:this._action.folder}}})}}class Cy{createAction(e,t,n){if(t.card_id&&t.card_id!==n?.cardID)return null;switch(t.action){case"more-info":return new I_(e,t,n?.config);case"toggle":return new wy(e,t,n?.config);case"navigate":return new L_(e,t,n?.config);case"url":return new ky(e,t,n?.config);case"perform-action":return new z_(e,t,n?.config);case"call-service":return new d_(e,t,n?.config);case"none":return new D_(e,t,n?.config)}if(!qu(t))return new m_(e,t,n?.config);switch(t.advanced_camera_card_action){case"default":return new p_(e,t,n?.config);case"clip":case"clips":case"folder":case"folders":case"image":case"live":case"recording":case"recordings":case"snapshot":case"snapshots":case"timeline":case"diagnostics":return new My(e,t,n?.config);case"sleep":return new dy(e,t,n?.config);case"download":return new g_(e,t,n?.config);case"camera_ui":return new h_(e,t,n?.config);case"effect":return new __(e,t,n?.config);case"expand":return new v_(e,t,n?.config);case"fullscreen":return new y_(e,t,n?.config);case"menu_toggle":return new S_(e,t,n?.config);case"camera_select":return new u_(e,t,n?.config);case"live_substream_select":return new vy(e,t,n?.config);case"live_substream_off":return new my(e,t,n?.config);case"live_substream_on":return new fy(e,t,n?.config);case"media_player":return new C_(e,t,n?.config);case"microphone_connect":return new E_(e,t,n?.config);case"microphone_disconnect":return new A_(e,t,n?.config);case"microphone_mute":return new T_(e,t,n?.config);case"microphone_unmute":return new $_(e,t,n?.config);case"mute":return new O_(e,t,n?.config);case"unmute":return new xy(e,t,n?.config);case"play":return new P_(e,t,n?.config);case"pause":return new j_(e,t,n?.config);case"screenshot":return new cy(e,t,n?.config);case"display_mode_select":return new f_(e,t,n?.config);case"ptz":return new V_(e,t,n?.config);case"ptz_digital":return new ty(e,t,n?.config);case"ptz_multi":return new ny(e,t,n?.config);case"ptz_controls":return new H_(e,t,n?.config);case"log":return new w_(e,t,n?.config);case"status_bar":return new uy(e,t,n?.config);case"reload":return new ry(e,t,n?.config);case Tr:return new b_(e,t,n?.config)}
/* istanbul ignore next: this path cannot be reached -- @preserve */
/* istanbul ignore next: this path cannot be reached -- @preserve */
return console.warn(`Advanced Camera Card received unknown card action: ${t.advanced_camera_card_action}`),null}}class Sy{constructor(e,t,n){this._actions=[],this._factory=new Cy,this._stopped=!1,this._context=e;for(const r of mu(t)){const t=this._factory.createAction(e,r,n);t&&this._actions.push(t)}}async execute(e){for(const t of this._actions){if(this._stopped)break;await t.execute(e)}}async stop(){this._stopped=!0}}const Ey=br.object({action:br.enum(["tap","double_tap","hold","start_tap","end_tap"])}),Ay=br.object({detail:Ey});class Ty{constructor(e,t){this._actionsInFlight=[],this._actionContext={},this.handleInteractionEvent=async e=>{const t=Ay.safeParse(e);if(!t.success)return;const n=t.data.detail.action,r=this.getMergedActions(),a=Hu(n,r);r&&n&&a&&await this.executeActions({actions:a,config:r})},this.handleCustomActionEvent=async e=>{if(!("detail"in e))return;const t=e.detail;qu(t)&&await this.executeActions({actions:t},!0)},this.handleActionExecutionRequestEvent=async e=>{await this.executeActions(e.detail)},this._api=e,this._templateRenderer=t??null}getMergedActions(){const e=this._api.getViewManager().getView();if(this._api.getMessageManager().hasMessage())return{};const t=this._api.getConfigManager().getConfig();let n;if(e?.is("live"))n=t?.live.actions;else if(e?.isMediaGalleryView())n=t?.media_gallery?.actions;else if(e?.isViewerView())n=t?.media_viewer.actions;else{if(!e?.is("image"))return{};n=t?.image?.actions}return{...t?.view.actions,...n}}async uninitialize(){await xu(this._actionsInFlight,(e=>e.stop()))}async executeActions(e,t=!0){const n=this._api.getHASSManager().getHASS(),r=t&&n&&this._templateRenderer?this._templateRenderer.renderRecursively(n,e.actions,{conditionState:this._api.getConditionStateManager().getState(),triggerData:e?.triggerData}):e.actions,a=new Sy(this._actionContext,r,{config:e.config,cardID:this._api.getConfigManager().getConfig()?.card_id});this._actionsInFlight.push(a);try{await a.execute(this._api),o_("success")}catch(e){gu(e),o_("warning")}this._actionsInFlight=this._actionsInFlight.filter((e=>e!==a))}}var $y,Iy={exports:{}};
/*! Browser bundle of nunjucks 3.2.4  */"undefined"!=typeof self&&self,$y=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,n){var r=Array.prototype,a=Object.prototype,i={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","\\":"&#92;"},o=/[&"'<>\\]/g;function s(e,t){return a.hasOwnProperty.call(e,t)}function c(e){return i[e]}function l(e,t,n){var r,a,i;if(e instanceof Error&&(e=(a=e).name+": "+a.message),Object.setPrototypeOf?(r=new Error(e),Object.setPrototypeOf(r,l.prototype)):(r=this,Object.defineProperty(r,"message",{enumerable:!1,writable:!0,value:e})),Object.defineProperty(r,"name",{value:"Template render error"}),Error.captureStackTrace&&Error.captureStackTrace(r,this.constructor),a){var o=Object.getOwnPropertyDescriptor(a,"stack");(i=o&&(o.get||function(){return o.value}))||(i=function(){return a.stack})}else{var s=new Error(e).stack;i=function(){return s}}return Object.defineProperty(r,"stack",{get:function(){return i.call(r)}}),Object.defineProperty(r,"cause",{value:a}),r.lineno=t,r.colno=n,r.firstUpdate=!0,r.Update=function(e){var t="("+(e||"unknown path")+")";return this.firstUpdate&&(this.lineno&&this.colno?t+=" [Line "+this.lineno+", Column "+this.colno+"]":this.lineno&&(t+=" [Line "+this.lineno+"]")),t+="\n ",this.firstUpdate&&(t+=" "),this.message=t+(this.message||""),this.firstUpdate=!1,this},r}function d(e){return"[object Function]"===a.toString.call(e)}function u(e){return"[object Array]"===a.toString.call(e)}function h(e){return"[object String]"===a.toString.call(e)}function m(e){return"[object Object]"===a.toString.call(e)}function p(e){var t,n=(t=e)?"string"==typeof t?t.split("."):[t]:[];return function(e){for(var t=e,r=0;r<n.length;r++){var a=n[r];if(!s(t,a))return;t=t[a]}return t}}function f(e){return Array.prototype.slice.call(e)}function g(e,t,n){return Array.prototype.indexOf.call(e||[],t,n)}function v(e){var t=[];for(var n in e)s(e,n)&&t.push(n);return t}(t=e.exports={}).hasOwnProp=s,t._prettifyError=function(e,n,r){if(r.Update||(r=new t.TemplateError(r)),r.Update(e),!n){var a=r;(r=new Error(a.message)).name=a.name}return r},Object.setPrototypeOf?Object.setPrototypeOf(l.prototype,Error.prototype):l.prototype=Object.create(Error.prototype,{constructor:{value:l}}),t.TemplateError=l,t.escape=function(e){return e.replace(o,c)},t.isFunction=d,t.isArray=u,t.isString=h,t.isObject=m,t.getAttrGetter=p,t.groupBy=function(e,t,n){for(var r={},a=d(t)?t:p(t),i=0;i<e.length;i++){var o=e[i],s=a(o,i);if(void 0===s&&!0===n)throw new TypeError('groupby: attribute "'+t+'" resolved to undefined');(r[s]||(r[s]=[])).push(o)}return r},t.toArray=f,t.without=function(e){var t=[];if(!e)return t;for(var n=e.length,r=f(arguments).slice(1),a=-1;++a<n;)-1===g(r,e[a])&&t.push(e[a]);return t},t.repeat=function(e,t){for(var n="",r=0;r<t;r++)n+=e;return n},t.each=function(e,t,n){if(null!=e)if(r.forEach&&e.forEach===r.forEach)e.forEach(t,n);else if(e.length===+e.length)for(var a=0,i=e.length;a<i;a++)t.call(n,e[a],a,e)},t.map=function(e,t){var n=[];if(null==e)return n;if(r.map&&e.map===r.map)return e.map(t);for(var a=0;a<e.length;a++)n[n.length]=t(e[a],a);return e.length===+e.length&&(n.length=e.length),n},t.asyncIter=function(e,t,n){var r=-1;!function a(){++r<e.length?t(e[r],r,a,n):n()}()},t.asyncFor=function(e,t,n){var r=v(e||{}),a=r.length,i=-1;!function o(){i++;var s=r[i];i<a?t(s,e[s],i,a,o):n()}()},t.indexOf=g,t.keys=v,t._entries=function(e){return v(e).map((function(t){return[t,e[t]]}))},t._values=function(e){return v(e).map((function(t){return e[t]}))},t._assign=t.extend=function(e,t){return e=e||{},v(t).forEach((function(n){e[n]=t[n]})),e},t.inOperator=function(e,t){if(u(t)||h(t))return-1!==t.indexOf(e);if(m(t))return e in t;throw new Error('Cannot use "in" operator to search for "'+e+'" in unexpected types.')}},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,i=void 0,"symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?i:String(i)),r)}var a,i}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,o(e,t)}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}var s=n(16),c=n(0);function l(e,t,n){n=n||{},c.keys(n).forEach((function(t){n[t]=function(e,t){return"function"!=typeof e||"function"!=typeof t?t:function(){var n=this.parent;this.parent=e;var r=t.apply(this,arguments);return this.parent=n,r}}(e.prototype[t],n[t])}));var r=function(e){function n(){return e.apply(this,arguments)||this}return i(n,e),a(n,[{key:"typename",get:function(){return t}}]),n}(e);return c._assign(r.prototype,n),r}var d=function(){function e(){this.init.apply(this,arguments)}return e.prototype.init=function(){},e.extend=function(e,t){return"object"==typeof e&&(t=e,e="anonymous"),l(this,e,t)},a(e,[{key:"typename",get:function(){return this.constructor.name}}]),e}(),u=function(e){function t(){var t,n;return(t=n=e.call(this)||this).init.apply(t,arguments),n}return i(t,e),t.prototype.init=function(){},t.extend=function(e,t){return"object"==typeof e&&(t=e,e="anonymous"),l(this,e,t)},a(t,[{key:"typename",get:function(){return this.constructor.name}}]),t}(s);e.exports={Obj:d,EmitterObj:u}},function(e,t,n){var r=n(0),a=Array.from,i="function"==typeof Symbol&&Symbol.iterator&&"function"==typeof a,o=function(){function e(e,t){this.variables=Object.create(null),this.parent=e,this.topLevel=!1,this.isolateWrites=t}var t=e.prototype;return t.set=function(e,t,n){var r=e.split("."),a=this.variables,i=this;if(n&&(i=this.resolve(r[0],!0)))i.set(e,t);else{for(var o=0;o<r.length-1;o++){var s=r[o];a[s]||(a[s]={}),a=a[s]}a[r[r.length-1]]=t}},t.get=function(e){var t=this.variables[e];return void 0!==t?t:null},t.lookup=function(e){var t=this.parent,n=this.variables[e];return void 0!==n?n:t&&t.lookup(e)},t.resolve=function(e,t){var n=t&&this.isolateWrites?void 0:this.parent;return void 0!==this.variables[e]?this:n&&n.resolve(e)},t.push=function(t){return new e(this,t)},t.pop=function(){return this.parent},e}();function s(e){return e&&Object.prototype.hasOwnProperty.call(e,"__keywords")}function c(e){var t=e.length;return 0===t?0:s(e[t-1])?t-1:t}function l(e){if("string"!=typeof e)return e;this.val=e,this.length=e.length}l.prototype=Object.create(String.prototype,{length:{writable:!0,configurable:!0,value:0}}),l.prototype.valueOf=function(){return this.val},l.prototype.toString=function(){return this.val},e.exports={Frame:o,makeMacro:function(e,t,n){return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var o,l=c(a),d=function(e){var t=e.length;if(t){var n=e[t-1];if(s(n))return n}return{}}(a);if(l>e.length)o=a.slice(0,e.length),a.slice(o.length,l).forEach((function(e,n){n<t.length&&(d[t[n]]=e)})),o.push(d);else if(l<e.length){o=a.slice(0,l);for(var u=l;u<e.length;u++){var h=e[u];o.push(d[h]),delete d[h]}o.push(d)}else o=a;return n.apply(this,o)}},makeKeywordArgs:function(e){return e.__keywords=!0,e},numArgs:c,suppressValue:function(e,t){return e=null!=e?e:"",!t||e instanceof l||(e=r.escape(e.toString())),e},ensureDefined:function(e,t,n){if(null==e)throw new r.TemplateError("attempted to output null or undefined value",t+1,n+1);return e},memberLookup:function(e,t){if(null!=e)return"function"==typeof e[t]?function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e[t].apply(e,r)}:e[t]},contextOrFrameLookup:function(e,t,n){var r=t.lookup(n);return void 0!==r?r:e.lookup(n)},callWrap:function(e,t,n,r){if(!e)throw new Error("Unable to call `"+t+"`, which is undefined or falsey");if("function"!=typeof e)throw new Error("Unable to call `"+t+"`, which is not a function");return e.apply(n,r)},handleError:function(e,t,n){return e.lineno?e:new r.TemplateError(e,t,n)},isArray:r.isArray,keys:r.keys,SafeString:l,copySafeness:function(e,t){return e instanceof l?new l(t):t.toString()},markSafe:function(e){var t=typeof e;return"string"===t?new l(e):"function"!==t?e:function(t){var n=e.apply(this,arguments);return"string"==typeof n?new l(n):n}},asyncEach:function(e,t,n,a){if(r.isArray(e)){var i=e.length;r.asyncIter(e,(function(e,r,a){switch(t){case 1:n(e,r,i,a);break;case 2:n(e[0],e[1],r,i,a);break;case 3:n(e[0],e[1],e[2],r,i,a);break;default:e.push(r,i,a),n.apply(this,e)}}),a)}else r.asyncFor(e,(function(e,t,r,a,i){n(e,t,r,a,i)}),a)},asyncAll:function(e,t,n,a){var i,o,s=0;function c(e,t){s++,o[e]=t,s===i&&a(null,o.join(""))}if(r.isArray(e))if(i=e.length,o=new Array(i),0===i)a(null,"");else for(var l=0;l<e.length;l++){var d=e[l];switch(t){case 1:n(d,l,i,c);break;case 2:n(d[0],d[1],l,i,c);break;case 3:n(d[0],d[1],d[2],l,i,c);break;default:d.push(l,i,c),n.apply(this,d)}}else{var u=r.keys(e||{});if(i=u.length,o=new Array(i),0===i)a(null,"");else for(var h=0;h<u.length;h++){var m=u[h];n(m,e[m],h,i,c)}}},inOperator:r.inOperator,fromIterator:function(e){return"object"!=typeof e||null===e||r.isArray(e)?e:i&&Symbol.iterator in e?a(e):e}}},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,i=void 0,"symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?i:String(i)),r)}var a,i}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,o(e,t)}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function s(e,t,n){e instanceof t&&n.push(e),e instanceof c&&e.findAll(t,n)}var c=function(e){function t(){return e.apply(this,arguments)||this}i(t,e);var n=t.prototype;return n.init=function(e,t){for(var n=arguments,r=this,a=arguments.length,i=new Array(a>2?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o];this.lineno=e,this.colno=t,this.fields.forEach((function(e,t){var a=n[t+2];void 0===a&&(a=null),r[e]=a}))},n.findAll=function(e,t){var n=this;return t=t||[],this instanceof d?this.children.forEach((function(n){return s(n,e,t)})):this.fields.forEach((function(r){return s(n[r],e,t)})),t},n.iterFields=function(e){var t=this;this.fields.forEach((function(n){e(t[n],n)}))},t}(n(1).Obj),l=function(e){function t(){return e.apply(this,arguments)||this}return i(t,e),a(t,[{key:"typename",get:function(){return"Value"}},{key:"fields",get:function(){return["value"]}}]),t}(c),d=function(e){function t(){return e.apply(this,arguments)||this}i(t,e);var n=t.prototype;return n.init=function(t,n,r){e.prototype.init.call(this,t,n,r||[])},n.addChild=function(e){this.children.push(e)},a(t,[{key:"typename",get:function(){return"NodeList"}},{key:"fields",get:function(){return["children"]}}]),t}(c),u=d.extend("Root"),h=l.extend("Literal"),m=l.extend("Symbol"),p=d.extend("Group"),f=d.extend("Array"),g=c.extend("Pair",{fields:["key","value"]}),v=d.extend("Dict"),_=c.extend("LookupVal",{fields:["target","val"]}),y=c.extend("If",{fields:["cond","body","else_"]}),b=y.extend("IfAsync"),w=c.extend("InlineIf",{fields:["cond","body","else_"]}),x=c.extend("For",{fields:["arr","name","body","else_"]}),k=x.extend("AsyncEach"),M=x.extend("AsyncAll"),C=c.extend("Macro",{fields:["name","args","body"]}),S=C.extend("Caller"),E=c.extend("Import",{fields:["template","target","withContext"]}),A=function(e){function t(){return e.apply(this,arguments)||this}return i(t,e),t.prototype.init=function(t,n,r,a,i){e.prototype.init.call(this,t,n,r,a||new d,i)},a(t,[{key:"typename",get:function(){return"FromImport"}},{key:"fields",get:function(){return["template","names","withContext"]}}]),t}(c),T=c.extend("FunCall",{fields:["name","args"]}),$=T.extend("Filter"),I=$.extend("FilterAsync",{fields:["name","args","symbol"]}),O=v.extend("KeywordArgs"),L=c.extend("Block",{fields:["name","body"]}),D=c.extend("Super",{fields:["blockName","symbol"]}),j=c.extend("TemplateRef",{fields:["template"]}).extend("Extends"),z=c.extend("Include",{fields:["template","ignoreMissing"]}),P=c.extend("Set",{fields:["targets","value"]}),R=c.extend("Switch",{fields:["expr","cases","default"]}),N=c.extend("Case",{fields:["cond","body"]}),F=d.extend("Output"),B=c.extend("Capture",{fields:["body"]}),V=h.extend("TemplateData"),H=c.extend("UnaryOp",{fields:["target"]}),U=c.extend("BinOp",{fields:["left","right"]}),q=U.extend("In"),W=U.extend("Is"),Z=U.extend("Or"),K=U.extend("And"),Q=H.extend("Not"),Y=U.extend("Add"),G=U.extend("Concat"),X=U.extend("Sub"),J=U.extend("Mul"),ee=U.extend("Div"),te=U.extend("FloorDiv"),ne=U.extend("Mod"),re=U.extend("Pow"),ae=H.extend("Neg"),ie=H.extend("Pos"),oe=c.extend("Compare",{fields:["expr","ops"]}),se=c.extend("CompareOperand",{fields:["expr","type"]}),ce=c.extend("CallExtension",{init:function(e,t,n,r){this.parent(),this.extName=e.__name||e,this.prop=t,this.args=n||new d,this.contentArgs=r||[],this.autoescape=e.autoescape},fields:["extName","prop","args","contentArgs"]}),le=ce.extend("CallExtensionAsync");function de(e,t,n){var r=e.split("\n");r.forEach((function(e,a){e&&(n&&a>0||!n)&&process.stdout.write(" ".repeat(t));var i=a===r.length-1?"":"\n";process.stdout.write(""+e+i)}))}e.exports={Node:c,Root:u,NodeList:d,Value:l,Literal:h,Symbol:m,Group:p,Array:f,Pair:g,Dict:v,Output:F,Capture:B,TemplateData:V,If:y,IfAsync:b,InlineIf:w,For:x,AsyncEach:k,AsyncAll:M,Macro:C,Caller:S,Import:E,FromImport:A,FunCall:T,Filter:$,FilterAsync:I,KeywordArgs:O,Block:L,Super:D,Extends:j,Include:z,Set:P,Switch:R,Case:N,LookupVal:_,BinOp:U,In:q,Is:W,Or:Z,And:K,Not:Q,Add:Y,Concat:G,Sub:X,Mul:J,Div:ee,FloorDiv:te,Mod:ne,Pow:re,Neg:ae,Pos:ie,Compare:oe,CompareOperand:se,CallExtension:ce,CallExtensionAsync:le,printNodes:function e(t,n){if(n=n||0,de(t.typename+": ",n),t instanceof d)de("\n"),t.children.forEach((function(t){e(t,n+2)}));else if(t instanceof ce)de(t.extName+"."+t.prop+"\n"),t.args&&e(t.args,n+2),t.contentArgs&&t.contentArgs.forEach((function(t){e(t,n+2)}));else{var r=[],a=null;t.iterFields((function(e,t){e instanceof c?r.push([t,e]):(a=a||{})[t]=e})),a?de(JSON.stringify(a,null,2)+"\n",null,!0):de("\n"),r.forEach((function(t){var r=t[0],a=t[1];de("["+r+"] =>",n+2),e(a,n+4)}))}}}},function(e,t){},function(e,t,n){function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}var a=n(8),i=n(17),o=n(3),s=n(0).TemplateError,c=n(2).Frame,l=n(1).Obj,d={"==":"==","===":"===","!=":"!=","!==":"!==","<":"<",">":">","<=":"<=",">=":">="},u=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var i=a.prototype;return i.init=function(e,t){this.templateName=e,this.codebuf=[],this.lastId=0,this.buffer=null,this.bufferStack=[],this._scopeClosers="",this.inBlock=!1,this.throwOnUndefined=t},i.fail=function(e,t,n){throw void 0!==t&&(t+=1),void 0!==n&&(n+=1),new s(e,t,n)},i._pushBuffer=function(){var e=this._tmpid();return this.bufferStack.push(this.buffer),this.buffer=e,this._emit("var "+this.buffer+' = "";'),e},i._popBuffer=function(){this.buffer=this.bufferStack.pop()},i._emit=function(e){this.codebuf.push(e)},i._emitLine=function(e){this._emit(e+"\n")},i._emitLines=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){return e._emitLine(t)}))},i._emitFuncBegin=function(e,t){this.buffer="output",this._scopeClosers="",this._emitLine("function "+t+"(env, context, frame, runtime, cb) {"),this._emitLine("var lineno = "+e.lineno+";"),this._emitLine("var colno = "+e.colno+";"),this._emitLine("var "+this.buffer+' = "";'),this._emitLine("try {")},i._emitFuncEnd=function(e){e||this._emitLine("cb(null, "+this.buffer+");"),this._closeScopeLevels(),this._emitLine("} catch (e) {"),this._emitLine("  cb(runtime.handleError(e, lineno, colno));"),this._emitLine("}"),this._emitLine("}"),this.buffer=null},i._addScopeLevel=function(){this._scopeClosers+="})"},i._closeScopeLevels=function(){this._emitLine(this._scopeClosers+";"),this._scopeClosers=""},i._withScopedSyntax=function(e){var t=this._scopeClosers;this._scopeClosers="",e.call(this),this._closeScopeLevels(),this._scopeClosers=t},i._makeCallback=function(e){var t=this._tmpid();return"function("+t+(e?","+e:"")+") {\nif("+t+") { cb("+t+"); return; }"},i._tmpid=function(){return this.lastId++,"t_"+this.lastId},i._templateName=function(){return null==this.templateName?"undefined":JSON.stringify(this.templateName)},i._compileChildren=function(e,t){var n=this;e.children.forEach((function(e){n.compile(e,t)}))},i._compileAggregate=function(e,t,n,r){var a=this;n&&this._emit(n),e.children.forEach((function(e,n){n>0&&a._emit(","),a.compile(e,t)})),r&&this._emit(r)},i._compileExpression=function(e,t){this.assertType(e,o.Literal,o.Symbol,o.Group,o.Array,o.Dict,o.FunCall,o.Caller,o.Filter,o.LookupVal,o.Compare,o.InlineIf,o.In,o.Is,o.And,o.Or,o.Not,o.Add,o.Concat,o.Sub,o.Mul,o.Div,o.FloorDiv,o.Mod,o.Pow,o.Neg,o.Pos,o.Compare,o.NodeList),this.compile(e,t)},i.assertType=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.some((function(t){return e instanceof t}))||this.fail("assertType: invalid type: "+e.typename,e.lineno,e.colno)},i.compileCallExtension=function(e,t,n){var r=this,a=e.args,i=e.contentArgs,s="boolean"!=typeof e.autoescape||e.autoescape;if(n||this._emit(this.buffer+" += runtime.suppressValue("),this._emit('env.getExtension("'+e.extName+'")["'+e.prop+'"]('),this._emit("context"),(a||i)&&this._emit(","),a&&(a instanceof o.NodeList||this.fail("compileCallExtension: arguments must be a NodeList, use `parser.parseSignature`"),a.children.forEach((function(e,n){r._compileExpression(e,t),(n!==a.children.length-1||i.length)&&r._emit(",")}))),i.length&&i.forEach((function(e,n){if(n>0&&r._emit(","),e){r._emitLine("function(cb) {"),r._emitLine("if(!cb) { cb = function(err) { if(err) { throw err; }}}");var a=r._pushBuffer();r._withScopedSyntax((function(){r.compile(e,t),r._emitLine("cb(null, "+a+");")})),r._popBuffer(),r._emitLine("return "+a+";"),r._emitLine("}")}else r._emit("null")})),n){var c=this._tmpid();this._emitLine(", "+this._makeCallback(c)),this._emitLine(this.buffer+" += runtime.suppressValue("+c+", "+s+" && env.opts.autoescape);"),this._addScopeLevel()}else this._emit(")"),this._emit(", "+s+" && env.opts.autoescape);\n")},i.compileCallExtensionAsync=function(e,t){this.compileCallExtension(e,t,!0)},i.compileNodeList=function(e,t){this._compileChildren(e,t)},i.compileLiteral=function(e){if("string"==typeof e.value){var t=e.value.replace(/\\/g,"\\\\");t=(t=(t=(t=(t=t.replace(/"/g,'\\"')).replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace(/\t/g,"\\t")).replace(/\u2028/g,"\\u2028"),this._emit('"'+t+'"')}else null===e.value?this._emit("null"):this._emit(e.value.toString())},i.compileSymbol=function(e,t){var n=e.value,r=t.lookup(n);r?this._emit(r):this._emit('runtime.contextOrFrameLookup(context, frame, "'+n+'")')},i.compileGroup=function(e,t){this._compileAggregate(e,t,"(",")")},i.compileArray=function(e,t){this._compileAggregate(e,t,"[","]")},i.compileDict=function(e,t){this._compileAggregate(e,t,"{","}")},i.compilePair=function(e,t){var n=e.key,r=e.value;n instanceof o.Symbol?n=new o.Literal(n.lineno,n.colno,n.value):n instanceof o.Literal&&"string"==typeof n.value||this.fail("compilePair: Dict keys must be strings or names",n.lineno,n.colno),this.compile(n,t),this._emit(": "),this._compileExpression(r,t)},i.compileInlineIf=function(e,t){this._emit("("),this.compile(e.cond,t),this._emit("?"),this.compile(e.body,t),this._emit(":"),null!==e.else_?this.compile(e.else_,t):this._emit('""'),this._emit(")")},i.compileIn=function(e,t){this._emit("runtime.inOperator("),this.compile(e.left,t),this._emit(","),this.compile(e.right,t),this._emit(")")},i.compileIs=function(e,t){var n=e.right.name?e.right.name.value:e.right.value;this._emit('env.getTest("'+n+'").call(context, '),this.compile(e.left,t),e.right.args&&(this._emit(","),this.compile(e.right.args,t)),this._emit(") === true")},i._binOpEmitter=function(e,t,n){this.compile(e.left,t),this._emit(n),this.compile(e.right,t)},i.compileOr=function(e,t){return this._binOpEmitter(e,t," || ")},i.compileAnd=function(e,t){return this._binOpEmitter(e,t," && ")},i.compileAdd=function(e,t){return this._binOpEmitter(e,t," + ")},i.compileConcat=function(e,t){return this._binOpEmitter(e,t,' + "" + ')},i.compileSub=function(e,t){return this._binOpEmitter(e,t," - ")},i.compileMul=function(e,t){return this._binOpEmitter(e,t," * ")},i.compileDiv=function(e,t){return this._binOpEmitter(e,t," / ")},i.compileMod=function(e,t){return this._binOpEmitter(e,t," % ")},i.compileNot=function(e,t){this._emit("!"),this.compile(e.target,t)},i.compileFloorDiv=function(e,t){this._emit("Math.floor("),this.compile(e.left,t),this._emit(" / "),this.compile(e.right,t),this._emit(")")},i.compilePow=function(e,t){this._emit("Math.pow("),this.compile(e.left,t),this._emit(", "),this.compile(e.right,t),this._emit(")")},i.compileNeg=function(e,t){this._emit("-"),this.compile(e.target,t)},i.compilePos=function(e,t){this._emit("+"),this.compile(e.target,t)},i.compileCompare=function(e,t){var n=this;this.compile(e.expr,t),e.ops.forEach((function(e){n._emit(" "+d[e.type]+" "),n.compile(e.expr,t)}))},i.compileLookupVal=function(e,t){this._emit("runtime.memberLookup(("),this._compileExpression(e.target,t),this._emit("),"),this._compileExpression(e.val,t),this._emit(")")},i._getNodeName=function(e){switch(e.typename){case"Symbol":return e.value;case"FunCall":return"the return value of ("+this._getNodeName(e.name)+")";case"LookupVal":return this._getNodeName(e.target)+'["'+this._getNodeName(e.val)+'"]';case"Literal":return e.value.toString();default:return"--expression--"}},i.compileFunCall=function(e,t){this._emit("(lineno = "+e.lineno+", colno = "+e.colno+", "),this._emit("runtime.callWrap("),this._compileExpression(e.name,t),this._emit(', "'+this._getNodeName(e.name).replace(/"/g,'\\"')+'", context, '),this._compileAggregate(e.args,t,"[","])"),this._emit(")")},i.compileFilter=function(e,t){var n=e.name;this.assertType(n,o.Symbol),this._emit('env.getFilter("'+n.value+'").call(context, '),this._compileAggregate(e.args,t),this._emit(")")},i.compileFilterAsync=function(e,t){var n=e.name,r=e.symbol.value;this.assertType(n,o.Symbol),t.set(r,r),this._emit('env.getFilter("'+n.value+'").call(context, '),this._compileAggregate(e.args,t),this._emitLine(", "+this._makeCallback(r)),this._addScopeLevel()},i.compileKeywordArgs=function(e,t){this._emit("runtime.makeKeywordArgs("),this.compileDict(e,t),this._emit(")")},i.compileSet=function(e,t){var n=this,r=[];e.targets.forEach((function(e){var a=e.value,i=t.lookup(a);null==i&&(i=n._tmpid(),n._emitLine("var "+i+";")),r.push(i)})),e.value?(this._emit(r.join(" = ")+" = "),this._compileExpression(e.value,t),this._emitLine(";")):(this._emit(r.join(" = ")+" = "),this.compile(e.body,t),this._emitLine(";")),e.targets.forEach((function(e,t){var a=r[t],i=e.value;n._emitLine('frame.set("'+i+'", '+a+", true);"),n._emitLine("if(frame.topLevel) {"),n._emitLine('context.setVariable("'+i+'", '+a+");"),n._emitLine("}"),"_"!==i.charAt(0)&&(n._emitLine("if(frame.topLevel) {"),n._emitLine('context.addExport("'+i+'", '+a+");"),n._emitLine("}"))}))},i.compileSwitch=function(e,t){var n=this;this._emit("switch ("),this.compile(e.expr,t),this._emit(") {"),e.cases.forEach((function(e,r){n._emit("case "),n.compile(e.cond,t),n._emit(": "),n.compile(e.body,t),e.body.children.length&&n._emitLine("break;")})),e.default&&(this._emit("default:"),this.compile(e.default,t)),this._emit("}")},i.compileIf=function(e,t,n){var r=this;this._emit("if("),this._compileExpression(e.cond,t),this._emitLine(") {"),this._withScopedSyntax((function(){r.compile(e.body,t),n&&r._emit("cb()")})),e.else_?(this._emitLine("}\nelse {"),this._withScopedSyntax((function(){r.compile(e.else_,t),n&&r._emit("cb()")}))):n&&(this._emitLine("}\nelse {"),this._emit("cb()")),this._emitLine("}")},i.compileIfAsync=function(e,t){this._emit("(function(cb) {"),this.compileIf(e,t,!0),this._emit("})("+this._makeCallback()),this._addScopeLevel()},i._emitLoopBindings=function(e,t,n,r){var a=this;[{name:"index",val:n+" + 1"},{name:"index0",val:n},{name:"revindex",val:r+" - "+n},{name:"revindex0",val:r+" - "+n+" - 1"},{name:"first",val:n+" === 0"},{name:"last",val:n+" === "+r+" - 1"},{name:"length",val:r}].forEach((function(e){a._emitLine('frame.set("loop.'+e.name+'", '+e.val+");")}))},i.compileFor=function(e,t){var n=this,r=this._tmpid(),a=this._tmpid(),i=this._tmpid();if(t=t.push(),this._emitLine("frame = frame.push();"),this._emit("var "+i+" = "),this._compileExpression(e.arr,t),this._emitLine(";"),this._emit("if("+i+") {"),this._emitLine(i+" = runtime.fromIterator("+i+");"),e.name instanceof o.Array){this._emitLine("var "+r+";"),this._emitLine("if(runtime.isArray("+i+")) {"),this._emitLine("var "+a+" = "+i+".length;"),this._emitLine("for("+r+"=0; "+r+" < "+i+".length; "+r+"++) {"),e.name.children.forEach((function(a,o){var s=n._tmpid();n._emitLine("var "+s+" = "+i+"["+r+"]["+o+"];"),n._emitLine('frame.set("'+a+'", '+i+"["+r+"]["+o+"]);"),t.set(e.name.children[o].value,s)})),this._emitLoopBindings(e,i,r,a),this._withScopedSyntax((function(){n.compile(e.body,t)})),this._emitLine("}"),this._emitLine("} else {");var s=e.name.children,c=s[0],l=s[1],d=this._tmpid(),u=this._tmpid();t.set(c.value,d),t.set(l.value,u),this._emitLine(r+" = -1;"),this._emitLine("var "+a+" = runtime.keys("+i+").length;"),this._emitLine("for(var "+d+" in "+i+") {"),this._emitLine(r+"++;"),this._emitLine("var "+u+" = "+i+"["+d+"];"),this._emitLine('frame.set("'+c.value+'", '+d+");"),this._emitLine('frame.set("'+l.value+'", '+u+");"),this._emitLoopBindings(e,i,r,a),this._withScopedSyntax((function(){n.compile(e.body,t)})),this._emitLine("}"),this._emitLine("}")}else{var h=this._tmpid();t.set(e.name.value,h),this._emitLine("var "+a+" = "+i+".length;"),this._emitLine("for(var "+r+"=0; "+r+" < "+i+".length; "+r+"++) {"),this._emitLine("var "+h+" = "+i+"["+r+"];"),this._emitLine('frame.set("'+e.name.value+'", '+h+");"),this._emitLoopBindings(e,i,r,a),this._withScopedSyntax((function(){n.compile(e.body,t)})),this._emitLine("}")}this._emitLine("}"),e.else_&&(this._emitLine("if (!"+a+") {"),this.compile(e.else_,t),this._emitLine("}")),this._emitLine("frame = frame.pop();")},i._compileAsyncLoop=function(e,t,n){var r=this,a=this._tmpid(),i=this._tmpid(),s=this._tmpid(),c=n?"asyncAll":"asyncEach";if(t=t.push(),this._emitLine("frame = frame.push();"),this._emit("var "+s+" = runtime.fromIterator("),this._compileExpression(e.arr,t),this._emitLine(");"),e.name instanceof o.Array){var l=e.name.children.length;this._emit("runtime."+c+"("+s+", "+l+", function("),e.name.children.forEach((function(e){r._emit(e.value+",")})),this._emit(a+","+i+",next) {"),e.name.children.forEach((function(e){var n=e.value;t.set(n,n),r._emitLine('frame.set("'+n+'", '+n+");")}))}else{var d=e.name.value;this._emitLine("runtime."+c+"("+s+", 1, function("+d+", "+a+", "+i+",next) {"),this._emitLine('frame.set("'+d+'", '+d+");"),t.set(d,d)}this._emitLoopBindings(e,s,a,i),this._withScopedSyntax((function(){var i;n&&(i=r._pushBuffer()),r.compile(e.body,t),r._emitLine("next("+a+(i?","+i:"")+");"),n&&r._popBuffer()}));var u=this._tmpid();this._emitLine("}, "+this._makeCallback(u)),this._addScopeLevel(),n&&this._emitLine(this.buffer+" += "+u+";"),e.else_&&(this._emitLine("if (!"+s+".length) {"),this.compile(e.else_,t),this._emitLine("}")),this._emitLine("frame = frame.pop();")},i.compileAsyncEach=function(e,t){this._compileAsyncLoop(e,t)},i.compileAsyncAll=function(e,t){this._compileAsyncLoop(e,t,!0)},i._compileMacro=function(e,t){var n=this,r=[],a=null,i="macro_"+this._tmpid(),s=void 0!==t;e.args.children.forEach((function(t,i){i===e.args.children.length-1&&t instanceof o.Dict?a=t:(n.assertType(t,o.Symbol),r.push(t))}));var l,d=[].concat(r.map((function(e){return"l_"+e.value})),["kwargs"]),u=r.map((function(e){return'"'+e.value+'"'})),h=(a&&a.children||[]).map((function(e){return'"'+e.key.value+'"'}));l=s?t.push(!0):new c,this._emitLines("var "+i+" = runtime.makeMacro(","["+u.join(", ")+"], ","["+h.join(", ")+"], ","function ("+d.join(", ")+") {","var callerFrame = frame;","frame = "+(s?"frame.push(true);":"new runtime.Frame();"),"kwargs = kwargs || {};",'if (Object.prototype.hasOwnProperty.call(kwargs, "caller")) {','frame.set("caller", kwargs.caller); }'),r.forEach((function(e){n._emitLine('frame.set("'+e.value+'", l_'+e.value+");"),l.set(e.value,"l_"+e.value)})),a&&a.children.forEach((function(e){var t=e.key.value;n._emit('frame.set("'+t+'", '),n._emit('Object.prototype.hasOwnProperty.call(kwargs, "'+t+'")'),n._emit(' ? kwargs["'+t+'"] : '),n._compileExpression(e.value,l),n._emit(");")}));var m=this._pushBuffer();return this._withScopedSyntax((function(){n.compile(e.body,l)})),this._emitLine("frame = "+(s?"frame.pop();":"callerFrame;")),this._emitLine("return new runtime.SafeString("+m+");"),this._emitLine("});"),this._popBuffer(),i},i.compileMacro=function(e,t){var n=this._compileMacro(e),r=e.name.value;t.set(r,n),t.parent?this._emitLine('frame.set("'+r+'", '+n+");"):("_"!==e.name.value.charAt(0)&&this._emitLine('context.addExport("'+r+'");'),this._emitLine('context.setVariable("'+r+'", '+n+");"))},i.compileCaller=function(e,t){this._emit("(function (){");var n=this._compileMacro(e,t);this._emit("return "+n+";})()")},i._compileGetTemplate=function(e,t,n,r){var a=this._tmpid(),i=this._templateName(),o=this._makeCallback(a),s=n?"true":"false",c=r?"true":"false";return this._emit("env.getTemplate("),this._compileExpression(e.template,t),this._emitLine(", "+s+", "+i+", "+c+", "+o),a},i.compileImport=function(e,t){var n=e.target.value,r=this._compileGetTemplate(e,t,!1,!1);this._addScopeLevel(),this._emitLine(r+".getExported("+(e.withContext?"context.getVariables(), frame, ":"")+this._makeCallback(r)),this._addScopeLevel(),t.set(n,r),t.parent?this._emitLine('frame.set("'+n+'", '+r+");"):this._emitLine('context.setVariable("'+n+'", '+r+");")},i.compileFromImport=function(e,t){var n=this,r=this._compileGetTemplate(e,t,!1,!1);this._addScopeLevel(),this._emitLine(r+".getExported("+(e.withContext?"context.getVariables(), frame, ":"")+this._makeCallback(r)),this._addScopeLevel(),e.names.children.forEach((function(e){var a,i,s=n._tmpid();e instanceof o.Pair?(a=e.key.value,i=e.value.value):i=a=e.value,n._emitLine("if(Object.prototype.hasOwnProperty.call("+r+', "'+a+'")) {'),n._emitLine("var "+s+" = "+r+"."+a+";"),n._emitLine("} else {"),n._emitLine("cb(new Error(\"cannot import '"+a+"'\")); return;"),n._emitLine("}"),t.set(i,s),t.parent?n._emitLine('frame.set("'+i+'", '+s+");"):n._emitLine('context.setVariable("'+i+'", '+s+");")}))},i.compileBlock=function(e){var t=this._tmpid();this.inBlock||this._emit('(parentTemplate ? function(e, c, f, r, cb) { cb(""); } : '),this._emit('context.getBlock("'+e.name.value+'")'),this.inBlock||this._emit(")"),this._emitLine("(env, context, frame, runtime, "+this._makeCallback(t)),this._emitLine(this.buffer+" += "+t+";"),this._addScopeLevel()},i.compileSuper=function(e,t){var n=e.blockName.value,r=e.symbol.value,a=this._makeCallback(r);this._emitLine('context.getSuper(env, "'+n+'", b_'+n+", frame, runtime, "+a),this._emitLine(r+" = runtime.markSafe("+r+");"),this._addScopeLevel(),t.set(r,r)},i.compileExtends=function(e,t){var n=this._tmpid(),r=this._compileGetTemplate(e,t,!0,!1);this._emitLine("parentTemplate = "+r),this._emitLine("for(var "+n+" in parentTemplate.blocks) {"),this._emitLine("context.addBlock("+n+", parentTemplate.blocks["+n+"]);"),this._emitLine("}"),this._addScopeLevel()},i.compileInclude=function(e,t){this._emitLine("var tasks = [];"),this._emitLine("tasks.push("),this._emitLine("function(callback) {");var n=this._compileGetTemplate(e,t,!1,e.ignoreMissing);this._emitLine("callback(null,"+n+");});"),this._emitLine("});");var r=this._tmpid();this._emitLine("tasks.push("),this._emitLine("function(template, callback){"),this._emitLine("template.render(context.getVariables(), frame, "+this._makeCallback(r)),this._emitLine("callback(null,"+r+");});"),this._emitLine("});"),this._emitLine("tasks.push("),this._emitLine("function(result, callback){"),this._emitLine(this.buffer+" += result;"),this._emitLine("callback(null);"),this._emitLine("});"),this._emitLine("env.waterfall(tasks, function(){"),this._addScopeLevel()},i.compileTemplateData=function(e,t){this.compileLiteral(e,t)},i.compileCapture=function(e,t){var n=this,r=this.buffer;this.buffer="output",this._emitLine("(function() {"),this._emitLine('var output = "";'),this._withScopedSyntax((function(){n.compile(e.body,t)})),this._emitLine("return output;"),this._emitLine("})()"),this.buffer=r},i.compileOutput=function(e,t){var n=this;e.children.forEach((function(r){r instanceof o.TemplateData?r.value&&(n._emit(n.buffer+" += "),n.compileLiteral(r,t),n._emitLine(";")):(n._emit(n.buffer+" += runtime.suppressValue("),n.throwOnUndefined&&n._emit("runtime.ensureDefined("),n.compile(r,t),n.throwOnUndefined&&n._emit(","+e.lineno+","+e.colno+")"),n._emit(", env.opts.autoescape);\n"))}))},i.compileRoot=function(e,t){var n=this;t&&this.fail("compileRoot: root node can't have frame"),t=new c,this._emitFuncBegin(e,"root"),this._emitLine("var parentTemplate = null;"),this._compileChildren(e,t),this._emitLine("if(parentTemplate) {"),this._emitLine("parentTemplate.rootRenderFunc(env, context, frame, runtime, cb);"),this._emitLine("} else {"),this._emitLine("cb(null, "+this.buffer+");"),this._emitLine("}"),this._emitFuncEnd(!0),this.inBlock=!0;var r=[],a=e.findAll(o.Block);a.forEach((function(e,t){var a=e.name.value;if(-1!==r.indexOf(a))throw new Error('Block "'+a+'" defined more than once.');r.push(a),n._emitFuncBegin(e,"b_"+a);var i=new c;n._emitLine("var frame = frame.push(true);"),n.compile(e.body,i),n._emitFuncEnd()})),this._emitLine("return {"),a.forEach((function(e,t){var r="b_"+e.name.value;n._emitLine(r+": "+r+",")})),this._emitLine("root: root\n};")},i.compile=function(e,t){var n=this["compile"+e.typename];n?n.call(this,e,t):this.fail("compile: Cannot compile node: "+e.typename,e.lineno,e.colno)},i.getCode=function(){return this.codebuf.join("")},a}(l);e.exports={compile:function(e,t,n,r,o){void 0===o&&(o={});var s=new u(r,o.throwOnUndefined),c=(n||[]).map((function(e){return e.preprocess})).filter((function(e){return!!e})),l=c.reduce((function(e,t){return t(e)}),e);return s.compile(i.transform(a.parse(l,n,o),t,r)),s.getCode()},Compiler:u}},function(e,t,n){function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}var a=n(4),i=n(1).EmitterObj;e.exports=function(e){var t,n;function i(){return e.apply(this,arguments)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var o=i.prototype;return o.resolve=function(e,t){return a.resolve(a.dirname(e),t)},o.isRelative=function(e){return 0===e.indexOf("./")||0===e.indexOf("../")},i}(i)},function(e,t,n){function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,a(e,t)}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}var i=n(12),o=n(15),s=n(0),c=n(5),l=n(18),d=n(10),u=d.FileSystemLoader,h=d.WebLoader,m=d.PrecompiledLoader,p=n(20),f=n(21),g=n(1),v=g.Obj,_=g.EmitterObj,y=n(2),b=y.handleError,w=y.Frame,x=n(22);function k(e,t,n){i((function(){e(t,n)}))}var M={type:"code",obj:{root:function(e,t,n,r,a){try{a(null,"")}catch(e){a(b(e,null,null))}}}},C=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var n=t.prototype;return n.init=function(e,t){var n=this;t=this.opts=t||{},this.opts.dev=!!t.dev,this.opts.autoescape=null==t.autoescape||t.autoescape,this.opts.throwOnUndefined=!!t.throwOnUndefined,this.opts.trimBlocks=!!t.trimBlocks,this.opts.lstripBlocks=!!t.lstripBlocks,this.loaders=[],e?this.loaders=s.isArray(e)?e:[e]:u?this.loaders=[new u("views")]:h&&(this.loaders=[new h("/views")]),"undefined"!=typeof window&&window.nunjucksPrecompiled&&this.loaders.unshift(new m(window.nunjucksPrecompiled)),this._initLoaders(),this.globals=f(),this.filters={},this.tests={},this.asyncFilters=[],this.extensions={},this.extensionsList=[],s._entries(l).forEach((function(e){var t=e[0],r=e[1];return n.addFilter(t,r)})),s._entries(p).forEach((function(e){var t=e[0],r=e[1];return n.addTest(t,r)}))},n._initLoaders=function(){var e=this;this.loaders.forEach((function(t){t.cache={},"function"==typeof t.on&&(t.on("update",(function(n,r){t.cache[n]=null,e.emit("update",n,r,t)})),t.on("load",(function(n,r){e.emit("load",n,r,t)})))}))},n.invalidateCache=function(){this.loaders.forEach((function(e){e.cache={}}))},n.addExtension=function(e,t){return t.__name=e,this.extensions[e]=t,this.extensionsList.push(t),this},n.removeExtension=function(e){var t=this.getExtension(e);t&&(this.extensionsList=s.without(this.extensionsList,t),delete this.extensions[e])},n.getExtension=function(e){return this.extensions[e]},n.hasExtension=function(e){return!!this.extensions[e]},n.addGlobal=function(e,t){return this.globals[e]=t,this},n.getGlobal=function(e){if(void 0===this.globals[e])throw new Error("global not found: "+e);return this.globals[e]},n.addFilter=function(e,t,n){var r=t;return n&&this.asyncFilters.push(e),this.filters[e]=r,this},n.getFilter=function(e){if(!this.filters[e])throw new Error("filter not found: "+e);return this.filters[e]},n.addTest=function(e,t){return this.tests[e]=t,this},n.getTest=function(e){if(!this.tests[e])throw new Error("test not found: "+e);return this.tests[e]},n.resolveTemplate=function(e,t,n){return e.isRelative&&t&&e.isRelative(n)&&e.resolve?e.resolve(t,n):n},n.getTemplate=function(e,t,n,r,a){var i,o=this,c=this,l=null;if(e&&e.raw&&(e=e.raw),s.isFunction(n)&&(a=n,n=null,t=t||!1),s.isFunction(t)&&(a=t,t=!1),e instanceof E)l=e;else{if("string"!=typeof e)throw new Error("template names must be a string: "+e);for(var d=0;d<this.loaders.length;d++){var u=this.loaders[d];if(l=u.cache[this.resolveTemplate(u,n,e)])break}}return l?(t&&l.compile(),a?void a(null,l):l):(s.asyncIter(this.loaders,(function(t,r,a,i){function o(e,n){e?i(e):n?(n.loader=t,i(null,n)):a()}e=c.resolveTemplate(t,n,e),t.async?t.getSource(e,o):o(null,t.getSource(e))}),(function(n,s){if(s||n||r||(n=new Error("template not found: "+e)),n){if(a)return void a(n);throw n}var c;s?(c=new E(s.src,o,s.path,t),s.noCache||(s.loader.cache[e]=c)):c=new E(M,o,"",t),a?a(null,c):i=c})),i)},n.express=function(e){return x(this,e)},n.render=function(e,t,n){s.isFunction(t)&&(n=t,t=null);var r=null;return this.getTemplate(e,(function(e,a){if(e&&n)k(n,e);else{if(e)throw e;r=a.render(t,n)}})),r},n.renderString=function(e,t,n,r){return s.isFunction(n)&&(r=n,n={}),new E(e,this,(n=n||{}).path).render(t,r)},n.waterfall=function(e,t,n){return o(e,t,n)},t}(_),S=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var n=t.prototype;return n.init=function(e,t,n){var r=this;this.env=n||new C,this.ctx=s.extend({},e),this.blocks={},this.exported=[],s.keys(t).forEach((function(e){r.addBlock(e,t[e])}))},n.lookup=function(e){return e in this.env.globals&&!(e in this.ctx)?this.env.globals[e]:this.ctx[e]},n.setVariable=function(e,t){this.ctx[e]=t},n.getVariables=function(){return this.ctx},n.addBlock=function(e,t){return this.blocks[e]=this.blocks[e]||[],this.blocks[e].push(t),this},n.getBlock=function(e){if(!this.blocks[e])throw new Error('unknown block "'+e+'"');return this.blocks[e][0]},n.getSuper=function(e,t,n,r,a,i){var o=s.indexOf(this.blocks[t]||[],n),c=this.blocks[t][o+1];if(-1===o||!c)throw new Error('no super block available for "'+t+'"');c(e,this,r,a,i)},n.addExport=function(e){this.exported.push(e)},n.getExported=function(){var e=this,t={};return this.exported.forEach((function(n){t[n]=e.ctx[n]})),t},t}(v),E=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var n=t.prototype;return n.init=function(e,t,n,r){if(this.env=t||new C,s.isObject(e))switch(e.type){case"code":this.tmplProps=e.obj;break;case"string":this.tmplStr=e.obj;break;default:throw new Error("Unexpected template object type "+e.type+"; expected 'code', or 'string'")}else{if(!s.isString(e))throw new Error("src must be a string or an object describing the source");this.tmplStr=e}if(this.path=n,r)try{this._compile()}catch(e){throw s._prettifyError(this.path,this.env.opts.dev,e)}else this.compiled=!1},n.render=function(e,t,n){var r=this;"function"==typeof e?(n=e,e={}):"function"==typeof t&&(n=t,t=null);var a=!t;try{this.compile()}catch(e){var i=s._prettifyError(this.path,this.env.opts.dev,e);if(n)return k(n,i);throw i}var o=new S(e||{},this.blocks,this.env),c=t?t.push(!0):new w;c.topLevel=!0;var l=null,d=!1;return this.rootRenderFunc(this.env,o,c,y,(function(e,t){if(!d||!n||void 0===t)if(e&&(e=s._prettifyError(r.path,r.env.opts.dev,e),d=!0),n)a?k(n,e,t):n(e,t);else{if(e)throw e;l=t}})),l},n.getExported=function(e,t,n){"function"==typeof e&&(n=e,e={}),"function"==typeof t&&(n=t,t=null);try{this.compile()}catch(e){if(n)return n(e);throw e}var r=t?t.push():new w;r.topLevel=!0;var a=new S(e||{},this.blocks,this.env);this.rootRenderFunc(this.env,a,r,y,(function(e){e?n(e,null):n(null,a.getExported())}))},n.compile=function(){this.compiled||this._compile()},n._compile=function(){var e;if(this.tmplProps)e=this.tmplProps;else{var t=c.compile(this.tmplStr,this.env.asyncFilters,this.env.extensionsList,this.path,this.env.opts);e=new Function(t)()}this.blocks=this._getBlocks(e),this.rootRenderFunc=e.root,this.compiled=!0},n._getBlocks=function(e){var t={};return s.keys(e).forEach((function(n){"b_"===n.slice(0,2)&&(t[n.slice(2)]=e[n])})),t},t}(v);e.exports={Environment:C,Template:E}},function(e,t,n){function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}var a=n(9),i=n(3),o=n(1).Obj,s=n(0),c=function(e){var t,n;function o(){return e.apply(this,arguments)||this}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var c=o.prototype;return c.init=function(e){this.tokens=e,this.peeked=null,this.breakOnBlocks=null,this.dropLeadingWhitespace=!1,this.extensions=[]},c.nextToken=function(e){var t;if(this.peeked){if(e||this.peeked.type!==a.TOKEN_WHITESPACE)return t=this.peeked,this.peeked=null,t;this.peeked=null}if(t=this.tokens.nextToken(),!e)for(;t&&t.type===a.TOKEN_WHITESPACE;)t=this.tokens.nextToken();return t},c.peekToken=function(){return this.peeked=this.peeked||this.nextToken(),this.peeked},c.pushToken=function(e){if(this.peeked)throw new Error("pushToken: can only push one token on between reads");this.peeked=e},c.error=function(e,t,n){if(void 0===t||void 0===n){var r=this.peekToken()||{};t=r.lineno,n=r.colno}return void 0!==t&&(t+=1),void 0!==n&&(n+=1),new s.TemplateError(e,t,n)},c.fail=function(e,t,n){throw this.error(e,t,n)},c.skip=function(e){var t=this.nextToken();return!(!t||t.type!==e)||(this.pushToken(t),!1)},c.expect=function(e){var t=this.nextToken();return t.type!==e&&this.fail("expected "+e+", got "+t.type,t.lineno,t.colno),t},c.skipValue=function(e,t){var n=this.nextToken();return!(!n||n.type!==e||n.value!==t)||(this.pushToken(n),!1)},c.skipSymbol=function(e){return this.skipValue(a.TOKEN_SYMBOL,e)},c.advanceAfterBlockEnd=function(e){var t;return e||((t=this.peekToken())||this.fail("unexpected end of file"),t.type!==a.TOKEN_SYMBOL&&this.fail("advanceAfterBlockEnd: expected symbol token or explicit name to be passed"),e=this.nextToken().value),(t=this.nextToken())&&t.type===a.TOKEN_BLOCK_END?"-"===t.value.charAt(0)&&(this.dropLeadingWhitespace=!0):this.fail("expected block end in "+e+" statement"),t},c.advanceAfterVariableEnd=function(){var e=this.nextToken();e&&e.type===a.TOKEN_VARIABLE_END?this.dropLeadingWhitespace="-"===e.value.charAt(e.value.length-this.tokens.tags.VARIABLE_END.length-1):(this.pushToken(e),this.fail("expected variable end"))},c.parseFor=function(){var e,t,n=this.peekToken();if(this.skipSymbol("for")?(e=new i.For(n.lineno,n.colno),t="endfor"):this.skipSymbol("asyncEach")?(e=new i.AsyncEach(n.lineno,n.colno),t="endeach"):this.skipSymbol("asyncAll")?(e=new i.AsyncAll(n.lineno,n.colno),t="endall"):this.fail("parseFor: expected for{Async}",n.lineno,n.colno),e.name=this.parsePrimary(),e.name instanceof i.Symbol||this.fail("parseFor: variable name expected for loop"),this.peekToken().type===a.TOKEN_COMMA){var r=e.name;for(e.name=new i.Array(r.lineno,r.colno),e.name.addChild(r);this.skip(a.TOKEN_COMMA);){var o=this.parsePrimary();e.name.addChild(o)}}return this.skipSymbol("in")||this.fail('parseFor: expected "in" keyword for loop',n.lineno,n.colno),e.arr=this.parseExpression(),this.advanceAfterBlockEnd(n.value),e.body=this.parseUntilBlocks(t,"else"),this.skipSymbol("else")&&(this.advanceAfterBlockEnd("else"),e.else_=this.parseUntilBlocks(t)),this.advanceAfterBlockEnd(),e},c.parseMacro=function(){var e=this.peekToken();this.skipSymbol("macro")||this.fail("expected macro");var t=this.parsePrimary(!0),n=this.parseSignature(),r=new i.Macro(e.lineno,e.colno,t,n);return this.advanceAfterBlockEnd(e.value),r.body=this.parseUntilBlocks("endmacro"),this.advanceAfterBlockEnd(),r},c.parseCall=function(){var e=this.peekToken();this.skipSymbol("call")||this.fail("expected call");var t=this.parseSignature(!0)||new i.NodeList,n=this.parsePrimary();this.advanceAfterBlockEnd(e.value);var r=this.parseUntilBlocks("endcall");this.advanceAfterBlockEnd();var a=new i.Symbol(e.lineno,e.colno,"caller"),o=new i.Caller(e.lineno,e.colno,a,t,r),s=n.args.children;return s[s.length-1]instanceof i.KeywordArgs||s.push(new i.KeywordArgs),s[s.length-1].addChild(new i.Pair(e.lineno,e.colno,a,o)),new i.Output(e.lineno,e.colno,[n])},c.parseWithContext=function(){var e=this.peekToken(),t=null;return this.skipSymbol("with")?t=!0:this.skipSymbol("without")&&(t=!1),null!==t&&(this.skipSymbol("context")||this.fail("parseFrom: expected context after with/without",e.lineno,e.colno)),t},c.parseImport=function(){var e=this.peekToken();this.skipSymbol("import")||this.fail("parseImport: expected import",e.lineno,e.colno);var t=this.parseExpression();this.skipSymbol("as")||this.fail('parseImport: expected "as" keyword',e.lineno,e.colno);var n=this.parseExpression(),r=this.parseWithContext(),a=new i.Import(e.lineno,e.colno,t,n,r);return this.advanceAfterBlockEnd(e.value),a},c.parseFrom=function(){var e=this.peekToken();this.skipSymbol("from")||this.fail("parseFrom: expected from");var t=this.parseExpression();this.skipSymbol("import")||this.fail("parseFrom: expected import",e.lineno,e.colno);for(var n,r=new i.NodeList;;){var o=this.peekToken();if(o.type===a.TOKEN_BLOCK_END){r.children.length||this.fail("parseFrom: Expected at least one import name",e.lineno,e.colno),"-"===o.value.charAt(0)&&(this.dropLeadingWhitespace=!0),this.nextToken();break}r.children.length>0&&!this.skip(a.TOKEN_COMMA)&&this.fail("parseFrom: expected comma",e.lineno,e.colno);var s=this.parsePrimary();if("_"===s.value.charAt(0)&&this.fail("parseFrom: names starting with an underscore cannot be imported",s.lineno,s.colno),this.skipSymbol("as")){var c=this.parsePrimary();r.addChild(new i.Pair(s.lineno,s.colno,s,c))}else r.addChild(s);n=this.parseWithContext()}return new i.FromImport(e.lineno,e.colno,t,r,n)},c.parseBlock=function(){var e=this.peekToken();this.skipSymbol("block")||this.fail("parseBlock: expected block",e.lineno,e.colno);var t=new i.Block(e.lineno,e.colno);t.name=this.parsePrimary(),t.name instanceof i.Symbol||this.fail("parseBlock: variable name expected",e.lineno,e.colno),this.advanceAfterBlockEnd(e.value),t.body=this.parseUntilBlocks("endblock"),this.skipSymbol("endblock"),this.skipSymbol(t.name.value);var n=this.peekToken();return n||this.fail("parseBlock: expected endblock, got end of file"),this.advanceAfterBlockEnd(n.value),t},c.parseExtends=function(){var e="extends",t=this.peekToken();this.skipSymbol(e)||this.fail("parseTemplateRef: expected "+e);var n=new i.Extends(t.lineno,t.colno);return n.template=this.parseExpression(),this.advanceAfterBlockEnd(t.value),n},c.parseInclude=function(){var e="include",t=this.peekToken();this.skipSymbol(e)||this.fail("parseInclude: expected "+e);var n=new i.Include(t.lineno,t.colno);return n.template=this.parseExpression(),this.skipSymbol("ignore")&&this.skipSymbol("missing")&&(n.ignoreMissing=!0),this.advanceAfterBlockEnd(t.value),n},c.parseIf=function(){var e,t=this.peekToken();this.skipSymbol("if")||this.skipSymbol("elif")||this.skipSymbol("elseif")?e=new i.If(t.lineno,t.colno):this.skipSymbol("ifAsync")?e=new i.IfAsync(t.lineno,t.colno):this.fail("parseIf: expected if, elif, or elseif",t.lineno,t.colno),e.cond=this.parseExpression(),this.advanceAfterBlockEnd(t.value),e.body=this.parseUntilBlocks("elif","elseif","else","endif");var n=this.peekToken();switch(n&&n.value){case"elseif":case"elif":e.else_=this.parseIf();break;case"else":this.advanceAfterBlockEnd(),e.else_=this.parseUntilBlocks("endif"),this.advanceAfterBlockEnd();break;case"endif":e.else_=null,this.advanceAfterBlockEnd();break;default:this.fail("parseIf: expected elif, else, or endif, got end of file")}return e},c.parseSet=function(){var e=this.peekToken();this.skipSymbol("set")||this.fail("parseSet: expected set",e.lineno,e.colno);for(var t,n=new i.Set(e.lineno,e.colno,[]);(t=this.parsePrimary())&&(n.targets.push(t),this.skip(a.TOKEN_COMMA)););return this.skipValue(a.TOKEN_OPERATOR,"=")?(n.value=this.parseExpression(),this.advanceAfterBlockEnd(e.value)):this.skip(a.TOKEN_BLOCK_END)?(n.body=new i.Capture(e.lineno,e.colno,this.parseUntilBlocks("endset")),n.value=null,this.advanceAfterBlockEnd()):this.fail("parseSet: expected = or block end in set tag",e.lineno,e.colno),n},c.parseSwitch=function(){var e="switch",t="endswitch",n="case",r="default",a=this.peekToken();this.skipSymbol(e)||this.skipSymbol(n)||this.skipSymbol(r)||this.fail('parseSwitch: expected "switch," "case" or "default"',a.lineno,a.colno);var o=this.parseExpression();this.advanceAfterBlockEnd(e),this.parseUntilBlocks(n,r,t);var s,c=this.peekToken(),l=[];do{this.skipSymbol(n);var d=this.parseExpression();this.advanceAfterBlockEnd(e);var u=this.parseUntilBlocks(n,r,t);l.push(new i.Case(c.line,c.col,d,u)),c=this.peekToken()}while(c&&c.value===n);switch(c.value){case r:this.advanceAfterBlockEnd(),s=this.parseUntilBlocks(t),this.advanceAfterBlockEnd();break;case t:this.advanceAfterBlockEnd();break;default:this.fail('parseSwitch: expected "case," "default" or "endswitch," got EOF.')}return new i.Switch(a.lineno,a.colno,o,l,s)},c.parseStatement=function(){var e=this.peekToken();if(e.type!==a.TOKEN_SYMBOL&&this.fail("tag name expected",e.lineno,e.colno),this.breakOnBlocks&&-1!==s.indexOf(this.breakOnBlocks,e.value))return null;switch(e.value){case"raw":return this.parseRaw();case"verbatim":return this.parseRaw("verbatim");case"if":case"ifAsync":return this.parseIf();case"for":case"asyncEach":case"asyncAll":return this.parseFor();case"block":return this.parseBlock();case"extends":return this.parseExtends();case"include":return this.parseInclude();case"set":return this.parseSet();case"macro":return this.parseMacro();case"call":return this.parseCall();case"import":return this.parseImport();case"from":return this.parseFrom();case"filter":return this.parseFilterStatement();case"switch":return this.parseSwitch();default:if(this.extensions.length)for(var t=0;t<this.extensions.length;t++){var n=this.extensions[t];if(-1!==s.indexOf(n.tags||[],e.value))return n.parse(this,i,a)}this.fail("unknown block tag: "+e.value,e.lineno,e.colno)}},c.parseRaw=function(e){for(var t="end"+(e=e||"raw"),n=new RegExp("([\\s\\S]*?){%\\s*("+e+"|"+t+")\\s*(?=%})%}"),r=1,a="",o=null,s=this.advanceAfterBlockEnd();(o=this.tokens._extractRegex(n))&&r>0;){var c=o[0],l=o[1],d=o[2];d===e?r+=1:d===t&&(r-=1),0===r?(a+=l,this.tokens.backN(c.length-l.length)):a+=c}return new i.Output(s.lineno,s.colno,[new i.TemplateData(s.lineno,s.colno,a)])},c.parsePostfix=function(e){for(var t,n=this.peekToken();n;){if(n.type===a.TOKEN_LEFT_PAREN)e=new i.FunCall(n.lineno,n.colno,e,this.parseSignature());else if(n.type===a.TOKEN_LEFT_BRACKET)(t=this.parseAggregate()).children.length>1&&this.fail("invalid index"),e=new i.LookupVal(n.lineno,n.colno,e,t.children[0]);else{if(n.type!==a.TOKEN_OPERATOR||"."!==n.value)break;this.nextToken();var r=this.nextToken();r.type!==a.TOKEN_SYMBOL&&this.fail("expected name as lookup value, got "+r.value,r.lineno,r.colno),t=new i.Literal(r.lineno,r.colno,r.value),e=new i.LookupVal(n.lineno,n.colno,e,t)}n=this.peekToken()}return e},c.parseExpression=function(){return this.parseInlineIf()},c.parseInlineIf=function(){var e=this.parseOr();if(this.skipSymbol("if")){var t=this.parseOr(),n=e;(e=new i.InlineIf(e.lineno,e.colno)).body=n,e.cond=t,this.skipSymbol("else")?e.else_=this.parseOr():e.else_=null}return e},c.parseOr=function(){for(var e=this.parseAnd();this.skipSymbol("or");){var t=this.parseAnd();e=new i.Or(e.lineno,e.colno,e,t)}return e},c.parseAnd=function(){for(var e=this.parseNot();this.skipSymbol("and");){var t=this.parseNot();e=new i.And(e.lineno,e.colno,e,t)}return e},c.parseNot=function(){var e=this.peekToken();return this.skipSymbol("not")?new i.Not(e.lineno,e.colno,this.parseNot()):this.parseIn()},c.parseIn=function(){for(var e=this.parseIs();;){var t=this.nextToken();if(!t)break;var n=t.type===a.TOKEN_SYMBOL&&"not"===t.value;if(n||this.pushToken(t),!this.skipSymbol("in")){n&&this.pushToken(t);break}var r=this.parseIs();e=new i.In(e.lineno,e.colno,e,r),n&&(e=new i.Not(e.lineno,e.colno,e))}return e},c.parseIs=function(){var e=this.parseCompare();if(this.skipSymbol("is")){var t=this.skipSymbol("not"),n=this.parseCompare();e=new i.Is(e.lineno,e.colno,e,n),t&&(e=new i.Not(e.lineno,e.colno,e))}return e},c.parseCompare=function(){for(var e=["==","===","!=","!==","<",">","<=",">="],t=this.parseConcat(),n=[];;){var r=this.nextToken();if(!r)break;if(-1===e.indexOf(r.value)){this.pushToken(r);break}n.push(new i.CompareOperand(r.lineno,r.colno,this.parseConcat(),r.value))}return n.length?new i.Compare(n[0].lineno,n[0].colno,t,n):t},c.parseConcat=function(){for(var e=this.parseAdd();this.skipValue(a.TOKEN_TILDE,"~");){var t=this.parseAdd();e=new i.Concat(e.lineno,e.colno,e,t)}return e},c.parseAdd=function(){for(var e=this.parseSub();this.skipValue(a.TOKEN_OPERATOR,"+");){var t=this.parseSub();e=new i.Add(e.lineno,e.colno,e,t)}return e},c.parseSub=function(){for(var e=this.parseMul();this.skipValue(a.TOKEN_OPERATOR,"-");){var t=this.parseMul();e=new i.Sub(e.lineno,e.colno,e,t)}return e},c.parseMul=function(){for(var e=this.parseDiv();this.skipValue(a.TOKEN_OPERATOR,"*");){var t=this.parseDiv();e=new i.Mul(e.lineno,e.colno,e,t)}return e},c.parseDiv=function(){for(var e=this.parseFloorDiv();this.skipValue(a.TOKEN_OPERATOR,"/");){var t=this.parseFloorDiv();e=new i.Div(e.lineno,e.colno,e,t)}return e},c.parseFloorDiv=function(){for(var e=this.parseMod();this.skipValue(a.TOKEN_OPERATOR,"//");){var t=this.parseMod();e=new i.FloorDiv(e.lineno,e.colno,e,t)}return e},c.parseMod=function(){for(var e=this.parsePow();this.skipValue(a.TOKEN_OPERATOR,"%");){var t=this.parsePow();e=new i.Mod(e.lineno,e.colno,e,t)}return e},c.parsePow=function(){for(var e=this.parseUnary();this.skipValue(a.TOKEN_OPERATOR,"**");){var t=this.parseUnary();e=new i.Pow(e.lineno,e.colno,e,t)}return e},c.parseUnary=function(e){var t,n=this.peekToken();return t=this.skipValue(a.TOKEN_OPERATOR,"-")?new i.Neg(n.lineno,n.colno,this.parseUnary(!0)):this.skipValue(a.TOKEN_OPERATOR,"+")?new i.Pos(n.lineno,n.colno,this.parseUnary(!0)):this.parsePrimary(),e||(t=this.parseFilter(t)),t},c.parsePrimary=function(e){var t,n=this.nextToken(),r=null;if(n?n.type===a.TOKEN_STRING?t=n.value:n.type===a.TOKEN_INT?t=parseInt(n.value,10):n.type===a.TOKEN_FLOAT?t=parseFloat(n.value):n.type===a.TOKEN_BOOLEAN?"true"===n.value?t=!0:"false"===n.value?t=!1:this.fail("invalid boolean: "+n.value,n.lineno,n.colno):n.type===a.TOKEN_NONE?t=null:n.type===a.TOKEN_REGEX&&(t=new RegExp(n.value.body,n.value.flags)):this.fail("expected expression, got end of file"),void 0!==t?r=new i.Literal(n.lineno,n.colno,t):n.type===a.TOKEN_SYMBOL?r=new i.Symbol(n.lineno,n.colno,n.value):(this.pushToken(n),r=this.parseAggregate()),e||(r=this.parsePostfix(r)),r)return r;throw this.error("unexpected token: "+n.value,n.lineno,n.colno)},c.parseFilterName=function(){for(var e=this.expect(a.TOKEN_SYMBOL),t=e.value;this.skipValue(a.TOKEN_OPERATOR,".");)t+="."+this.expect(a.TOKEN_SYMBOL).value;return new i.Symbol(e.lineno,e.colno,t)},c.parseFilterArgs=function(e){return this.peekToken().type===a.TOKEN_LEFT_PAREN?this.parsePostfix(e).args.children:[]},c.parseFilter=function(e){for(;this.skip(a.TOKEN_PIPE);){var t=this.parseFilterName();e=new i.Filter(t.lineno,t.colno,t,new i.NodeList(t.lineno,t.colno,[e].concat(this.parseFilterArgs(e))))}return e},c.parseFilterStatement=function(){var e=this.peekToken();this.skipSymbol("filter")||this.fail("parseFilterStatement: expected filter");var t=this.parseFilterName(),n=this.parseFilterArgs(t);this.advanceAfterBlockEnd(e.value);var r=new i.Capture(t.lineno,t.colno,this.parseUntilBlocks("endfilter"));this.advanceAfterBlockEnd();var a=new i.Filter(t.lineno,t.colno,t,new i.NodeList(t.lineno,t.colno,[r].concat(n)));return new i.Output(t.lineno,t.colno,[a])},c.parseAggregate=function(){var e,t=this.nextToken();switch(t.type){case a.TOKEN_LEFT_PAREN:e=new i.Group(t.lineno,t.colno);break;case a.TOKEN_LEFT_BRACKET:e=new i.Array(t.lineno,t.colno);break;case a.TOKEN_LEFT_CURLY:e=new i.Dict(t.lineno,t.colno);break;default:return null}for(;;){var n=this.peekToken().type;if(n===a.TOKEN_RIGHT_PAREN||n===a.TOKEN_RIGHT_BRACKET||n===a.TOKEN_RIGHT_CURLY){this.nextToken();break}if(e.children.length>0&&(this.skip(a.TOKEN_COMMA)||this.fail("parseAggregate: expected comma after expression",t.lineno,t.colno)),e instanceof i.Dict){var r=this.parsePrimary();this.skip(a.TOKEN_COLON)||this.fail("parseAggregate: expected colon after dict key",t.lineno,t.colno);var o=this.parseExpression();e.addChild(new i.Pair(r.lineno,r.colno,r,o))}else{var s=this.parseExpression();e.addChild(s)}}return e},c.parseSignature=function(e,t){var n=this.peekToken();if(!t&&n.type!==a.TOKEN_LEFT_PAREN){if(e)return null;this.fail("expected arguments",n.lineno,n.colno)}n.type===a.TOKEN_LEFT_PAREN&&(n=this.nextToken());for(var r=new i.NodeList(n.lineno,n.colno),o=new i.KeywordArgs(n.lineno,n.colno),s=!1;;){if(n=this.peekToken(),!t&&n.type===a.TOKEN_RIGHT_PAREN){this.nextToken();break}if(t&&n.type===a.TOKEN_BLOCK_END)break;if(s&&!this.skip(a.TOKEN_COMMA))this.fail("parseSignature: expected comma after expression",n.lineno,n.colno);else{var c=this.parseExpression();this.skipValue(a.TOKEN_OPERATOR,"=")?o.addChild(new i.Pair(c.lineno,c.colno,c,this.parseExpression())):r.addChild(c)}s=!0}return o.children.length&&r.addChild(o),r},c.parseUntilBlocks=function(){for(var e=this.breakOnBlocks,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.breakOnBlocks=n;var a=this.parse();return this.breakOnBlocks=e,a},c.parseNodes=function(){for(var e,t=[];e=this.nextToken();)if(e.type===a.TOKEN_DATA){var n=e.value,r=this.peekToken(),o=r&&r.value;this.dropLeadingWhitespace&&(n=n.replace(/^\s*/,""),this.dropLeadingWhitespace=!1),r&&(r.type===a.TOKEN_BLOCK_START&&"-"===o.charAt(o.length-1)||r.type===a.TOKEN_VARIABLE_START&&"-"===o.charAt(this.tokens.tags.VARIABLE_START.length)||r.type===a.TOKEN_COMMENT&&"-"===o.charAt(this.tokens.tags.COMMENT_START.length))&&(n=n.replace(/\s*$/,"")),t.push(new i.Output(e.lineno,e.colno,[new i.TemplateData(e.lineno,e.colno,n)]))}else if(e.type===a.TOKEN_BLOCK_START){this.dropLeadingWhitespace=!1;var s=this.parseStatement();if(!s)break;t.push(s)}else if(e.type===a.TOKEN_VARIABLE_START){var c=this.parseExpression();this.dropLeadingWhitespace=!1,this.advanceAfterVariableEnd(),t.push(new i.Output(e.lineno,e.colno,[c]))}else e.type===a.TOKEN_COMMENT?this.dropLeadingWhitespace="-"===e.value.charAt(e.value.length-this.tokens.tags.COMMENT_END.length-1):this.fail("Unexpected token at top-level: "+e.type,e.lineno,e.colno);return t},c.parse=function(){return new i.NodeList(0,0,this.parseNodes())},c.parseAsRoot=function(){return new i.Root(0,0,this.parseNodes())},o}(o);e.exports={parse:function(e,t,n){var r=new c(a.lex(e,n));return void 0!==t&&(r.extensions=t),r.parseAsRoot()},Parser:c}},function(e,t,n){var r=n(0),a=" \n\t\r",i="()[]{}%*-+~/#,:|.<>=!",o="string",s="whitespace",c="data",l="block-start",d="block-end",u="variable-start",h="variable-end",m="comment",p="left-paren",f="right-paren",g="left-bracket",v="right-bracket",_="left-curly",y="right-curly",b="operator",w="comma",x="colon",k="tilde",M="pipe",C="float",S="boolean",E="none",A="symbol",T="regex";function $(e,t,n,r){return{type:e,value:t,lineno:n,colno:r}}var I=function(){function e(e,t){this.str=e,this.index=0,this.len=e.length,this.lineno=0,this.colno=0,this.in_code=!1;var n=(t=t||{}).tags||{};this.tags={BLOCK_START:n.blockStart||"{%",BLOCK_END:n.blockEnd||"%}",VARIABLE_START:n.variableStart||"{{",VARIABLE_END:n.variableEnd||"}}",COMMENT_START:n.commentStart||"{#",COMMENT_END:n.commentEnd||"#}"},this.trimBlocks=!!t.trimBlocks,this.lstripBlocks=!!t.lstripBlocks}var t=e.prototype;return t.nextToken=function(){var e,t=this.lineno,n=this.colno;if(this.in_code){var I=this.current();if(this.isFinished())return null;if('"'===I||"'"===I)return $(o,this._parseString(I),t,n);if(e=this._extract(a))return $(s,e,t,n);if((e=this._extractString(this.tags.BLOCK_END))||(e=this._extractString("-"+this.tags.BLOCK_END)))return this.in_code=!1,this.trimBlocks&&("\n"===(I=this.current())?this.forward():"\r"===I&&(this.forward(),"\n"===(I=this.current())?this.forward():this.back())),$(d,e,t,n);if((e=this._extractString(this.tags.VARIABLE_END))||(e=this._extractString("-"+this.tags.VARIABLE_END)))return this.in_code=!1,$(h,e,t,n);if("r"===I&&"/"===this.str.charAt(this.index+1)){this.forwardN(2);for(var O="";!this.isFinished();){if("/"===this.current()&&"\\"!==this.previous()){this.forward();break}O+=this.current(),this.forward()}for(var L=["g","i","m","y"],D="";!this.isFinished()&&-1!==L.indexOf(this.current());)D+=this.current(),this.forward();return $(T,{body:O,flags:D},t,n)}if(-1!==i.indexOf(I)){this.forward();var j,z=["==","===","!=","!==","<=",">=","//","**"],P=I+this.current();switch(-1!==r.indexOf(z,P)&&(this.forward(),I=P,-1!==r.indexOf(z,P+this.current())&&(I=P+this.current(),this.forward())),I){case"(":j=p;break;case")":j=f;break;case"[":j=g;break;case"]":j=v;break;case"{":j=_;break;case"}":j=y;break;case",":j=w;break;case":":j=x;break;case"~":j=k;break;case"|":j=M;break;default:j=b}return $(j,I,t,n)}if((e=this._extractUntil(a+i)).match(/^[-+]?[0-9]+$/)){if("."===this.current()){this.forward();var R=this._extract("0123456789");return $(C,e+"."+R,t,n)}return $("int",e,t,n)}if(e.match(/^(true|false)$/))return $(S,e,t,n);if("none"===e)return $(E,e,t,n);if("null"===e)return $(E,e,t,n);if(e)return $(A,e,t,n);throw new Error("Unexpected value while parsing: "+e)}var N,F=this.tags.BLOCK_START.charAt(0)+this.tags.VARIABLE_START.charAt(0)+this.tags.COMMENT_START.charAt(0)+this.tags.COMMENT_END.charAt(0);if(this.isFinished())return null;if((e=this._extractString(this.tags.BLOCK_START+"-"))||(e=this._extractString(this.tags.BLOCK_START)))return this.in_code=!0,$(l,e,t,n);if((e=this._extractString(this.tags.VARIABLE_START+"-"))||(e=this._extractString(this.tags.VARIABLE_START)))return this.in_code=!0,$(u,e,t,n);e="";var B=!1;for(this._matches(this.tags.COMMENT_START)&&(B=!0,e=this._extractString(this.tags.COMMENT_START));null!==(N=this._extractUntil(F));){if(e+=N,(this._matches(this.tags.BLOCK_START)||this._matches(this.tags.VARIABLE_START)||this._matches(this.tags.COMMENT_START))&&!B){if(this.lstripBlocks&&this._matches(this.tags.BLOCK_START)&&this.colno>0&&this.colno<=e.length){var V=e.slice(-this.colno);if(/^\s+$/.test(V)&&!(e=e.slice(0,-this.colno)).length)return this.nextToken()}break}if(this._matches(this.tags.COMMENT_END)){if(!B)throw new Error("unexpected end of comment");e+=this._extractString(this.tags.COMMENT_END);break}e+=this.current(),this.forward()}if(null===N&&B)throw new Error("expected end of comment, got end of file");return $(B?m:c,e,t,n)},t._parseString=function(e){this.forward();for(var t="";!this.isFinished()&&this.current()!==e;){var n=this.current();if("\\"===n){switch(this.forward(),this.current()){case"n":t+="\n";break;case"t":t+="\t";break;case"r":t+="\r";break;default:t+=this.current()}this.forward()}else t+=n,this.forward()}return this.forward(),t},t._matches=function(e){return this.index+e.length>this.len?null:this.str.slice(this.index,this.index+e.length)===e},t._extractString=function(e){return this._matches(e)?(this.forwardN(e.length),e):null},t._extractUntil=function(e){return this._extractMatching(!0,e||"")},t._extract=function(e){return this._extractMatching(!1,e)},t._extractMatching=function(e,t){if(this.isFinished())return null;var n=t.indexOf(this.current());if(e&&-1===n||!e&&-1!==n){var r=this.current();this.forward();for(var a=t.indexOf(this.current());(e&&-1===a||!e&&-1!==a)&&!this.isFinished();)r+=this.current(),this.forward(),a=t.indexOf(this.current());return r}return""},t._extractRegex=function(e){var t=this.currentStr().match(e);return t?(this.forwardN(t[0].length),t):null},t.isFinished=function(){return this.index>=this.len},t.forwardN=function(e){for(var t=0;t<e;t++)this.forward()},t.forward=function(){this.index++,"\n"===this.previous()?(this.lineno++,this.colno=0):this.colno++},t.backN=function(e){for(var t=0;t<e;t++)this.back()},t.back=function(){if(this.index--,"\n"===this.current()){this.lineno--;var e=this.src.lastIndexOf("\n",this.index-1);this.colno=-1===e?this.index:this.index-e}else this.colno--},t.current=function(){return this.isFinished()?"":this.str.charAt(this.index)},t.currentStr=function(){return this.isFinished()?"":this.str.substr(this.index)},t.previous=function(){return this.str.charAt(this.index-1)},e}();e.exports={lex:function(e,t){return new I(e,t)},TOKEN_STRING:o,TOKEN_WHITESPACE:s,TOKEN_DATA:c,TOKEN_BLOCK_START:l,TOKEN_BLOCK_END:d,TOKEN_VARIABLE_START:u,TOKEN_VARIABLE_END:h,TOKEN_COMMENT:m,TOKEN_LEFT_PAREN:p,TOKEN_RIGHT_PAREN:f,TOKEN_LEFT_BRACKET:g,TOKEN_RIGHT_BRACKET:v,TOKEN_LEFT_CURLY:_,TOKEN_RIGHT_CURLY:y,TOKEN_OPERATOR:b,TOKEN_COMMA:w,TOKEN_COLON:x,TOKEN_TILDE:k,TOKEN_PIPE:M,TOKEN_INT:"int",TOKEN_FLOAT:C,TOKEN_BOOLEAN:S,TOKEN_NONE:E,TOKEN_SYMBOL:A,TOKEN_SPECIAL:"special",TOKEN_REGEX:T}},function(e,t,n){function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}var a=n(6),i=n(19).PrecompiledLoader,o=function(e){var t,n;function a(t,n){var r;return(r=e.call(this)||this).baseURL=t||".",n=n||{},r.useCache=!!n.useCache,r.async=!!n.async,r}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var i=a.prototype;return i.resolve=function(e,t){throw new Error("relative templates not support in the browser yet")},i.getSource=function(e,t){var n,r=this,a=this.useCache;return this.fetch(this.baseURL+"/"+e,(function(i,o){if(i)if(t)t(i.content);else{if(404!==i.status)throw i.content;n=null}else n={src:o,path:e,noCache:!a},r.emit("load",e,n),t&&t(null,n)})),n},i.fetch=function(e,t){if("undefined"==typeof window)throw new Error("WebLoader can only by used in a browser");var n=new XMLHttpRequest,r=!0;n.onreadystatechange=function(){4===n.readyState&&r&&(r=!1,0===n.status||200===n.status?t(null,n.responseText):t({status:n.status,content:n.responseText}))},e+=(-1===e.indexOf("?")?"?":"&")+"s="+(new Date).getTime(),n.open("GET",e,this.async),n.send()},a}(a);e.exports={WebLoader:o,PrecompiledLoader:i}},function(e,t,n){var r,a=n(0),i=n(7),o=i.Environment,s=i.Template,c=n(6),l=n(10),d=n(23),u=n(5),h=n(8),m=n(9),p=n(2),f=n(3),g=n(25);function v(e,t){var n;return t=t||{},a.isObject(e)&&(t=e,e=null),l.FileSystemLoader?n=new l.FileSystemLoader(e,{watch:t.watch,noCache:t.noCache}):l.WebLoader&&(n=new l.WebLoader(e,{useCache:t.web&&t.web.useCache,async:t.web&&t.web.async})),r=new o(n,t),t&&t.express&&r.express(t.express),r}e.exports={Environment:o,Template:s,Loader:c,FileSystemLoader:l.FileSystemLoader,NodeResolveLoader:l.NodeResolveLoader,PrecompiledLoader:l.PrecompiledLoader,WebLoader:l.WebLoader,compiler:u,parser:h,lexer:m,runtime:p,lib:a,nodes:f,installJinjaCompat:g,configure:v,reset:function(){r=void 0},compile:function(e,t,n,a){return r||v(),new s(e,t,n,a)},render:function(e,t,n){return r||v(),r.render(e,t,n)},renderString:function(e,t,n){return r||v(),r.renderString(e,t,n)},precompile:d?d.precompile:void 0,precompileString:d?d.precompileString:void 0}},function(e,t,n){var r=n(13),a=[],i=[],o=r.makeRequestCallFromTimer((function(){if(i.length)throw i.shift()}));function s(e){var t;(t=a.length?a.pop():new c).task=e,r(t)}function c(){this.task=null}e.exports=s,c.prototype.call=function(){try{this.task.call()}catch(e){s.onerror?s.onerror(e):(i.push(e),o())}finally{this.task=null,a[a.length]=this}}},function(e,t,n){(function(t){function n(e){a.length||r(),a[a.length]=e}e.exports=n;var r,a=[],i=0;function o(){for(;i<a.length;){var e=i;if(i+=1,a[e].call(),i>1024){for(var t=0,n=a.length-i;t<n;t++)a[t]=a[t+i];a.length-=i,i=0}}a.length=0,i=0}var s,c,l,d=void 0!==t?t:self,u=d.MutationObserver||d.WebKitMutationObserver;function h(e){return function(){var t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}"function"==typeof u?(s=1,c=new u(o),l=document.createTextNode(""),c.observe(l,{characterData:!0}),r=function(){s=-s,l.data=s}):r=h(o),n.requestFlush=r,n.makeRequestCallFromTimer=h}).call(t,n(14))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r,a,i,o,s;a=function(){var e=Array.prototype.slice.call(arguments);"function"==typeof e[0]&&e[0].apply(null,e.splice(1))},i=function(e){"function"==typeof setImmediate?setImmediate(e):"undefined"!=typeof process&&process.nextTick?process.nextTick(e):setTimeout(e,0)},o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=function(e,t,n){var r=n?i:a;if(t=t||function(){},!o(e)){var s=new Error("First argument to waterfall must be an array of functions");return t(s)}if(!e.length)return t();var c=function(e){return function(n){if(n)t.apply(null,arguments),t=function(){};else{var a=Array.prototype.slice.call(arguments,1),i=e.next();i?a.push(c(i)):a.push(t),r((function(){e.apply(null,a)}))}}};c(function(e){var t=function(n){var r=function(){return e.length&&e[n].apply(null,arguments),r.next()};return r.next=function(){return n<e.length-1?t(n+1):null},r};return t(0)}(e))()},void 0===(r=function(){return s}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r,a="object"==typeof Reflect?Reflect:null,i=a&&"function"==typeof a.apply?a.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=a&&"function"==typeof a.ownKeys?a.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,r){function a(n){e.removeListener(t,i),r(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",a),n([].slice.call(arguments))}v(e,t,i,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&v(e,"error",t,n)}(e,a,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var c=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var a,i,o,s;if(l(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),o=i[t]),void 0===o)o=i[t]=n,++e._eventsCount;else if("function"==typeof o?o=i[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(a=d(e))>0&&o.length>a&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=o.length,s=c,console&&console.warn&&console.warn(s)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=h.bind(r);return a.listener=n,r.wrapFn=a,a}function p(e,t,n){var r=e._events;if(void 0===r)return[];var a=r[t];return void 0===a?[]:"function"==typeof a?n?[a.listener||a]:[a]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(a):g(a,a.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function v(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function a(i){r.once&&e.removeEventListener(t,a),n(i)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return d(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,a=this._events;if(void 0!==a)r=r&&void 0===a.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var c=a[e];if(void 0===c)return!1;if("function"==typeof c)i(c,this,t);else{var l=c.length,d=g(c,l);for(n=0;n<l;++n)i(d[n],this,t)}return!0},s.prototype.addListener=function(e,t){return u(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return u(this,e,t,!0)},s.prototype.once=function(e,t){return l(t),this.on(e,m(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,m(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,a,i,o;if(l(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(a=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){o=n[i].listener,a=i;break}if(a<0)return this;0===a?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,a),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var a,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(a=i[r])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return p(this,e,!0)},s.prototype.rawListeners=function(e){return p(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},s.prototype.listenerCount=f,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){var r=n(3),a=n(0),i=0;function o(){return"hole_"+i++}function s(e,t){for(var n=null,r=0;r<e.length;r++){var a=t(e[r]);a!==e[r]&&(n||(n=e.slice()),n[r]=a)}return n||e}function c(e,t,n){if(!(e instanceof r.Node))return e;if(!n){var a=t(e);if(a&&a!==e)return a}if(e instanceof r.NodeList){var i=s(e.children,(function(e){return c(e,t,n)}));i!==e.children&&(e=new r[e.typename](e.lineno,e.colno,i))}else if(e instanceof r.CallExtension){var o=c(e.args,t,n),l=s(e.contentArgs,(function(e){return c(e,t,n)}));o===e.args&&l===e.contentArgs||(e=new r[e.typename](e.extName,e.prop,o,l))}else{var d=e.fields.map((function(t){return e[t]})),u=s(d,(function(e){return c(e,t,n)}));u!==d&&(e=new r[e.typename](e.lineno,e.colno),u.forEach((function(t,n){e[e.fields[n]]=t})))}return n&&t(e)||e}function l(e,t){return c(e,t,!0)}function d(e,t,n){var i=[],s=l(n?e[n]:e,(function(e){var n;return e instanceof r.Block?e:((e instanceof r.Filter&&-1!==a.indexOf(t,e.name.value)||e instanceof r.CallExtensionAsync)&&(n=new r.Symbol(e.lineno,e.colno,o()),i.push(new r.FilterAsync(e.lineno,e.colno,e.name,e.args,n))),n)}));return n?e[n]=s:e=s,i.length?(i.push(e),new r.NodeList(e.lineno,e.colno,i)):e}function u(e,t){return function(e){return l(e,(function(e){if(e instanceof r.If||e instanceof r.For){var t=!1;if(c(e,(function(e){if(e instanceof r.FilterAsync||e instanceof r.IfAsync||e instanceof r.AsyncEach||e instanceof r.AsyncAll||e instanceof r.CallExtensionAsync)return t=!0,e})),t){if(e instanceof r.If)return new r.IfAsync(e.lineno,e.colno,e.cond,e.body,e.else_);if(e instanceof r.For&&!(e instanceof r.AsyncAll))return new r.AsyncEach(e.lineno,e.colno,e.arr,e.name,e.body,e.else_)}}}))}(function(e){return c(e,(function(e){if(e instanceof r.Block){var t=!1,n=o();e.body=c(e.body,(function(e){if(e instanceof r.FunCall&&"super"===e.name.value)return t=!0,new r.Symbol(e.lineno,e.colno,n)})),t&&e.body.children.unshift(new r.Super(0,0,e.name,new r.Symbol(0,0,n)))}}))}(function(e,t){return l(e,(function(e){return e instanceof r.Output?d(e,t):e instanceof r.Set?d(e,t,"value"):e instanceof r.For?d(e,t,"arr"):e instanceof r.If?d(e,t,"cond"):e instanceof r.CallExtension?d(e,t,"args"):void 0}))}(e,t)))}e.exports={transform:function(e,t){return u(e,t||[])}}},function(e,t,n){var r=n(0),a=n(2);function i(e,t){return null==e||!1===e?t:e}function o(e){return e!=e}function s(e){var t=(e=i(e,"")).toLowerCase();return a.copySafeness(e,t.charAt(0).toUpperCase()+t.slice(1))}function c(e){if(r.isString(e))return e.split("");if(r.isObject(e))return r._entries(e||{}).map((function(e){return{key:e[0],value:e[1]}}));if(r.isArray(e))return e;throw new r.TemplateError("list filter: type not iterable")}function l(e){return function(t,n,a){void 0===n&&(n="truthy");var i=this,o=i.env.getTest(n);return r.toArray(t).filter((function(t){return o.call(i,t,a)===e}))}}function d(e){return a.copySafeness(e,e.replace(/^\s*|\s*$/g,""))}(t=e.exports={}).abs=Math.abs,t.batch=function(e,t,n){var r,a=[],i=[];for(r=0;r<e.length;r++)r%t==0&&i.length&&(a.push(i),i=[]),i.push(e[r]);if(i.length){if(n)for(r=i.length;r<t;r++)i.push(n);a.push(i)}return a},t.capitalize=s,t.center=function(e,t){if(t=t||80,(e=i(e,"")).length>=t)return e;var n=t-e.length,o=r.repeat(" ",n/2-n%2),s=r.repeat(" ",n/2);return a.copySafeness(e,o+e+s)},t.default=function(e,t,n){return n?e||t:void 0!==e?e:t},t.dictsort=function(e,t,n){if(!r.isObject(e))throw new r.TemplateError("dictsort filter: val must be an object");var a,i=[];for(var o in e)i.push([o,e[o]]);if(void 0===n||"key"===n)a=0;else{if("value"!==n)throw new r.TemplateError("dictsort filter: You can only sort by either key or value");a=1}return i.sort((function(e,n){var i=e[a],o=n[a];return t||(r.isString(i)&&(i=i.toUpperCase()),r.isString(o)&&(o=o.toUpperCase())),i>o?1:i===o?0:-1})),i},t.dump=function(e,t){return JSON.stringify(e,null,t)},t.escape=function(e){return e instanceof a.SafeString?e:(e=null==e?"":e,a.markSafe(r.escape(e.toString())))},t.safe=function(e){return e instanceof a.SafeString?e:(e=null==e?"":e,a.markSafe(e.toString()))},t.first=function(e){return e[0]},t.forceescape=function(e){return e=null==e?"":e,a.markSafe(r.escape(e.toString()))},t.groupby=function(e,t){return r.groupBy(e,t,this.env.opts.throwOnUndefined)},t.indent=function(e,t,n){if(""===(e=i(e,"")))return"";t=t||4;var o=e.split("\n"),s=r.repeat(" ",t),c=o.map((function(e,t){return 0!==t||n?""+s+e:e})).join("\n");return a.copySafeness(e,c)},t.join=function(e,t,n){return t=t||"",n&&(e=r.map(e,(function(e){return e[n]}))),e.join(t)},t.last=function(e){return e[e.length-1]},t.length=function(e){var t=i(e,"");return void 0!==t?"function"==typeof Map&&t instanceof Map||"function"==typeof Set&&t instanceof Set?t.size:!r.isObject(t)||t instanceof a.SafeString?t.length:r.keys(t).length:0},t.list=c,t.lower=function(e){return(e=i(e,"")).toLowerCase()},t.nl2br=function(e){return null==e?"":a.copySafeness(e,e.replace(/\r\n|\n/g,"<br />\n"))},t.random=function(e){return e[Math.floor(Math.random()*e.length)]},t.reject=l(!1),t.rejectattr=function(e,t){return e.filter((function(e){return!e[t]}))},t.select=l(!0),t.selectattr=function(e,t){return e.filter((function(e){return!!e[t]}))},t.replace=function(e,t,n,r){var i=e;if(t instanceof RegExp)return e.replace(t,n);void 0===r&&(r=-1);var o="";if("number"==typeof t)t=""+t;else if("string"!=typeof t)return e;if("number"==typeof e&&(e=""+e),"string"!=typeof e&&!(e instanceof a.SafeString))return e;if(""===t)return o=n+e.split("").join(n)+n,a.copySafeness(e,o);var s=e.indexOf(t);if(0===r||-1===s)return e;for(var c=0,l=0;s>-1&&(-1===r||l<r);)o+=e.substring(c,s)+n,c=s+t.length,l++,s=e.indexOf(t,c);return c<e.length&&(o+=e.substring(c)),a.copySafeness(i,o)},t.reverse=function(e){var t;return t=r.isString(e)?c(e):r.map(e,(function(e){return e})),t.reverse(),r.isString(e)?a.copySafeness(e,t.join("")):t},t.round=function(e,t,n){t=t||0;var r=Math.pow(10,t);return("ceil"===n?Math.ceil:"floor"===n?Math.floor:Math.round)(e*r)/r},t.slice=function(e,t,n){for(var r=Math.floor(e.length/t),a=e.length%t,i=[],o=0,s=0;s<t;s++){var c=o+s*r;s<a&&o++;var l=o+(s+1)*r,d=e.slice(c,l);n&&s>=a&&d.push(n),i.push(d)}return i},t.sum=function(e,t,n){return void 0===n&&(n=0),t&&(e=r.map(e,(function(e){return e[t]}))),n+e.reduce((function(e,t){return e+t}),0)},t.sort=a.makeMacro(["value","reverse","case_sensitive","attribute"],[],(function(e,t,n,a){var i=this,o=r.map(e,(function(e){return e})),s=r.getAttrGetter(a);return o.sort((function(e,o){var c=a?s(e):e,l=a?s(o):o;if(i.env.opts.throwOnUndefined&&a&&(void 0===c||void 0===l))throw new TypeError('sort: attribute "'+a+'" resolved to undefined');return!n&&r.isString(c)&&r.isString(l)&&(c=c.toLowerCase(),l=l.toLowerCase()),c<l?t?1:-1:c>l?t?-1:1:0})),o})),t.string=function(e){return a.copySafeness(e,e)},t.striptags=function(e,t){var n=d((e=i(e,"")).replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>|<!--[\s\S]*?-->/gi,"")),r="";return r=t?n.replace(/^ +| +$/gm,"").replace(/ +/g," ").replace(/(\r\n)/g,"\n").replace(/\n\n\n+/g,"\n\n"):n.replace(/\s+/gi," "),a.copySafeness(e,r)},t.title=function(e){var t=(e=i(e,"")).split(" ").map((function(e){return s(e)}));return a.copySafeness(e,t.join(" "))},t.trim=d,t.truncate=function(e,t,n,r){var o=e;if(t=t||255,(e=i(e,"")).length<=t)return e;if(n)e=e.substring(0,t);else{var s=e.lastIndexOf(" ",t);-1===s&&(s=t),e=e.substring(0,s)}return e+=null!=r?r:"...",a.copySafeness(o,e)},t.upper=function(e){return(e=i(e,"")).toUpperCase()},t.urlencode=function(e){var t=encodeURIComponent;return r.isString(e)?t(e):(r.isArray(e)?e:r._entries(e)).map((function(e){var n=e[0],r=e[1];return t(n)+"="+t(r)})).join("&")};var u=/^(?:\(|<|&lt;)?(.*?)(?:\.|,|\)|\n|&gt;)?$/,h=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,m=/^https?:\/\/.*$/,p=/^www\./,f=/\.(?:org|net|com)(?:\:|\/|$)/;t.urlize=function(e,t,n){o(t)&&(t=1/0);var r=!0===n?' rel="nofollow"':"";return e.split(/(\s+)/).filter((function(e){return e&&e.length})).map((function(e){var n=e.match(u),a=n?n[1]:e,i=a.substr(0,t);return m.test(a)?'<a href="'+a+'"'+r+">"+i+"</a>":p.test(a)?'<a href="http://'+a+'"'+r+">"+i+"</a>":h.test(a)?'<a href="mailto:'+a+'">'+a+"</a>":f.test(a)?'<a href="http://'+a+'"'+r+">"+i+"</a>":e})).join("")},t.wordcount=function(e){var t=(e=i(e,""))?e.match(/\w+/g):null;return t?t.length:null},t.float=function(e,t){var n=parseFloat(e);return o(n)?t:n};var g=a.makeMacro(["value","default","base"],[],(function(e,t,n){void 0===n&&(n=10);var r=parseInt(e,n);return o(r)?t:r}));t.int=g,t.d=t.default,t.e=t.escape},function(e,t,n){function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}var a=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this).precompiled=t||{},n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n),a.prototype.getSource=function(e){return this.precompiled[e]?{src:{type:"code",obj:this.precompiled[e]},path:e}:null},a}(n(6));e.exports={PrecompiledLoader:a}},function(e,t,n){var r=n(2).SafeString;t.callable=function(e){return"function"==typeof e},t.defined=function(e){return void 0!==e},t.divisibleby=function(e,t){return e%t==0},t.escaped=function(e){return e instanceof r},t.equalto=function(e,t){return e===t},t.eq=t.equalto,t.sameas=t.equalto,t.even=function(e){return e%2==0},t.falsy=function(e){return!e},t.ge=function(e,t){return e>=t},t.greaterthan=function(e,t){return e>t},t.gt=t.greaterthan,t.le=function(e,t){return e<=t},t.lessthan=function(e,t){return e<t},t.lt=t.lessthan,t.lower=function(e){return e.toLowerCase()===e},t.ne=function(e,t){return e!==t},t.null=function(e){return null===e},t.number=function(e){return"number"==typeof e},t.odd=function(e){return e%2==1},t.string=function(e){return"string"==typeof e},t.truthy=function(e){return!!e},t.undefined=function(e){return void 0===e},t.upper=function(e){return e.toUpperCase()===e},t.iterable=function(e){return"undefined"!=typeof Symbol?!!e[Symbol.iterator]:Array.isArray(e)||"string"==typeof e},t.mapping=function(e){var t=null!=e&&"object"==typeof e&&!Array.isArray(e);return Set?t&&!(e instanceof Set):t}},function(e,t,n){e.exports=function(){return{range:function(e,t,n){void 0===t?(t=e,e=0,n=1):n||(n=1);var r=[];if(n>0)for(var a=e;a<t;a+=n)r.push(a);else for(var i=e;i>t;i+=n)r.push(i);return r},cycler:function(){return e=Array.prototype.slice.call(arguments),t=-1,{current:null,reset:function(){t=-1,this.current=null},next:function(){return++t>=e.length&&(t=0),this.current=e[t],this.current}};var e,t},joiner:function(e){return function(e){e=e||",";var t=!0;return function(){var n=t?"":e;return t=!1,n}}(e)}}}},function(e,t,n){var r=n(4);e.exports=function(e,t){function n(e,t){if(this.name=e,this.path=e,this.defaultEngine=t.defaultEngine,this.ext=r.extname(e),!this.ext&&!this.defaultEngine)throw new Error("No default engine was specified and no extension was provided.");this.ext||(this.name+=this.ext=("."!==this.defaultEngine[0]?".":"")+this.defaultEngine)}return n.prototype.render=function(t,n){e.render(this.name,t,n)},t.set("view",n),t.set("nunjucksEnv",e),e}},function(e,t,n){var r=n(4),a=n(4),i=n(0)._prettifyError,o=n(5),s=n(7).Environment,c=n(24);function l(e,t){return!!Array.isArray(t)&&t.some((function(t){return e.match(t)}))}function d(e,t){(t=t||{}).isString=!0;var n=t.env||new s([]),r=t.wrapper||c;if(!t.name)throw new Error('the "name" option is required when compiling a string');return r([u(e,t.name,n)],t)}function u(e,t,n){var r,a=(n=n||new s([])).asyncFilters,c=n.extensionsList;t=t.replace(/\\/g,"/");try{r=o.compile(e,a,c,t,n.opts)}catch(e){throw i(t,!1,e)}return{name:t,template:r}}e.exports={precompile:function(e,t){var n=(t=t||{}).env||new s([]),i=t.wrapper||c;if(t.isString)return d(e,t);var o=r.existsSync(e)&&r.statSync(e),h=[],m=[];if(o.isFile())h.push(u(r.readFileSync(e,"utf-8"),t.name||e,n));else if(o.isDirectory()){!function n(i){r.readdirSync(i).forEach((function(o){var s=a.join(i,o),c=s.substr(a.join(e,"/").length),d=r.statSync(s);d&&d.isDirectory()?l(c+="/",t.exclude)||n(s):l(c,t.include)&&m.push(s)}))}(e);for(var p=0;p<m.length;p++){var f=m[p].replace(a.join(e,"/"),"");try{h.push(u(r.readFileSync(m[p],"utf-8"),f,n))}catch(e){if(!t.force)throw e;console.error(e)}}}return i(h,t)},precompileString:d}},function(e,t,n){e.exports=function(e,t){var n="";t=t||{};for(var r=0;r<e.length;r++){var a=JSON.stringify(e[r].name);n+="(function() {(window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["+a+"] = (function() {\n"+e[r].template+"\n})();\n",t.asFunction&&(n+="return function(ctx, cb) { return nunjucks.render("+a+", ctx, cb); }\n"),n+="})();\n"}return n}},function(e,t,n){e.exports=function(){var e,t,n=this.runtime,r=this.lib,a=this.compiler.Compiler,i=this.parser.Parser,o=this.nodes,s=this.lexer,c=n.contextOrFrameLookup,l=n.memberLookup;function d(e){return{index:e.index,lineno:e.lineno,colno:e.colno}}if(a&&(e=a.prototype.assertType),i&&(t=i.prototype.parseAggregate),n.contextOrFrameLookup=function(e,t,n){var r=c.apply(this,arguments);if(void 0!==r)return r;switch(n){case"True":return!0;case"False":return!1;case"None":return null;default:return}},o&&a&&i){var u=o.Node.extend("Slice",{fields:["start","stop","step"],init:function(e,t,n,r,a){n=n||new o.Literal(e,t,null),r=r||new o.Literal(e,t,null),a=a||new o.Literal(e,t,1),this.parent(e,t,n,r,a)}});a.prototype.assertType=function(t){t instanceof u||e.apply(this,arguments)},a.prototype.compileSlice=function(e,t){this._emit("("),this._compileExpression(e.start,t),this._emit("),("),this._compileExpression(e.stop,t),this._emit("),("),this._compileExpression(e.step,t),this._emit(")")},i.prototype.parseAggregate=function(){var e=this,n=d(this.tokens);n.colno--,n.index--;try{return t.apply(this)}catch(t){var a=d(this.tokens),i=function(){return r._assign(e.tokens,a),t};r._assign(this.tokens,n),this.peeked=!1;var c=this.peekToken();if(c.type!==s.TOKEN_LEFT_BRACKET)throw i();this.nextToken();for(var l=new u(c.lineno,c.colno),h=!1,m=0;m<=l.fields.length&&!this.skip(s.TOKEN_RIGHT_BRACKET);m++){if(m===l.fields.length){if(!h)break;this.fail("parseSlice: too many slice components",c.lineno,c.colno)}this.skip(s.TOKEN_COLON)?h=!0:(l[l.fields[m]]=this.parseExpression(),h=this.skip(s.TOKEN_COLON)||h)}if(!h)throw i();return new o.Array(c.lineno,c.colno,[l])}}}function h(e,t,r,a){e=e||[],null===t&&(t=a<0?e.length-1:0),null===r?r=a<0?-1:e.length:r<0&&(r+=e.length),t<0&&(t+=e.length);for(var i=[],o=t;!(o<0||o>e.length||a>0&&o>=r||a<0&&o<=r);o+=a)i.push(n.memberLookup(e,o));return i}function m(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var p={pop:function(e){if(void 0===e)return this.pop();if(e>=this.length||e<0)throw new Error("KeyError");return this.splice(e,1)},append:function(e){return this.push(e)},remove:function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return this.splice(t,1);throw new Error("ValueError")},count:function(e){for(var t=0,n=0;n<this.length;n++)this[n]===e&&t++;return t},index:function(e){var t;if(-1===(t=this.indexOf(e)))throw new Error("ValueError");return t},find:function(e){return this.indexOf(e)},insert:function(e,t){return this.splice(e,0,t)}},f={items:function(){return r._entries(this)},values:function(){return r._values(this)},keys:function(){return r.keys(this)},get:function(e,t){var n=this[e];return void 0===n&&(n=t),n},has_key:function(e){return m(this,e)},pop:function(e,t){var n=this[e];if(void 0===n&&void 0!==t)n=t;else{if(void 0===n)throw new Error("KeyError");delete this[e]}return n},popitem:function(){var e=r.keys(this);if(!e.length)throw new Error("KeyError");var t=e[0],n=this[t];return delete this[t],[t,n]},setdefault:function(e,t){return void 0===t&&(t=null),e in this||(this[e]=t),this[e]},update:function(e){return r._assign(this,e),null}};return f.iteritems=f.items,f.itervalues=f.values,f.iterkeys=f.keys,n.memberLookup=function(e,t,n){return 4===arguments.length?h.apply(this,arguments):(e=e||{},r.isArray(e)&&m(p,t)?p[t].bind(e):r.isObject(e)&&m(f,t)?f[t].bind(e):l.apply(this,arguments))},function(){n.contextOrFrameLookup=c,n.memberLookup=l,a&&(a.prototype.assertType=e),i&&(i.prototype.parseAggregate=t)}}}])};var Oy=Xu(Iy.exports=$y());function Ly(e,t){try{if(t){if(e.entities[t]){if(e.entities[t].area_id)return e.entities[t].area_id;t=e.entities[t].device_id??t}if(e.devices[t])return e.devices[t].area_id;for(const n in e.areas)if(e.areas[n].name==t)return n}return}catch{return}}function Dy(e,t){try{if(t){let n=t;if(e.entities[t]&&(n=e.entities[t].area_id??n,t=e.entities[t].device_id??t),e.devices[t]&&(n=e.devices[t].area_id??n),e.areas[n])return e.areas[n].name}return}catch{return}}function jy(e,t){try{const n=[];if(t){const r=zy(e,t);for(const t of r)for(const r in e.entities)e.entities[r].device_id==t&&n.push(r);n.sort()}return n}catch{return[]}}function zy(e,t){try{const n=[];if(t){if(!(t in e.areas))for(const n in e.areas)if(e.areas[n].name==t){t=n;break}for(const r in e.devices)e.devices[r].area_id==t&&n.push(r);n.sort()}return n}catch{return[]}}function Py(e,t){return!!Array.isArray(e)&&e?.includes(t)}function Ry(e,t,n,r){"object"!=typeof n||Array.isArray(n)||(r=n.with_unit??r,n=n.rounded??void 0);try{const a=e.states[t];let i=a?.state;if(r&&null==n&&(n=!0),n&&!isNaN(a?.state)){const n=e.entities[t]?.display_precision??0;i=Number(i).toPrecision(n)}return r&&a?.attributes?.unit_of_measurement&&(i=`${i} ${a?.attributes?.unit_of_measurement}`),i}catch{return}}function Ny(e,t,n){try{return e.states[t].attributes[n]}catch{return}}function Fy(e,t){try{const n=Ry(e,t);return!![!1,0,-0,""].includes(n)||Boolean(n)}catch{return!1}}function By(e){const t={};for(const n in e.states){const[r,a]=n.split(".");t[r]=t[r]??{},t[r][a]=e.states[n]}return t}function Vy(e,t){try{const n=[];if(t)for(const r in e.entities)e.entities[r].device_id==t&&n.push(r);return n}catch{return[]}}function Hy(e,t,n){try{return e.devices[t]?.[n]??Ny(e,t,n)}catch{return}}function Uy(e,t){try{if(t){if(e.entities[t])return e.entities[t].device_id;for(const n in e.devices){const r=e.devices[n];if(r.name==t||r.name_by_user==t)return n}}return}catch{return}}function qy(e,t,n=!1){if(e[0]==t[0]&&e[1]==t[1])return 0;const r=1/298.257223563,a=6356752.314245,i=Math.atan((1-r)*Math.tan(e[0]*Math.PI/180)),o=Math.atan((1-r)*Math.tan(t[0]*Math.PI/180));let s=(t[1]-e[1])*Math.PI/180,c=s;const l=Math.sin(i),d=Math.cos(i),u=Math.sin(o),h=Math.cos(o);let m=0,p=0,f=0,g=0,v=0;for(let e=0;e<200;e++){const t=Math.sin(c),n=Math.cos(c);if(p=Math.sqrt((h*t)**2+(d*u-l*h*n)**2),0==p)return 0;g=l*u+d*h*n,v=Math.atan2(p,g);const a=d*h*t/p;m=1-a**2,f=0!=m?g-2*l*u/m:0;const i=r/16*m*(4+r*(4-3*m)),o=c;if(c=s+(1-i)*r*a*(v+i*p*(f+i*g*(2*f**2-1))),Math.abs(c-o)<1e-12)break;if(199==e)return null}const _=272331606109.84375*m/a**2,y=_/1024*(256+_*(_*(74-47*_)-128));let b=a*(1+_/16384*(4096+_*(_*(320-175*_)-768)))*(v-y*p*(f+y/4*(g*(2*f**2-1)-y/6*f*(4*p**2-3)*(4*f**2-3))))/1e3;return n&&(b*=.621371),b}function Wy(e,...t){function n(t){if(t.startsWith("zone."))return e.states[t].attributes.persons??[];let n=Object.keys(e.states).filter((e=>e==t||e.split(".")[0]==t));if("zone"==t){let t=[];for(const r of n)t.push(...e.states[r].attributes.persons??[]);n=Array.from(new Set(t))}return n}let r,a;if(1==t.length)r=[e.states["zone.home"].attributes.latitude,e.states["zone.home"].attributes.longitude],a=0;else if("number"==typeof t[0]){if("number"!=typeof t[1]||2==t.length)return null;r=[t[0],t[1]],a=2}else if("object"==typeof t[0]){if(Array.isArray(t[0])||!t[0].attributes)return null;r=[t[0].attributes.latitude,t[0].attributes.longitude],a=1}else{if("string"!=typeof t[0])return null;r=[e.states[t[0]].attributes.latitude,e.states[t[0]].attributes.longitude],a=1}let i=[];for(let e=a;e<t.length;e++)if("object"==typeof t[e]){let r=[];if(Array.isArray(t[e]))r=t[e];else if(t[e].entity_id)"zone"==t[e].entity_id.split(".")[0]?i.push(...t[e].attributes.persons):i.push(t[e]);else{const n=Object.keys(t[e]);if(t[e][n[0]].entity_id)r=n.map((n=>t[e][n].entity_id));else for(const a of n)r.push(...Object.keys(t[e][a]).map((n=>t[e][a][n].entity_id)))}for(const e of r)i.push(...n(e))}else"string"==typeof t[e]&&i.push(...n(t[e]));i=Array.from(new Set(i));let o=null,s=1/0;for(const t of i){let n;n="string"==typeof t?e.states[t]:t;const a=n.attributes.latitude,i=n.attributes.longitude;if(null!=a&&null!=i){const e=qy(r,[a,i])??1/0;e<=s&&(o=n,s=e)}}return o}function Zy(e,t){try{let n=t;if(e.entities[t]&&(n=e.entities[t].area_id??n,t=e.entities[t].device_id??t),t){if(e.devices[t]&&(n=e.devices[t].area_id??n),e.areas[n])return e.areas[n].floor_id;for(const n in e.areas)if(e.areas[n].name==t)return e.areas[n].floor_id}return}catch{return}}function Ky(e,t){if(e.floors[t])return e.floors[t].name;const n=Zy(e,t);return n?e.floors[n].name:void 0}function Qy(e,t){try{const n=[];if(t){let r;if(e.floors[t])r=t;else for(const n in e.floors)if(e.floors[n].name==t){r=n;break}if(!r)return[];for(const t in e.areas)e.areas[t].floor_id==r&&n.push(t)}return n}catch{return[]}}function Yy(e,...t){const n=[];for(let r of t.flat(1/0))if("string"==typeof r&&(r=e.states[r]),r)if(Array.isArray(r.attributes?.entity_id))n.push(...Yy(e,...r.attributes?.entity_id));else if(r?.attributes?.persons)n.push(...Yy(e,...r.attributes.persons));else if(r.entity_id)n.push(r);else{const t=Object.values(r);if(t[0]?.entity_id)n.push(...t);else for(const r of t){const t=Object.values(r);for(const r of t)r?.attributes?.persons?n.push(...Yy(e,...r.attributes.persons)):n.push(r)}}return n.filter(((e,t,n)=>t==n.findIndex((t=>t.entity_id==e.entity_id)))).sort(((e,t)=>e.entity_id.localeCompare(t.entity_id)))}function Gy(e,t,n,r,a){if("object"!=typeof n||Array.isArray(n)||(a=n.if_none??a,r=n.if_false??r,n=n.if_true??void 0),a){const n=dk(e,t);if([void 0,null,"undefined","null","None"].includes(n))return a}return dk(e,`\n\t\t{% if ${t} %}\n\t\t${n??!0}\n\t\t{% else %}\n\t\t${r??!1}\n\t\t{% endif %}\n\t`)}const Xy={};function Jy(e,t){try{return t?e.entities[t]?.labels??e.devices[t]?.labels??e.areas[t]?.labels??[]:Object.keys(Xy)}catch{return[]}}function eb(e){for(const t in Xy)if(Xy[t].name==e)return t}function tb(e){return Xy[e]?.name}function nb(e,t){try{const n=[];let r;if(t){if(r=Xy[t]?t:eb(t),!r)return[];for(const t in e.areas)(e.areas[t].labels??[]).includes(r)&&n.push(t);n.sort()}return n}catch{return[]}}function rb(e,t){try{const n=[];if(t){let r;if(r=Xy[t]?t:eb(t),!r)return[];for(const t in e.devices)(e.devices[t].labels??[]).includes(r)&&n.push(t);n.sort()}return n}catch{return[]}}function ab(e,t){try{const n=[];if(t){let r;if(r=Xy[t]?t:eb(t),!r)return[];for(const t in e.entities)(e.entities[t].labels??[]).includes(r)&&n.push(t);n.sort()}return n}catch{return[]}}function ib(e){return e.toString()}function ob(e){if(e.toString().includes("NaN"))throw Error("Result returned NaN.")}function sb(e){return e!=1/0&&!isNaN(e)}function cb(e,t){if("number"==typeof e)return 0!=e;if("boolean"==typeof e)return e;if(e=e.toLowerCase(),["true","yes","on","enable","1"].includes(e))return!0;if(["false","no","off","disable","0"].includes(e))return!1;if(t)return t;throw Error("Invalid input")}function lb(e,t=Math.E,n){try{const n=Math.log(e)/Math.log(t);return ob(n.toString()),n}catch(e){if(n)return n;throw e}}function db(e,t){try{const t=Math.sin(e);return ob(t.toString()),t}catch(e){if(t)return t;throw e}}function ub(e,t){try{const t=Math.cos(e);return ob(t.toString()),t}catch(e){if(t)return t;throw e}}function hb(e,t){try{const t=Math.tan(e);return ob(t.toString()),t}catch(e){if(t)return t;throw e}}function mb(e,t){try{const t=Math.asin(e);return ob(t.toString()),t}catch(e){if(t)return t;throw e}}function pb(e,t){try{const t=Math.acos(e);return ob(t.toString()),t}catch(e){if(t)return t;throw e}}function fb(e,t){try{const t=Math.atan(e);return ob(t.toString()),t}catch(e){if(t)return t;throw e}}function gb(e,t,n){try{const n=Math.atan2(e,t);return ob(n.toString()),n}catch(e){if(n)return n;throw e}}function vb(e,t){try{const t=Math.sqrt(e);return ob(t.toString()),t}catch(e){if(t)return t;throw e}}function _b(...e){return Math.max(...e.flat(1/0))}function yb(...e){return Math.min(...e.flat(1/0))}function bb(e,t){try{if((e=e.flat(1/0)).some((e=>isNaN(e))))throw Error("Non-numeric values provided");return e.reduce(((e,t)=>e+t))/e.length}catch(e){if(t)return t;throw e}}function wb(e,t){try{if((e=e.flat(1/0)).some((e=>isNaN(e))))throw Error("Non-numeric values provided");if(!e.length)throw Error("Empty array provided");e=e.sort(((e,t)=>e-t));const t=Math.floor(e.length/2);return e.length%2?e[t]:(e[t-1]+e[t])/2}catch(e){if(t)return t;throw e}}function xb(e,t){try{if((e=e.flat(1/0)).some((e=>isNaN(e))))throw Error("Non-numeric values provided");if(!e.length)throw Error("Empty array provided");const t={};for(const n of e)t[n]||(t[n]=0),t[n]++;let n=e[0],r=0;for(const e in t)t[e]>r&&(n=Number(e),r=t[e]);return n}catch(e){if(t)return t;throw e}}const kb=Math.E,Mb=Math.PI,Cb=2*Math.PI,Sb=1/0;function Eb(e,t,n){try{return e.formatEntityState(e.states[t],n)}catch{return n??e.states[t]?.state??void 0}}function Ab(e,t,n){try{return e.formatEntityAttributeName(e.states[t],n)}catch{return n??e.states[t]?.attributes?.[n]??void 0}}function Tb(e,t,n,r){try{return e.formatEntityAttributeValue(e.states[t],n,r)}catch{return r??e.states[t]?.attributes?.[n]??void 0}}const $b=new Date,Ib=new Date;function Ob(e,t,n,r){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=t=>(e(t=new Date(+t)),t),a.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),a.round=e=>{const t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),a.range=(n,r,i)=>{const o=[];if(n=a.ceil(n),i=null==i?1:Math.floor(i),!(n<r&&i>0))return o;let s;do{o.push(s=new Date(+n)),t(n,i),e(n)}while(s<n&&n<r);return o},a.filter=n=>Ob((t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),((e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););})),n&&(a.count=(t,r)=>($b.setTime(+t),Ib.setTime(+r),e($b),e(Ib),Math.floor(n($b,Ib))),a.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?t=>r(t)%e==0:t=>a.count(0,t)%e==0):a:null)),a}const Lb=6e4,Db=864e5,jb=6048e5,zb=Ob((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Lb)/Db),(e=>e.getDate()-1));zb.range;const Pb=Ob((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/Db),(e=>e.getUTCDate()-1));Pb.range;const Rb=Ob((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/Db),(e=>Math.floor(e/Db)));function Nb(e){return Ob((t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),((e,t)=>{e.setDate(e.getDate()+7*t)}),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Lb)/jb))}Rb.range;const Fb=Nb(0),Bb=Nb(1),Vb=Nb(2),Hb=Nb(3),Ub=Nb(4),qb=Nb(5),Wb=Nb(6);function Zb(e){return Ob((t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)}),((e,t)=>(t-e)/jb))}Fb.range,Bb.range,Vb.range,Hb.range,Ub.range,qb.range,Wb.range;const Kb=Zb(0),Qb=Zb(1),Yb=Zb(2),Gb=Zb(3),Xb=Zb(4),Jb=Zb(5),ew=Zb(6);Kb.range,Qb.range,Yb.range,Gb.range,Xb.range,Jb.range,ew.range;const tw=Ob((e=>{e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,t)=>{e.setFullYear(e.getFullYear()+t)}),((e,t)=>t.getFullYear()-e.getFullYear()),(e=>e.getFullYear()));tw.every=e=>isFinite(e=Math.floor(e))&&e>0?Ob((t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,n)=>{t.setFullYear(t.getFullYear()+n*e)})):null,tw.range;const nw=Ob((e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)}),((e,t)=>t.getUTCFullYear()-e.getUTCFullYear()),(e=>e.getUTCFullYear()));function rw(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function aw(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function iw(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}nw.every=e=>isFinite(e=Math.floor(e))&&e>0?Ob((t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null,nw.range;var ow,sw,cw,lw,dw,uw={"-":"",_:" ",0:"0"},hw=/^\s*\d+/,mw=/^%/,pw=/[\\^$*+?|[\]().{}]/g;function fw(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function gw(e){return e.replace(pw,"\\$&")}function vw(e){return new RegExp("^(?:"+e.map(gw).join("|")+")","i")}function _w(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function yw(e,t,n){var r=hw.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function bw(e,t,n){var r=hw.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function ww(e,t,n){var r=hw.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function xw(e,t,n){var r=hw.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function kw(e,t,n){var r=hw.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Mw(e,t,n){var r=hw.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Cw(e,t,n){var r=hw.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Sw(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ew(e,t,n){var r=hw.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function Aw(e,t,n){var r=hw.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Tw(e,t,n){var r=hw.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function $w(e,t,n){var r=hw.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Iw(e,t,n){var r=hw.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Ow(e,t,n){var r=hw.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Lw(e,t,n){var r=hw.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Dw(e,t,n){var r=hw.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function jw(e,t,n){var r=hw.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function zw(e,t,n){var r=mw.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Pw(e,t,n){var r=hw.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Rw(e,t,n){var r=hw.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Nw(e,t){return fw(e.getDate(),t,2)}function Fw(e,t){return fw(e.getHours(),t,2)}function Bw(e,t){return fw(e.getHours()%12||12,t,2)}function Vw(e,t){return fw(1+zb.count(tw(e),e),t,3)}function Hw(e,t){return fw(e.getMilliseconds(),t,3)}function Uw(e,t){return Hw(e,t)+"000"}function qw(e,t){return fw(e.getMonth()+1,t,2)}function Ww(e,t){return fw(e.getMinutes(),t,2)}function Zw(e,t){return fw(e.getSeconds(),t,2)}function Kw(e){var t=e.getDay();return 0===t?7:t}function Qw(e,t){return fw(Fb.count(tw(e)-1,e),t,2)}function Yw(e){var t=e.getDay();return t>=4||0===t?Ub(e):Ub.ceil(e)}function Gw(e,t){return e=Yw(e),fw(Ub.count(tw(e),e)+(4===tw(e).getDay()),t,2)}function Xw(e){return e.getDay()}function Jw(e,t){return fw(Bb.count(tw(e)-1,e),t,2)}function ex(e,t){return fw(e.getFullYear()%100,t,2)}function tx(e,t){return fw((e=Yw(e)).getFullYear()%100,t,2)}function nx(e,t){return fw(e.getFullYear()%1e4,t,4)}function rx(e,t){var n=e.getDay();return fw((e=n>=4||0===n?Ub(e):Ub.ceil(e)).getFullYear()%1e4,t,4)}function ax(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+fw(t/60|0,"0",2)+fw(t%60,"0",2)}function ix(e,t){return fw(e.getUTCDate(),t,2)}function ox(e,t){return fw(e.getUTCHours(),t,2)}function sx(e,t){return fw(e.getUTCHours()%12||12,t,2)}function cx(e,t){return fw(1+Pb.count(nw(e),e),t,3)}function lx(e,t){return fw(e.getUTCMilliseconds(),t,3)}function dx(e,t){return lx(e,t)+"000"}function ux(e,t){return fw(e.getUTCMonth()+1,t,2)}function hx(e,t){return fw(e.getUTCMinutes(),t,2)}function mx(e,t){return fw(e.getUTCSeconds(),t,2)}function px(e){var t=e.getUTCDay();return 0===t?7:t}function fx(e,t){return fw(Kb.count(nw(e)-1,e),t,2)}function gx(e){var t=e.getUTCDay();return t>=4||0===t?Xb(e):Xb.ceil(e)}function vx(e,t){return e=gx(e),fw(Xb.count(nw(e),e)+(4===nw(e).getUTCDay()),t,2)}function _x(e){return e.getUTCDay()}function yx(e,t){return fw(Qb.count(nw(e)-1,e),t,2)}function bx(e,t){return fw(e.getUTCFullYear()%100,t,2)}function wx(e,t){return fw((e=gx(e)).getUTCFullYear()%100,t,2)}function xx(e,t){return fw(e.getUTCFullYear()%1e4,t,4)}function kx(e,t){var n=e.getUTCDay();return fw((e=n>=4||0===n?Xb(e):Xb.ceil(e)).getUTCFullYear()%1e4,t,4)}function Mx(){return"+0000"}function Cx(){return"%"}function Sx(e){return+e}function Ex(e){return Math.floor(+e/1e3)}ow=function(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,c=e.shortMonths,l=vw(a),d=_w(a),u=vw(i),h=_w(i),m=vw(o),p=_w(o),f=vw(s),g=_w(s),v=vw(c),_=_w(c),y={a:function(e){return o[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return c[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:Nw,e:Nw,f:Uw,g:tx,G:rx,H:Fw,I:Bw,j:Vw,L:Hw,m:qw,M:Ww,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Sx,s:Ex,S:Zw,u:Kw,U:Qw,V:Gw,w:Xw,W:Jw,x:null,X:null,y:ex,Y:nx,Z:ax,"%":Cx},b={a:function(e){return o[e.getUTCDay()]},A:function(e){return i[e.getUTCDay()]},b:function(e){return c[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:ix,e:ix,f:dx,g:wx,G:kx,H:ox,I:sx,j:cx,L:lx,m:ux,M:hx,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Sx,s:Ex,S:mx,u:px,U:fx,V:vx,w:_x,W:yx,x:null,X:null,y:bx,Y:xx,Z:Mx,"%":Cx},w={a:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=u.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=_.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return M(e,t,n,r)},d:Tw,e:Tw,f:jw,g:Cw,G:Mw,H:Iw,I:Iw,j:$w,L:Dw,m:Aw,M:Ow,p:function(e,t,n){var r=l.exec(t.slice(n));return r?(e.p=d.get(r[0].toLowerCase()),n+r[0].length):-1},q:Ew,Q:Pw,s:Rw,S:Lw,u:bw,U:ww,V:xw,w:yw,W:kw,x:function(e,t,r){return M(e,n,t,r)},X:function(e,t,n){return M(e,r,t,n)},y:Cw,Y:Mw,Z:Sw,"%":zw};function x(e,t){return function(n){var r,a,i,o=[],s=-1,c=0,l=e.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===e.charCodeAt(s)&&(o.push(e.slice(c,s)),null!=(a=uw[r=e.charAt(++s)])?r=e.charAt(++s):a="e"===r?" ":"0",(i=t[r])&&(r=i(n,a)),o.push(r),c=s+1);return o.push(e.slice(c,s)),o.join("")}}function k(e,t){return function(n){var r,a,i=iw(1900,void 0,1);if(M(i,e,n+="",0)!=n.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(t&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(a=(r=aw(iw(i.y,0,1))).getUTCDay(),r=a>4||0===a?Qb.ceil(r):Qb(r),r=Pb.offset(r,7*(i.V-1)),i.y=r.getUTCFullYear(),i.m=r.getUTCMonth(),i.d=r.getUTCDate()+(i.w+6)%7):(a=(r=rw(iw(i.y,0,1))).getDay(),r=a>4||0===a?Bb.ceil(r):Bb(r),r=zb.offset(r,7*(i.V-1)),i.y=r.getFullYear(),i.m=r.getMonth(),i.d=r.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),a="Z"in i?aw(iw(i.y,0,1)).getUTCDay():rw(iw(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(a+5)%7:i.w+7*i.U-(a+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,aw(i)):rw(i)}}function M(e,t,n,r){for(var a,i,o=0,s=t.length,c=n.length;o<s;){if(r>=c)return-1;if(37===(a=t.charCodeAt(o++))){if(a=t.charAt(o++),!(i=w[a in uw?t.charAt(o++):a])||(r=i(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return y.x=x(n,y),y.X=x(r,y),y.c=x(t,y),b.x=x(n,b),b.X=x(r,b),b.c=x(t,b),{format:function(e){var t=x(e+="",y);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=x(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),sw=ow.format,cw=ow.parse,lw=ow.utcFormat,dw=ow.utcParse;var Ax="%Y-%m-%dT%H:%M:%S.%LZ";Date.prototype.toISOString||lw(Ax);var Tx=+new Date("2000-01-01T00:00:00.000Z")?function(e){var t=new Date(e);return isNaN(t)?null:t}:dw(Ax),$x=Tx;const Ix=["weeks","days","hours","minutes","seconds","milliseconds"],Ox={weeks:604800,days:86400,hours:3600,minutes:60,seconds:1,milliseconds:.001};function Lx(e){return"object"==typeof e&&!Array.isArray(e)}class Dx{constructor(e=0,t=0,n=0,r=0,a=0,i=0){this.days=0,this.seconds=0,this.milliseconds=0;let o={days:e,seconds:t,milliseconds:n,minutes:r,hours:a,weeks:i};Lx(e)&&(delete o.days,Object.assign(o,e));let s=0;if(Ix.forEach((e=>{s+=(o[e]??0)*Ox[e]})),s<this.minSeconds||s>this.maxSeconds)throw RangeError("value out of range, must have magnitude less than 999999999 days");if(s.toString().includes(".")){const e=s.toString();this.milliseconds=Math.trunc(parseFloat(`0.${e.split(".")[1]}`)/Ox.milliseconds),e.startsWith("-")&&(this.milliseconds*=-1),s=Math.trunc(s)}this.days=Math.trunc(s/Ox.days),this.days=this.days||0,this.seconds=s-this.days*Ox.days,this.seconds=this.seconds||0}total_seconds(){return this.days*Ox.days+this.seconds+this.milliseconds*Ox.milliseconds}valueOf(){return this.total_seconds()}toString(){return`${0!=this.days?`${this.days} day${Math.abs(this.days)>1?"s,":","}`:""} ${lw("%-H:%M:%S"+(this.milliseconds?".%f":""))(new Date(1e3*this.valueOf()))}`.trim()}static get min(){return new Dx(-1e8)}get minSeconds(){return-864e10}static get max(){return new Dx(1e8)}get maxSeconds(){return 864e10}static get resolution(){return new Dx({milliseconds:1})}}class jx{constructor(e=0,t=0,n=0,r=0){this.hour=0,this.minute=0,this.second=0,this.millisecond=0;let a={hour:e,minute:t,second:n,millisecond:r};Lx(e)&&(delete a.hour,Object.assign(a,e));for(const e in a)if(!Number.isInteger(a[e]))throw TypeError("'float' object cannot be interpreted as an integer");if((a.hour??0)<0||(a.hour??0)>23)throw RangeError("hour must be in 0..23");if((a.minute??0)<0||(a.minute??0)>59)throw RangeError("minute must be in 0..59");if((a.second??0)<0||(a.second??0)>59)throw RangeError("second must be in 0..59");if((a.millisecond??0)<0||(a.millisecond??0)>999)throw RangeError("millisecond must be in 0..999");Object.assign(this,a)}replace(e=this.hour,t=this.minute,n=this.second,r=this.millisecond){let a={hour:e,minute:t,second:n,millisecond:r};return Lx(e)&&(delete a.hour,Object.assign(a,e)),new jx(a.hour??this.hour,a.minute??this.minute,a.second??this.second,a.millisecond??this.millisecond)}isoformat(e="auto"){let t;switch(e){case"hours":t="%H";break;case"minutes":t="%H:%M";break;case"seconds":t="%H:%M:%S";break;case"milliseconds":t="%H:%M:%S.%f";break;default:t="%H:%M:%S"+(this.millisecond?".%f":"")}return this.strftime(t)}valueOf(){return this.hour*Ox.hours+this.minute*Ox.minutes+this.second*Ox.seconds+this.millisecond*Ox.milliseconds}toString(){return this.isoformat()}strftime(e){return lw(e)(this.jsDate)}get jsDate(){return new Date(1e3*this.valueOf())}static get min(){return new jx(0,0,0,0)}static get max(){return new jx(23,59,59,999)}static get resolution(){return Dx.resolution}static fromisoformat(e){const t=$x(`1970-01-01T${e}`);if(t)return new jx(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds());throw SyntaxError("Unable to parse date string")}}const zx=100,Px=9999,Rx=36160,Nx=3652059,Fx=["year","month","day","hour","minute","second","millisecond"];class Bx{constructor(e,t,n,r=0,a=0,i=0,o=0,s=!1){this.year=1970,this.month=1,this.day=1,this.hour=0,this.minute=0,this.second=0,this.millisecond=0,this.utc=!1;const c={year:e,month:t,day:n,hour:r,minute:a,second:i,millisecond:o,utc:s};if(Lx(e)&&(delete c.year,Object.assign(c,e)),!c.year||!c.month||!c.day)throw SyntaxError("Missing required argument year, month, or day");for(const e in c)if(Fx.includes(e)&&!Number.isInteger(c[e]))throw TypeError(`Argument ${e} value ${c[e]} is not an integer`);if(c.year<zx||c.year>Px)throw RangeError(`year ${c.year} is out of range`);if(c.month<1||c.month>12)throw RangeError(`month ${c.month} is out of range`);if(c.day<1||c.day>new Date(c.year,c.month,0).getDate())throw RangeError(`day ${n} is out of range for month`);if((c.hour??0)<0||(c.hour??0)>23)throw RangeError("hour must be in 0..23");if((c.minute??0)<0||(c.minute??0)>59)throw RangeError("minute must be in 0..59");if((c.second??0)<0||(c.second??0)>59)throw RangeError("second must be in 0..59");if((c.millisecond??0)<0||(c.millisecond??0)>999)throw RangeError("millisecond must be in 0..999");Object.assign(this,c)}date(){return new Vx(this.year,this.month,this.day)}time(){return new jx(this.hour,this.minute,this.second,this.millisecond)}replace(e=this.year,t=this.month,n=this.day,r=this.hour,a=this.minute,i=this.second,o=this.millisecond){const s={year:e,month:t,day:n,hour:r,minute:a,second:i,millisecond:o};return Lx(e)&&(delete s.year,Object.assign(s,e)),new Bx({year:s.year??this.year,month:s.month??this.month,day:s.day??this.day,hour:s.hour??this.hour,minute:s.minute??this.minute,second:s.second??this.second,millisecond:s.millisecond??this.millisecond})}toordinal(){return this.date().toordinal()}timestamp(){let e;return e=this.utc?Date.UTC(this.year,this.month-1,this.day||1,this.hour||0,this.minute||0,this.second||0,this.millisecond||0):this.jsDate.getTime(),e/1e3}weekday(){return this.date().weekday()}isoweekday(){return this.weekday()+1}isocalendar(){const[e,t,n]=lw("%G-%V-%u")(this.jsDate).split("-");return[Number(e),Number(t),Number(n)]}isoformat(e="T",t="auto"){const n={sep:e,timespec:t};let r;switch(Lx(e)&&(delete n.sep,Object.assign(n,e),n.sep=n.sep??"T"),n.timespec){case"hours":r=`%Y-%m-%d${n.sep}%H`;break;case"minutes":r=`%Y-%m-%d${n.sep}%H:%M`;break;case"seconds":r=`%Y-%m-%d${n.sep}%H:%M:%S`;break;case"milliseconds":r=`%Y-%m-%d${n.sep}%H:%M:%S.%f`;break;default:r=`%Y-%m-%d${n.sep}%H:%M:%S${this.millisecond?".%f":""}`}return this.strftime(r)}valueOf(){return this.timestamp()}toString(){return this.isoformat(" ")}ctime(){return sw("%a %b %-e %H:%M:%S %Y")(this.jsDate)}strftime(e){return this.utc?lw(e)(this.jsDate):sw(e)(this.jsDate)}get jsDate(){return this.utc?new Date(1e3*this.valueOf()):new Date(this.year,this.month-1,this.day||1,this.hour||0,this.minute||0,this.second||0,this.millisecond||0)}static get min(){return new Bx(zx,1,1)}static get max(){return new Bx(Px,12,31,23,59,59,999)}static get resolution(){return Dx.resolution}static today(){return Bx.now()}static now(){return Bx.fromjsdate(new Date)}static utcnow(){return Bx.utcfromjsdate(new Date)}static fromtimestamp(e){const t=new Date(1e3*e);return Bx.fromjsdate(t)}static utcfromtimestamp(e){const t=new Date(1e3*e);return Bx.utcfromjsdate(t)}static fromjsdate(e){return new Bx({year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()})}static utcfromjsdate(e){return new Bx({year:e.getUTCFullYear(),month:e.getUTCMonth()+1,day:e.getUTCDate(),hour:e.getUTCHours(),minute:e.getUTCMinutes(),second:e.getUTCSeconds(),millisecond:e.getUTCMilliseconds(),utc:!0})}static fromordinal(e){if(e<Rx||e>Nx)throw RangeError(`ordinal ${e} is out of range`);return Bx.fromtimestamp(Vx.min.valueOf()+new Dx({days:e-Rx}).valueOf())}static combine(e,t){return new Bx({year:e.year,month:e.month,day:e.day,hour:t.hour,minute:t.minute,second:t.second,millisecond:t.millisecond})}static fromisoformat(e){const t=$x(e);if(t)return Bx.fromjsdate(t);throw SyntaxError("Unable to parse date string")}static fromisocalendar(e,t,n){return Bx.strptime(`${e}-${t}-${n}`,"%G-%V-%u")}static strptime(e,t,n=!1){const r=(n?dw:cw)(t)(e);if(!r)throw Error(`'${e}' does not match format '${t}'`);return n?Bx.utcfromjsdate(r):Bx.fromjsdate(r)}}class Vx{constructor(e,t,n){if(this.year=1970,this.month=1,this.day=1,!Number.isInteger(e)||e<zx||e>Px)throw RangeError(`year ${e} is out of range`);if(!Number.isInteger(t)||t<1||t>12)throw RangeError(`month ${t} is out of range`);if(!Number.isInteger(n)||n<1||n>new Date(e,t,0).getDate())throw RangeError(`day ${n} is out of range for month`);Object.assign(this,{year:e,month:t,day:n})}replace(e=this.year,t=this.month,n=this.day){const r={year:e,month:t,day:n};return Lx(e)&&(delete r.year,Object.assign(r,e)),new Vx(r.year??this.year,r.month??this.month,r.day??this.day)}toordinal(){return Math.trunc((this.valueOf()+new Dx({days:719163}).total_seconds())/Ox.days)}weekday(){return(this.jsDate.getDay()+6)%7}isoweekday(){return this.weekday()+1}isocalendar(){const[e,t,n]=lw("%G-%V-%u")(this.jsDate).split("-");return[Number(e),Number(t),Number(n)]}isoformat(){return lw("%Y-%m-%d")(this.jsDate)}valueOf(){return this.jsDate.getTime()/1e3}toString(){return this.isoformat()}ctime(){return sw("%a %b %-e 00:00:00 %Y")(this.jsDate)}strftime(e){return sw(e)(this.jsDate)}get jsDate(){return new Date(this.year,this.month-1,this.day)}static get min(){return new Vx(zx,1,1)}static get max(){return new Vx(Px,12,31)}static get resolution(){return new Dx({days:1})}static today(){const e=Bx.now();return new Vx(e.year,e.month,e.day)}static fromtimestamp(e){const t=Bx.fromtimestamp(e);return new Vx(t.year,t.month,t.day)}static fromordinal(e){if(e<Rx||e>Nx)throw RangeError(`ordinal ${e} is out of range`);return Vx.fromtimestamp(Vx.min.valueOf()+new Dx({days:e-Rx}).valueOf())}static fromisoformat(e){const t=$x(e);if(t)return new Vx(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate());throw SyntaxError("Unable to parse date string")}static fromisocalendar(e,t,n){const r=Bx.strptime(`${e}-${t}-${n}`,"%G-%V-%u");return new Vx(Number(r.year),Number(r.month),Number(r.day))}}const Hx=(...e)=>new Dx(...e);Hx.min=Dx.min,Hx.max=Dx.max,Hx.resolution=Dx.resolution;const Ux=(...e)=>new Vx(...e);Ux.min=Vx.min,Ux.max=Vx.max,Ux.resolution=Vx.resolution,Ux.today=Vx.today,Ux.fromtimestamp=Vx.fromtimestamp,Ux.fromordinal=Vx.fromordinal,Ux.fromisoformat=Vx.fromisoformat,Ux.fromisocalendar=Vx.fromisocalendar;const qx=(...e)=>new Bx(...e);qx.min=Bx.min,qx.max=Bx.max,qx.resolution=Bx.resolution,qx.today=Bx.today,qx.now=Bx.now,qx.utcnow=Bx.utcnow,qx.fromtimestamp=Bx.fromtimestamp,qx.utcfromtimestamp=Bx.utcfromtimestamp,qx.fromjsdate=Bx.fromjsdate,qx.utcfromjsdate=Bx.utcfromjsdate,qx.fromordinal=Bx.fromordinal,qx.combine=Bx.combine,qx.fromisoformat=Bx.fromisoformat,qx.fromisocalendar=Bx.fromisocalendar,qx.strptime=Bx.strptime;const Wx=(...e)=>new jx(...e);Wx.min=jx.min,Wx.max=jx.max,Wx.resolution=jx.resolution,Wx.fromisoformat=jx.fromisoformat;const Zx={MINYEAR:zx,MAXYEAR:Px,MINYEAR_ORDINAL:Rx,MAXYEAR_ORDINAL:Nx,timedelta:Hx,date:Ux,datetime:qx,time:Wx};function Kx(){return Zx.datetime.now()}function Qx(e="00:00"){const[t,n,r,a]=e.split(":"),i=Zx.datetime.now(),o=Zx.datetime(i.year,i.month,i.day,Number(t??0),Number(n??0),Number(r??0),Number(a??0));return ob(o.toString()),o}function Yx(e,t=void 0,n=!0){"object"!=typeof t||Array.isArray(t)||(n=t.utc??n,t=t.fallback??void 0);try{let t;if("string"==typeof e)if(/[^\d]/g.test(e)){e=e.replace(/T/g," ");const r=["%Y-%m-%d %H:%M:%S.%f%Z","%Y-%m-%d %H:%M:%S.%f","%Y-%m-%d %H:%M:%S%Z","%Y-%m-%d %H:%M:%S"];for(const a of r)try{t=Zx.datetime.strptime(e,a,n);break}catch{}t||(e=parseFloat(e))}else e=parseFloat(e);else t="number"==typeof e?n?Zx.datetime.utcfromtimestamp(e):Zx.datetime.fromtimestamp(e):e instanceof Vx?Zx.datetime(e.year,e.month,e.day):e;return ob((t??"NaN").toString()),t}catch(e){if(t)return t;throw e}}function Gx(e,t){try{let t;return"string"==typeof e?(e.includes(" ")||e.includes("T")||(e+=" 00:00:00"),t=Date.parse(e)/1e3):t="number"==typeof e?Zx.datetime.utcfromtimestamp(e).jsDate.getTime()/1e3:e.jsDate.getTime()/1e3,ob(t.toString()),t}catch(e){if(t)return t;throw e}}function Xx(e){return Zx.datetime.fromjsdate(Zx.datetime(e).jsDate)}function Jx(e,t=1,n=!1){if(!(e instanceof Bx))return e;let r=Kx().valueOf()-Xx(e).valueOf();if(n&&(r*=-1),r<=0)return e;(0==t||t>6)&&(t=6);const a={year:31536e3,month:2592e3,day:86400,hour:3600,minute:60,second:1},i=Object.keys(a);let o="",s=!1;for(let e=0;e<t;e++){let n=r/a[i[e]];n=e==t-1?Math.round(n):Math.floor(n),(s||n>0)&&(s=!0,o+=` ${n} ${i[e]}${1!=n?"s":""}`,r-=n*a[i[e]])}return o.trim()}function ek(e,t=1){return Jx(e,t)}function tk(e,t=1){return Jx(e,t,!0)}const nk={states:Ry,state_attr:Ny,has_value:Fy,state_translated:Eb,attr_name_translated:Ab,attr_value_translated:Tb,expand:Yy,device_entities:Vy,device_attr:Hy,device_id:Uy,floor_id:Zy,floor_name:Ky,floor_areas:Qy,area_id:Ly,area_name:Dy,area_entities:jy,area_devices:zy,labels:Jy,label_areas:nb,label_devices:rb,label_entities:ab,iif:Gy,closest:Wy},rk={label_id:eb,label_name:tb,today_at:Qx,as_datetime:Yx,as_timestamp:Gx,as_local:Xx,time_since:ek,time_until:tk,timestamp_local:function(e,t){try{const t=Zx.datetime.fromtimestamp(e).strftime("%Y-%m-%dT%H:%M:%S%Z");return ob(t),t}catch(e){if(t)return t;throw e}},timestamp_utc:function(e,t){try{const t=Zx.datetime.utcfromtimestamp(e).strftime("%Y-%m-%dT%H:%M:%S%Z");return ob(t),t}catch(e){if(t)return t;throw e}},timestamp_custom:function(e,t,n=!0,r=void 0){"object"!=typeof n||Array.isArray(n)||(r=n.fallback??r,n=n.local??!0);try{const r=(n?Zx.datetime.fromtimestamp(e):Zx.datetime.utcfromtimestamp(e)).strftime(t);return ob(r),r}catch(e){if(r)return r;throw e}},to_json:function(e,t=!1,n=!1,r=!1){"object"!=typeof t||Array.isArray(t)||(r=t.sort_keys??r,n=t.pretty_print??n,t=t.ensure_ascii??!1),r&&(e=Object.keys(e).sort().reduce(((t,n)=>(t[n]=e[n],t)),{}));let a=JSON.stringify(e,void 0,n?2:void 0);return t&&(a=a.replace(/[\u007F-\uFFFF]/g,(e=>`\\u'${("0000"+e.charCodeAt(0).toString(16)).substring(-4)}`))),a},from_json:function(e){return JSON.parse(e)},closest:Wy,contains:Py,is_number:sb,bool:cb,log:lb,sin:db,cos:ub,tan:hb,asin:mb,acos:pb,atan:fb,atan2:gb,sqrt:vb,max:_b,min:yb,average:bb,median:wb,statistical_mode:xb,bitwise_and:function(e,t){return e&t},bitwise_or:function(e,t){return e|t},bitwise_xor:function(e,t){return e^t},bitwise_not:function(e){return~e},ord:function(e){if(1==e.length)return e.codePointAt(0);throw Error("Expected a character, but received a string")},multiply:function(e,t){return Number(e)*Number(t)},add:function(e,t){return Number(e)+Number(t)},regex_replace:function(e,t="",n=""){return e.replace(new RegExp(t,"g"),n)},regex_findall:function(e,t=""){return e.match(new RegExp(t,"g"))??[]},regex_findall_index:function(e,t="",n=0){return(e.match(new RegExp(t,"g"))??[])[n]},str:ib};const ak={states:Ry,is_state:function(e,t,n){try{const r=Ry(e,t);return Array.isArray(n)?n.includes(r):r==n}catch{return!1}},state_attr:Ny,is_state_attr:function(e,t,n,r){try{return Ny(e,t,n)==r}catch{return!1}},has_value:Fy,state_translated:Eb,attr_name_translated:Ab,attr_value_translated:Tb,expand:Yy,is_hidden_entity:function(e,t){try{return e.entities[t].hidden??!1}catch{return!1}},device_entities:Vy,device_attr:Hy,is_device_attr:function(e,t,n,r){try{return null!=r&&Hy(e,t,n)==r}catch{return!1}},device_id:Uy,floors:function(e){return Object.keys(e.floors)},floor_id:Zy,floor_name:Ky,floor_areas:Qy,areas:function(e){try{return Object.keys(e.areas)}catch{return[]}},area_id:Ly,area_name:Dy,area_entities:jy,area_devices:zy,integration_entities:function(e,t){try{const n=[];if(t){for(const r in e.entities)e.entities[r].platform==t&&n.push(r);n.sort()}return n}catch{return[]}},labels:Jy,label_areas:nb,label_devices:rb,label_entities:ab,iif:Gy,distance:function(e,...t){try{let n,r,a,i,o=0;if("string"==typeof t[0])n=e.states[t[0]].attributes.latitude,a=e.states[t[0]].attributes.longitude,o=1;else if("object"!=typeof t[0]||Array.isArray(t[0])){if("number"!=typeof t[0])return null;if("number"!=typeof t[1])throw Error("Latitude provided but not longitude 1");n=t[0],a=t[1],o=2}else n=t[0].attributes.latitude,a=t[0].attributes.longitude,o=1;if("string"==typeof t[o])r=e.states[t[o]].attributes.latitude,i=e.states[t[o]].attributes.longitude;else if("object"!=typeof t[o]||Array.isArray(t[o]))if("number"==typeof t[o]){if("number"!=typeof t[o+1])throw Error("Latitude provided but not longitude 2");r=t[o],i=t[o+1]}else r=e.states["zone.home"].attributes.latitude,i=e.states["zone.home"].attributes.longitude;else r=t[o].attributes.latitude,i=t[o].attributes.longitude;return qy([n,a],[r,i],"mi"==e.config.unit_system.length)}catch{return null}},closest:Wy},ik={label_id:eb,label_name:tb,now:Kx,utcnow:function(){return Zx.datetime.utcnow()},today_at:Qx,as_datetime:Yx,as_timestamp:Gx,as_local:Xx,strptime:function(e,t,n=void 0,r=!1){"object"!=typeof n||Array.isArray(n)||n instanceof Bx||n instanceof Vx||(r=n.utc??r,n=n.fallback??void 0);try{t=t.replace(/%z/g,"%Z");const n=Zx.datetime.strptime(e,t,r);return ob(n.toString()),n}catch(e){if(n)return n;throw e}},time_since:ek,time_until:tk,as_timedelta:function(e){try{let t;if(e.includes(":")||e.includes(" ")||/^\d*\.?\d*$/.test(e)){let n,r;e.includes(" ")?e.includes("days")?[n,r]=e.split(" days "):[n,r]=e.split(" "):(n=0,r=e);const[a,i,o]=r.split(":").reverse();t=Zx.timedelta(Number(n),Number(a.replace(",",".")??0),0,Number(i??0),Number(o??0))}else{if(!e.startsWith("P"))return null;{const n=e.replace(/P|T/g,"").match(/(\d*?)[A-Z]/g);if(!n)return null;const r={};for(const e of n){const t=e.match(/^(\d*)/),n=e.match(/[A-Z]$/);t&&n&&(r[n[0]]=parseFloat(t[0]))}t=Zx.timedelta(r.D,r.S,0,r.M,r.H,r.W)}}return ob(t.toString()),t}catch{return null}},float:function(e,t){try{const t=parseFloat(e);return ob(t.toString()),t}catch(e){if(t)return t;throw e}},is_number:sb,int:function(e,t){try{const t=parseInt(e);return ob(t.toString()),t}catch(e){if(t)return t;throw e}},bool:cb,log:lb,sin:db,cos:ub,tan:hb,asin:mb,acos:pb,atan:fb,atan2:gb,sqrt:vb,max:_b,min:yb,average:bb,median:wb,statistical_mode:xb,set:function(...e){return new Set(e.flat(1/0))},list:function(...e){return e.map((e=>Array.from(e))).flat(1/0)},zip:function(...e){if(e.length>1)return e[0].map(((t,n)=>{const r=[t];for(let t=1;t<e.length;t++)r.push(e[t][n]);return r}));{e=e[0];const t=[];for(let n=0;n<e.length;n++)for(let r=0;r<e[n].length;r++)t[r]||t.push([]),t[r].push(e[n][r]);return t}},match_media:function(e){return window.matchMedia(e).matches},str:ib},ok={e:kb,pi:Mb,tau:Cb,inf:Sb};const sk={list:function(e){return Array.isArray(e)},set:function(e){return e instanceof Set},datetime:function(e){return e instanceof Bx},string_like:function(e){return"string"==typeof e||e instanceof Buffer||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof ArrayBuffer},contains:Py,match:function(e,t){return new RegExp(`^${t}`).test(e)},search:function(e,t){return new RegExp(t,"g").test(e)},test:function(e,t){return new RegExp(t).test(e)}};let ck;Oy.installJinjaCompat();const lk=function(e){for(const t in sk)e.addTest(t,(function(...e){return sk[t](...e)}));return e}(function(e){for(const t in rk)e.addFilter(t,(function(...e){return rk[t](...e)}));for(const t in nk)e.addFilter(t,(function(...e){return nk[t](ck,...e)}));return e}(function(e){for(const t in ik)e.addGlobal(t,(function(...e){return ik[t](...e)}));for(const t in ak)e.addGlobal(t,(function(...e){return ak[t](ck,...e)}));for(const t in ok)e.addGlobal(t,ok[t]);return e.addGlobal("dt",Zx),e.addGlobal("date",Vx),e.addGlobal("time",jx),e.addGlobal("datetime",Bx),e.addGlobal("timedelta",Dx),e}(new Oy.Environment)));function dk(e,t,n){return ck||async function(e){if(e.connection){const t=await e.connection.sendMessagePromise({type:"config/label_registry/list"});t.sort(((e,t)=>e.name.localeCompare(t.name)));for(const e of t)Xy[e.label_id]=e}}(e),ck=e,"string"==typeof t&&(t.includes("{{")&&t.includes("}}")||t.includes("{%")&&t.includes("%}"))?(t=lk.renderString(structuredClone(t),{hass:e,_states:By(e),...n}).trim(),[void 0,null,"undefined","null","None"].includes(t)?"":"true"==t.toLowerCase()||"false"!=t.toLowerCase()&&t):t}class uk{constructor(){this.renderRecursively=(e,t,n)=>this._renderTemplateRecursively(e,t,this._generateTemplateContext(n))}_generateTemplateContext(e){if(!(e?.conditionState?.camera||e?.conditionState?.view||e?.triggerData||e?.mediaData))return;const t={...e?.conditionState?.camera&&{camera:e.conditionState.camera},...e?.conditionState?.view&&{view:e.conditionState.view},...e?.triggerData&&{trigger:e.triggerData},...e?.mediaData&&{media:e.mediaData}};return{acc:t,advanced_camera_card:t}}_renderTemplateRecursively(e,t,n){if("string"==typeof t)return dk(e,t,n);if(Array.isArray(t))return t.map((t=>this._renderTemplateRecursively(e,t,n)));if("object"==typeof t&&null!==t){const r={};for(const a in t)r[a]=this._renderTemplateRecursively(e,t[a],n);return r}return t}}const hk=(e,t,n)=>{eu(e,t,n)},mk=(e,t,n)=>cc(e,t,n),pk=(e,t)=>{!function(e,t){null==e||Kd(e,t)}(e,t)},fk=e=>Nl(e),gk=(e,t)=>e.replace("#",`[${t.toString()}]`),vk=function(e){let t=!1;for(let n=0;n<Tk.length;n++)t=Tk[n](e)||t;return t},_k=function(e){return vk(fk(e))},yk=function(e,t,n){return function(r){return((e,t,n,r)=>{const a=mk(e,t);if(void 0===a)return!1;const i=r?.transform?r.transform(a):a;return!(t===n&&qd(a,i)||(null===i?r?.keepOriginal||(pk(e,t),0):void 0===i||(r?.keepOriginal||pk(e,t),hk(e,n,i),0)))})(r,e,t,n)}},bk=function(e,t,n){return function(r){let a=yk(e,t,n)(r);return a=kk(Dg,yk(e,t,n),(e=>e.merge&&"object"==typeof e.merge?e.merge:void 0))(r)||a,a=kk(Dg,yk(e,t,n),(e=>e.set&&"object"==typeof e.set?e.set:void 0))(r)||a,a}},wk=function(e,t){return bk(e,e,{transform:t})},xk=function(e){return bk(e,e,{transform:e=>null})},kk=function(e,t,n){return function(r){let a=!1;const i=mk(r,e);return Array.isArray(i)&&i.forEach((e=>{const r=n?n(e):e;r&&"object"==typeof r&&(a=t(r)||a)})),a}},Mk=(e,t)=>{const n=r=>{let a=!1;if(r&&"object"==typeof r){const i=t?t(r):r;i&&(a=e(i)||a),Array.isArray(r)?r.forEach((e=>{a=n(e)||a})):Object.keys(r).forEach((e=>{a=n(r[e])||a}))}return a};return n},Ck=e=>{if("object"!=typeof e||!e||"object"!=typeof e.conditions||!e.conditions)return!1;const t=e.conditions,n=[];if(void 0!==t.view&&n.push({condition:"view",views:t.view}),void 0!==t.fullscreen&&n.push({condition:"fullscreen",fullscreen:t.fullscreen}),void 0!==t.expand&&n.push({condition:"expand",expand:t.expand}),void 0!==t.camera&&n.push({condition:"camera",cameras:t.camera}),void 0!==t.media_loaded&&n.push({condition:"media_loaded",media_loaded:t.media_loaded}),void 0!==t.state&&Array.isArray(t.state))for(const e of t.state)"object"!=typeof e||!e||void 0===e.state&&void 0===e.state_not&&void 0===e.entity||n.push({condition:"state",...e.state&&{state:e.state},...e.state_not&&{state_not:e.state_not},...e.entity&&{entity:e.entity}});return void 0!==t.media_query&&n.push({condition:"screen",media_query:t.media_query}),!!n.length&&(e.conditions=n,!0)},Sk=e=>!("object"!=typeof e||!e||"call-service"!==e.action||"string"!=typeof e.service)&&(e.action="perform-action",e.perform_action=e.service,delete e.service,!0),Ek=e=>!("object"!=typeof e||!e||"call-service"!==e.action||void 0===e.service||void 0===e.service_data||void 0!==e.data)&&(e.data=e.service_data,delete e.service_data,!0),Ak=e=>{const t=[{oldKey:"type",oldValue:"custom:frigate-card",newValue:"custom:advanced-camera-card"},{oldKey:"action",oldValue:"custom:frigate-card-action",newValue:"custom:advanced-camera-card-action"},{oldKey:"type",oldValue:"custom:frigate-card-menu-icon",newValue:"custom:advanced-camera-card-menu-icon"},{oldKey:"type",oldValue:"custom:frigate-card-menu-state-icon",newValue:"custom:advanced-camera-card-menu-state-icon"},{oldKey:"type",oldValue:"custom:frigate-card-menu-submenu",newValue:"custom:advanced-camera-card-menu-submenu"},{oldKey:"type",oldValue:"custom:frigate-card-menu-submenu-select",newValue:"custom:advanced-camera-card-menu-submenu-select"},{oldKey:"type",oldValue:"custom:frigate-card-status-bar-icon",newValue:"custom:advanced-camera-card-status-bar-icon"},{oldKey:"type",oldValue:"custom:frigate-card-status-bar-image",newValue:"custom:advanced-camera-card-status-bar-image"},{oldKey:"type",oldValue:"custom:frigate-card-status-bar-string",newValue:"custom:advanced-camera-card-status-bar-string"},{oldKey:"type",oldValue:"custom:frigate-card-conditional",newValue:"custom:advanced-camera-card-conditional"},{oldKey:"type",oldValue:"custom:frigate-card-conditional",newValue:"custom:advanced-camera-card-conditional"},{oldKey:"frigate_card_action",newKey:"advanced_camera_card_action"}];let n=!1;for(const r of t)r.oldValue&&r.newValue&&e[r.oldKey]===r.oldValue&&(e[r.newKey??r.oldKey]=r.newValue,n=!0),r.oldKey in e&&r.newKey&&(e[r.newKey]=e[r.oldKey],delete e[r.oldKey],n=!0);return n},Tk=[e=>Mk(Ek)("object"==typeof e&&e?e:{}),function(e){if("object"!=typeof e||!e||!(Om in e)||!Array.isArray(e[Om]))return!1;let t=!1;const n=n=>{if(!t){if(!cc(e,"live.controls.ptz")){const{type:t,...r}=n;eu(e,"live.controls.ptz",r)}t=!0}},r=e=>{const t=[];for(const a of e)if("custom:advanced-camera-card-ptz"===a.type)n(a);else if("conditional"!==a.type&&"custom:advanced-camera-card-conditional"!==a.type||!Array.isArray(a.elements))t.push(a);else{const e=r(a.elements);e.length&&(a.elements=e,t.push(a))}return t},a=r(e[Om]);return t&&(a.length?e[Om]=a:delete e[Om]),t},bk("view.timeout_seconds",Hm),wk("live.lazy_unload",(e=>"all"===e?["unselected","hidden"]:"never"===e?null:mu(e))),wk("live.auto_play",(e=>"all"===e?null:"never"===e?[]:mu(e))),wk("live.auto_pause",(e=>"all"===e?["unselected","hidden"]:"never"===e?null:mu(e))),wk("live.auto_mute",(e=>"all"===e?null:"never"===e?[]:mu(e))),wk("live.auto_unmute",(e=>"all"===e?["selected","visible","microphone"]:"never"===e?null:mu(e))),wk("media_viewer.auto_play",(e=>"all"===e?null:"never"===e?[]:mu(e))),wk("media_viewer.auto_pause",(e=>"all"===e?null:"never"===e?[]:mu(e))),wk("media_viewer.auto_mute",(e=>"all"===e?null:"never"===e?[]:mu(e))),wk("media_viewer.auto_unmute",(e=>"all"===e?["selected","visible"]:"never"===e?null:mu(e))),bk("live.controls.thumbnails.media",vf),bk("timeline.media",ng),bk("live.controls.timeline.media",Cf),bk("media_viewer.controls.timeline.media",qp),bk("view.scan",op),bk("view.triggers.enabled",up,{transform:e=>!0===e?"live":null,keepOriginal:!0}),bk("view.triggers.enabled",cp,{transform:e=>!0!==e&&null}),bk("view.triggers.untrigger_reset",hp,{transform:e=>e?"default":null}),bk("live.layout",$m),xk("media_viewer.layout"),xk("image.layout"),kk(Dg,Ck),e=>Mk(Ck)("object"==typeof e&&e?e[Om]:{}),e=>Mk(Ck)("object"==typeof e&&e?e.automations:{}),kk(kh,bk("hide","capabilities",{transform:e=>!0===e?{disable_except:["substream"]}:null})),bk("performance.profile",Ug,{transform:e=>"low"===e?["low-performance"]:null}),kk(Dg,yk("overrides","merge")),bk("live.controls.ptz",Im,{transform:e=>{if("object"!=typeof e||!e)return;const t=["data_left","data_right","data_up","data_down","data_zoom_in","data_zoom_out","service"],n=["actions_left","actions_right","actions_up","actions_down","actions_zoom_in","actions_zoom_out"],r=[...t,...n,"data_home","actions_home"];if(!Object.keys(e).some((e=>r.includes(e))))return;const a={};t.filter((t=>t in e)).reduce(((t,n)=>(t[n]=e[n],t)),a),n.filter((t=>t in e)).reduce(((t,n)=>("object"==typeof e[n]&&"tap_action"in e[n]&&(t[n]=e[n].tap_action),t)),a);const i=()=>{a.presets="presets"in e&&"object"==typeof e.presets&&e.presets?e.presets:{}};return"actions_home"in e&&"object"==typeof e.actions_home&&e.actions_home&&"tap_action"in e.actions_home?(i(),a.presets.home=e.actions_home.tap_action):"data_home"in e&&"object"==typeof e.data_home&&e.data_home&&"string"==typeof e.service&&(i(),a.presets.service=e.service,a.presets.data_home=e.data_home),a},keepOriginal:!0}),wk("live.controls.ptz",(e=>{if("object"!=typeof e||!e)return e;const t=["mode","position","orientation","hide_pan_tilt","hide_zoom","hide_home","style"],n=Object.keys(e);return n.some((e=>!t.includes(e)))?n.filter((e=>t.includes(e))).reduce(((t,n)=>(t[n]=e[n],t)),{}):void 0})),bk("view.update_cycle_camera",Jm),bk("view.update_force",tp,{transform:e=>!0===e?"all":null}),bk("view.update_seconds",np),bk("view.update_entities",rp),yk("live.controls.title",Mg,{transform:e=>"object"==typeof e&&e&&"string"==typeof e.mode?"none"===e.mode?{style:"none"}:e.mode.includes("bottom")?{position:"bottom"}:e.mode.includes("top")?{position:"top"}:null:null}),xk("live.controls.title"),xk("media_viewer.controls.title"),e=>Mk(Sk)("object"==typeof e&&e?e:{}),bk("dimensions.max_height",Lg),xk("dimensions.min_height"),bk("view.dark_mode",Vm,{transform:e=>"on"===e}),e=>Mk(Ak)("object"==typeof e&&e?e:{}),wk("view.theme.overrides",(e=>{if("object"!=typeof e||!e||Array.isArray(e))return e;const t={...e},n=new RegExp(/^--frigate-card-/);for(const r of Object.keys(e))if(r.match(n)){t[r.replace(n,"--advanced-camera-card-")]=e[r],delete t[r]}return t})),bk("menu.buttons.frigate","menu.buttons.iris")];class $k{constructor(e,t){this._listeners=[],this._mediaQueries=[],this._evaluation={result:!1},this._templateRenderer=new uk,this._mediaQueryHandler=()=>this._evaluate(),this._stateManagerHandler=e=>{this._evaluate({stateChange:e})},this._conditions=e,e.forEach((e=>{if("screen"===e.condition){const t=window.matchMedia(e.media_query);t.addEventListener("change",this._mediaQueryHandler),this._mediaQueries.push(t)}})),this._stateManager=t??null,this._evaluate({callListeners:!1}),this._stateManager?.addListener(this._stateManagerHandler)}destroy(){this._stateManager?.removeListener(this._stateManagerHandler),this._listeners.forEach((e=>this.removeListener(e))),this._mediaQueries.forEach((e=>e.removeEventListener("change",this._mediaQueryHandler))),this._mediaQueries=[],this._conditions=[]}addListener(e){this._listeners.includes(e)||this._listeners.push(e)}removeListener(e){this._listeners=this._listeners.filter((t=>t!==e))}getEvaluation(){return this._evaluation}_evaluate(e){const t=e?.stateChange?.new??this._stateManager?.getState();let n=!0,r={};for(const a of this._conditions){const i=this._evaluateCondition(a,t,e?.stateChange?.old);if(!i.result){n=!1;break}r={...r,...i.triggerData}}const a=n?{result:n,triggerData:r}:{result:n};(a.result!==this._evaluation.result||a.triggerData&&Object.keys(a.triggerData).length)&&(this._evaluation=a,(e?.callListeners??1)&&this._listeners.forEach((e=>this._evaluation&&e(this._evaluation))))}_evaluateCondition(e,t,n){switch(e.condition){case void 0:case"state":{const r=n?.hass?.states?.[e.entity]?.state,a=t?.hass?.states?.[e.entity]?.state;return{result:!e.state&&!e.state_not&&a!==r||(!!e.state||!!e.state_not)&&!!a&&(!e.state||(Array.isArray(e.state)?e.state.includes(a):e.state===a))&&(!e.state_not||(Array.isArray(e.state_not)?!e.state_not.includes(a):e.state_not!==a)),...r!==a&&{triggerData:{state:{entity:e.entity,...r&&{from:r},...a&&{to:a}}}}}}case"view":{const r=n?.view,a=t?.view;return{result:!!a&&e.views?.includes(a)||a!==r&&!e.views?.length,...r!==a&&{triggerData:{...(n?.view||t?.view)&&{view:{...n?.view&&{from:n.view},...t?.view&&{to:t.view}}}}}}}case"fullscreen":return{result:void 0!==t?.fullscreen&&e.fullscreen===t.fullscreen};case"expand":return{result:void 0!==t?.expand&&e.expand===t.expand};case"camera":{const r=n?.camera,a=t?.camera;return{result:!!a&&!!e.cameras?.includes(a)||a!==r&&!e.cameras?.length,...a!==r&&{triggerData:{...(n?.camera||t?.camera)&&{camera:{...n?.camera&&{from:n?.camera},...t?.camera&&{to:t?.camera}}}}}}}case"numeric_state":return{result:!!t?.hass?.states&&e.entity in t.hass?.states&&void 0!==t.hass.states[e.entity].state&&(void 0===e.above||Number(t.hass.states[e.entity].state)>e.above)&&(void 0===e.below||Number(t.hass.states[e.entity].state)<e.below)};case"user":return{result:!!t?.hass?.user&&e.users.includes(t.hass.user.id)};case"media_loaded":return{result:void 0!==t?.mediaLoadedInfo&&e.media_loaded===!!t.mediaLoadedInfo};case"screen":return{result:window.matchMedia(e.media_query).matches};case"display_mode":return{result:!!t?.displayMode&&e.display_mode===t.displayMode};case"triggered":return{result:e.triggered.some((e=>t?.triggered?.has(e)))};case"interaction":return{result:void 0!==t?.interaction&&e.interaction===t.interaction};case"microphone":return{result:!(void 0!==e.connected&&t?.microphone?.connected!==e.connected||void 0!==e.muted&&t?.microphone?.muted!==e.muted)};case"key":return{result:!(!t?.keys||!(e.key in t.keys)||(e.state??"down")!==t.keys[e.key].state||void 0!==e.ctrl&&e.ctrl!==!!t.keys[e.key].ctrl||void 0!==e.alt&&e.alt!==!!t.keys[e.key].alt||void 0!==e.meta&&e.meta!==!!t.keys[e.key].meta||void 0!==e.shift&&e.shift!==!!t.keys[e.key].shift)};case"user_agent":return{result:!!t?.userAgent&&(!e.user_agent||e.user_agent===t.userAgent)&&(void 0===e.companion||e.companion===(r=t.userAgent,!!r.match(/Home ?Assistant/)))&&(void 0===e.user_agent_re||new RegExp(e.user_agent_re).test(t.userAgent))};case"config":{const r=t?.config,a=n?.config;return{result:!!r&&r!==a&&(!e.paths?.length||e.paths.some((e=>mk(r,e)!==(a?mk(a,e):void 0)))),...r!==a&&{triggerData:{config:{...(n?.config||t?.config)&&{...n?.config&&{from:n?.config},...t?.config&&{to:t?.config}}}}}}}case"initialized":return{result:!!t?.initialized};case"or":for(const r of e.conditions){const e=this._evaluateCondition(r,t,n);if(e.result)return e}return{result:!1};case"and":{let r={};for(const a of e.conditions){const e=this._evaluateCondition(a,t,n);if(!e.result)return{result:!1};r={...r,...e.triggerData}}return{result:!0,triggerData:r}}case"not":return{result:!this._evaluateCondition({...e,condition:"and"},t,n).result};case"template":return{result:!!t?.hass&&!0===this._templateRenderer.renderRecursively(t.hass,e.value_template,{conditionState:t})}}var r}}class Ik{constructor(e){this._automations=new Map,this._nestedAutomationExecutions=0,this._api=e}deleteAutomations(e){for(const[t,n]of this._automations)t.tag===e&&(this._automations.delete(t),n.destroy())}addAutomations(e){for(const t of e){const e=new $k(t.conditions,this._api.getConditionStateManager());e.addListener((e=>this._execute(t,e))),this._automations.set(t,e)}}_execute(e,t){if(!this._api.getHASSManager().hasHASS()||!this._api.getInitializationManager().isInitializedMandatory()||this._api.getMessageManager().hasErrorMessage())return;const n=t.result?e.actions:e.actions_not;if(!n?.length)return;(async e=>{++this._nestedAutomationExecutions,this._nestedAutomationExecutions>10?this._api.getMessageManager().setMessageIfHigherPriority({type:"error",message:hv("error.too_many_automations")}):(await this._api.getActionsManager().executeActions({actions:e,triggerData:t.triggerData}),--this._nestedAutomationExecutions)})(n)}}class Ok{constructor(e){this._api=e}openURL(){const e=this.getCameraURL();e&&window.open(e)}hasCameraURL(){return!!this.getCameraURL()}getCameraURL(){const e=this._api.getViewManager().getView(),t=e?.queryResults?.getSelectedResult()??null,n=e?.camera?this._api.getCameraManager().getCameraEndpoints(e.camera,{view:e.view,...t&&uh.isMedia(t)&&{media:t}})??null:null;return n?.ui?.endpoint??null}}const Lk=()=>!!navigator.userAgent.match(/CrKey\//),Dk=async()=>{if(["ha-button","ha-camera-stream","ha-card","ha-combo-box","ha-dropdown-item","ha-dropdown","ha-hls-player","ha-icon-button","ha-icon","ha-menu-button","ha-selector","ha-spinner","ha-state-icon","ha-web-rtc-player","mwc-button","mwc-list-item","state-badge"].every((e=>customElements.get(e))))return!0;const e=await window.loadCardHelpers();await e.createCardElement({type:"picture-glance",entities:[],camera_image:"dummy-to-load-editor-components"}),await customElements.whenDefined("hui-picture-glance-card");const t=customElements.get("hui-picture-glance-card");if(!t)return!1;const n=new t;return await n.constructor.getConfigElement(),!0};class jk{constructor(){this._initialized=new Set}async initializeMultipleIfNecessary(e){return(await xu(Object.entries(e),(async([e,t])=>await this.initializeIfNecessary(e,t)))).every(Boolean)}async initializeIfNecessary(e,t){return!!this._initialized.has(e)||(t?!!await t()&&(this._initialized.add(e),!0):(this._initialized.add(e),!0))}uninitialize(e){this._initialized.delete(e)}isInitialized(e){return this._initialized.has(e)}isInitializedMultiple(e){return e.every((e=>this.isInitialized(e)))}}var zk;!function(e){e.LANGUAGES="languages",e.SIDE_LOAD_ELEMENTS="side-load-elements",e.CAMERAS="cameras",e.MICROPHONE_CONNECT="microphone-connect",e.VIEW="view",e.INITIAL_TRIGGER="initial-trigger"}(zk||(zk={}));class Pk{constructor(e,t){this._initializationQueue=new oh({concurrency:1}),this._everInitialized=!1,this._api=e,this._initializer=t??new jk}wasEverInitialized(){return this._everInitialized}isInitialized(e){return this._initializer.isInitialized(e)}isInitializedMandatory(){return!!this._api.getConfigManager().getConfig()&&this._initializer.isInitializedMultiple([zk.LANGUAGES,zk.SIDE_LOAD_ELEMENTS,zk.CAMERAS,...this._api.getMicrophoneManager().shouldConnectOnInitialization()?[zk.MICROPHONE_CONNECT]:[],zk.VIEW,zk.INITIAL_TRIGGER])}async initializeMandatory(){await this._initializationQueue.add((()=>this._initializeMandatory()))}async _initializeMandatory(){const e=this._api.getHASSManager().getHASS();if(!e||this.isInitializedMandatory())return;if(!await this._initializer.initializeMultipleIfNecessary({[zk.LANGUAGES]:async()=>await(async e=>{const t=uv(e);return"ca"===t?lv[t]=await import("./lang-ca-f85ce535.js"):"de"===t?lv[t]=await import("./lang-de-6dc05ec2.js"):"fr"===t?lv[t]=await import("./lang-fr-163f03e7.js"):"it"===t?lv[t]=await import("./lang-it-e52e5194.js"):"pl"===t?lv[t]=await import("./lang-pl-375c7c5f.js"):"pt"===t?lv[t]=await import("./lang-pt-PT-64e6e903.js"):"pt_BR"===t&&(lv[t]=await import("./lang-pt-BR-78c23b42.js")),t&&(dv=t),!0})(e),[zk.SIDE_LOAD_ELEMENTS]:async()=>await Dk()}))return;const t=this._api.getConfigManager().getConfig();t&&await this._initializer.initializeMultipleIfNecessary({[zk.CAMERAS]:async()=>(this._api.createCameraManager(),await this._api.getCameraManager().initializeCamerasFromConfig()),...this._api.getMicrophoneManager().shouldConnectOnInitialization()&&{[zk.MICROPHONE_CONNECT]:async()=>(this._api.createMicrophoneManager(),await this._api.getMicrophoneManager().connect())}})&&!this._api.getMessageManager().hasMessage()&&await this._initializer.initializeIfNecessary(zk.VIEW,this._api.getViewManager().initialize)&&await this._initializer.initializeIfNecessary(zk.INITIAL_TRIGGER,(async()=>(await this._api.getTriggersManager().handleInitialCameraTriggers(),this._api.getCardElementManager().update(),!0)))&&(this._everInitialized=!0,this._api.getConditionStateManager().setState({config:t,initialized:this._everInitialized}),this._api.getCardElementManager().update())}uninitialize(e){this._initializer.uninitialize(e)}}class Rk{constructor(e,t,n,r){this.update=()=>{this._element.requestUpdate()},this._api=e,this._element=t,this._scrollCallback=n,this._menuToggleCallback=r}getElement(){return this._element}scrollReset(){this._scrollCallback()}toggleMenu(){this._menuToggleCallback()}hasUpdated(){return this._element.hasUpdated}elementConnected(){this._api.getInteractionManager().initialize(),this._api.getFullscreenManager().initialize(),this._api.getExpandManager().initialize(),this._api.getMediaLoadedInfoManager().initialize(),this._api.getMicrophoneManager().initialize(),this._api.getKeyboardStateManager().initialize(),this._api.getDefaultManager().initialize(),this._api.getMediaPlayerManager().initialize(),this._api.getHASSManager().getStateWatcher()?.subscribe(this.update,[...this._api.getConfigManager().getConfig()?.view.render_entities??[],...this._api.getMediaPlayerManager().getMediaPlayers()??[]]),Cu(this._element,(e=>{const t=e.getRootNode();return!!(t&&t instanceof ShadowRoot&&"HUI-PANEL-VIEW"===t.host.tagName)})(this._element),"panel"),Cu(this._element,Lk(),"casted"),this._api.getFullscreenManager().connect(),this._element.addEventListener("mousemove",this._api.getInteractionManager().reportInteraction),this._element.addEventListener("wheel",this._api.getInteractionManager().reportInteraction),this._element.addEventListener("touchstart",this._api.getInteractionManager().reportInteraction),this._element.addEventListener("touchmove",this._api.getInteractionManager().reportInteraction),this._element.addEventListener("ll-custom",this._api.getActionsManager().handleCustomActionEvent),this._element.addEventListener("action",this._api.getActionsManager().handleInteractionEvent),this._element.addEventListener("action",this._api.getInteractionManager().reportInteraction),this._element.addEventListener("advanced-camera-card:action:execution-request",this._api.getActionsManager().handleActionExecutionRequestEvent),window.addEventListener("location-changed",this._api.getQueryStringManager().requestExecution),window.addEventListener("popstate",this._api.getQueryStringManager().requestExecution),this._api.getConditionStateManager()?.setState({userAgent:navigator.userAgent}),this._api.getQueryStringManager().requestExecution(),this._element.requestUpdate()}elementDisconnected(){Cu(this._element,!1,"panel"),Cu(this._element,!1,"tabindex"),Cu(this._element,!1,"casted"),this._api.getMediaLoadedInfoManager().clear(),this._api.getFullscreenManager().disconnect(),this._api.getKeyboardStateManager().uninitialize(),this._api.getActionsManager().uninitialize(),this._api.getDefaultManager().uninitialize(),this._api.getHASSManager().getStateWatcher()?.unsubscribe(this.update),this._api.getInitializationManager().uninitialize(zk.CAMERAS),this._api.getCameraManager().destroy(),this._element.removeEventListener("mousemove",this._api.getInteractionManager().reportInteraction),this._element.removeEventListener("wheel",this._api.getInteractionManager().reportInteraction),this._element.removeEventListener("touchstart",this._api.getInteractionManager().reportInteraction),this._element.removeEventListener("touchmove",this._api.getInteractionManager().reportInteraction),this._element.removeEventListener("ll-custom",this._api.getActionsManager().handleCustomActionEvent),this._element.removeEventListener("action",this._api.getActionsManager().handleInteractionEvent),this._element.removeEventListener("action",this._api.getInteractionManager().reportInteraction),this._element.removeEventListener("advanced-camera-card:action:execution-request",this._api.getActionsManager().handleActionExecutionRequestEvent),window.removeEventListener("location-changed",this._api.getQueryStringManager().requestExecution),window.removeEventListener("popstate",this._api.getQueryStringManager().requestExecution)}}function Nk(e){if(e instanceof br.ZodDefault)return Nk(e.removeDefault());if(e instanceof br.ZodObject){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=br.ZodOptional.create(Nk(r))}return new br.ZodObject({...e._def,shape:()=>t})}return e instanceof br.ZodArray?br.ZodArray.create(Nk(e.element)).min(e._def.minLength?.value,e._def.minLength?.message).max(e._def.maxLength?.value,e._def.maxLength?.message).length(e._def.exactLength?.value,e._def.exactLength?.message):e instanceof br.ZodOptional?br.ZodOptional.create(Nk(e.unwrap())):e instanceof br.ZodNullable?br.ZodNullable.create(Nk(e.unwrap())):e instanceof br.ZodTuple?br.ZodTuple.create(e.items.map((e=>Nk(e)))):e}const Fk=e=>{const t=new Set;if(e.issues.length)for(const n of e.issues)if("invalid_union"===n.code){const e=n.unionErrors;for(const n of e)Fk(n).forEach(t.add,t)}else t.add(Bk(n.path));return t},Bk=e=>{let t="";for(let n=0;n<e.length;n++){const r=e[n];"number"==typeof r?t+="["+r+"]":t?t+=" -> "+r:t=r}return t},Vk=br.object({enabled:br.boolean().default(!0).optional(),priority:br.number().min(0).max(100).default(50).optional()}),Hk=Ar.extend({advanced_camera_card_action:br.literal("camera_select"),camera:br.string().optional(),triggered:br.boolean().optional()}),Uk=br.enum(["single","grid"]),qk=br.enum(["default","first","last"]),Wk=br.object({mode:Uk.optional(),grid_selected_position:qk.optional(),grid_selected_width_factor:br.number().min(0).optional(),grid_max_columns:br.number().min(0).optional(),grid_columns:br.number().min(0).optional()}).optional(),Zk=Ar.extend({advanced_camera_card_action:br.literal("display_mode_select"),display_mode:Uk}),Kk=br.enum(["fireworks","ghost","hearts","shamrocks","snow"]),Qk=br.enum(["start","stop","toggle"]),Yk=Ar.extend({advanced_camera_card_action:br.literal("effect"),effect:Kk,effect_action:Qk.default("toggle")}),Gk=Ar.extend({advanced_camera_card_action:br.enum(["camera_ui","default","download","expand","fullscreen","live_substream_off","live_substream_on","menu_toggle","microphone_connect","microphone_disconnect","microphone_mute","microphone_unmute","mute","pause","play","reload","screenshot","unmute"])}),Xk=Ar.extend({advanced_camera_card_action:br.literal("log"),message:br.string(),level:br.enum(["debug","info","warn","error"]).default("info")}),Jk=Ar.extend({advanced_camera_card_action:br.literal("media_player"),media_player:br.string(),media_player_action:br.enum(["play","stop"])}),eM=Ar.extend({advanced_camera_card_action:br.literal("ptz_controls"),enabled:br.boolean()}),tM=br.object({x:br.number().min(0).max(100).optional(),y:br.number().min(0).max(100).optional()}),nM=Ar.extend({advanced_camera_card_action:br.literal("ptz_digital"),target_id:br.string().optional(),absolute:br.object({zoom:ey.optional(),pan:tM.optional()}).optional(),ptz_action:br.enum(fh).optional(),ptz_phase:br.enum(gh).optional()}),rM=Ar.extend({advanced_camera_card_action:br.literal("ptz_multi"),target_id:br.string().optional(),ptz_action:br.enum(fh).optional(),ptz_phase:br.enum(gh).optional(),ptz_preset:br.string().optional()}),aM=br.object({ms:br.number().optional(),s:br.number().optional(),m:br.number().optional(),h:br.number().optional()}),iM=Ar.extend({advanced_camera_card_action:br.literal("sleep"),duration:aM.optional().default({s:1})}),oM=Ar.extend({advanced_camera_card_action:br.literal("live_substream_select"),camera:br.string()}),sM=Ar.extend({advanced_camera_card_action:br.enum(Sr),folder:br.string().optional()}),cM=br.object({entity_id:br.string().or(br.string().array()).optional(),device_id:br.string().or(br.string().array()).optional(),area_id:br.string().or(br.string().array()).optional(),floor_id:br.string().or(br.string().array()).optional(),label_id:br.string().or(br.string().array()).optional()}),lM=Er.extend({action:br.literal("call-service"),service:br.string(),data:br.object({}).passthrough().optional(),target:cM.optional()}),dM=Er.extend({action:br.literal("fire-dom-event")}).passthrough(),uM=Er.extend({action:br.literal("more-info"),entity:br.string().optional()}),hM=Er.extend({action:br.literal("navigate"),navigation_path:br.string(),navigation_replace:br.boolean().optional()}),mM=Er.extend({action:br.literal("none")}),pM=Er.extend({action:br.literal("perform-action"),perform_action:br.string(),data:br.object({}).passthrough().optional(),target:cM.optional()}),fM=Er.extend({action:br.literal("toggle")}),gM=Er.extend({action:br.literal("url"),url_path:br.string()}),vM=br.union([lM,dM,uM,hM,mM,pM,fM,gM]),_M=Ar.extend({advanced_camera_card_action:br.literal("status_bar"),status_bar_action:br.enum(["add","remove","reset"]),items:br.lazy((()=>EM)).array().optional()}),yM=br.union([Hk,Yk,Gk,$r,Xk,Jk,vh,eM,nM,rM,iM,_M,oM,sM,Zk]),bM=br.union([vM,yM]),wM=br.object({tap_action:bM.or(bM.array()).optional(),hold_action:bM.or(bM.array()).optional(),double_tap_action:bM.or(bM.array()).optional(),start_tap_action:bM.or(bM.array()).optional(),end_tap_action:bM.or(bM.array()).optional()}).passthrough(),xM=br.object({actions:wM.optional()}),kM=Vk.extend({sufficient:br.boolean().default(!1).optional(),exclusive:br.boolean().default(!1).optional(),expand:br.boolean().default(!1).optional(),actions:wM.optional()}),MM=kM.extend({type:br.literal("custom:advanced-camera-card-status-bar-icon"),icon:br.string()}),CM=kM.extend({type:br.literal("custom:advanced-camera-card-status-bar-image"),image:br.string()}),SM=kM.extend({type:br.literal("custom:advanced-camera-card-status-bar-string"),string:br.string()}),EM=br.union([MM,CM,SM]),AM=br.object({condition:br.literal("camera"),cameras:br.string().array().optional()}),TM=br.object({condition:br.literal("config"),paths:br.string().array().optional()}),$M=br.object({condition:br.literal("display_mode"),display_mode:Uk}),IM=br.object({condition:br.literal("expand"),expand:br.boolean()}),OM=br.object({condition:br.literal("fullscreen"),fullscreen:br.boolean()}),LM=br.object({condition:br.literal("initialized")}),DM=br.object({condition:br.literal("interaction"),interaction:br.boolean()}),jM=br.object({condition:br.literal("key"),key:br.string(),state:br.enum(["down","up"]).optional(),ctrl:br.boolean().optional(),shift:br.boolean().optional(),alt:br.boolean().optional(),meta:br.boolean().optional()}),zM=br.object({condition:br.literal("media_loaded"),media_loaded:br.boolean()}),PM=br.object({condition:br.literal("microphone"),connected:br.boolean().optional(),muted:br.boolean().optional()}),RM=br.object({condition:br.literal("triggered"),triggered:br.string().array()}),NM=br.string().refine((e=>{try{new RegExp(e)}catch{return!1}return!0}),{message:"Invalid regular expression"}),FM=br.object({condition:br.literal("user_agent"),user_agent:br.string().optional(),user_agent_re:NM.optional(),companion:br.boolean().optional()}),BM=br.object({condition:br.literal("view"),views:br.string().array().optional()}),VM=br.object({condition:br.literal("numeric_state"),entity:br.string(),above:br.number().optional(),below:br.number().optional()}),HM=br.object({condition:br.literal("screen"),media_query:br.string()}),UM=br.object({condition:br.literal("state").optional(),entity:br.string(),state:br.string().or(br.string().array()).optional(),state_not:br.string().or(br.string().array()).optional()}),qM=br.object({condition:br.literal("template"),value_template:br.string()}),WM=br.object({condition:br.literal("user"),users:br.string().array().min(1)}),ZM=br.object({condition:br.literal("or"),conditions:br.lazy((()=>YM)).array().min(1)}),KM=br.object({condition:br.literal("and"),conditions:br.lazy((()=>YM)).array().min(1)}),QM=br.object({condition:br.literal("not"),conditions:br.lazy((()=>YM)).array().min(1)}),YM=br.union([VM,HM,UM,WM,ZM,KM,QM,qM,AM,TM,$M,IM,OM,LM,DM,jM,zM,PM,RM,FM,BM]),GM=bM.array(),XM=br.object({conditions:YM.array(),actions:GM.optional(),actions_not:GM.optional()}).refine((e=>e.actions?.length||e.actions_not?.length),"Automations must include at least one action").array(),JM=br.object({fit:br.enum(["contain","cover","fill"]).optional(),position:br.object({x:br.number().min(0).max(100).optional(),y:br.number().min(0).max(100).optional()}).optional(),view_box:br.object({bottom:br.number().min(0).max(100).optional().default(0),left:br.number().min(0).max(100).optional().default(0),right:br.number().min(0).max(100).optional().default(0),top:br.number().min(0).max(100).optional().default(0)}).optional(),pan:tM.optional(),zoom:ey.optional()}),eC={r2c_delay_between_calls_seconds:.5,c2r_delay_between_calls_seconds:.2},tC=function(e){return t=>{if(!t||"object"!=typeof t||!t.service)return t;const n={...t};return Object.keys(t).forEach((r=>{const a=r.match(/^data_(.+)$/),i=a?.[1];i&&!(`${e}${i}`in t)&&(n[`${e}${i}`]={action:"perform-action",perform_action:t.service,data:t[r]},delete n[r],delete n.service)})),n}},nC=br.preprocess(tC("actions_"),br.object({actions_left:pM.optional(),actions_left_start:pM.optional(),actions_left_stop:pM.optional(),actions_right:pM.optional(),actions_right_start:pM.optional(),actions_right_stop:pM.optional(),actions_up:pM.optional(),actions_up_start:pM.optional(),actions_up_stop:pM.optional(),actions_down:pM.optional(),actions_down_start:pM.optional(),actions_down_stop:pM.optional(),actions_zoom_in:pM.optional(),actions_zoom_in_start:pM.optional(),actions_zoom_in_stop:pM.optional(),actions_zoom_out:pM.optional(),actions_zoom_out_start:pM.optional(),actions_zoom_out_stop:pM.optional(),r2c_delay_between_calls_seconds:br.number().default(eC.r2c_delay_between_calls_seconds),c2r_delay_between_calls_seconds:br.number().default(eC.c2r_delay_between_calls_seconds),presets:br.preprocess(tC(""),br.union([br.record(pM),br.object({service:br.string().optional()})])).optional(),service:br.string().optional()}).passthrough()),rC=br.number().array().length(2).or(br.string().regex(/^\s*\d+\.?\d*\s*[:/]\s*\d+\.?\d*\s*$/).transform((e=>e.split(/[:\/]/).map((e=>Number(e)))))),aC={mode:"auto",refresh_seconds:1,zoomable:!0},iC=br.object({mode:br.enum(["auto","camera","entity","screensaver","url"]).default(aC.mode),refresh_seconds:br.number().min(0).default(aC.refresh_seconds),url:br.string().optional(),entity:br.string().optional(),entity_parameters:br.string().optional()}),oC=["events","clips","snapshots"],sC=br.object({url:br.string().transform((e=>e.replace(/\/+$/,""))).optional(),host:br.string().optional(),modes:br.enum(["webrtc","mse","mp4","mjpeg"]).array().optional(),stream:br.string().optional()}),cC=br.object({entity:br.string().optional(),url:br.string().optional()}).passthrough(),lC=br.object({options:br.object({audio:br.boolean().optional(),video:br.boolean().optional(),pauseWhenHidden:br.boolean().optional(),disableGl:br.boolean().optional(),disableWebAssembly:br.boolean().optional(),preserveDrawingBuffer:br.boolean().optional(),progressive:br.boolean().optional(),throttled:br.boolean().optional(),chunkSize:br.number().optional(),maxAudioLag:br.number().optional(),videoBufferSize:br.number().optional(),audioBufferSize:br.number().optional()}).optional()}),dC=br.object({method:br.enum(["standard","dashboard"]).default("standard").optional(),dashboard:br.object({dashboard_path:br.string().optional(),view_path:br.string().optional()}).optional()}),uC={dependencies:{all_cameras:!1,cameras:[]},engine:"auto",frigate:{client_id:"frigate"},live_provider:"auto",motioneye:{images:{directory_pattern:"%Y-%m-%d",file_pattern:"%H-%M-%S"},movies:{directory_pattern:"%Y-%m-%d",file_pattern:"%H-%M-%S"}},reolink:{media_resolution:"low"},ptz:eC,triggers:{motion:!1,occupancy:!1,events:[...oC],entities:[]},proxy:{dynamic:!0,live:"auto",media:"auto",ssl_ciphers:"auto",ssl_verification:"auto"},always_error_if_entity_unavailable:!1},hC=br.object({live:br.boolean().or(br.literal("auto")).default(uC.proxy.live),media:br.boolean().or(br.literal("auto")).default(uC.proxy.media),dynamic:br.boolean().default(uC.proxy.dynamic),ssl_verification:br.boolean().or(br.literal("auto")).default(uC.proxy.ssl_verification),ssl_ciphers:br.enum(["default","insecure","intermediate","modern"]).or(br.literal("auto")).default(uC.proxy.ssl_ciphers)}),mC=br.literal(0).or(br.literal(90)).or(br.literal(180)).or(br.literal(270)),pC=br.object({width_factor:br.number().min(.1).optional()}),fC=br.object({aspect_ratio:rC.optional(),layout:JM.optional(),rotation:mC.optional(),grid:pC.optional()}),gC=br.object({camera_entity:br.string().optional(),icon:br.string().optional(),title:br.string().optional(),capabilities:br.object({disable:br.enum(lu).array().optional(),disable_except:br.enum(lu).array().optional()}).optional(),id:br.string().optional(),dependencies:br.object({all_cameras:br.boolean().default(uC.dependencies.all_cameras),cameras:br.string().array().default(uC.dependencies.cameras)}).default(uC.dependencies),triggers:br.object({motion:br.boolean().default(uC.triggers.motion),occupancy:br.boolean().default(uC.triggers.occupancy),entities:br.string().array().default(uC.triggers.entities),events:br.enum(oC).array().default(uC.triggers.events)}).default(uC.triggers),engine:br.enum(["auto","frigate","generic","motioneye","reolink","tplink"]).default("auto"),frigate:br.object({url:br.string().optional(),client_id:br.string().default(uC.frigate.client_id),camera_name:br.string().optional(),labels:br.string().array().optional(),zones:br.string().array().optional()}).default(uC.frigate),motioneye:br.object({url:br.string().optional(),images:br.object({directory_pattern:br.string().includes("%").default(uC.motioneye.images.directory_pattern),file_pattern:br.string().includes("%").default(uC.motioneye.images.file_pattern)}).default(uC.motioneye.images),movies:br.object({directory_pattern:br.string().includes("%").default(uC.motioneye.movies.directory_pattern),file_pattern:br.string().includes("%").default(uC.motioneye.movies.file_pattern)}).default(uC.motioneye.movies)}).default(uC.motioneye),reolink:br.object({url:br.string().optional(),media_resolution:br.enum(["high","low"]).default(uC.reolink.media_resolution)}).default(uC.reolink),live_provider:br.enum(["auto","image","ha","jsmpeg","go2rtc","webrtc-card"]).default(uC.live_provider),go2rtc:sC.optional(),image:iC.optional().default(aC),jsmpeg:lC.optional(),webrtc_card:cC.optional(),cast:dC.optional(),ptz:nC.default(uC.ptz),dimensions:fC.optional(),proxy:hC.default(uC.proxy),always_error_if_entity_unavailable:br.boolean().default(uC.always_error_if_entity_unavailable)}).default(uC),vC=gC.array().min(1),_C=br.enum(["all","clips","snapshots"]),yC=75,bC=100,wC=300,xC={size:100,show_details:!0,show_favorite_control:!0,show_timeline_control:!0,show_download_control:!0},kC=br.object({size:br.number().min(75).max(300).default(xC.size),show_details:br.boolean().default(xC.show_details),show_favorite_control:br.boolean().default(xC.show_favorite_control),show_timeline_control:br.boolean().default(xC.show_timeline_control),show_download_control:br.boolean().default(xC.show_download_control)}),MC={...xC,mode:"right"},CC=kC.extend({mode:br.enum(["none","above","below","left","right"]).default(MC.mode)}),SC={clustering_threshold:3,events_media_type:"all",window_seconds:3600,show_recordings:!0,style:"stack",pan_mode:"pan",format:{"24h":!0}},EC=br.enum(["pan","seek","seek-in-media","seek-in-camera"]),AC=br.object({"24h":br.boolean().optional().default(SC.format["24h"])}),TC=br.object({clustering_threshold:br.number().optional().default(SC.clustering_threshold),events_media_type:_C.optional().default(SC.events_media_type),window_seconds:br.number().min(60).max(86400).optional().default(SC.window_seconds),show_recordings:br.boolean().optional().default(SC.show_recordings),style:br.enum(["stack","ribbon"]).optional().default(SC.style),pan_mode:EC.optional().default(SC.pan_mode),format:AC.optional().default(SC.format)}),$C={...SC,mode:"none",style:"ribbon"},IC=TC.extend({mode:br.enum(["none","above","below"]).default($C.mode),style:TC.shape.style.default($C.style)}),OC={...SC,controls:{thumbnails:MC}},LC={logging:!1},DC=br.object({logging:br.boolean().default(LC.logging)}).default(LC),jC={aspect_ratio_mode:"dynamic",aspect_ratio:[16,9],height:"auto"},zC=br.object({aspect_ratio_mode:br.enum(["dynamic","static","unconstrained"]).default(jC.aspect_ratio_mode),aspect_ratio:rC.default(jC.aspect_ratio),height:br.string().default(jC.height)}).default(jC),PC=br.discriminatedUnion("condition",[UM,VM,HM,WM]),RC=wM.extend({style:br.record(br.string().nullable().or(br.undefined()).or(br.number())).optional(),title:br.string().nullable().optional()}),NC=RC.extend({type:br.literal("icon"),icon:br.string(),entity:br.string().optional()}),FC=br.object({enabled:br.boolean().default(!0).optional(),priority:br.number().min(0).max(100).default(50).optional(),alignment:br.enum(["matching","opposing"]).default("matching").optional(),icon:br.string().optional(),permanent:br.boolean().default(!1).optional()}),BC=FC.merge(NC).extend({type:br.literal("custom:advanced-camera-card-menu-icon")}),VC=RC.extend({type:br.literal("state-icon"),entity:br.string(),icon:br.string().optional(),state_color:br.boolean().default(!0)}),HC=FC.merge(VC).extend({type:br.literal("custom:advanced-camera-card-menu-state-icon")}).merge(FC),UC=RC.extend({entity:br.string().optional(),icon:br.string().optional(),state_color:br.boolean().default(!0).optional(),selected:br.boolean().default(!1).optional(),subtitle:br.string().optional(),enabled:br.boolean().default(!0).optional()}),qC=FC.merge(NC).extend({type:br.literal("custom:advanced-camera-card-menu-submenu"),items:UC.array()}),WC=FC.merge(VC).extend({type:br.literal("custom:advanced-camera-card-menu-submenu-select"),options:br.record(UC.deepPartial()).optional()}),ZC=br.object({type:br.string().superRefine(((e,t)=>{e.match(/^custom:(?!advanced-camera-card).+/)||t.addIssue({code:br.ZodIssueCode.custom,message:"advanced-camera-card custom elements must match specific schemas",fatal:!0})}))}).passthrough(),KC=RC.extend({type:br.literal("image"),entity:br.string().optional(),image:br.string().optional(),camera_image:br.string().optional(),camera_view:br.string().optional(),state_image:br.object({}).passthrough().optional(),filter:br.string().optional(),state_filter:br.object({}).passthrough().optional(),aspect_ratio:br.string().optional()}),QC=RC.extend({type:br.literal("service-button"),title:br.string(),service:br.string(),service_data:br.object({}).passthrough().optional()}),YC=RC.extend({type:br.literal("state-badge"),entity:br.string()}),GC=RC.extend({type:br.literal("state-label"),entity:br.string(),attribute:br.string().optional(),prefix:br.string().optional(),suffix:br.string().optional()}),XC=br.object({type:br.literal("conditional"),conditions:PC.array(),elements:br.lazy((()=>eS))}),JC=br.object({type:br.literal("custom:advanced-camera-card-conditional"),conditions:YM.array(),elements:br.lazy((()=>eS))}),eS=br.union([XC,ZC,JC,NC,KC,BC,HC,qC,WC,QC,YC,VC,GC,MM,CM,SM]).array().optional(),tS="media-source://",nS=br.enum(["ha"]),rS="ha",aS={},iS=br.object({type:br.literal("startdate"),format:br.string().optional(),regexp:NM.optional()}),oS=iS.extend({type:br.literal("date")}),sS=br.discriminatedUnion("type",[oS,iS]),cS=br.object({type:br.literal("startdate"),since:br.object({years:br.number().int().min(0).optional(),months:br.number().int().min(0).optional(),days:br.number().int().min(0).optional(),hours:br.number().int().min(0).optional(),minutes:br.number().int().min(0).optional()})}),lS=cS.extend({type:br.literal("date")}),dS=br.object({type:br.literal("template"),value_template:br.string()}),uS=br.object({type:br.literal("title"),regexp:NM.optional(),title:br.string().optional()}),hS=br.object({type:br.literal("or"),matchers:br.array(br.lazy((()=>mS)))}),mS=br.union([lS,hS,cS,dS,uS]),pS=br.object({id:br.string().optional(),parsers:sS.array().optional(),matchers:mS.array().optional()}),fS=br.object({url:br.string().transform((e=>{let t=e;try{t=new URL(e).pathname}catch(e){}const n=decodeURIComponent(t).split(",").filter(Eu).slice(1),r=[{id:tS},...n.slice(0,-1).map((e=>({id:e.replace(/\/[^/]+$/,"")}))),...n.slice(-1).map((e=>({id:e})))];for(const t of r)if(t.id&&!t.id.startsWith(tS))throw new cu(`Could not parse media source URL: ${e}`);return r})).or(pS.array().min(1)).optional(),path:pS.array().nonempty().optional()}),gS=br.object({type:nS.default(rS),id:br.string().optional(),ha:fS.default(aS).optional(),title:br.string().optional(),icon:br.string().optional()}).array(),vS=iC.extend({zoomable:br.boolean().default(aC.zoomable)}).merge(xM).default(aC),_S=br.object({style:br.enum(["none","chevrons","icons","thumbnails"]),size:br.number().min(20)}),yS={orientation:"horizontal",mode:"auto",hide_pan_tilt:!1,hide_zoom:!1,hide_home:!1,position:"bottom-right"},bS=br.object({mode:br.enum(["off","auto","on"]).default(yS.mode),position:br.enum(["top-left","top-right","bottom-left","bottom-right"]).default(yS.position),orientation:br.enum(["vertical","horizontal"]).default(yS.orientation),hide_pan_tilt:br.boolean().default(yS.hide_pan_tilt),hide_zoom:br.boolean().default(yS.hide_zoom),hide_home:br.boolean().default(yS.hide_home),style:br.object({}).passthrough().optional()}),wS=["selected","visible"],xS=["unselected","hidden"],kS=[...xS,"microphone"],MS=[...wS,"microphone"],CS=br.enum(["none","slide"]),SS={always_connected:!1,disconnect_seconds:90,mute_after_microphone_mute_seconds:60},ES=br.object({always_connected:br.boolean().default(SS.always_connected),disconnect_seconds:br.number().min(0).default(SS.disconnect_seconds),mute_after_microphone_mute_seconds:br.number().min(0).default(SS.mute_after_microphone_mute_seconds)}).default(SS),AS={...MC,media_type:"events",events_media_type:"all"},TS={auto_play:[...wS],auto_pause:[],auto_mute:[...kS],auto_unmute:["microphone"],preload:!1,lazy_load:!0,lazy_unload:[],draggable:!0,zoomable:!0,transition_effect:"slide",show_image_during_load:!0,mode:"single",controls:{builtin:!0,next_previous:{size:48,style:"chevrons"},ptz:yS,thumbnails:AS,timeline:$C,wheel:!0},microphone:{...SS}},$S=CC.extend({media_type:br.enum(["events","recordings"]).default(TS.controls.thumbnails.media_type),events_media_type:_C.default(TS.controls.thumbnails.events_media_type)}),IS=br.object({auto_pause:br.enum(xS).array().default(TS.auto_pause),auto_play:br.enum(wS).array().default(TS.auto_play),auto_mute:br.enum(kS).array().default(TS.auto_mute),auto_unmute:br.enum(MS).array().default(TS.auto_unmute),controls:br.object({builtin:br.boolean().default(TS.controls.builtin),next_previous:_S.extend({style:br.enum(["none","chevrons","icons"]).default(TS.controls.next_previous.style),size:_S.shape.size.default(TS.controls.next_previous.size)}).default(TS.controls.next_previous),ptz:bS.default(TS.controls.ptz),thumbnails:$S.default(TS.controls.thumbnails),timeline:IC.default(TS.controls.timeline),wheel:br.boolean().default(TS.controls.wheel)}).default(TS.controls),display:Wk,draggable:br.boolean().default(TS.draggable),lazy_load:br.boolean().default(TS.lazy_load),lazy_unload:br.enum(xS).array().default(TS.lazy_unload),microphone:ES.default(TS.microphone),preload:br.boolean().default(TS.preload),show_image_during_load:br.boolean().default(TS.show_image_during_load),transition_effect:CS.default(TS.transition_effect),zoomable:br.boolean().default(TS.zoomable)}).merge(xM).default(TS),OS={...MC,show_details:!1},LS={controls:{thumbnails:OS,filter:{mode:"right"}}},DS=kC.extend({show_details:br.boolean().default(OS.show_details)}),jS=br.object({controls:br.object({thumbnails:DS.default(LS.controls.thumbnails),filter:br.object({mode:br.enum(["none","left","right"]).default(LS.controls.filter.mode)}).default(LS.controls.filter)}).default(LS.controls)}).merge(xM).default(LS),zS=["left","right","top","bottom"],PS=zS,RS={priority:50,enabled:!0},NS={priority:50,enabled:!1},FS={alignment:"left",button_size:40,buttons:{camera_ui:RS,cameras:RS,clips:RS,ptz_home:NS,display_mode:RS,download:RS,expand:NS,folders:RS,iris:RS,fullscreen:RS,image:NS,live:RS,media_player:RS,microphone:{...NS,type:"momentary"},mute:NS,play:NS,ptz_controls:NS,recordings:NS,screenshot:NS,snapshots:RS,substreams:RS,timeline:RS},position:"top",style:"hidden"},BS=FC.extend({enabled:FC.shape.enabled.default(RS.enabled),priority:FC.shape.priority.default(RS.priority)}),VS=FC.extend({enabled:FC.shape.enabled.default(NS.enabled),priority:FC.shape.priority.default(NS.priority)}),HS=br.object({style:br.enum(["none","hidden","overlay","hover","hover-card","outside"]).default(FS.style),position:br.enum(zS).default(FS.position),alignment:br.enum(PS).default(FS.alignment),buttons:br.object({camera_ui:BS.default(FS.buttons.camera_ui),cameras:BS.default(FS.buttons.cameras),clips:BS.default(FS.buttons.clips),ptz_home:VS.default(FS.buttons.ptz_home),display_mode:BS.default(FS.buttons.display_mode),download:BS.default(FS.buttons.download),expand:VS.default(FS.buttons.expand),folders:BS.default(FS.buttons.folders),iris:BS.default(FS.buttons.iris),fullscreen:BS.default(FS.buttons.fullscreen),image:VS.default(FS.buttons.image),live:BS.default(FS.buttons.live),media_player:BS.default(FS.buttons.media_player),microphone:VS.extend({type:br.enum(["momentary","toggle"]).default(FS.buttons.microphone.type)}).default(FS.buttons.microphone),mute:VS.default(FS.buttons.mute),play:VS.default(FS.buttons.play),ptz_controls:VS.default(FS.buttons.ptz_controls),recordings:VS.default(FS.buttons.recordings),screenshot:VS.default(FS.buttons.screenshot),snapshots:BS.default(FS.buttons.snapshots),substreams:BS.default(FS.buttons.substreams),timeline:BS.default(FS.buttons.timeline)}).default(FS.buttons),button_size:br.number().min(20).default(FS.button_size)}).default(FS),US=br.object({conditions:YM.array(),merge:br.object({}).passthrough().optional(),set:br.object({}).passthrough().optional(),delete:br.string().array().optional()}).array().optional(),qS={features:{animated_progress_indicator:!0,card_loading_effects:!0,card_loading_indicator:!0,media_chunk_size:50},style:{border_radius:!0,box_shadow:!0}},WS=br.object({features:br.object({animated_progress_indicator:br.boolean().default(qS.features.animated_progress_indicator),card_loading_effects:br.boolean().default(qS.features.card_loading_effects),card_loading_indicator:br.boolean().default(qS.features.card_loading_indicator),media_chunk_size:br.number().min(0).max(1e3).default(qS.features.media_chunk_size),max_simultaneous_engine_requests:br.number().min(1).optional()}).default(qS.features),style:br.object({border_radius:br.boolean().default(qS.style.border_radius),box_shadow:br.boolean().default(qS.style.box_shadow)}).default(qS.style)}).default(qS),ZS=br.enum(["casting","low-performance","scrubbing"]).array().optional(),KS={entities:{camera_priority:"card"}},QS=br.enum(["card","entity"]),YS=br.object({entities:br.object({camera:br.string().startsWith("input_select.").optional(),camera_priority:QS.default(KS.entities.camera_priority)}).default(KS.entities)}).default(KS),GS=20,XS={priority:50,enabled:!0},JS={height:40,items:{engine:XS,resolution:XS,technology:XS,title:XS},position:"bottom",style:"popup",popup_seconds:3},eE=br.object({position:br.enum(["top","bottom"]).default(JS.position),style:br.enum(["none","overlay","hover","hover-card","outside","popup"]).default(JS.style),popup_seconds:br.number().min(0).max(60).default(JS.popup_seconds),height:br.number().min(20).default(JS.height),items:br.object({engine:Vk.default(JS.items.engine),technology:Vk.default(JS.items.technology),resolution:Vk.default(JS.items.resolution),title:Vk.default(JS.items.title)}).default(JS.items)}).default(JS),tE=TC.extend({controls:br.object({thumbnails:CC.default(OC.controls.thumbnails)}).default(OC.controls)}).default(OC),nE=br.object({key:br.string(),ctrl:br.boolean().optional(),shift:br.boolean().optional(),alt:br.boolean().optional(),meta:br.boolean().optional()}),rE={enabled:!0,ptz_left:{key:"ArrowLeft"},ptz_right:{key:"ArrowRight"},ptz_up:{key:"ArrowUp"},ptz_down:{key:"ArrowDown"},ptz_zoom_in:{key:"+"},ptz_zoom_out:{key:"-"},ptz_home:{key:"h"}},aE=br.object({enabled:br.boolean().default(rE.enabled),ptz_left:nE.nullable().default(rE.ptz_left),ptz_right:nE.nullable().default(rE.ptz_right),ptz_up:nE.nullable().default(rE.ptz_up),ptz_down:nE.nullable().default(rE.ptz_down),ptz_zoom_in:nE.nullable().default(rE.ptz_zoom_in),ptz_zoom_out:nE.nullable().default(rE.ptz_zoom_out),ptz_home:nE.nullable().default(rE.ptz_home)}),iE={default:Cr,camera_select:"current",interaction_seconds:300,default_reset:{every_seconds:0,after_interaction:!1,entities:[],interaction_mode:"inactive"},default_cycle_camera:!1,dim:!1,theme:{themes:["traditional"]},triggers:{show_trigger_status:!1,filter_selected_camera:!0,actions:{trigger:"update",untrigger:"none"},untrigger_seconds:0},keyboard_shortcuts:rE},oE=br.enum(["all","inactive","active"]).default("inactive"),sE=br.object({actions:br.object({interaction_mode:oE,trigger:br.enum(["default","live","media","none","update"]).default(iE.triggers.actions.trigger),untrigger:br.enum(["default","none"]).default(iE.triggers.actions.untrigger)}).default(iE.triggers.actions),filter_selected_camera:br.boolean().default(iE.triggers.filter_selected_camera),show_trigger_status:br.boolean().default(iE.triggers.show_trigger_status),untrigger_seconds:br.number().default(iE.triggers.untrigger_seconds)}),cE=br.enum(["ha","dark","light","traditional"]),lE=br.object({themes:cE.array().default(iE.theme.themes),overrides:br.record(br.string()).optional()}),dE=br.object({default:br.enum(Sr).default(iE.default),camera_select:br.enum([...Sr,"current"]).default(iE.camera_select),interaction_seconds:br.number().default(iE.interaction_seconds),default_cycle_camera:br.boolean().default(iE.default_cycle_camera),default_reset:br.object({after_interaction:br.boolean().default(iE.default_reset.after_interaction),every_seconds:br.number().default(iE.default_reset.every_seconds),entities:br.string().array().default(iE.default_reset.entities),interaction_mode:oE.default(iE.default_reset.interaction_mode)}).default(iE.default_reset),render_entities:br.string().array().optional(),theme:lE.default(iE.theme),dim:br.boolean().default(iE.dim),triggers:sE.default(iE.triggers),keyboard_shortcuts:aE.default(iE.keyboard_shortcuts)}).merge(xM).default(iE),uE={auto_play:[...wS],auto_pause:[...xS],auto_mute:[...xS],auto_unmute:[],lazy_load:!0,draggable:!0,zoomable:!0,transition_effect:"slide",snapshot_click_plays_clip:!0,display_mode:"single",controls:{builtin:!0,next_previous:{size:48,style:"thumbnails"},thumbnails:MC,timeline:$C,ptz:{...yS,mode:"off"},wheel:!0}},hE=_S.extend({style:br.enum(["none","thumbnails","chevrons"]).default(uE.controls.next_previous.style),size:_S.shape.size.default(uE.controls.next_previous.size)}),mE=br.object({auto_play:br.enum(wS).array().default(uE.auto_play),auto_pause:br.enum(xS).array().default(uE.auto_pause),auto_mute:br.enum(xS).array().default(uE.auto_mute),auto_unmute:br.enum(wS).array().default(uE.auto_unmute),lazy_load:br.boolean().default(uE.lazy_load),draggable:br.boolean().default(uE.draggable),zoomable:br.boolean().default(uE.zoomable),transition_effect:CS.default(uE.transition_effect),snapshot_click_plays_clip:br.boolean().default(uE.snapshot_click_plays_clip),display:Wk,controls:br.object({builtin:br.boolean().default(uE.controls.builtin),next_previous:hE.default(uE.controls.next_previous),ptz:bS.extend({mode:br.enum(["off","on"]).default(uE.controls.ptz.mode)}).default(uE.controls.ptz),thumbnails:CC.default(uE.controls.thumbnails),timeline:IC.default(uE.controls.timeline),wheel:br.boolean().default(uE.controls.wheel)}).default(uE.controls)}).merge(xM).default(uE),pE=br.object({cameras:Nk(vC),cameras_global:gC,view:dE,menu:HS,status_bar:eE,live:IS,media_gallery:jS,media_viewer:mE,image:vS,elements:eS,dimensions:zC,timeline:tE,performance:WS,debug:DC,automations:XM.optional(),profiles:ZS,folders:gS.optional(),overrides:US,card_mod:br.unknown(),card_id:br.string().regex(wr).optional(),remote_control:YS,type:br.string()}),fE={cameras:uC,view:iE,menu:FS,status_bar:JS,live:TS,media_gallery:LS,media_viewer:uE,image:aC,timeline:OC,performance:qS,debug:LC,remote_control:KS},gE={casting:{[of]:!1,[jp]:!1,[fg]:"none",[`${bg}.enabled`]:!0,[`${wg}.enabled`]:!0,[`${_g}.enabled`]:!1,[`${xg}.enabled`]:!1,[af]:["selected","visible"],[Og]:"static",[Ig]:"16:9",[Tm]:1,[Vf]:!0},"low-performance":{[_f]:"none",[Rp]:"none",[og]:"none",[Tf]:!1,[Qp]:!1,[ag]:!1,[rf]:[],[xp]:[],[kp]:[],[Mp]:[],[Nf]:["unselected","hidden"],[Pf]:!1,[Ip]:!1,[Bf]:"none",[Dp]:"none",[Vf]:!1,[zp]:"chevrons",[Sg]:"none",[fg]:"outside",[`${yg}.enabled`]:!1,[`${kg}.enabled`]:!1,[`${kg}.enabled`]:!1,[`${xg}.enabled`]:!1,[vp]:!1,[_p]:!1,[yp]:!1,[gp]:!1,[wf]:!1,[xf]:!1,[kf]:!1,[bf]:!1,[Fp]:!1,[Bp]:!1,[Vp]:!1,[Np]:!1,[lg]:!1,[dg]:!1,[ug]:!1,[cg]:!1,[zg]:!1,[Rg]:!1,[Pg]:!1,[Ng]:10,[Hg]:!1,[Vg]:!1,[Lp]:!1,[Am]:!1,[Em]:"image",[Tm]:10,[up]:"none",[Fg]:1},scrubbing:{[Ef]:"below",[$f]:"ribbon",[Af]:"seek",[Zp]:"below",[Yp]:"ribbon",[Kp]:"seek"}},vE=(e,t,n)=>{const r=Nk(pE).safeParse(e);if(!r.success)return t;const a=r.data;for(const e of n??[])e in gE&&Object.entries(gE[e]).forEach((([e,n])=>{return i=n,void(void 0===mk(a,r=e)&&hk(t,r,i));var r,i}));return t},_E=e=>{const t=_E;e.getAutomationsManager().deleteAutomations(t);const n=e.getConfigManager().getConfig()?.remote_control,r=n?.entities.camera;if(!r)return;const a=n.entities.camera_priority,i=[{conditions:[{condition:"config",paths:["cameras","remote_control.entities.camera"]}],actions:[Bu((e=>bE(r,e)))],tag:t},{conditions:[{condition:"camera"}],actions:[Bu((e=>yE(r,e.getViewManager().getView()?.camera,e)))],tag:t},{conditions:[{condition:"initialized"}],actions:["entity"===a?Ru("camera_select",`{{ hass.states["${r}"].state }}`):Bu((e=>yE(r,e.getViewManager().getView()?.camera,e)))],tag:t},{conditions:[{condition:"state",entity:r}],actions:[Ru("camera_select","{{ advanced_camera_card.trigger.state.to }}")],tag:t}];e.getAutomationsManager().addAutomations(i)},yE=async(e,t,n)=>{const r=n.getHASSManager().getHASS(),a=r?.states[e]?.state;t&&t!==a&&await(r?.callService("input_select","select_option",{option:t},{entity_id:e}))},bE=async(e,t)=>{const n=t.getHASSManager().getHASS(),r=t.getCameraManager().getStore().getCameraIDs(),a=(n?.states[e]?.attributes?.options??[]).sort(),i=[...r].sort();qd(a,i)||await(n?.callService("input_select","set_options",{options:i},{entity_id:e}))},wE=e=>{const t=wE;e.getAutomationsManager().deleteAutomations(t);const n=e.getConfigManager().getConfig()?.view.keyboard_shortcuts;if(!n)return;const r=kE(t,n);r.length&&e.getAutomationsManager().addAutomations(r)},xE=e=>{switch(e){case"ptz_left":return"left";case"ptz_right":return"right";case"ptz_up":return"up";case"ptz_down":return"down";case"ptz_zoom_in":return"zoom_in";case"ptz_zoom_out":return"zoom_out"}
/* istanbul ignore next: No (current) way to reach this code -- @preserve */return null},kE=(e,t)=>{if(!t.enabled)return[];const n=[];for(const r of["ptz_down","ptz_left","ptz_right","ptz_up","ptz_zoom_in","ptz_zoom_out"]){const a=t[r],i=xE(r);a&&i&&(n.push({conditions:[{condition:"key",key:a.key,state:"down",shift:a.shift,ctrl:a.ctrl,alt:a.alt,meta:a.meta}],actions:[Fu({ptzAction:i,ptzPhase:"start"})],tag:e}),n.push({conditions:[{condition:"key",key:a.key,state:"up"}],actions:[Fu({ptzAction:i,ptzPhase:"stop"})],tag:e}))}const r=t.ptz_home;return r&&n.push({conditions:[{condition:"key",key:r.key,state:"down",shift:r.shift,ctrl:r.ctrl,alt:r.alt,meta:r.meta}],actions:[Fu()],tag:e}),n};class ME extends cu{}class CE{constructor(e){this._overrides=new Map,this._callback=e}_clear(){this._overrides.forEach((e=>e.destroy())),this._overrides.clear()}hasOverrides(){return!!this._overrides.size}set(e,t){this._clear(),t?.forEach((t=>{const n=new $k(t.conditions,e);n.addListener(this._callback),this._overrides.set(t,n)}))}getConfig(e){let t=fk(e),n=!1,r=!1;for(const[e,a]of this._overrides.entries())a.getEvaluation()?.result&&(e.delete?.forEach((e=>{pk(t,e),r=!0})),Object.keys(e.set??{}).forEach((n=>{hk(t,n,e.set?.[n])})),Object.keys(e.merge??{}).forEach((n=>{hk(t,n,Zd({},mk(t,n),e.merge?.[n]))})),n=!0);if(!n)return e;r&&(t=Ou(t));const a=pE.safeParse(t);if(!a.success)throw new ME(hv("error.invalid_configuration_override"),[a.error.errors,t]);return a.data}}class SE{constructor(e){this._config=null,this._overriddenConfig=null,this._rawConfig=null,this._cardWideConfig=null,this._overridesManager=new CE((()=>this._processOverrideConfig())),this._api=e}hasConfig(){return!!this.getConfig()}getConfig(){return this._overriddenConfig??this._config}getCardWideConfig(){return this._cardWideConfig}getNonOverriddenConfig(){return this._config}getRawConfig(){return this._rawConfig}setConfig(e){if(!e)throw new Error(hv("error.invalid_configuration"));const t=pE.safeParse(e);if(!t.success){const n=_k(e),r=Fk(t.error);let a="";throw n&&(a=`${hv("error.upgrade_available")}. `),new Error(a+`${hv("error.invalid_configuration")}: `+(r&&r.size?JSON.stringify([...r],null," "):hv("error.invalid_configuration_no_hint")))}const n=vE(e,t.data,t.data.profiles);this._rawConfig=e,qd(this._config,n)||(this._config=n,this._cardWideConfig={performance:n.performance,debug:n.debug},this._overridesManager.set(this._api.getConditionStateManager(),this._config.overrides),this._api.getConditionStateManager().setState({view:void 0,displayMode:void 0,camera:void 0}),this._api.getMediaLoadedInfoManager().clear(),this._api.getInitializationManager().uninitialize(zk.VIEW),this._api.getViewManager().reset(),this._api.getMessageManager().reset(),this._api.getStatusBarItemManager().removeAllDynamicStatusBarItems(),this._processOverrideConfig(),this._api.getCardElementManager().update())}_processOverrideConfig(){const e=this._getOverriddenConfig();if(!e||qd(e,this._overriddenConfig))return;const t=this._overriddenConfig;var n;this._overriddenConfig=e,(e=>{e.getFoldersManager().deleteFolders();try{e.getFoldersManager().addFolders(e.getConfigManager().getConfig()?.folders??[])}catch(t){e.getMessageManager().setErrorIfHigherPriority(t)}})(this._api),this._api.getStyleManager().updateFromConfig(),wE(this._api),_E(this._api),(n=this._api).getAutomationsManager().deleteAutomations(),n.getAutomationsManager().addAutomations(n.getConfigManager().getNonOverriddenConfig()?.automations??[]),!t||qd(t?.cameras,this._overriddenConfig?.cameras)&&qd(t?.cameras_global,this._overriddenConfig?.cameras_global)||(this._api.getInitializationManager().uninitialize(zk.CAMERAS),this._api.getCameraManager().destroy()),t&&t?.live.microphone.always_connected!==this._overriddenConfig?.live.microphone.always_connected&&this._api.getInitializationManager().uninitialize(zk.MICROPHONE_CONNECT),this._initializeBackgroundAndUpdate(t)}_getOverriddenConfig(){
/* istanbul ignore if: No (current) way to reach this code -- @preserve */
if(!this._config)return null;try{return this._overridesManager.getConfig(this._config)}catch(e){return this._api.getMessageManager().setErrorIfHigherPriority(e),null}}async _initializeBackgroundAndUpdate(e){await this._api.getDefaultManager().initializeIfNecessary(e),await this._api.getMediaPlayerManager().initializeIfNecessary(e),this._overriddenConfig&&this._api.getInitializationManager().isInitializedMandatory()&&this._api.getConditionStateManager().setState({config:this._overriddenConfig}),this._api.getCardElementManager().update()}}class EE{constructor(e){this._timer=new Zu,this._stateChangeHandler=()=>{this._setToDefaultIfAllowed()},this._api=e}async initializeIfNecessary(e){qd(e?.view.default_reset,this._api.getConfigManager().getConfig()?.view.default_reset)||await this.initialize()}async initialize(){this.uninitialize();const e=this._api.getConfigManager().getConfig()?.view.default_reset;e?.entities.length&&this._api.getHASSManager().getStateWatcher().subscribe(this._stateChangeHandler,e.entities);const t=this._api.getConfigManager().getConfig()?.view.default_reset.every_seconds;return t&&this._timer.startRepeated(t,(()=>this._setToDefaultIfAllowed())),this._api.getConfigManager().getConfig()?.view.default_reset.after_interaction&&this._api.getAutomationsManager().addAutomations([{actions:[zu("default")],conditions:[{condition:"interaction",interaction:!1}],tag:this}]),!0}uninitialize(){this._timer.stop(),this._api.getHASSManager().getStateWatcher().unsubscribe(this._stateChangeHandler),this._api.getAutomationsManager().deleteAutomations(this)}_setToDefaultIfAllowed(){this._isAutomatedUpdateAllowed()&&this._api.getViewManager().setViewDefault()}_isAutomatedUpdateAllowed(){const e=this._api.getConfigManager().getConfig()?.view.default_reset.interaction_mode;return!!e&&((e,t)=>{switch(e){case"all":return!0;case"active":return t;case"inactive":return!t}})(e,this._api.getInteractionManager().hasInteraction())}}class AE{constructor(e){this._expanded=!1,this._api=e}initialize(){this._setConditionState()}isExpanded(){return this._expanded}toggleExpanded(){this.setExpanded(!this._expanded)}setExpanded(e){e&&this._api.getFullscreenManager().isInFullscreen()&&this._api.getFullscreenManager().setFullscreen(!1),this._expanded=e,this._setConditionState(),Cu(this._api.getCardElementManager().getElement(),e,"expanded"),this._api.getCardElementManager().update()}_setConditionState(){this._api.getConditionStateManager()?.setState({expand:this._expanded})}}const TE={album:{icon:"mdi:album"},app:{icon:"mdi:application"},artist:{icon:"mdi:account-music"},channel:{icon:"mdi:television-classic"},composer:{icon:"mdi:account-music-outline"},contributing_artist:{icon:"mdi:account-music"},directory:{icon:"mdi:folder"},episode:{icon:"mdi:television-classic"},game:{icon:"mdi:gamepad-variant"},genre:{icon:"mdi:drama-masks"},image:{icon:"mdi:image"},movie:{icon:"mdi:movie"},music:{icon:"mdi:music"},playlist:{icon:"mdi:playlist-music"},podcast:{icon:"mdi:podcast"},season:{icon:"mdi:television-classic"},track:{icon:"mdi:file-music"},tv_show:{icon:"mdi:television-classic"},url:{icon:"mdi:web"},video:{icon:"mdi:video"}},$E=e=>TE[e]?.icon??null;class IE extends lh{constructor(e,t,n){super(e,{cameraID:n?.cameraID??t._metadata?.cameraID,...n}),this._browseMedia=t,this._icon=$E(t.media_class),this._id=t._metadata?.startDate&&this._cameraID?`${this._cameraID}/${ja(t._metadata.startDate,"yyyy-MM-dd HH:mm:ss")}`:t.media_content_id}getStartTime(){return this._browseMedia._metadata?.startDate??null}getEndTime(){return this._browseMedia._metadata?.endDate??null}getVideoContentType(){return this._mediaType===sh.Clip?ch.MP4:null}getID(){return this._id}getContentID(){return this._browseMedia.media_content_id}getTitle(){const e=this.getStartTime();return e?_u(e):this._browseMedia.title}getThumbnail(){return this._browseMedia.thumbnail}getIcon(){return this._icon}getWhat(){return this._browseMedia._metadata?.what??null}getScore(){return null}getTags(){return null}isGroupableWith(e){return this.getMediaType()===e.getMediaType()&&qd(this.getWhat(),e.getWhat())}}class OE extends dh{constructor(e,t){super(e,{id:t.media_content_id,icon:$E(t.children_media_class??t.media_class),title:t.title,thumbnail:t.thumbnail}),this._browseMedia=t}getBrowseMedia(){return this._browseMedia}}class LE{static create(e,t){if(e.can_expand)return t?.folder?new OE(t.folder,e):null;const n=e.media_class===kv?sh.Clip:e.media_class===Mv?sh.Snapshot:null;return n?new IE(n,e,t):null}}const DE=(e,t)=>jE(e,t).filter((e=>uh.isMedia(e))),jE=(e,t)=>e.map((e=>LE.create(e,{cameraID:e._metadata?.cameraID,...t}))).filter(Eu);function zE(e){return!!e?.startsWith("/")}function PE(e,t){return zE(t)?e.hassUrl(t):t??null}const RE=async(e,t,n)=>{if(!t)return null;const r=await i_(e,t,n);return r?{endpoint:PE(e,r.url)}:null},NE=(e,t,n)=>{const r=t.match(e);return n?.groupName&&r?.groups?.[n.groupName]?r.groups[n.groupName]:void 0!==n?.groupNumber&&r?.[n.groupNumber]?r[n.groupNumber]:r?r[0]:null},FE="value";class BE{constructor(){this._templateRenderer=new uk}match(e,t,n){if(n?.foldersOnly&&!t.can_expand)return!1;for(const r of n?.matchers??[])switch(r.type){case"date":case"startdate":if(!this._matchStartDate(r,t))return!1;break;case"template":if(!this._matchTemplate(e,r,t,n?.conditionState))return!1;break;case"title":if(!this._matchTitle(r,t))return!1;break;case"or":if(!r.matchers.some((r=>this.match(e,t,{foldersOnly:n?.foldersOnly,matchers:[r],conditionState:n?.conditionState}))))return!1}return!0}_matchStartDate(e,t){const n=t._metadata?.startDate;return!!n&&n>=Oi(new Date,{years:e.since.years??0,months:e.since.months??0,days:e.since.days??0,hours:e.since.hours??0,minutes:e.since.minutes??0})}_matchTemplate(e,t,n,r){return!0===this._templateRenderer.renderRecursively(e,t.value_template,{conditionState:r,mediaData:{title:n.title,is_folder:n.can_expand}})}_matchTitle(e,t){const n=e.regexp?NE(e.regexp,t.title,{groupName:FE}):t.title;return!!n&&(!e.title||n===e.title)}}class VE{constructor(){this._anyDateParser=null}async prepare(e){this._anyDateParser||e?.some((e=>["date","startdate"].includes(e.type)&&!e.format))&&(this._anyDateParser=(await import("./index-a94d25a3.js")).default)}generate(e,t,n){const r={...t?._metadata};for(const a of n??[]){const n=a.regexp?NE(a.regexp,e.title,{groupName:FE}):e.title;n&&("startdate"!==a.type&&"date"!==a.type||(r.startDate=this._parseDate(a,n,r.startDate??t?._metadata?.startDate)??void 0))}return Object.keys(r).length>0?r:null}_parseDate(e,t,n){return e.format?this._parseFormattedDate(e.format,t,n):this._parseUnknownDate(t,n)}_parseFormattedDate(e,t,n){const r=Ii(t,e,n??new Date);return Mu(r)?r:void 0}_parseUnknownDate(e,t){if(!this._anyDateParser)return;const n=this._anyDateParser.attempt(e);if(!Object.keys(n).length)return;const r=this._anyDateParser.fromObject({...t&&{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),millisecond:t.getMilliseconds()},...n});return Mu(r)?r:void 0}}class HE{constructor(e){this._cache=new xv,this._browseMediaManager=e?.browseMediaManager??new Sv,this._metadataGenerator=e?.metadataGenerator??new VE,this._mediaMatcher=e?.mediaMatcher??new BE}getItemCapabilities(e){return{canFavorite:!1,canDownload:!uh.isFolder(e)}}async getDownloadPath(e,t,n){return uh.isMedia(t)?RE(e,t.getContentID(),n?.resolvedMediaCache):null}async favorite(e,t,n){}generateDefaultFolderQuery(e){return e.type!==nS.enum.ha?null:{folder:e,path:this.getDefaultFolderPathComponents(e.ha)}}getDefaultFolderPathComponents(e){return[...!e?.url&&e?.path?.[0]?.id!==tS?[{id:tS}]:[],...e?.url??[],...e?.path??[]].map((e=>({ha:e})))}async expandFolder(e,t,n,r){if(t.folder.type!==nS.enum.ha)return null;const a=[...t.path];let i=null;for(;a.length>0;){const e=(a[0]?.folder instanceof OE?a[0].folder.getBrowseMedia():null)??a[0]?.ha?.id??null;if(!e)break;i=e,a.shift()}if(null===i)return null;await this._metadataGenerator.prepare(a.flatMap((e=>e.ha?.parsers??[])));const o=t=>{const r=a.shift();return[{targets:t,metadataGenerator:(e,t)=>this._metadataGenerator.generate(e,t,r?.ha?.parsers),...r&&{matcher:t=>this._mediaMatcher.match(e,t,{matchers:r.ha?.matchers,foldersOnly:a.length>0,conditionState:n}),advance:e=>a.length?o(e):[]}}]},s=await this._browseMediaManager.walk(e,o([i]),{...(r?.useCache??!0)&&{cache:this._cache}});return jE(s,{folder:t.folder})}generateChildFolderQuery(e,t){const n=t.getID();if(e.folder.type!==nS.enum.ha||!n)return null;const r=this.getDefaultFolderPathComponents(e.folder.ha)[e.path.length],a=r?.ha??{id:n};return{...e,path:[...e.path,{folder:t,ha:a}]}}}class UE{constructor(e){this._ha=e?.ha??new HE}generateDefaultFolderQuery(e){return this._getFolderEngine(e.type)?.generateDefaultFolderQuery(e)??null}generateChildFolderQuery(e,t){return this._getFolderEngine(e.folder.type)?.generateChildFolderQuery(e,t)??null}async expandFolder(e,t,n,r){const a=await(this._getFolderEngine(t.folder.type)?.expandFolder(e,t,n,r))??null;return a?hh(a):null}getItemCapabilities(e){return this._getFolderEngine(e.getFolder()?.type)?.getItemCapabilities(e)??null}async getDownloadPath(e,t,n){return await(this._getFolderEngine(t.getFolder()?.type)?.getDownloadPath(e,t,n)??null)}async favorite(e,t,n){return await(this._getFolderEngine(t.getFolder()?.type)?.favorite(e,t,n))}_getFolderEngine(e){return e===nS.enum.ha?this._ha:null}}class qE extends cu{}class WE{constructor(e,t){this._folders=new Map,this._api=e,this._executor=t??new UE}deleteFolders(){this._folders.clear()}addFolders(e){for(const t of e){const e=this._folders.size,n=t.id??`folder/${e.toString()}`;if(this._folders.has(n))throw new qE(hv("error.duplicate_folder_id"),t);this._folders.set(n,{title:`${hv("common.folder")} ${e}`,...Nl(t),id:n})}}hasFolders(){return this._folders.size>0}getFolderCount(){return this._folders.size}getFolders(){return this._folders.entries()}getFolder(e){return e?this._folders.get(e)??null:this._folders.values().next().value??null}generateDefaultFolderQuery(e){const t=e??this.getFolder();return t?this._executor.generateDefaultFolderQuery(t):null}generateChildFolderQuery(e,t){return this._executor.generateChildFolderQuery(e,t)}async expandFolder(e,t,n){const r=this._api.getHASSManager().getHASS();return r?this._executor.expandFolder(r,e,t,n):null}getItemCapabilities(e){return this._executor.getItemCapabilities(e)}async getDownloadPath(e){return await this._executor.getDownloadPath(this._api.getHASSManager().getHASS(),e,{resolvedMediaCache:this._api.getResolvedMediaCache()})}async favorite(e,t){return await this._executor.favorite(this._api.getHASSManager().getHASS(),e,t)}}const ZE=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],KE=(()=>{if("undefined"==typeof document)return!1;const e=ZE[0],t={};for(const n of ZE){const r=n?.[1];if(r in document){for(const[r,a]of n.entries())t[e[r]]=a;return t}}return!1})(),QE={change:KE.fullscreenchange,error:KE.fullscreenerror};let YE={request:(e=document.documentElement,t)=>new Promise(((n,r)=>{const a=()=>{YE.off("change",a),n()};YE.on("change",a);const i=e[KE.requestFullscreen](t);i instanceof Promise&&i.then(a).catch(r)})),exit:()=>new Promise(((e,t)=>{if(!YE.isFullscreen)return void e();const n=()=>{YE.off("change",n),e()};YE.on("change",n);const r=document[KE.exitFullscreen]();r instanceof Promise&&r.then(n).catch(t)})),toggle:(e,t)=>YE.isFullscreen?YE.exit():YE.request(e,t),onchange(e){YE.on("change",e)},onerror(e){YE.on("error",e)},on(e,t){const n=QE[e];n&&document.addEventListener(n,t,!1)},off(e,t){const n=QE[e];n&&document.removeEventListener(n,t,!1)},raw:KE};Object.defineProperties(YE,{isFullscreen:{get:()=>Boolean(document[KE.fullscreenElement])},element:{enumerable:!0,get:()=>document[KE.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>Boolean(document[KE.fullscreenEnabled])}}),KE||(YE={isEnabled:!1});var GE=YE;class XE{constructor(e,t){this._api=e,this._handler=t}}class JE extends XE{connect(){GE.isEnabled&&GE.on("change",this._handler)}disconnect(){GE.isEnabled&&GE.off("change",this._handler)}isInFullscreen(){return GE.isEnabled&&GE.isFullscreen}isSupported(){return GE.isEnabled}setFullscreen(e){this.isSupported()&&(e?GE.request(this._api.getCardElementManager().getElement()):GE.exit())}}class eA extends XE{constructor(){super(...arguments),this._playTimer=new Zu,this._stateChangeHandler=e=>{if(e.old.mediaLoadedInfo?.mediaPlayerController?.getFullscreenElement()!==e.new.mediaLoadedInfo?.mediaPlayerController?.getFullscreenElement()){const t=e.old.mediaLoadedInfo?.mediaPlayerController?.getFullscreenElement();t?.removeEventListener("webkitbeginfullscreen",this._handler),t?.removeEventListener("webkitendfullscreen",this._endHandler);const n=e.new.mediaLoadedInfo?.mediaPlayerController?.getFullscreenElement();n?.addEventListener("webkitbeginfullscreen",this._handler),n?.addEventListener("webkitendfullscreen",this._endHandler)}},this._endHandler=()=>{this._handler(),this._playTimer.start(.5,(()=>{this._getVideoElement()?.play()}))}}connect(){this._api.getConditionStateManager().addListener(this._stateChangeHandler)}disconnect(){this._api.getConditionStateManager().removeListener(this._stateChangeHandler)}_getVideoElement(){const e=this._api.getMediaLoadedInfoManager().get()?.mediaPlayerController?.getFullscreenElement();return e instanceof HTMLVideoElement?e:null}isInFullscreen(){return!!this._getVideoElement()?.webkitDisplayingFullscreen}isSupported(){return!!this._getVideoElement()?.webkitSupportsFullscreen}setFullscreen(e){if(!this.isSupported())return;const t=this._getVideoElement();e?t?.webkitEnterFullscreen?.():t?.webkitExitFullscreen?.()}}class tA{static create(e,t){if(GE.isEnabled)return new JE(e,t);return document.createElement("video").webkitEnterFullscreen?new eA(e,t):null}}class nA{constructor(e,t){this._fullscreenHandler=()=>{this._api.getExpandManager().setExpanded(!1),this._setConditionState(),this._api.getCardElementManager().update()},this._api=e,this._provider=t??tA.create(e,this._fullscreenHandler)}connect(){this._provider?.connect()}disconnect(){this._provider?.disconnect()}setFullscreen(e){this._provider?.setFullscreen(e)}isInFullscreen(){return this._provider?.isInFullscreen()??!1}isSupported(){return!Lk()&&(this._provider?.isSupported()??!1)}initialize(){this._setConditionState()}toggleFullscreen(){this._provider?.isInFullscreen()?this._provider.setFullscreen(!1):this._provider?.setFullscreen(!0)}_setConditionState(){this._api.getConditionStateManager()?.setState({fullscreen:this.isInFullscreen()})}}function rA(e,t,n,r){if(!e||!n?.length)return[];const a=[];for(const i of n){const n=t?.states[i],o=e.states[i];if((r?.stateOnly&&n?.state!==o?.state||!r?.stateOnly&&n!==o)&&(a.push({entityID:i,oldState:n,newState:o}),r?.firstOnly))break}return a}class aA{constructor(){this._watcherCallbacks=new Map}setHASS(e,t){if(e)for(const[n,r]of this._watcherCallbacks.entries()){const a=rA(t,e,r,{stateOnly:!0,firstOnly:!0});a.length&&n(a[0])}}subscribe(e,t){return!!t.length&&(this._watcherCallbacks.has(e)?this._watcherCallbacks.get(e)?.push(...t):this._watcherCallbacks.set(e,t),!0)}unsubscribe(e){this._watcherCallbacks.delete(e)}}class iA{constructor(e){this._hass=null,this._stateWatcher=new aA,this._api=e}getHASS(){return this._hass}hasHASS(){return!!this._hass}getStateWatcher(){return this._stateWatcher}setHASS(e){if(((e,t)=>e?.connected!==t?.connected)(this._hass,e)&&(e?.connected?this._api.getMessageManager().resetType("connection"):this._api.getMessageManager().setMessageIfHigherPriority({message:hv("error.reconnecting"),icon:"mdi:lan-disconnect",type:"connection",dotdotdot:!0})),!e)return;const t=this._hass;this._hass=e,this._api.getConditionStateManager().setState({hass:this._hass}),this._api.getStyleManager().applyTheme(),this._stateWatcher.setHASS(t,e)}}class oA{constructor(e){this._timer=new Zu,this._interacted=!1,this.reportInteraction=nu((()=>{this._reportInteraction()}),1e3),this._api=e}initialize(){this._setInteraction(!1)}hasInteraction(){return this._interacted}_setInteraction(e){this._interacted=e,Cu(this._api.getCardElementManager().getElement(),e,"interaction"),this._api.getConditionStateManager().setState({interaction:e})}_reportInteraction(){this._timer.stop(),this._setInteraction(!0);const e=this._api.getConfigManager().getConfig()?.view.interaction_seconds;e&&this._timer.start(e,(()=>{this._setInteraction(!1)}))}}class sA{constructor(e){this._state={},this._handleKeydown=e=>{const t={state:"down",ctrl:e.ctrlKey,alt:e.altKey,meta:e.metaKey,shift:e.shiftKey};qd(this._state[e.key],t)||(this._state[e.key]=t,this._processStateChange())},this._handleKeyup=e=>{e.key in this._state&&"down"===this._state[e.key].state&&(this._state[e.key].state="up",this._processStateChange())},this._handleBlur=()=>{Object.keys(this._state).length&&(this._state={},this._processStateChange())},this._api=e}initialize(){const e=this._api.getCardElementManager().getElement();e.addEventListener("keydown",this._handleKeydown),e.addEventListener("keyup",this._handleKeyup),e.addEventListener("blur",this._handleBlur)}uninitialize(){const e=this._api.getCardElementManager().getElement();e.removeEventListener("keydown",this._handleKeydown),e.removeEventListener("keyup",this._handleKeyup),e.removeEventListener("blur",this._handleBlur)}_processStateChange(){this._api.getConditionStateManager().setState({keys:this._state})}}function cA(e,t,n,r){e.dispatchEvent(new CustomEvent(`advanced-camera-card:${t}`,{bubbles:r?.bubbles??!0,composed:r?.composed??!0,cancelable:r?.cancelable??!1,detail:n}))}function lA(e,t){let n;return n=e instanceof Event?e.composedPath()[0]:e,n instanceof HTMLImageElement?{width:n.naturalWidth,height:n.naturalHeight,...t}:n instanceof HTMLVideoElement?{width:n.videoWidth,height:n.videoHeight,...t}:n instanceof HTMLCanvasElement?{width:n.width,height:n.height,mediaPlayerController:t?.mediaPlayerController,...t}:null}function dA(e,t,n){const r=lA(t,n);r&&uA(e,r)}function uA(e,t){cA(e,"media:loaded",t)}function hA(e){cA(e,"media:unloaded")}function mA(e){cA(e,"media:volumechange")}function pA(e){cA(e,"media:play")}function fA(e){cA(e,"media:pause")}class gA{constructor(e){this._current=null,this._lastKnown=null,this._api=e}initialize(){this.clear()}set(e){var t;(t=e).height>=50&&t.width>=50&&(pv(this._api.getConfigManager().getCardWideConfig(),"Advanced Camera Card media load: ",e),this._current=e,this._lastKnown=e,this._api.getConditionStateManager().setState({mediaLoadedInfo:e}),this._api.getStyleManager().setExpandedMode(),this._api.getCardElementManager().update())}get(){return this._current}getLastKnown(){return this._lastKnown}clear(){this._current=null,this._api.getConditionStateManager().setState({mediaLoadedInfo:null})}has(){return!!this._current}}const vA=(e,t)=>!!((e.attributes.supported_features??0)&t);class _A{constructor(e){this._mediaPlayers=[],this._api=e}getMediaPlayers(){return this._mediaPlayers}hasMediaPlayers(){return this._mediaPlayers.length>0}async initializeIfNecessary(e){e?.menu.buttons.media_player.enabled!==this._api.getConfigManager().getConfig()?.menu.buttons.media_player.enabled&&await this.initialize()}async initialize(){const e=this._api.getHASSManager().getHASS();if(!e||!this._api.getConfigManager().getConfig()?.menu.buttons.media_player.enabled)return!1;const t=Object.keys(e.states).filter((t=>{if(t.startsWith("media_player.")){const n=e.states[t];if(n&&"unavailable"!==n.state&&vA(n,131072))return!0}return!1}));let n=null;try{n=await this._api.getEntityRegistryManager().getEntities(e,t)}catch(e){gu(e)}return this._mediaPlayers=t.filter((e=>{const t=n?.get(e);return!t||!t.hidden_by})),!0}async stop(e){const t=this._api.getHASSManager().getHASS(),n=t?.states[e];if(!n)return;let r;if(vA(n,4096))r="media_stop";else{if(!vA(n,256))return;r="turn_off"}await t.callService("media_player",r,{entity_id:e})}async playLive(e,t){const n=this._api.getCameraManager().getStore().getCameraConfig(t);n&&("dashboard"===n.cast?.method?await this._playLiveDashboard(e,n):await this._playLiveStandard(e,t,n))}async _playLiveStandard(e,t,n){const r=this._api.getHASSManager().getHASS(),a=n?.camera_entity??null;if(!r||!a)return;const i=this._api.getCameraManager().getCameraMetadata(t)?.title??null,o=r.states[a]?.attributes?.entity_picture??null;await r.callService("media_player","play_media",{entity_id:e,media_content_id:`media-source://camera/${a}`,media_content_type:"application/vnd.apple.mpegurl",extra:{...i&&{title:i},...o&&{thumb:o}}})}async _playLiveDashboard(e,t){const n=this._api.getHASSManager().getHASS();if(!n)return;const r=t.cast?.dashboard;r?.dashboard_path&&r?.view_path?await n.callService("cast","show_lovelace_view",{entity_id:e,dashboard_path:r.dashboard_path,view_path:r.view_path}):this._api.getMessageManager().setMessageIfHigherPriority({type:"error",icon:"mdi:cast",message:hv("error.no_dashboard_or_view")})}async playMedia(e,t){const n=this._api.getHASSManager().getHASS();if(!n||!t)return;const r=t.getTitle(),a=t.getThumbnail();await n.callService("media_player","play_media",{entity_id:e,media_content_id:t.getContentID(),media_content_type:uh.isVideo(t)?"video":"image",extra:{...r&&{title:r},...a&&{thumb:a}}})}}const yA={info:10,error:20,connection:30,diagnostics:40};class bA{constructor(e){this._message=null,this._api=e}getMessage(){return this._message}hasMessage(){return!!this._message}hasErrorMessage(){return"error"===this._message?.type}reset(){const e=this.hasMessage();this._message=null,e&&this._api.getCardElementManager().update()}resetType(e){this._message?.type===e&&this.reset()}setErrorIfHigherPriority(e,t){e&&"object"==typeof e&&"message"in e&&(gu(e),this.setMessageIfHigherPriority({message:t?`${t}: ${e.message}`:String(e.message),type:"error",...e instanceof cu&&{context:e.context}}))}setMessageIfHigherPriority(e){const t=e=>e.type??"info",n=this._message?yA[t(this._message)]:0,r=yA[t(e)];return!(this._message&&r<n)&&(this._message=e,this._api.getMediaLoadedInfoManager().clear(),this._api.getCardElementManager().scrollReset(),this._api.getCardElementManager().update(),!0)}}class wA{constructor(e){this._timer=new Zu,this._state={connected:!1,muted:!0,forbidden:!1},this._desireMute=!0,this._api=e}getState(){return this._state}initialize(){this._setState()}shouldConnectOnInitialization(){return!!this._api.getConfigManager().getConfig()?.live.microphone?.always_connected&&this.isSupported()}isSupported(){return!!navigator.mediaDevices?.getUserMedia}async connect(){if(!this.isSupported())return!1;try{this._stream=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1})}catch(e){return gu(e),this._stream=null,this._setState(),!1}return this._setDesiredMuteOnStream(),this._setState(),!0}disconnect(){this._stream?.getTracks().forEach((e=>e.stop())),this._stream=void 0,this._setState()}getStream(){return this._stream??void 0}mute(){this._desireMute=!0,this._setDesiredMuteOnStream(),this._setState()}async unmute(){this.isSupported()&&(this._desireMute=!1,this.isConnected()||this.isForbidden()?this.isConnected()&&(this._setDesiredMuteOnStream(),this._setState()):await this.connect())}isConnected(){return!!this._stream}isForbidden(){return null===this._stream}isMuted(){return!this._stream||this._stream.getTracks().every((e=>!e.enabled))}_setDesiredMuteOnStream(){this._stream?.getTracks().forEach((e=>{e.enabled=!this._desireMute})),this._startDisconnectTimer()}_startDisconnectTimer(){const e=this._api.getConfigManager().getConfig()?.live.microphone;if(e?.always_connected)return;const t=e?.disconnect_seconds??0;t&&this._timer.start(t,(()=>{this.disconnect()}))}_setState(){this._state={stream:this._stream,connected:this.isConnected(),muted:this.isMuted(),forbidden:this.isForbidden()},this._api.getConditionStateManager().setState({microphone:this._state}),this._api.getCardElementManager().update()}}class xA{constructor(e){this._shouldRun=!0,this.requestExecution=()=>{this._shouldRun=!0,this._api.getCardElementManager().update()},this.executeIfNecessary=async()=>{this._shouldRun&&(this._shouldRun=!1,await this._executeViewRelated(this._calculateIntent()),await this._executeNonViewRelated(this._calculateIntent()))},this._isViewAction=e=>{switch(e.advanced_camera_card_action){case"clip":case"clips":case"diagnostics":case"image":case"live":case"recording":case"recordings":case"snapshot":case"snapshots":case"timeline":return!0}return!1},this._api=e}hasViewRelatedActionsToRun(){return!!this._calculateIntent().view&&this._shouldRun}async _executeViewRelated(e){e.view&&(e.view.default?await this._api.getViewManager().setViewDefaultWithNewQuery({params:{camera:e.view.camera},...e.view.substream&&{modifiers:[new gy(e.view.substream)]}}):await this._api.getViewManager().setViewByParametersWithNewQuery({params:{...e.view.view&&{view:e.view.view},...e.view.camera&&{camera:e.view.camera}},...e.view.substream&&{modifiers:[new gy(e.view.substream)]}}))}async _executeNonViewRelated(e){e.other&&await this._api.getActionsManager().executeActions({actions:e.other})}_calculateIntent(){const e={};for(const t of this._getActions())this._isViewAction(t)?((e.view??={}).view=t.advanced_camera_card_action,(e.view??={}).default=void 0):"default"===t.advanced_camera_card_action?((e.view??={}).default=!0,(e.view??={}).view=void 0):"camera_select"===t.advanced_camera_card_action?(e.view??={}).camera=t.camera:"live_substream_select"===t.advanced_camera_card_action?(e.view??={}).substream=t.camera:(e.other??=[]).push(t);return e}_getActions(){const e=new URLSearchParams(window.location.search),t=[],n=this._api.getConfigManager().getConfig()?.card_id,r=new RegExp(/^(advanced-camera-card|frigate-card)-action([.:](?<cardID>\w+))?[.:](?<action>\w+)/);for(const[a,i]of e.entries()){const e=a.match(r);if(!e||!e.groups)continue;const o=e.groups.cardID,s=e.groups.action;if(o&&o!==n)continue;let c=null;switch(s){case"camera_select":case"live_substream_select":i&&(c=Ru(s,i,{cardID:o}));break;case"camera_ui":case"default":case"download":case"expand":case"menu_toggle":c=zu(s,{cardID:o});break;case"clip":case"clips":case"diagnostics":case"image":case"live":case"recording":case"recordings":case"snapshot":case"snapshots":case"timeline":c=Pu(s,{cardID:o});break;default:console.warn(`Advanced Camera Card received unknown card action in query string: ${s}`)}c&&t.push(c)}return t}}class kA{constructor(e){this._items=[],this._dynamicItems=[],this._api=e}addDynamicStatusBarItem(e){this._dynamicItems.includes(e)||this._dynamicItems.push(e),this._api.getCardElementManager().update()}removeDynamicStatusBarItem(e){this._dynamicItems=this._dynamicItems.filter((t=>!qd(t,e))),this._api.getCardElementManager().update()}removeAllDynamicStatusBarItems(){this._dynamicItems=[],this._api.getCardElementManager().update()}calculateItems(e){const t=e?.view?e?.cameraManager?.getCameraMetadata(e?.view?.camera):null,n=t?.engineIcon??null,r=e?.view?.is("live")?t?.title??null:e?.view?.isViewerView()?e?.view.queryResults?.getSelectedResult()?.getTitle()??null:null,a=e?.mediaLoadedInfo?this._calculateResolution(e?.mediaLoadedInfo):null,i=e?.mediaLoadedInfo?.technology?.length?e?.mediaLoadedInfo.technology[0]:null;return[...r?[{type:"custom:advanced-camera-card-status-bar-string",string:r,expand:!0,sufficient:!0,...e?.statusConfig?.items.title}]:[],...a?[{type:"custom:advanced-camera-card-status-bar-string",string:a,...e?.statusConfig?.items.resolution}]:[],...i&&"webrtc"===i?[{type:"custom:advanced-camera-card-status-bar-icon",icon:"mdi:webrtc",...e?.statusConfig?.items.technology}]:i?[{type:"custom:advanced-camera-card-status-bar-string",string:i.toUpperCase(),...e?.statusConfig?.items.technology}]:[],...n?[{type:"custom:advanced-camera-card-status-bar-icon",icon:n,...e?.statusConfig?.items.engine}]:[],...this._dynamicItems]}_matchesWidthHeight(e,t,n){const r=.99*t,a=1.01*t,i=.99*n,o=1.01*n,s=(e,t,n)=>e>=t&&e<=n;return!!e&&(s(e.width,r,a)&&s(e.height,i,o)||s(e.height,r,a)&&s(e.width,i,o))}_calculateResolution(e){return this._matchesWidthHeight(e,1920,1080)?"1080p":this._matchesWidthHeight(e,1280,720)?"720p":this._matchesWidthHeight(e,640,480)?"VGA":this._matchesWidthHeight(e,3840,2160)?"4K":this._matchesWidthHeight(e,720,480)?"480p":this._matchesWidthHeight(e,720,576)?"576p":this._matchesWidthHeight(e,7680,4320)?"8K":`${e.width}x${e.height}`}}class MA{constructor(e){this._api=e}setExpandedMode(){const e=this._api.getCardElementManager().getElement(),t=this._api.getViewManager().getView(),n=this._api.getMediaLoadedInfoManager().getLastKnown();e.style.setProperty("--advanced-camera-card-expand-aspect-ratio",t?.isAnyMediaView()&&n?`${n.width} / ${n.height}`:"unset");const r=t?.isGrid();e.style.setProperty("--advanced-camera-card-expand-width",!r&&t?.isAnyMediaView()?"none":"var(--advanced-camera-card-expand-max-width)"),e.style.setProperty("--advanced-camera-card-expand-height",!r&&t?.isAnyMediaView()?"none":"var(--advanced-camera-card-expand-max-height)")}updateFromConfig(){this.applyTheme(),this._setMinMaxHeight(),this._setPerformance(),this._setDimmable()}applyTheme(){const e=this._api.getConfigManager().getConfig()?.view.theme;if(!e)return;const t=this._api.getCardElementManager().getElement(),n=this._getThemeNames(e);if(Cu(t,!!n,"themes",n?.join(" ")),e.overrides)for(const[n,r]of Object.entries(e.overrides))t.style.setProperty(n,r)}_getThemeNames(e){return e.themes.length?e.themes:fE.view.theme.themes}_setDimmable(){const e=this._api.getConfigManager().getConfig();Cu(this._api.getCardElementManager().getElement(),!!e?.view.dim,"dimmable")}_setMinMaxHeight(){const e=this._api.getConfigManager().getConfig();if(e){this._api.getCardElementManager().getElement().style.setProperty("--advanced-camera-card-height",e.dimensions.height)}}_setPerformance(){const e={box_shadow:{cssKey:"--advanced-camera-card-box-shadow-override",value:"none"},border_radius:{cssKey:"--advanced-camera-card-border-radius-override",value:"0px"}},t=this._api.getCardElementManager().getElement(),n=this._api.getConfigManager().getCardWideConfig()?.performance,r=n?.style??{};for(const n of Object.keys(r)){const a=e[n];Su(t,!r[n],a.cssKey,a.value)}}_isAspectRatioEnforced(e,t){const n=e.dimensions.aspect_ratio_mode;return!(this._api.getFullscreenManager().isInFullscreen()||this._api.getExpandManager().isExpanded()||"unconstrained"===n||"dynamic"===n&&(!t||t?.isAnyMediaView()||t?.is("timeline")||t?.is("diagnostics")))}getAspectRatioStyle(){const e=this._api.getConfigManager().getConfig(),t=this._api.getViewManager().getView();if(e){if(!this._isAspectRatioEnforced(e,t))return Iu();const n=e.dimensions.aspect_ratio_mode,r=this._api.getMediaLoadedInfoManager().getLastKnown();return Iu(r&&"dynamic"===n?{ratio:[r.width,r.height]}:{ratio:e.dimensions.aspect_ratio})}return Iu({defaultStatic:!0})}}const CA=e=>!!e&&by.includes(e);class SA{constructor(e){this._states=new Map,this._throttledTriggerAction=nu(this._triggerAction.bind(this),1e3,{trailing:!0}),this.handleInitialCameraTriggers=async()=>{const e=this._api.getHASSManager().getHASS();let t=!1,n=null;for(const[r,a]of this._api.getCameraManager().getStore().getCameras())for(const i of a.getConfig().triggers.entities)if(CA(e?.states[i]?.state)){t=!0;const e={cameraID:r,id:i,type:"new"};await this.handleCameraEvent(e,{skipAction:!0})&&(n??=e)}return n&&await this._throttledTriggerAction(n),t},this._api=e}getTriggeredCameraIDs(){const e=new Set;return this._states.forEach(((t,n)=>{this._isStateTriggered(t)&&e.add(n)})),e}isTriggered(){return[...this._states.values()].some((e=>this._isStateTriggered(e)))}getMostRecentlyTriggeredCameraID(){const e=Wd([...this._states.entries()].filter((([,e])=>this._isStateTriggered(e))),(([,e])=>e.lastTriggerTime.getTime()));return e?.[0]??null}async handleCameraEvent(e,t){const n=t?.skipAction??!1;if("end"===e.type){const t=this._states.get(e.cameraID);return t?.sources.delete(e.id),t?.sources.size||await this._startUntrigger(e.cameraID),!0}const r=this._api.getConfigManager().getConfig(),a=r?.view?.triggers,i=this._api.getViewManager().getView()?.camera;if(!a||!i)return!1;const o=this._api.getCameraManager().getStore().getAllDependentCameras(i);if(a.filter_selected_camera&&!o.has(e.cameraID))return!1;let s=this._states.get(e.cameraID);return s?s.lastTriggerTime=new Date:(s={lastTriggerTime:new Date,sources:new Set},this._states.set(e.cameraID,s)),s.sources.add(e.id),this._deleteUntriggerDelayTimer(e.cameraID),this._setConditionStateIfNecessary(),n||await this._throttledTriggerAction(e),!0}_hasAllowableInteractionStateForAction(){const e=this._api.getConfigManager().getConfig()?.view.triggers,t=this._api.getInteractionManager().hasInteraction();return!!e&&("all"===e.actions.interaction_mode||"active"===e.actions.interaction_mode&&t||"inactive"===e.actions.interaction_mode&&!t)}async _triggerAction(e){const t=this._api.getConfigManager().getConfig(),n=t?.view?.triggers.actions.trigger,r=t?.view?.default;("high"!==e.fidelity||e.snapshot||e.clip||"live"===n||"default"===n&&"live"===r)&&(this._hasAllowableInteractionStateForAction()&&("update"===n?await this._api.getViewManager().setViewByParametersWithNewQuery({queryExecutorOptions:{useCache:!1}}):"live"===n?await this._api.getViewManager().setViewByParametersWithNewQuery({params:{view:"live",camera:e.cameraID}}):"default"===n?await this._api.getViewManager().setViewDefaultWithNewQuery({params:{camera:e.cameraID}}):"high"===e.fidelity&&"media"===n&&await this._api.getViewManager().setViewByParametersWithNewQuery({params:{view:e.clip?"clip":"snapshot",camera:e.cameraID}})),this._api.getCardElementManager().update())}_setConditionStateIfNecessary(){const e=this.getTriggeredCameraIDs();this._api.getConditionStateManager().setState({triggered:e.size?e:void 0})}async _executeUntriggerAction(){const e=this._api.getConfigManager().getConfig()?.view?.triggers.actions.untrigger;return!e||"none"===e||(this._hasAllowableInteractionStateForAction()&&await this._api.getViewManager().setViewDefaultWithNewQuery(),!0)}async _untriggerAction(e){this._deleteUntriggerDelayTimer(e),await this._executeUntriggerAction(),this._states.delete(e),this._setConditionStateIfNecessary(),this._api.getCardElementManager().update()}async _startUntrigger(e){this._deleteUntriggerDelayTimer(e);const t=this._states.get(e);if(!t)return;const n=this._api.getConfigManager().getConfig(),r=n?.view?.triggers.untrigger_seconds??0;r>0?(t.untriggerDelayTimer=new Zu,t.untriggerDelayTimer.start(r,(async()=>{await this._untriggerAction(e)}))):await this._untriggerAction(e)}_deleteUntriggerDelayTimer(e){const t=this._states.get(e);t?.untriggerDelayTimer&&(t.untriggerDelayTimer.stop(),delete t.untriggerDelayTimer)}_isStateTriggered(e){return!(!e.sources.size&&!e.untriggerDelayTimer)}}async function EA(e,t,n){const r={type:"auth/sign_path",path:t,expires:n},a=await gv(e,du,r);return a?e.hassUrl(a.path):null}var AA;!function(e){e.Camera="camera",e.Folder="folder"}(AA||(AA={}));class TA{constructor(e){this._api=e}getCapabilities(e){const t=this._getMediaSource(e);return t===AA.Camera&&uh.isMedia(e)?this._api.getCameraManager().getMediaCapabilities(e):t===AA.Folder?this._api.getFoldersManager().getItemCapabilities(e):null}async download(e){try{await this._download(e)}catch(e){return this._api.getMessageManager().setErrorIfHigherPriority(e),!1}return!0}async favorite(e,t){const n=this._getMediaSource(e);return n===AA.Camera&&uh.isMedia(e)?await this._api.getCameraManager().favoriteMedia(e,t):
/* istanbul ignore else: this path cannot be reached -- @preserve */
n===AA.Folder?this._api.getFoldersManager().favorite(e,t):void 0}_getMediaSource(e){return uh.isMedia(e)&&e.getCameraID()?AA.Camera:uh.isFolder(e)||e.getFolder()?AA.Folder:null
/* istanbul ignore next: this path cannot be reached -- @preserve */}async _download(e){const t=this._api.getHASSManager().getHASS();if(!t)return;const n=this._getMediaSource(e),r=n===AA.Camera&&uh.isMedia(e)?await this._api.getCameraManager().getMediaDownloadPath(e):n===AA.Folder?await this._api.getFoldersManager().getDownloadPath(e):null;if(!r)throw new cu(hv("error.download_no_media"));let a=r.endpoint;if(r.sign){let e;try{e=await EA(t,r.endpoint)}catch(e){gu(e)}if(!e)throw new cu(hv("error.download_sign_failed"));a=e}ay(a,this._generateDownloadFilename(e))}_generateDownloadFilename(e){const t=e=>e.toLowerCase().replaceAll(/[^a-z0-9]/gi,"-");if(uh.isMedia(e)){const n=e.getCameraID(),r=e.getID(),a=e.getStartTime();return(n?t(n):"media")+(r?`_${t(r)}`:"")+(a?`_${ja(a,"yyyy-MM-dd-HH-mm-ss")}`:"")+"."+("clip"===e.getMediaType()?"mp4":"jpg")}
/* istanbul ignore else: this path cannot be reached -- @preserve */return uh.isFolder(e)?t(e.getTitle()??"media"):"download"
/* istanbul ignore next: this path cannot be reached -- @preserve */}}class $A{constructor(e){this._query=null,e&&(this._query=e)}getQuery(){return this._query}setQuery(e){return this._query=e,this}clone(){return Nl(this)}isEqual(e){return qd(this._query,e.getQuery())}}class IA extends $A{getQueryCameraIDs(){if(!this._query)return null;const e=new Set;return this._query.forEach((t=>[...t.cameraIDs].forEach((t=>e.add(t))))),e}setQueryCameraIDs(e){if(!this._query)return this;const t=[];return this._query.forEach((n=>t.push({...n,cameraIDs:pu(e)}))),this._query=su(t,qd),this}hasQueriesForCameraIDs(e){for(const t of e)if(!this._query?.some((e=>e.cameraIDs.has(t))))return!1;return!0}isSupersetOf(e){for(const t of e.getQuery()??[]){let e=!1;for(const n of this._query??[])if(qd({...n,end:null,start:null},{...t,end:null,start:null})&&(!n.start&&!t.start||n.start&&t.start&&n.start<=t.start)&&(!n.end&&!t.end||n.end&&t.end&&n.end>=t.end)){e=!0;break}if(!e)return!1}return!0}}class OA extends IA{convertToClipsQueries(){for(const e of this._query??[])delete e.hasSnapshot,e.hasClip=!0;return this}}class LA extends IA{}class DA extends $A{}class jA{static isEventQuery(e){return e instanceof OA}static isRecordingQuery(e){return e instanceof LA}static isMediaQuery(e){return this.isEventQuery(e)||this.isRecordingQuery(e)}static isFolderQuery(e){return e instanceof DA}static isClipsQuery(e){return this.isEventQuery(e)&&!!e?.getQuery()?.every((e=>e.hasClip))}static isSnapshotQuery(e){return this.isEventQuery(e)&&!!e?.getQuery()?.every((e=>e.hasSnapshot))}static getQueryType(e){return this.isEventQuery(e)?"event":this.isRecordingQuery(e)?"recording":this.isFolderQuery(e)?"folder":null}static getMediaType(e){return this.isClipsQuery(e)?"clips":this.isSnapshotQuery(e)?"snapshots":this.isRecordingQuery(e)?"recordings":null}}const zA=(e,t)=>Zd({},e,t);class PA{constructor(e){this.view=e.view,this.camera=e.camera,this.query=e.query??null,this.queryResults=e.queryResults??null,this.context=e.context??null,this.displayMode=e.displayMode??null}clone(){return new PA({view:this.view,camera:this.camera,query:this.query?.clone()??null,queryResults:this.queryResults?.clone()??null,context:this.context,displayMode:this.displayMode})}evolve(e){return new PA({view:void 0!==e.view?e.view:this.view,camera:void 0!==e.camera?e.camera:this.camera,query:void 0!==e.query?e.query:this.query?.clone()??null,queryResults:void 0!==e.queryResults?e.queryResults:this.queryResults?.clone()??null,context:void 0!==e.context?e.context:this.context,displayMode:void 0!==e.displayMode?e.displayMode:this.displayMode})}mergeInContext(e){return this.context=zA(this.context,e),this}removeContext(e){return this.context&&delete this.context[e],this}removeContextProperty(e,t){const n=this.context?.[e];return n&&delete n[t],this}is(e){return this.view==e}isMediaGalleryView(){return["clips","folders","snapshots","recordings"].includes(this.view)}isAnyMediaView(){return this.isViewerView()||this.is("live")||this.is("image")}isAnyFolderView(){return["folder","folders"].includes(this.view)}isViewerView(){return["folder","media","clip","snapshot","recording"].includes(this.view)}supportsMultipleDisplayModes(){return this.isViewerView()||this.is("live")}getDefaultMediaType(){return["clip","clips"].includes(this.view)?"clips":["snapshot","snapshots"].includes(this.view)?"snapshots":["recording","recordings"].includes(this.view)?"recordings":null}isGrid(){return"grid"===this.displayMode}}const RA=(e,t,n,r)=>{const a=n.getFolder();switch(e){case"diagnostics":case"image":case"media":return t.getStore().getCameraIDs();case"folder":case"folders":return a?t.getStore().getCameraIDs():new Set;case"live":case"clip":case"clips":case"snapshot":case"snapshots":case"recording":case"recordings":const n={inclusive:"live"!==e},i="clip"===e?"clips":"snapshot"===e?"snapshots":"recording"===e?"recordings":e;return r?t.getStore().getAllDependentCameras(r,i,n):t.getStore().getCameraIDsWithCapability(i,n);case"timeline":return a?t.getStore().getCameraIDs():t.getStore().getCameraIDsWithCapability({anyCapabilities:["clips","snapshots","recordings"]})}},NA=(e,t,n,r)=>!!RA(e,t,n,r)?.size,FA=(e,t)=>{t?.forEach((t=>t.modify(e)))};class BA extends cu{}class VA extends cu{}class HA{constructor(e){this._api=e}getViewDefault(e){const t=this._api.getConfigManager().getConfig();if(!t)return null;let n=null;const r=e?.params?.view??t.view.default;if(e?.params?.camera)n=e.params.camera;else{const a=[...RA(r,this._api.getCameraManager(),this._api.getFoldersManager())];if(a.length&&e?.baseView?.camera&&t.view.default_cycle_camera){const t=a.indexOf(e.baseView.camera);n=a[t+1>=a.length?0:t+1]}else n=a[0]??null}return this.getViewByParameters({params:{...e?.params,view:r,camera:n},baseView:e?.baseView})}getViewByParameters(e){const t=this._api.getConfigManager().getConfig();if(!t)return null;let n=e?.params?.camera??e?.baseView?.camera??null,r=e?.params?.view??e?.baseView?.view??t.view.default;const a=this._api.getCameraManager().getStore().getCameraIDs();if(!n||!a.has(n)){const e=RA(r,this._api.getCameraManager(),this._api.getFoldersManager());n=e?.keys().next().value??null}if(!n){const e=[...this._api.getCameraManager().getStore().getCameras()].reduce(((e,[t,n])=>{const r=n.getCapabilities()?.getRawCapabilities();return r&&(e[t]=r),e}),{});throw new BA(hv("error.no_supported_cameras"),{view:r,cameras_capabilities:e})}if(!NA(r,this._api.getCameraManager(),this._api.getFoldersManager(),n)){if(!e?.failSafe||!NA(Cr,this._api.getCameraManager(),this._api.getFoldersManager(),n)){const e=this._api.getCameraManager().getStore().getCamera(n)?.getCapabilities()?.getRawCapabilities();throw new VA(hv("error.no_supported_camera"),{view:r,camera:n,...e&&{camera_capabilities:e}})}r=Cr}const i=this._getDefaultDisplayModeForView(r,t),o=(r!==e?.baseView?.view?i:null)??e?.params?.displayMode??e?.baseView?.displayMode??i??"single",s={...e?.params,view:r,camera:n,displayMode:o},c=e?.baseView?e.baseView.evolve(s):new PA(s);return FA(c,e?.modifiers),c}_getDefaultDisplayModeForView(e,t){let n=null;switch(e){case"media":case"clip":case"recording":case"snapshot":n=t.media_viewer.display?.mode??null;break;case"live":n=t.live.display?.mode??null}return n}}class UA{constructor(e,t){this._key=e,this._property=t}modify(e){e.removeContextProperty(this._key,this._property)}}class qA{constructor(e){this._query=e?.query,this._queryResults=e?.queryResults}modify(e){void 0!==this._query&&(e.query=this._query),void 0!==this._queryResults&&(e.queryResults=this._queryResults)}}const WA=(e,t,n)=>{let r;for(const[a,i]of e.entries()){if(!uh.isMedia(i))continue;const e=i.getStartTime(),o=i.getUsableEndTime();if(i.includesTime(t)&&e&&o){const t=o.getTime()-e.getTime();(!r||n&&r.cameraID!==n&&i.getCameraID()===n||t>r.duration&&(!n||r.cameraID!==n||i.getCameraID()===n))&&(r={index:a,duration:t,cameraID:i.getCameraID()})}}return r?r.index:null};class ZA{constructor(e){this._results=e?.results??[],this._selectedIndex=this._getInitialSelectedIndex(e)}_getInitialSelectedIndex(e){return null!=e?.selectedIndex?e.selectedIndex:e?.results&&e.results.length?e?.selectApproach&&"last"!==e?.selectApproach?0:e.results.length-1:null}clone(){return new ZA({results:this._results,selectedIndex:this._selectedIndex})}getResults(){return this._results}getSelectedIndex(){return this._selectedIndex}getResultsCount(){return this.getResults().length}hasResults(){return 0!==this.getResultsCount()}getResult(e){return void 0===e?null:this._results[e]}getSelectedResult(){const e=this.getSelectedIndex();return null!==e?this.getResult(e):null}hasSelectedResult(){return null!==this.getSelectedResult()}resetSelectedResult(){this._selectedIndex=null}selectIndex(e){(null===e||e>=0&&e<this._results.length)&&(this._selectedIndex=e)}selectResultIfFound(e){for(const[t,n]of this._results.entries())if(e(n)){this.selectIndex(t);break}}selectBestResult(e){const t=e(this._results);null!==t&&this.selectIndex(t)}}class KA{constructor(e){this._resultsTimestamp=null,this._cameras=new Map,this._resultsTimestamp=new Date,this._main=new ZA(e),this._buildByCameraSlices(e?.selectApproach)}_buildByCameraSlices(e){const t=new Map;for(const e of this._main.getResults()){const n=uh.isMedia(e)?e.getCameraID():null;if(n){const r=t.get(n)??[];r.push(e),t.set(n,r)}}for(const[n,r]of t.entries())this._cameras.set(n,new ZA({results:r,selectApproach:e}))}clone(){const e=new KA;e._resultsTimestamp=this._resultsTimestamp,e._main=this._main.clone();for(const[t,n]of this._cameras.entries())e._cameras.set(t,n.clone());return e}isSupersetOf(e){const t=new Set(this._main.getResults()?.map((e=>e.getID()))),n=new Set(e._main.getResults()?.map((e=>e.getID())));return!(!t.size||!n.size||t.has(null)||n.has(null))&&((e,t)=>{for(const n of t)if(!e.has(n))return!1;return!0})(t,n)}getCameraIDs(){return new Set(this._cameras.keys())}getSlice(e){return e?this._cameras.get(e)??null:this._main}getResults(e){return this.getSlice(e)?.getResults()??null}getResultsCount(e){return this.getSlice(e)?.getResultsCount()??0}hasResults(e){return 0!==this.getSlice(e)?.getResultsCount()}getResult(e,t){return this.getSlice(t)?.getResult(e)??null}getSelectedIndex(e){return this.getSlice(e)?.getSelectedIndex()??null}getSelectedResult(e){return this.getSlice(e)?.getSelectedResult()??null}getMultipleSelectedResults(e){const t=[];if(!e||e.main){const e=this.getSelectedResult();e&&t.push(e)}const n=this._getCameraIDsFromCriteria(e);for(const e of n??[]){const n=this.getSelectedResult(e);n&&t.push(n)}return t}hasSelectedResult(e){return this.getSlice(e)?.hasSelectedResult()??!1}resetSelectedResult(e){return this.getSlice(e)?.resetSelectedResult(),this}getResultsTimestamp(){return this._resultsTimestamp}selectIndex(e,t){return this.getSlice(t)?.selectIndex(e),t||this.demoteMainSelectionToCameraSelection(),this}demoteMainSelectionToCameraSelection(){const e=this.getSelectedResult(),t=uh.isMedia(e)?e?.getCameraID():null;return e&&t&&(this.resetSelectedResult(t),this.selectResultIfFound((t=>t===e),{cameraID:t})),this}promoteCameraSelectionToMainSelection(e){const t=this.getSelectedResult(e);return this.resetSelectedResult(),this.selectResultIfFound((e=>e===t)),this}_getCameraIDsFromCriteria(e){return e?.allCameras?this.getCameraIDs():e?.cameraID?new Set([e.cameraID]):null}selectResultIfFound(e,t){t&&!t?.main||(this._main.selectResultIfFound(e),this.demoteMainSelectionToCameraSelection());const n=this._getCameraIDsFromCriteria(t);for(const t of n??[])this.getSlice(t)?.selectResultIfFound(e);return this}selectBestResult(e,t){t&&!t.main||(this._main.selectBestResult(e),this.demoteMainSelectionToCameraSelection());const n=this._getCameraIDsFromCriteria(t);for(const t of n??[])this.getSlice(t)?.selectBestResult(e);return this}}class QA{constructor(e){this._api=e}async executeDefaultEventQuery(e){const t=e?.eventsMediaType&&"all"!==e?.eventsMediaType?e.eventsMediaType:{anyCapabilities:["clips","snapshots"]},n=this._api.getCameraManager(),r=e?.cameraID?n.getStore().getAllDependentCameras(e.cameraID,t):n.getStore().getCameraIDsWithCapability(t);if(!r.size)return null;const a=n.generateDefaultEventQueries(r,{limit:this._getChunkLimit(),..."clips"===e?.eventsMediaType&&{hasClip:!0},..."snapshots"===e?.eventsMediaType&&{hasSnapshot:!0}});if(!a)return null;const i=new OA(a);return await this.executeMediaQuery(i,e?.executorOptions)}async executeDefaultRecordingQuery(e){const t=this._api.getCameraManager(),n=e?.cameraID?t.getStore().getAllDependentCameras(e.cameraID,"recordings"):t.getStore().getCameraIDsWithCapability("recordings");if(!n.size)return null;const r=t.generateDefaultRecordingQueries(n,{limit:this._getChunkLimit()});if(!r)return null;const a=new LA(r);return await this.executeMediaQuery(a,e?.executorOptions)}async executeQuery(e,t){
/* istanbul ignore else: this path cannot be reached -- @preserve */
return jA.isMediaQuery(e)?await this.executeMediaQuery(e,t):jA.isFolderQuery(e)?await this._executeFolderQuery(e,t):null
/* istanbul ignore next: this path cannot be reached -- @preserve */}async executeMediaQuery(e,t){const n=e.getQuery();if(!n)return null;const r=await this._api.getCameraManager().executeMediaQueries(n,{useCache:t?.useCache}),a=r?this._generateQueriesResults(r,t):null;return a?{query:e,queryResults:a}:null}_generateQueriesResults(e,t){const n=new KA({results:e});return t?.rejectResults?.(n)?null:(t?.selectResult?.id?n.selectBestResult((e=>e.findIndex((e=>e.getID()===t.selectResult?.id)))):t?.selectResult?.func?n.selectResultIfFound(t.selectResult.func):t?.selectResult?.time&&n.selectBestResult((e=>WA(e,t.selectResult?.time?.time,t.selectResult?.time?.favorCameraID))),n)}async executeFolderQuery(e){const t=this._api.getFoldersManager().getFolder(e?.folder);if(!t)return null;const n=this._api.getFoldersManager().generateDefaultFolderQuery(t);return n?this._executeFolderQuery(new DA(n),e):null}async _executeFolderQuery(e,t){const n=e.getQuery();if(!n)return null;const r=await this._api.getFoldersManager().expandFolder(n,this._api.getConditionStateManager().getState(),{useCache:t?.useCache}),a=r?this._generateQueriesResults(r,t):null;return a?{query:e,queryResults:a}:null}_getChunkLimit(){const e=this._api.getConfigManager().getCardWideConfig();return e?.performance?.features.media_chunk_size??50}}class YA{constructor(e,t){this._api=e,this._executor=t??new QA(e)}async getExistingQueryModifiers(e,t){return e.query?[new qA({queryResults:(await this._executor.executeQuery(e.query,t))?.queryResults})]:[]}async getNewQueryModifiers(e,t){return await this._executeNewQuery(e,{useCache:!1,...t})}async _executeNewQuery(e,t){const n=this._api.getConfigManager().getConfig();if(!n)return null;const r=e?.getDefaultMediaType(),a=[],i=async n=>{
/* istanbul ignore if: this path cannot be reached -- @preserve */
if(!n)return[];const r="recordings"===n?await this._executor.executeDefaultRecordingQuery({...!e.isGrid()&&{cameraID:e.camera},executorOptions:t}):"clips"===n||"snapshots"===n||"all"===n?await this._executor.executeDefaultEventQuery({...!e.isGrid()&&{cameraID:e.camera},eventsMediaType:n,executorOptions:t}):/* istanbul ignore next -- @preserve */
null;return r?[new qA(r)]:[]},o=async()=>{const e=await this._executor.executeFolderQuery(t);return e?[new qA(e)]:[]};switch(e.view){case"live":"none"!==n.live.controls.thumbnails.mode&&a.push(...await i("recordings"===n.live.controls.thumbnails.media_type?"recordings":n.live.controls.thumbnails.events_media_type));break;case"media":a.push(...await i("clips"));break;case"clip":case"clips":case"snapshot":case"snapshots":case"recording":case"recordings":a.push(...await i(r));break;case"folder":case"folders":a.push(...await o())}return a.push(...this._getTimelineWindowViewModifier(e)),a.push(...this._getSeekTimeModifier(t?.selectResult?.time?.time)),a}_getTimelineWindowViewModifier(e){if(e.is("live")){const e=new Date,t=this._api.getConfigManager().getConfig()?.live;
/* istanbul ignore if: this if branch cannot be reached as if the config is
               empty this function is never called -- @preserve */
return t?[new Q_({timeline:{window:{start:Oi(e,{seconds:t.controls.timeline.window_seconds}),end:e}}})]:[]}return[new UA("timeline","window")]}_getSeekTimeModifier(e){return e?[new Q_({mediaViewer:{seek:e}})]:[new UA("mediaViewer","seek")]}}class GA{constructor(e,t){this._view=null,this._epoch=this._createEpoch(),this._loadingIndex=1,this.setViewDefault=e=>this._setViewGeneric(this._viewFactory.getViewDefault.bind(this._viewFactory),e),this.setViewByParameters=e=>this._setViewGeneric(this._viewFactory.getViewByParameters.bind(this._viewFactory),e),this.setViewDefaultWithNewQuery=async e=>await this._setViewThenModifyAsync(this._viewFactory.getViewDefault.bind(this._viewFactory),this._viewQueryExecutor.getNewQueryModifiers.bind(this._viewQueryExecutor),e),this.setViewByParametersWithNewQuery=async e=>await this._setViewThenModifyAsync(this._viewFactory.getViewByParameters.bind(this._viewFactory),this._viewQueryExecutor.getNewQueryModifiers.bind(this._viewQueryExecutor),e),this.setViewByParametersWithExistingQuery=async e=>await this._setViewThenModifyAsync(this._viewFactory.getViewByParameters.bind(this._viewFactory),this._viewQueryExecutor.getExistingQueryModifiers.bind(this._viewQueryExecutor),e),this.initialize=async()=>(this._api.getQueryStringManager().hasViewRelatedActionsToRun()||this.setViewDefaultWithNewQuery({failSafe:!0}),!0),this._api=e,this._viewFactory=t?.viewFactory??new HA(e),this._viewQueryExecutor=t?.viewQueryExecutor??new YA(e)}getEpoch(){return this._epoch}_createEpoch(e){return{manager:this,...e&&{oldView:e}}}getView(){return this._view}hasView(){return!!this.getView()}reset(){this._view&&this._setView(null)}_setViewGeneric(e,t){if(!this._isAllowedToSetView())return;let n=null;try{n=e({baseView:this._view,...t})}catch(e){this._api.getMessageManager().setErrorIfHigherPriority(e)}n&&this._setView(n)}_markViewLoadingQuery(e,t){return e.mergeInContext({loading:{query:t}})}_markViewAsNotLoadingQuery(e){return e.removeContextProperty("loading","query")}_isAllowedToSetView(){return this._api.getInitializationManager().isInitialized(zk.CAMERAS)}async _setViewThenModifyAsync(e,t,n){if(!this._isAllowedToSetView())return;let r=null;try{r=e({baseView:this._view,...n,params:{query:null,queryResults:null,...n?.params}})}catch(e){this._api.getMessageManager().setErrorIfHigherPriority(e)}if(!r)return;if(this._view&&this._shouldAdoptQueryAndResults(r))return r.query=this._view.query,r.queryResults=this._view.queryResults,this._markViewAsNotLoadingQuery(r),void this._setView(r);const a=this._loadingIndex++;this._markViewLoadingQuery(r,a),this._setView(r);let i=null,o=null;try{i=await t(r,n?.queryExecutorOptions)}catch(e){o=e}if(this._view&&this.hasMajorMediaChange(this._view,r))return void(this._view.context?.loading?.query===a&&this._setView(this._markViewAsNotLoadingQuery(this._view.clone())));if(o)return void this._api.getMessageManager().setErrorIfHigherPriority(o);
/* istanbul ignore if: the if path cannot be reached as the view is set
        above -- @preserve */if(!this._view)return;const s=this._view.clone();this._view.context?.loading?.query===a&&this._markViewAsNotLoadingQuery(s),FA(s,i),this._setView(s)}_shouldAdoptQueryAndResults(e){const t=this._view?.isViewerView()&&e?.isMediaGalleryView(),n=e?.getDefaultMediaType(),r=jA.getMediaType(this._view?.query)===n;return!!t&&r}setViewWithMergedContext(e){if(this._view)return this._setView(this._view?.clone().mergeInContext(e))}hasMajorMediaChange(e,t){const n=t??this._view;return!!e!=!!n||e?.view!==n?.view||e?.camera!==n?.camera||"live"===n?.view&&e&&x_(e)!==x_(n)||"live"!==n?.view&&e?.queryResults!==n?.queryResults}_setView(e){const t=this._view;pv(this._api.getConfigManager().getCardWideConfig(),"Advanced Camera Card view change: ",e),this._view=e,this._epoch=this._createEpoch(t),this.hasMajorMediaChange(t)&&this._api.getMediaLoadedInfoManager().clear(),t?.view!==e?.view&&this._api.getCardElementManager().scrollReset(),this._api.getMessageManager().reset(),this._api.getStyleManager().setExpandedMode(),this._api.getConditionStateManager()?.setState({view:e?.view,camera:e?.camera,displayMode:e?.displayMode??void 0}),this._api.getCardElementManager().update()}}class XA{constructor(e,t,n,r){this._conditionStateManager=new Wv,this._deviceRegistryManager=new Yv(new Qv),this._entityRegistryManager=new e_(new Jv),this._resolvedMediaCache=new a_,this._actionsManager=new Ty(this,new uk),this._automationsManager=new Ik(this),this._cameraManager=new qv(this),this._cameraURLManager=new Ok(this),this._configManager=new SE(this),this._defaultManager=new EE(this),this._expandManager=new AE(this),this._foldersManager=new WE(this),this._fullscreenManager=new nA(this),this._hassManager=new iA(this),this._initializationManager=new Pk(this),this._interactionManager=new oA(this),this._keyboardStateManager=new sA(this),this._mediaLoadedInfoManager=new gA(this),this._mediaPlayerManager=new _A(this),this._messageManager=new bA(this),this._microphoneManager=new wA(this),this._queryStringManager=new xA(this),this._statusBarItemManager=new kA(this),this._styleManager=new MA(this),this._triggersManager=new SA(this),this._viewManager=new GA(this),this._viewItemManager=new TA(this),e.addController(this),this._cardElementManager=new Rk(this,e,t,n),this._effectsControllerAPICallback=r}getActionsManager(){return this._actionsManager}getAutomationsManager(){return this._automationsManager}getCameraManager(){return this._cameraManager}createCameraManager(){this._cameraManager=new qv(this)}getCameraURLManager(){return this._cameraURLManager}getCardElementManager(){return this._cardElementManager}getConditionStateManager(){return this._conditionStateManager}static async getConfigElement(){return await import("./editor-52165b32.js"),document.createElement("advanced-camera-card-editor")}getConfigManager(){return this._configManager}getDefaultManager(){return this._defaultManager}getDeviceRegistryManager(){return this._deviceRegistryManager}getEffectsControllerAPI(){return this._effectsControllerAPICallback()}getEntityRegistryManager(){return this._entityRegistryManager}getExpandManager(){return this._expandManager}getFoldersManager(){return this._foldersManager}getFullscreenManager(){return this._fullscreenManager}getHASSManager(){return this._hassManager}getInitializationManager(){return this._initializationManager}getInteractionManager(){return this._interactionManager}getKeyboardStateManager(){return this._keyboardStateManager}getMediaLoadedInfoManager(){return this._mediaLoadedInfoManager}getMediaPlayerManager(){return this._mediaPlayerManager}getMessageManager(){return this._messageManager}getMicrophoneManager(){return this._microphoneManager}createMicrophoneManager(){this._microphoneManager=new wA(this)}getQueryStringManager(){return this._queryStringManager}getResolvedMediaCache(){return this._resolvedMediaCache}getStatusBarItemManager(){return this._statusBarItemManager}static getStubConfig(e){return{cameras:[{camera_entity:e.find((e=>e.startsWith("camera.")))??"camera.demo"}]}}getStyleManager(){return this._styleManager}getTriggersManager(){return this._triggersManager}getViewManager(){return this._viewManager}getViewItemManager(){return this._viewItemManager}hostConnected(){this.getCardElementManager().elementConnected()}hostDisconnected(){this.getCardElementManager().elementDisconnected()}}function JA(e,t){return t?e?.states[t]?.attributes?.friendly_name??null:null}class eT{constructor(){this._dynamicMenuButtons=[]}addDynamicMenuButton(e){this._dynamicMenuButtons.includes(e)||this._dynamicMenuButtons.push(e)}removeDynamicMenuButton(e){this._dynamicMenuButtons=this._dynamicMenuButtons.filter((t=>t!=e))}calculateButtons(e,t,n,r,a){return[this._getIrisButton(t),this._getCamerasButton(t,n,a?.view),this._getSubstreamsButton(t,n,a?.view),this._getLiveButton(t,n,r,a?.view),this._getClipsButton(t,n,r,a?.view),this._getSnapshotsButton(t,n,r,a?.view),this._getRecordingsButton(t,n,r,a?.view),this._getImageButton(t,n,r,a?.view),this._getTimelineButton(t,n,r,a?.view),this._getDownloadButton(t,n,a?.view),this._getCameraUIButton(t,a?.showCameraUIButton),this._getMicrophoneButton(t,n,a?.view,a?.microphoneManager),this._getExpandButton(t,a?.inExpandedMode),this._getFullscreenButton(t,a?.fullscreenManager),this._getCastButton(e,t,n,a?.view,a?.mediaPlayerController),this._getPlayPauseButton(t,a?.currentMediaLoadedInfo),this._getMuteUnmuteButton(t,a?.currentMediaLoadedInfo),this._getScreenshotButton(t,a?.currentMediaLoadedInfo),this._getDisplayModeButton(t,n,r,a?.view),this._getPTZControlsButton(t,n,a?.view),this._getPTZHomeButton(t,n,a?.view),this._getFoldersButton(t,r,a?.view),...this._dynamicMenuButtons.map((e=>({style:this._getStyleFromActions(t,e,a),...e})))].filter(Eu)}_getIrisButton(e){return{icon:"iris",...e.menu.buttons.iris,type:"custom:advanced-camera-card-menu-icon",title:hv("config.menu.buttons.iris"),permanent:!0,tap_action:"hidden"===e.menu?.style?zu("menu_toggle"):zu("default"),hold_action:Pu("diagnostics")}}_getCamerasButton(e,t,n){const r=t.getStore().getCameraIDsWithCapability("menu");if(r.size>1){const a=Array.from(r,(e=>{const r=Ru("camera_select",e),a=t.getCameraMetadata(e);return{enabled:!0,icon:a?.icon.icon,entity:a?.icon.entity,state_color:!0,title:a?.title,selected:n?.camera===e,...r&&{tap_action:r}}}));return{icon:"mdi:video-switch",...e.menu.buttons.cameras,type:"custom:advanced-camera-card-menu-submenu",title:hv("config.menu.buttons.cameras"),items:a}}return null}_getSubstreamsButton(e,t,n){if(!n)return null;const r=t.getStore().getAllDependentCameras(n.camera,"substream");if(r.size&&n.is("live")){const a=[...r].filter((e=>e!==n.camera)),i=[n.camera,...a],o=x_(n);if(2===i.length)return{icon:"mdi:video-input-component",style:o!==n.camera?this._getEmphasizedStyle():{},title:hv("config.menu.buttons.substreams"),...e.menu.buttons.substreams,type:"custom:advanced-camera-card-menu-icon",tap_action:zu(k_(n)?"live_substream_off":"live_substream_on")};if(i.length>2){const r=Array.from(i,(e=>{const n=Ru("live_substream_select",e),r=t.getCameraMetadata(e)??void 0;return{enabled:!0,icon:r?.icon.icon,entity:r?.icon.entity,state_color:!0,title:r?.title,selected:o===e,...n&&{tap_action:n}}}));return{icon:"mdi:video-input-component",title:hv("config.menu.buttons.substreams"),style:o!==n.camera?this._getEmphasizedStyle():{},...e.menu.buttons.substreams,type:"custom:advanced-camera-card-menu-submenu",items:r}}}return null}_getLiveButton(e,t,n,r){return r&&NA("live",t,n,r.camera)?{icon:"mdi:cctv",...e.menu.buttons.live,type:"custom:advanced-camera-card-menu-icon",title:hv("config.view.views.live"),style:r.is("live")?this._getEmphasizedStyle():{},tap_action:Pu("live")}:null}_getClipsButton(e,t,n,r){return r&&NA("clips",t,n,r.camera)?{icon:"mdi:filmstrip",...e.menu.buttons.clips,type:"custom:advanced-camera-card-menu-icon",title:hv("config.view.views.clips"),style:r?.is("clips")?this._getEmphasizedStyle():{},tap_action:Pu("clips"),hold_action:Pu("clip")}:null}_getSnapshotsButton(e,t,n,r){return r&&NA("snapshots",t,n,r.camera)?{icon:"mdi:camera",...e.menu.buttons.snapshots,type:"custom:advanced-camera-card-menu-icon",title:hv("config.view.views.snapshots"),style:r?.is("snapshots")?this._getEmphasizedStyle():{},tap_action:Pu("snapshots"),hold_action:Pu("snapshot")}:null}_getRecordingsButton(e,t,n,r){return r&&NA("recordings",t,n,r.camera)?{icon:"mdi:album",...e.menu.buttons.recordings,type:"custom:advanced-camera-card-menu-icon",title:hv("config.view.views.recordings"),style:r.is("recordings")?this._getEmphasizedStyle():{},tap_action:Pu("recordings"),hold_action:Pu("recording")}:null}_getImageButton(e,t,n,r){return r&&NA("image",t,n,r.camera)?{icon:"mdi:image",...e.menu.buttons.image,type:"custom:advanced-camera-card-menu-icon",title:hv("config.view.views.image"),style:r?.is("image")?this._getEmphasizedStyle():{},tap_action:Pu("image")}:null}_getTimelineButton(e,t,n,r){return r&&NA("timeline",t,n,r.camera)?{icon:"mdi:chart-gantt",...e.menu.buttons.timeline,type:"custom:advanced-camera-card-menu-icon",title:hv("config.view.views.timeline"),style:r.is("timeline")?this._getEmphasizedStyle():{},tap_action:Pu("timeline")}:null}_getDownloadButton(e,t,n){const r=n?.queryResults?.getSelectedResult(),a=r&&uh.isMedia(r)?t?.getMediaCapabilities(r):null;return n?.isViewerView()&&a?.canDownload&&!Lk()?{icon:"mdi:download",...e.menu.buttons.download,type:"custom:advanced-camera-card-menu-icon",title:hv("config.menu.buttons.download"),tap_action:zu("download")}:null}_getCameraUIButton(e,t){return t?{icon:"mdi:web",...e.menu.buttons.camera_ui,type:"custom:advanced-camera-card-menu-icon",title:hv("config.menu.buttons.camera_ui"),tap_action:zu("camera_ui")}:null}_getMicrophoneButton(e,t,n,r){if(!n)return null;const a=t.getCameraCapabilities(x_(n));if(r&&a?.has("2-way-audio")){const t=r.isForbidden()||!r.isSupported(),n=r.isMuted(),a=e.menu.buttons.microphone.type;return{icon:t?"mdi:microphone-message-off":n?"mdi:microphone-off":"mdi:microphone",...e.menu.buttons.microphone,type:"custom:advanced-camera-card-menu-icon",title:hv("config.menu.buttons.microphone"),style:t||n?{}:this._getEmphasizedStyle(!0),...!t&&"momentary"===a&&{start_tap_action:zu("microphone_unmute"),end_tap_action:zu("microphone_mute")},...!t&&"toggle"===a&&{tap_action:zu(n?"microphone_unmute":"microphone_mute")}}}return null}_getExpandButton(e,t){return{icon:t?"mdi:arrow-collapse-all":"mdi:arrow-expand-all",...e.menu.buttons.expand,type:"custom:advanced-camera-card-menu-icon",title:hv("config.menu.buttons.expand"),tap_action:zu("expand"),style:t?this._getEmphasizedStyle():{}}}_getFullscreenButton(e,t){const n=t?.isInFullscreen();return t?.isSupported()?{icon:n?"mdi:fullscreen-exit":"mdi:fullscreen",...e.menu.buttons.fullscreen,type:"custom:advanced-camera-card-menu-icon",title:hv("config.menu.buttons.fullscreen"),tap_action:zu("fullscreen"),style:n?this._getEmphasizedStyle():{}}:null}_getCastButton(e,t,n,r,a){if(!r)return null;const i=n.getStore().getCameraConfig(r.camera);if(a?.hasMediaPlayers()&&(r.isViewerView()||r.is("live")&&i?.camera_entity)){const n=a.getMediaPlayers().map((t=>{const n=JA(e,t)||t,r=e.states[t],a=Nu(t,"play"),i=Nu(t,"stop"),o=!r||"unavailable"===r.state;return{enabled:!0,selected:!1,entity:t,state_color:!1,title:n,disabled:o,...!o&&a&&{tap_action:a},...!o&&i&&{hold_action:i}}}));return{icon:"mdi:cast",...t.menu.buttons.media_player,type:"custom:advanced-camera-card-menu-submenu",title:hv("config.menu.buttons.media_player"),items:n}}return null}_getPlayPauseButton(e,t){if(t&&t.mediaPlayerController&&t.capabilities?.supportsPause){const n=t.mediaPlayerController?.isPaused();return{icon:n?"mdi:play":"mdi:pause",...e.menu.buttons.play,type:"custom:advanced-camera-card-menu-icon",title:hv("config.menu.buttons.play"),tap_action:zu(n?"play":"pause")}}return null}_getMuteUnmuteButton(e,t){if(t&&t.mediaPlayerController&&t?.capabilities?.hasAudio){const n=t.mediaPlayerController?.isMuted();return{icon:n?"mdi:volume-off":"mdi:volume-high",...e.menu.buttons.mute,type:"custom:advanced-camera-card-menu-icon",title:hv("config.menu.buttons.mute"),tap_action:zu(n?"unmute":"mute")}}return null}_getScreenshotButton(e,t){return t&&t.mediaPlayerController?{icon:"mdi:monitor-screenshot",...e.menu.buttons.screenshot,type:"custom:advanced-camera-card-menu-icon",title:hv("config.menu.buttons.screenshot"),tap_action:zu("screenshot")}:null}_getDisplayModeButton(e,t,n,r){const a=r?RA(r.view,t,n):null;if(r?.supportsMultipleDisplayModes()&&a&&a.size>1){const t=r.isGrid();return{icon:t?"mdi:grid-off":"mdi:grid",...e.menu.buttons.display_mode,style:t?this._getEmphasizedStyle():{},type:"custom:advanced-camera-card-menu-icon",title:hv(t?"display_modes.single":"display_modes.grid"),tap_action:(i=t?"single":"grid",{action:"fire-dom-event",advanced_camera_card_action:"display_mode_select",display_mode:i,...o?.cardID&&{card_id:o.cardID}})}}var i,o;return null}_getPTZControlsButton(e,t,n){const r=n?.is("live")?e.live.controls.ptz:n?.isViewerView()?e.media_viewer.controls.ptz:null;if(!n||!r)return null;const a=R_(n,{cameraManager:t});if(a){const t=void 0!==n.context?.ptzControls?.enabled?n.context.ptzControls.enabled:"on"===r.mode||"auto"===r.mode&&"ptz"===a.type;return{icon:"mdi:pan",...e.menu.buttons.ptz_controls,style:t?this._getEmphasizedStyle():{},type:"custom:advanced-camera-card-menu-icon",title:hv("config.menu.buttons.ptz_controls"),tap_action:(i=!t,{action:"fire-dom-event",advanced_camera_card_action:"ptz_controls",enabled:i,...o?.cardID&&{card_id:o.cardID}})}}var i,o;return null}_getPTZHomeButton(e,t,n){const r=n?R_(n,{cameraManager:t}):null;return!r||(("digital"===r.type&&n?.context?.zoom?.[r.targetID]?.observed?.isDefault)??1)?null:{icon:"mdi:home",...e.menu.buttons.ptz_home,type:"custom:advanced-camera-card-menu-icon",title:hv("config.menu.buttons.ptz_home"),tap_action:Fu({targetID:r.targetID})}}_getFoldersButton(e,t,n){const r=[...t?.getFolders()??[]];if(!r?.length)return null;if(1===r.length){const t=jA.isFolderQuery(n?.query)&&n.query.getQuery()?.folder.id===r[0][0],a=r[0][1];return{icon:a.icon??"mdi:folder",...e.menu.buttons.folders,type:"custom:advanced-camera-card-menu-icon",title:a.title??hv("config.menu.buttons.folders"),style:t?this._getEmphasizedStyle():{},tap_action:Pu("folders"),hold_action:Pu("folder")}}const a=r.map((([e,t])=>{const r=jA.isFolderQuery(n?.query)&&n.query.getQuery()?.folder.id===e;return{enabled:!0,title:t.title??t.id,icon:t.icon??"mdi:folder",selected:r,style:r?this._getEmphasizedStyle():{},tap_action:Pu("folders",{folderID:e}),hold_action:Pu("folder",{folderID:e})}}));return{icon:"mdi:folder-multiple",...e.menu.buttons.folders,type:"custom:advanced-camera-card-menu-submenu",title:hv("config.menu.buttons.folders"),items:a,style:n?.isAnyFolderView()?this._getEmphasizedStyle():{}}}_getEmphasizedStyle(e){return e?{animation:"pulse 3s infinite",color:"var(--advanced-camera-card-menu-button-critical-color)"}:{color:"var(--advanced-camera-card-menu-button-active-color)"}}_getStyleFromActions(e,t,n){for(const r of[t.tap_action,t.double_tap_action,t.hold_action,t.start_tap_action,t.end_tap_action])for(const t of mu(r))if(qu(t)&&(Sr.some((e=>e===t.advanced_camera_card_action&&n?.view?.is(t.advanced_camera_card_action)))||"default"===t.advanced_camera_card_action&&n?.view?.is(e.view.default)||"fullscreen"===t.advanced_camera_card_action&&n?.fullscreenManager?.isInFullscreen()||"camera_select"===t.advanced_camera_card_action&&n?.view?.camera===t.camera))return this._getEmphasizedStyle();return{}}}const tT={fireworks:async()=>({default:(await import("./fireworks-02836a84.js")).AdvancedCameraCardEffectFireworks}),ghost:async()=>({default:(await import("./ghost-8008934b.js")).AdvancedCameraCardEffectGhost}),hearts:async()=>({default:(await import("./hearts-1e339f93.js")).AdvancedCameraCardEffectHearts}),shamrocks:async()=>({default:(await import("./shamrocks-5f2cdbc4.js")).AdvancedCameraCardEffectShamrocks}),snow:async()=>({default:(await import("./snow-56ce136f.js")).AdvancedCameraCardEffectSnow})};class nT{constructor(){this._importedModules=new Map,this._activeInstances=new Map,this._container=null}setContainer(e){this._container=e}async startEffect(e,t){if(!this._container||this._activeInstances.has(e))return;this._activeInstances.set(e,null);const n=await this._importEffectModule(e);if(!n||!this._activeInstances.has(e))return void this._activeInstances.delete(e);const r=new n.default;r.fadeIn=t?.fadeIn??!0,this._container.appendChild(r),this._activeInstances.set(e,r)}async stopEffect(e){if(!this._activeInstances.has(e))return;const t=this._activeInstances.get(e);this._activeInstances.delete(e),t&&(await t.startFadeOut(),t.remove())}async toggleEffect(e,t){this._activeInstances.has(e)?await this.stopEffect(e):await this.startEffect(e,t)}async _importEffectModule(e){const t=this._importedModules.get(e);if(t)return t;const n=await(tT[e]?.());return n?(this._importedModules.set(e,n),n):null}}let rT=class extends le{constructor(){super(...arguments),this._controller=new nT}async startEffect(e,t){await this._controller.startEffect(e,t)}stopEffect(e){this._controller.stopEffect(e)}async toggleEffect(e,t){await this._controller.toggleEffect(e,t)}updated(){this._controller.setContainer(this.renderRoot)}static get styles(){return o('/************\n * Managing z-indicies and stacking contexts is very challenging on the card,\n * due to the volume of different potentially overlapping surfaces. In\n * particular, care must be taken to not generate new stacking contexts\n * inadvertently which would make "z-index" weaving challenging (e.g. submenu\n * shown for PTZ presets, needs to render "over" the media drawer open/close\n * control).\n *************/\n:host {\n  display: block;\n  position: absolute;\n  inset: 0;\n  overflow: hidden;\n  pointer-events: none;\n  z-index: 7;\n}')}};rT=e([ue("advanced-camera-card-effects")],rT);const aT=(e,t)=>{t instanceof Error&&cA(e,"message",{message:t.message,type:"error",...t instanceof cu&&{context:t.context}})};class iT extends Event{constructor(e){super("advanced-camera-card:condition-state-manager:get",e)}}let oT=class extends le{constructor(){super(...arguments),this._root=null,this._templateRenderer=new uk,this._setNewRoot=()=>{if(!this.hass)return;const e=this._templateRenderer.renderRecursively(this.hass,this.elements,{conditionState:this.conditionStateManager?.getState()});if(!this._root||!qd(this._renderedElements,e))try{this._renderedElements=e,this._root=this._createRoot()}catch(e){return aT(this,e)}}}createRenderRoot(){return this}_createRoot(){const e=customElements.get("hui-conditional-element");if(!e||!this.hass)throw new Error(hv("error.could_not_render_elements"));const t=new e;t.hass=this.hass;const n={type:"conditional",conditions:[],elements:this._renderedElements};try{t.setConfig(n)}catch(e){throw gu(e,console.error),new cu(hv("error.invalid_elements_config"))}return t}connectedCallback(){super.connectedCallback(),this.conditionStateManager?.addListener(this._setNewRoot)}disconnectedCallback(){this.conditionStateManager?.removeListener(this._setNewRoot),super.disconnectedCallback()}willUpdate(e){e.has("conditionStateManager")&&this.conditionStateManager&&(e.get("conditionStateManager")?.removeEventListener(this._setNewRoot),this.conditionStateManager.addListener(this._setNewRoot)),(!this._root||e.has("elements")||e.has("conditionStateManager"))&&this._setNewRoot()}render(){return q`${this._root||""}`}updated(){this.hass&&this._root&&(this._root.hass=this.hass)}};e([pe({attribute:!1})],oT.prototype,"hass",void 0),e([pe({attribute:!1})],oT.prototype,"elements",void 0),e([pe({attribute:!1})],oT.prototype,"conditionStateManager",void 0),e([fe()],oT.prototype,"_root",void 0),oT=e([ue("advanced-camera-card-elements-core")],oT);let sT=class extends le{constructor(){super(...arguments),this._menuRemoveHandler=e=>{cA(this,"menu:remove",e.detail)},this._statusBarRemoveHandler=e=>{cA(this,"status-bar:remove",e.detail)},this._menuAddHandler=e=>{const t=e.composedPath();t.length&&this._addHandler(t[0],"advanced-camera-card:menu:remove",this._menuRemoveHandler)},this._statusBarAddHandler=e=>{const t=e.composedPath();t.length&&this._addHandler(t[0],"advanced-camera-card:status-bar:remove",this._statusBarRemoveHandler)}}_addHandler(e,t,n){e.removeEventListener(t,n),e.addEventListener(t,n)}connectedCallback(){super.connectedCallback(),this.addEventListener("advanced-camera-card:menu:add",this._menuAddHandler),this.addEventListener("advanced-camera-card:status-bar:add",this._statusBarAddHandler)}disconnectedCallback(){this.removeEventListener("advanced-camera-card:menu:add",this._menuAddHandler),this.addEventListener("advanced-camera-card:status-bar:add",this._statusBarAddHandler),super.disconnectedCallback()}render(){return q`<advanced-camera-card-elements-core
      .conditionStateManager=${this.conditionStateManager}
      .hass=${this.hass}
      .elements=${this.elements}
    >
    </advanced-camera-card-elements-core>`}static get styles(){return o(":host {\n  position: absolute;\n  inset: 0;\n  overflow: hidden;\n  pointer-events: none;\n}\n\n.element {\n  position: absolute;\n  transform: translate(-50%, -50%);\n  pointer-events: auto;\n}\n\nhui-error-card.element {\n  inset: 0px;\n  transform: unset;\n}")}};e([pe({attribute:!1})],sT.prototype,"hass",void 0),e([pe({attribute:!1})],sT.prototype,"elements",void 0),e([pe({attribute:!1})],sT.prototype,"conditionStateManager",void 0),sT=e([ue("advanced-camera-card-elements")],sT);let cT=class extends le{constructor(){super(...arguments),this._conditionManager=null}setConfig(e){this._config=e,this._createConditionManager()}createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),this.className="",this._createConditionManager()}disconnectedCallback(){this._conditionManager?.destroy(),super.disconnectedCallback()}_createConditionManager(){const e=function(e){const t=new iT({bubbles:!0,composed:!0});return e.dispatchEvent(t),t.conditionStateManager??null}(this);this._config&&e&&(this._conditionManager?.destroy(),this._conditionManager=new $k(this._config.conditions,e),this._conditionManager.addListener((()=>this.requestUpdate())))}render(){if(this._conditionManager?.getEvaluation()?.result)return q` <advanced-camera-card-elements-core
        .hass=${this.hass}
        .elements=${this._config?.elements}
      >
      </advanced-camera-card-elements-core>`}};e([pe({attribute:!1,hasChanged:()=>!0})],cT.prototype,"hass",void 0),cT=e([ue("advanced-camera-card-conditional")],cT);class lT extends le{constructor(e){super(),this._config=null,this._eventCategory=e}setConfig(e){this._config=e}connectedCallback(){super.connectedCallback(),this._config&&cA(this,`${this._eventCategory}:add`,this._config)}disconnectedCallback(){this._config&&cA(this,`${this._eventCategory}:remove`,this._config),super.disconnectedCallback()}}e([fe()],lT.prototype,"_config",void 0);class dT extends lT{constructor(){super("menu")}}let uT=class extends dT{};uT=e([ue("advanced-camera-card-menu-icon")],uT);let hT=class extends dT{};hT=e([ue("advanced-camera-card-menu-state-icon")],hT);let mT=class extends dT{};mT=e([ue("advanced-camera-card-menu-submenu")],mT);let pT=class extends dT{};pT=e([ue("advanced-camera-card-menu-submenu-select")],pT);class fT extends lT{constructor(){super("status-bar")}}let gT=class extends fT{};gT=e([ue("advanced-camera-card-status-bar-icon")],gT);let vT=class extends fT{};vT=e([ue("advanced-camera-card-status-bar-image")],vT);let _T=class extends fT{};_T=e([ue("advanced-camera-card-status-bar-string")],_T);var yT="Mon, 16 Feb 2026 03:28:01 GMT",bT="b1467dc",wT="Sun, 15 Feb 2026 19:26:56 -0800";const xT=br.object({domain:br.string(),version:br.string().optional()}).passthrough(),kT="hass_web_proxy",MT=(e,t)=>`/api/${kT}/v${t?.version??0}/${t?.websocket?"ws":""}?url=${encodeURIComponent(e)}`,CT=(e,t,n="media")=>(e=>e.config.components.includes(kT))(e)&&!!t[n];const ST=async(e,t,n,r)=>{if(!n||!CT(e,n,r?.context??"media"))return t;if(n.dynamic){const a=t.endpoint.split(/#/)[0];await async function(e,t,n){await e.callService(kT,"create_proxied_url",{url_pattern:t,...n&&{url_id:n.urlID,ssl_verification:n.sslVerification??n?.proxyConfig?.ssl_verification,ssl_ciphers:n.sslCiphers??n?.proxyConfig?.ssl_ciphers,open_limit:n.openLimit,ttl:n.ttl,allow_unauthenticated:n.allowUnauthenticated}})}(e,a,{proxyConfig:n,ttl:r?.ttl,openLimit:r?.openLimit??0})}return{endpoint:MT(t.endpoint,{websocket:r?.websocket}),sign:!0}},ET=async(e,t)=>{let n=null;if(t)try{n=await(async(e,t)=>await gv(e,xT,{type:"manifest/get",integration:t}))(t,e)}catch(e){}return{detected:!!n,...n?.version&&{version:n.version}}};class AT{getCustomIcon(e){switch(e?.icon){case"frigate":return'<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.876 22.744c.087.692.812 1.163.379 1.271-.433.109-2.327-3.436-2.76-4.952-.433-1.515-.677-3.22-.569-4.194.109-.974 5.71-2.49 5.71-2.895 0-.406-1.813-.028-1.894-.352-.081-.325 1.37-.13 1.759-.65.609-.811 1.38-.676 1.867-1.11.487-.432 1.082-2.083 1.19-2.786.109-.704-1.082-1.516-1.407-2.057-.324-.541.704-.92 3.194-1.948C14.835 2.042 22.735-.231 22.844.04c.108.27-2.598 1.407-4.492 2.11-1.894.704-4.98 2.057-4.98 2.436s.163.677.055 1.543c-.108.866-.121 1.27-.325 1.84-.135.379-.27 1.272 0 2.083.217.65.92 1.137 1.245 1.245.27.018 1.017.043 1.84 0 1.028-.054 2.49.054 2.49.325 0 .27-2.22.108-2.22.487s2.274-.054 2.22.325c-.054.378-1.895.216-2.869.216-.78 0-1.93-.036-2.435-.216l-.108.378c-.18 0-.558.109-.948.109-.487 0-.514.162-1.407.162s-.622-.054-1.434-.108c-.812-.054-3.842 2.273-4.384 3.03-.54.758-.216 2.598-.216 3.437 0 .754-.108 2.436 0 3.302z" fill="#000" style="fill:#fff;fill-opacity:1;stroke:none;stroke-width:.1;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"/></svg>';case"motioneye":return'<svg xml:space="preserve" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><defs><linearGradient id="d"><stop style="stop-color:#fff;stop-opacity:1" offset="0"/><stop style="stop-color:#585858;stop-opacity:1" offset="1"/></linearGradient><linearGradient id="b"><stop style="stop-color:#fff;stop-opacity:1" offset="0"/><stop style="stop-color:gray;stop-opacity:1" offset="1"/></linearGradient><linearGradient id="a"><stop style="stop-color:#4aa3e0;stop-opacity:1" offset="0"/><stop style="stop-color:#3096db;stop-opacity:1" offset="1"/></linearGradient><linearGradient id="c"><stop style="stop-color:#fff;stop-opacity:1" offset="0"/><stop style="stop-color:#585858;stop-opacity:1" offset="1"/></linearGradient><linearGradient xlink:href="#a" id="i" x1="26.602" y1="43.035" x2="26.602" y2="29.466" gradientUnits="userSpaceOnUse" gradientTransform="matrix(.96429 0 0 .96429 .914 .914)"/><linearGradient xlink:href="#b" id="e" gradientUnits="userSpaceOnUse" x1="26.446" y1="47.518" x2="26.446" y2="3.818"/><linearGradient xlink:href="#c" id="f" gradientUnits="userSpaceOnUse" x1="26.446" y1="47.518" x2="26.446" y2="3.818"/><linearGradient xlink:href="#d" id="g" gradientUnits="userSpaceOnUse" x1="26.446" y1="47.518" x2="26.446" y2="3.818"/><filter style="color-interpolation-filters:sRGB" id="h" x="-.02" y="-.14" width="1.041" height="1.208"><feFlood flood-opacity=".588" flood-color="#000" result="flood"/><feComposite in="flood" in2="SourceGraphic" operator="in" result="composite1"/><feGaussianBlur in="composite1" stdDeviation=".2" result="blur"/><feOffset dy="-.5" result="offset"/><feComposite in="SourceGraphic" in2="offset" result="composite2"/></filter></defs><path d="M8.935 40.515C5.365 36.547 3.2 31.358 3.2 25.6c0-12.371 10.029-22.4 22.4-22.4C37.971 3.2 48 13.229 48 25.6c0 5.737-2.161 10.952-5.708 14.915-1.696-.623-3.388-1.349-5.061-2.288a7.777 7.777 0 0 0 5.6-7.458c0-4.26-3.47-7.754-7.754-7.754-3.634 0-6.69 2.51-7.539 5.87h-3.876a7.784 7.784 0 0 0-7.539-5.87c-4.284 0-7.78 3.494-7.78 7.754 0 3.561 2.456 6.586 5.76 7.485-1.675.912-3.404 1.62-5.168 2.261zM25.6 26.462c.533-1.982 1.102-3.948 3.446-5.17L25.6 16.123l-3.446 5.17c2.053 1.454 3 3.237 3.446 5.169z" style="fill:url(#e);fill-opacity:1;stroke:none;filter:url(#filter4327)" transform="matrix(.49239 0 0 -.49239 -.605 24.564)"/><path d="M16.123 33.354a2.585 2.585 0 1 1 0-5.17 2.585 2.585 0 0 1 0 5.17z" style="fill:url(#f);fill-opacity:1;stroke:none;filter:url(#filter4327)" transform="matrix(.49239 0 0 -.49239 -.605 24.564)"/><path d="M35.077 33.354a2.585 2.585 0 1 1 0-5.17 2.585 2.585 0 0 1 0 5.17z" style="fill:url(#g);fill-opacity:1;stroke:none;filter:url(#filter4327)" transform="matrix(.49239 0 0 -.49239 -.605 24.564)"/><path style="fill:#d9d9d9;fill-opacity:1;stroke:none;filter:url(#h)" d="M25.6 47.2c-4.374 0-8.437-1.4-11.838-3.635 3.677-.394 7.305-1.343 11.423-3.375 4.166 2.123 8.434 3.01 12.28 3.453A21.465 21.465 0 0 1 25.6 47.2Z" transform="matrix(.51063 0 0 -.51063 -1.072 25.031)"/><path style="fill:url(#i);fill-opacity:1;stroke:none;filter:url(#filter4315)" d="M39.723 42.553c-4.329-.029-10.243-2.156-14.538-4.12-4.516 1.631-9.15 4.216-14.383 4.094a20.537 20.537 0 0 1-1.039-.052l-4.101-.337 3.894-1.299c5.342-1.74 10.04-2.85 14.175-10.026h3.738c4.12 7.134 9.06 8.325 14.15 10.026l3.842 1.247-3.998.389c-.545.052-1.121.082-1.74.078z" transform="matrix(.51063 0 0 -.51063 -1.072 25.031)"/></svg>';case"reolink":return'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path style="fill:#fff;stroke-width:.0393282;fill-opacity:1" d="M17.037 23.965a1.724 1.724 0 0 1-.711-.285c-.13-.086-1.782-1.727-4.108-4.078-2.14-2.164-3.998-4.02-4.128-4.123a3.023 3.023 0 0 0-1.591-.677c-.185-.021-1.42-.039-2.745-.039H1.345l.007-7.394V-.025h6.204c3.98 0 6.36.015 6.637.041a7.269 7.269 0 0 1 5.579 3.501c.686 1.131 1.02 2.278 1.067 3.655.063 1.885-.574 3.66-1.831 5.1a7.592 7.592 0 0 1-2.93 2.025l-.319.118-1.951-1.98-1.951-1.979 1.046-.023c.576-.013 1.1-.037 1.165-.053.596-.151.95-.314 1.322-.611a3.05 3.05 0 0 0 1.138-2.067c.168-1.506-.771-2.87-2.263-3.29l-.315-.089-4.152-.012-4.159-.013V10.437h1.419c1.627.001 1.779.02 2.31.28.31.152.39.22 1.082.915 3.027 3.043 12.194 12.309 12.205 12.337.016.044-5.365.04-5.618-.004z"/></svg>';case"tplink":return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><path d="M155.984.844c26.145-.723 49.96 7.646 69.387 25.312 18.885 18.09 27.164 43.113 27.879 68.781-.322 27.379-10.768 51.065-29.625 70.75-19.395 18.801-43.883 25.77-70.375 25.438L139 191v-54l23-1c12.007-1.863 20.944-5.548 28.5-15.375 6.847-10.193 8.793-21.53 7.074-33.621-2.071-9.773-6.297-17.937-14.387-24.004-10.393-6.498-22.397-7.925-34.343-5.309-11.197 3.759-19.53 10.246-25.13 20.711-2.785 6.001-3.81 11.368-4.03 17.993l-.116 3.284-.13 4.133L119 117H65c-.602-33.1 2.548-61.717 26-87C108.41 12.165 131.231 2.14 155.984.844Z" fill="#48C8D3"/><path d="M0 135h121v121c-50 0-50 0-55-4-2.145-3.149-2.244-5.74-2.227-9.503v-3.336l.032-3.583.008-3.682c.011-3.882.037-7.764.062-11.646.01-2.632.02-5.263.027-7.895.022-6.451.056-12.903.098-19.355l-1.927.02c-6.635.067-13.27.112-19.905.145-2.475.015-4.949.035-7.423.061-3.562.037-7.124.054-10.686.067-1.102.015-2.203.03-3.338.047-6.03.001-10.432-.347-15.721-3.34-13.497-14.207-5-36.984-5-55Z" fill="#49C8D3"/></svg>';case"iris":return'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g style="fill-opacity:.05;fill:#fff;stroke-width:1.0015748;stroke-dasharray:none"><path d="m13.73 15-3.9 6.76a9.984 9.984 0 0 0 8.49-2.01l-3.66-6.35M2.46 15c.92 2.92 3.15 5.26 5.99 6.34L12.12 15m-3.58-3-3.9-6.75A9.855 9.855 0 0 0 2 12c0 .68.07 1.35.2 2h7.49m12.11-4h-7.49l.29.5 4.76 8.25A9.93 9.93 0 0 0 22 12c0-.69-.07-1.36-.2-2m-.26-1c-.92-2.93-3.15-5.26-5.99-6.34L11.88 9M9.4 10.5l4.77-8.26C13.47 2.09 12.75 2 12 2c-2.4 0-4.6.84-6.32 2.25l3.66 6.35z" style="fill-opacity:1;fill:#fff;opacity:1;stroke-width:1.0015748;stroke-dasharray:none"/></g></svg>';default:return null}}createStateObjectForStateBadge(e,t){return e.states[t]?{...e.states[t],attributes:{...e.states[t].attributes,entity_picture:void 0,entity_picture_local:void 0}}:null}}let TT=class extends le{constructor(){super(...arguments),this.allowOverrideNonActiveStyles=!1,this._controller=new AT,this._svg=null}willUpdate(e){if(e.has("icon")){const e=this._controller.getCustomIcon(this.icon);if(e){const t=document.createElement("svg");t.innerHTML=e,this._svg=t}else this._svg=null}}render(){if(this._svg)return q`${this._svg}`;if(this.hass&&this.icon?.entity){const e=this._controller.createStateObjectForStateBadge(this.hass,this.icon.entity);if(e)return q`<state-badge
          .color="${this.style.color??void 0}"
          .stateColor=${this.icon.stateColor??!0}
          .hass=${this.hass}
          .stateObj=${e}
          .overrideIcon=${this.icon.icon}
        ></state-badge>`}return this.icon?.icon?q`<ha-icon icon="${this.icon.icon}"></ha-icon>`:this.icon?.fallback?q`<ha-icon icon="${this.icon.fallback}"></ha-icon>`:q``}static get styles(){return o(":host {\n  display: inline-block;\n  width: var(--mdc-icon-size, 24px);\n  height: var(--mdc-icon-size, 24px);\n  --ha-icon-display: block;\n}\n\nha-icon,\nstate-badge,\nsvg {\n  display: block;\n  height: 100%;\n  width: 100%;\n  box-sizing: border-box;\n}\n\nsvg path {\n  fill: currentColor !important;\n}\n\n:host([allow-override-non-active-styles]) state-badge {\n  --state-inactive-color: inherit;\n}")}};e([pe({attribute:!1})],TT.prototype,"hass",void 0),e([pe({attribute:!1})],TT.prototype,"icon",void 0),e([pe({attribute:"allow-override-non-active-styles",type:Boolean})],TT.prototype,"allowOverrideNonActiveStyles",void 0),TT=e([ue("advanced-camera-card-icon")],TT);const $T={"01-01":"fireworks","02-14":"hearts","03-17":"shamrocks","10-31":"ghost","12-25":"snow"};let IT=class extends le{constructor(){super(...arguments),this.loaded=!1,this._effectName=null}disconnectedCallback(){super.disconnectedCallback(),this._stopEffect()}updated(){const e=(()=>{const e=new Date,t=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return $T[`${t}-${n}`]??null})();e?this.loaded?this._stopEffect():this._startEffect(e):this._stopEffect()}_startEffect(e){this.effectsControllerAPI?.startEffect(e,{fadeIn:!1}),this._effectName=e}_stopEffect(){this._effectName&&this.effectsControllerAPI?.stopEffect(this._effectName),this._effectName=null}render(){return q`<advanced-camera-card-icon
        .icon=${{icon:"iris"}}
      ></advanced-camera-card-icon
      ><span>${"7.27.3"}</span>`}static get styles(){return o(":host {\n  width: intrinsic;\n  height: intrinsic;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  pointer-events: none;\n  background-color: var(--advanced-camera-card-loading-background-color);\n  color: var(--advanced-camera-card-loading-foreground-color);\n  transition: opacity 1.5s ease-in;\n  opacity: 1;\n}\n\n:host([loaded]) {\n  opacity: 0;\n}\n\nadvanced-camera-card-icon {\n  margin-bottom: 20px;\n  height: 25%;\n  width: auto;\n  animation: rotate 8s linear infinite;\n}\n\n@keyframes rotate {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\nspan {\n  font-size: x-large;\n}")}};e([pe({attribute:!1})],IT.prototype,"effectsControllerAPI",void 0),e([pe({type:Boolean,reflect:!0})],IT.prototype,"loaded",void 0),IT=e([ue("advanced-camera-card-loading")],IT);const OT=(e,t)=>{cA(e,"action:execution-request",t)};class LT{constructor(e){this._config=null,this._buttons=[],this._expanded=!1,this._host=e}setMenuConfig(e){this._config=e,this._host.style.setProperty("--advanced-camera-card-menu-button-size",`${e.button_size}px`),this._host.setAttribute("data-style",e.style),this._host.setAttribute("data-position",e.position),this._host.setAttribute("data-alignment",e.alignment),this._sortButtons(),this._host.requestUpdate()}getMenuConfig(){return this._config}isExpanded(){return this._expanded}setButtons(e){this._buttons=e,this._sortButtons(),this._host.requestUpdate()}getButtons(e){const t=e=>!this._isHidingMenu()||this._expanded||!!e.permanent;return this._buttons.filter((n=>(e=>!1!==e.enabled)(n)&&(t=>t.alignment===e||"matching"===e&&!t.alignment)(n)&&t(n)))}setExpanded(e){this._expanded=e,Cu(this._host,e,"expanded"),this._host.requestUpdate()}toggleExpanded(){this.setExpanded(!this._expanded)}handleAction(e,t){e.stopPropagation();const n=t??e.detail.item??null;if(!n)return;const r=e.detail.action,a=Hu(r,n);if(!a)return;const i=mu(a);let o=!1;const s=i.filter((e=>Eu(e)&&!this._isMenuToggleAction(e)));if(s.length!=i.length&&(o=!0),s.length&&OT(this._host,{actions:i,config:n}),this._isHidingMenu())if(o)this.setExpanded(!this._expanded);else{const e=Hu("hold",n),t=Hu("double_tap",n),a=Hu("tap",n),i=Hu("end_tap",n);"end_tap"!==r&&("start_tap"!==r||e||t||a||i)&&("end_tap"===r||i)||this.setExpanded(!1)}}_sortButtons(){this._buttons=Gd(this._buttons,(e=>(e.priority??0)+(this._isHidingMenu()&&e.permanent?100:0)),["desc"])}_isHidingMenu(){return"hidden"===this._config?.style}_isMenuToggleAction(e){return"fire-dom-event"===e.action&&"menu_toggle"===e.advanced_camera_card_action}}const DT=(e,t,n)=>{const r=e.states[t],a=n?.state?n.state:r?r.state:null;if(!a)return null;const i=_y(t),o=r?r.attributes:null;return n?.entity?.translation_key&&e.localize(`component.${n.entity.platform}.entity.${i}.${n.entity.translation_key}.state.${a}`)||o?.device_class&&e.localize(`component.${i}.state.${o.device_class}.${a}`)||e.localize(`component.${i}.state._.${a}`)||a};function jT(e,t,n,r){return!!rA(e,t,n,{...r,firstOnly:!0}).length}var zT="ha-icon-button {\n  color: var(--advanced-camera-card-button-color);\n  background-color: var(--advanced-camera-card-button-background);\n  border-radius: var(--advanced-camera-card-button-border-radius);\n  padding: 0px;\n  margin: 3px;\n  --ha-icon-display: block;\n  /* Buttons can always be clicked */\n  pointer-events: auto;\n}\n\nha-icon-button {\n  --state-inactive-color: var(--advanced-camera-card-button-color);\n  color: var(--advanced-camera-card-menu-button-inactive-color);\n  background-color: var(--advanced-camera-card-menu-button-background);\n}";let PT=class extends le{_renderItem(e){if(!this.hass)return;const t=e.title??JA(this.hass,e.entity),n=He(e.style||{}),r=!1===e.enabled;return q`
      <ha-dropdown-item
        class=${e.selected?"selected":""}
        ?disabled=${r}
        aria-label="${t??""}"
        @action=${t=>{t.detail.item=e}}
        .actionHandler=${r?void 0:Yu({allowPropagation:!0,hasHold:Uu(e.hold_action),hasDoubleClick:Uu(e.double_tap_action)})}
      >
        <span style="${n}">${t??""}</span>
        ${e.subtitle?q`<span slot="details" style="${n}">${e.subtitle}</span>`:""}
        <advanced-camera-card-icon
          slot="icon"
          .hass=${this.hass}
          .icon=${{icon:e.icon,entity:e.entity}}
          style="${n}"
        ></advanced-camera-card-icon>
      </ha-dropdown-item>
    `}render(){return q`
      <ha-dropdown @click=${e=>Wu(e)}>
        <slot slot="trigger"></slot>
        ${this.items?.map(this._renderItem.bind(this))}
      </ha-dropdown>
    `}static get styles(){return o("ha-icon-button {\n  color: var(--advanced-camera-card-button-color);\n  background-color: var(--advanced-camera-card-button-background);\n  border-radius: var(--advanced-camera-card-button-border-radius);\n  padding: 0px;\n  margin: 3px;\n  --ha-icon-display: block;\n  /* Buttons can always be clicked */\n  pointer-events: auto;\n}\n\nha-icon-button {\n  --state-inactive-color: var(--advanced-camera-card-button-color);\n  color: var(--advanced-camera-card-menu-button-inactive-color);\n  background-color: var(--advanced-camera-card-menu-button-background);\n}\n\n:host {\n  pointer-events: auto;\n}\n\nha-dropdown-item {\n  color: var(--advanced-camera-card-submenu-color);\n  background-color: var(--advanced-camera-card-submenu-background-color);\n}\n\nha-dropdown-item:hover {\n  color: var(--advanced-camera-card-submenu-hover-color);\n  background-color: var(--advanced-camera-card-submenu-hover-background-color);\n}\n\nha-dropdown-item.selected:not(:hover) {\n  font-weight: var(--ha-font-weight-medium);\n  color: var(--advanced-camera-card-submenu-selected-color);\n  background-color: var(--advanced-camera-card-submenu-selected-background-color);\n}")}};e([pe({attribute:!1})],PT.prototype,"hass",void 0),e([pe({attribute:!1})],PT.prototype,"items",void 0),PT=e([ue("advanced-camera-card-submenu")],PT);let RT=class extends le{shouldUpdate(e){const t=e.get("hass");return!e.has("hass")||!t||!this.submenuSelect||jT(this.hass,t,[this.submenuSelect.entity])}async _refreshOptionTitles(){if(!this.hass||!this.submenuSelect)return;const e=this.submenuSelect.entity,t=this.hass.states[e],n=t?.attributes?.options,r=await(this.entityRegistryManager?.getEntity(this.hass,e))??null,a={};for(const t of n){const n=DT(this.hass,e,{...r&&{entity:r},state:t});n&&(a[t]=n)}this._optionTitles=a}willUpdate(){if(!this.submenuSelect||!this.hass)return;this._optionTitles||this._refreshOptionTitles();const e=this.submenuSelect.entity,t=_y(e),n=this.hass.states[e],r=n?.attributes?.options;if(!n||!r)return;const a=[];for(const i of r){const r=this._optionTitles?.[i]??i;a.push({state_color:!0,selected:n.state===i,enabled:!0,title:r||i,...("select"===t||"input_select"===t)&&{tap_action:Vu(t,e,i)},...this.submenuSelect.options&&this.submenuSelect.options[i]})}this._generatedSubmenuItems=a,this._generatedIcon={icon:this.submenuSelect.icon,entity:e,fallback:"mdi:format-list-bulleted",stateColor:this.submenuSelect.state_color}}render(){if(!this._generatedSubmenuItems||!this._generatedIcon||!this.submenuSelect)return q``;const e=JA(this.hass,this.submenuSelect.entity),t=He(this.submenuSelect.style||{});return q` <advanced-camera-card-submenu
      .hass=${this.hass}
      .items=${this._generatedSubmenuItems}
    >
      <ha-icon-button style="${t}" .label=${e||""}>
        <advanced-camera-card-icon
          ?allow-override-non-active-styles=${!0}
          style="${t}"
          title=${e||""}
          .hass=${this.hass}
          .icon=${this._generatedIcon}
        ></advanced-camera-card-icon>
      </ha-icon-button>
    </advanced-camera-card-submenu>`}static get styles(){return o(zT)}};e([pe({attribute:!1})],RT.prototype,"hass",void 0),e([pe({attribute:!1})],RT.prototype,"submenuSelect",void 0),e([pe({attribute:!1})],RT.prototype,"entityRegistryManager",void 0),e([fe()],RT.prototype,"_optionTitles",void 0),RT=e([ue("advanced-camera-card-submenu-select-button")],RT);let NT=class extends le{render(){if(!this.submenu)return q``;const e=He(this.submenu.style||{});return q` <advanced-camera-card-submenu
      .hass=${this.hass}
      .items=${this.submenu?.items}
    >
      <ha-icon-button style="${e}" .label=${this.submenu.title||""}>
        <advanced-camera-card-icon
          ?allow-override-non-active-styles=${!0}
          style="${e}"
          title=${this.submenu.title||""}
          .hass=${this.hass}
          .icon=${{icon:this.submenu.icon}}
          .actionHandler=${Yu({allowPropagation:!0,hasHold:Uu(this.submenu.hold_action),hasDoubleClick:Uu(this.submenu.double_tap_action)})}
        ></advanced-camera-card-icon>
      </ha-icon-button>
    </advanced-camera-card-submenu>`}static get styles(){return o(zT)}};e([pe({attribute:!1})],NT.prototype,"hass",void 0),e([pe({attribute:!1})],NT.prototype,"submenu",void 0),NT=e([ue("advanced-camera-card-submenu-button")],NT);let FT=class extends le{constructor(){super(...arguments),this._controller=new LT(this)}set menuConfig(e){this._controller.setMenuConfig(e)}set buttons(e){this._controller.setButtons(e)}set expanded(e){this._controller.setExpanded(e)}toggleMenu(){this._controller.toggleExpanded()}_renderButton(e){if(!this.hass)return;if("custom:advanced-camera-card-menu-submenu"===e.type)return q` <advanced-camera-card-submenu-button
        .hass=${this.hass}
        .submenu=${e}
        @action=${e=>this._controller.handleAction(e)}
      >
      </advanced-camera-card-submenu-button>`;if("custom:advanced-camera-card-menu-submenu-select"===e.type)return q` <advanced-camera-card-submenu-select-button
        .hass=${this.hass}
        .submenuSelect=${e}
        .entityRegistryManager=${this.entityRegistryManager}
        @action=${e=>this._controller.handleAction(e)}
      >
      </advanced-camera-card-submenu-select-button>`;const t=this.hass&&"custom:advanced-camera-card-menu-state-icon"===e.type&&!e.title?JA(this.hass,e.entity):e.title;return q` <ha-icon-button
      .actionHandler=${Yu({hasHold:Uu(e.hold_action),hasDoubleClick:Uu(e.double_tap_action)})}
      .label=${t??""}
      @action=${t=>this._controller.handleAction(t,e)}
    >
      <advanced-camera-card-icon
        ?allow-override-non-active-styles=${!0}
        style="${He(e.style||{})}"
        .hass=${this.hass}
        .icon=${{icon:e.icon,entity:e.entity,stateColor:e.state_color,fallback:"mdi:gesture-tap-button"}}
      ></advanced-camera-card-icon>
    </ha-icon-button>`}_renderPerInstanceStyle(){const e=this._controller.getMenuConfig();if(!e)return;const t=e.position,n=e.style,r=e.alignment,a=e=>`\n        var(--advanced-camera-card-menu-override-${e},\n        var(--advanced-camera-card-menu-position-${t}-alignment-${r}-style-${n}-${e},\n        var(--advanced-camera-card-menu-position-${t}-alignment-${r}-${e},\n        var(--advanced-camera-card-menu-position-${t}-${e},\n        var(--advanced-camera-card-menu-style-${n}-${e},\n        var(--advanced-camera-card-menu-alignment-${r}-${e},\n        var(--advanced-camera-card-menu-${e})))))))`;return q`<style>
      :host(${`[data-position='${t}'][data-style='${n}'][data-alignment='${r}']`+("hidden"===n?"[expanded]":"")}) {
        background: ${a("background")};

        ha-icon-button {
          color: ${a("button-inactive-color")};
          background: ${a("button-background")};
        }
      }
    </style>`}render(){const e=this._controller.getMenuConfig(),t=e?.style;if(!e||"none"===t)return;const n=this._controller.getButtons("matching"),r=this._controller.getButtons("opposing");return q` ${this._renderPerInstanceStyle()}
      <div
        class="matching"
        style="${He({flex:String(n.length)})}"
      >
        ${n.map((e=>this._renderButton(e)))}
      </div>
      <div
        class="opposing"
        style="${He({flex:String(r.length)})}"
      >
        ${r.map((e=>this._renderButton(e)))}
      </div>`}static get styles(){return o('ha-icon-button {\n  color: var(--advanced-camera-card-button-color);\n  background-color: var(--advanced-camera-card-button-background);\n  border-radius: var(--advanced-camera-card-button-border-radius);\n  padding: 0px;\n  margin: 3px;\n  --ha-icon-display: block;\n  /* Buttons can always be clicked */\n  pointer-events: auto;\n}\n\nha-icon-button {\n  --state-inactive-color: var(--advanced-camera-card-button-color);\n  color: var(--advanced-camera-card-menu-button-inactive-color);\n  background-color: var(--advanced-camera-card-menu-button-background);\n}\n\n:host {\n  --advanced-camera-card-menu-button-size: 40px;\n  --mdc-icon-button-size: var(--advanced-camera-card-menu-button-size);\n  --mdc-icon-size: calc(var(--mdc-icon-button-size) / 2);\n  pointer-events: auto;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n}\n\n:host([data-style=outside]) {\n  width: 100%;\n}\n\n/*******************************************************\n * Non-hover styles should not interact with the pointer\n *******************************************************/\n:host(:not([data-style*=hover])) {\n  pointer-events: none;\n}\n\n/***********************************\n * Aligned divs: matching & opposing\n ***********************************/\ndiv.matching,\ndiv.opposing {\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: row;\n  align-items: flex-start;\n  min-width: 0px;\n  min-height: 0px;\n}\n\ndiv.matching {\n  justify-content: flex-start;\n}\n\ndiv.opposing {\n  justify-content: flex-end;\n}\n\n/********************************************************\n * Hack: Ensure host & div expand for column flex layouts\n ********************************************************/\n:host(:not([data-style=outside])[data-position=left]) {\n  writing-mode: vertical-lr;\n}\n\n:host(:not([data-style=outside])[data-position=right]) {\n  writing-mode: vertical-rl;\n}\n\n:host(:not([data-style=outside])[data-style=overlay][data-position=left]) div > *,\n:host(:not([data-style=outside])[data-style=overlay][data-position=right]) div > *,\n:host(:not([data-style=outside])[data-style*=hover][data-position=left]) div > *,\n:host(:not([data-style=outside])[data-style*=hover][data-position=right]) div > *,\n:host(:not([data-style=outside])[data-style=hidden][data-position=left]) div > *,\n:host(:not([data-style=outside])[data-style=hidden][data-position=right]) div > * {\n  writing-mode: horizontal-tb;\n}\n\n/**********************\n * "Reverse" alignments\n **********************/\n:host(:not([data-style=outside])[data-position=left][data-alignment=bottom]),\n:host(:not([data-style=outside])[data-position=right][data-alignment=bottom]),\n:host([data-position=top][data-alignment=right]),\n:host([data-position=bottom][data-alignment=right]),\n:host(:not([data-style=outside])[data-position=left][data-alignment=bottom]) div,\n:host(:not([data-style=outside])[data-position=right][data-alignment=bottom]) div,\n:host([data-position=top][data-alignment=right]) div,\n:host([data-position=bottom][data-alignment=right]) div {\n  flex-direction: row-reverse;\n}\n\n/****************************\n * Wrap upwards on the bottom\n ****************************/\n:host(:not([data-style=outside])[data-position=bottom]) div {\n  flex-wrap: wrap-reverse;\n}\n\n/********************************************\n * Positioning for absolute based menu styles\n ********************************************/\n:host([data-style=overlay][data-position=top]),\n:host([data-style=overlay][data-position=bottom]),\n:host([data-style*=hover][data-position=top]),\n:host([data-style*=hover][data-position=bottom]),\n:host([data-style=hidden][data-position=top]),\n:host([data-style=hidden][data-position=bottom]) {\n  width: 100%;\n  height: auto;\n}\n\n:host([data-style=overlay][data-position=left]),\n:host([data-style=overlay][data-position=right]),\n:host([data-style*=hover][data-position=left]),\n:host([data-style*=hover][data-position=right]),\n:host([data-style=hidden][data-position=left]),\n:host([data-style=hidden][data-position=right]) {\n  width: auto;\n  height: 100%;\n}\n\n/************\n * Menu theme\n ************/\n:host([data-style=hidden]:not([expanded])) ha-icon-button {\n  background: var(--advanced-camera-card-menu-background);\n}')}};
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
function BT(e){return null==e}e([pe({attribute:!1})],FT.prototype,"entityRegistryManager",void 0),e([pe({attribute:!1})],FT.prototype,"hass",void 0),FT=e([ue("advanced-camera-card-menu")],FT);var VT=function(e,t){var n,r="";for(n=0;n<t;n+=1)r+=e;return r},HT={isNothing:BT,isObject:function(e){return"object"==typeof e&&null!==e},toArray:function(e){return Array.isArray(e)?e:BT(e)?[]:[e]},repeat:VT,isNegativeZero:function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},extend:function(e,t){var n,r,a,i;if(t)for(n=0,r=(i=Object.keys(t)).length;n<r;n+=1)e[a=i[n]]=t[a];return e}};function UT(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+="\n\n"+e.mark.snippet),r+" "+n):r}function qT(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=UT(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}qT.prototype=Object.create(Error.prototype),qT.prototype.constructor=qT,qT.prototype.toString=function(e){return this.name+": "+UT(this,e)};var WT=qT;function ZT(e,t,n,r,a){var i="",o="",s=Math.floor(a/2)-1;return r-t>s&&(t=r-s+(i=" ... ").length),n-r>s&&(n=r+s-(o=" ...").length),{str:i+e.slice(t,n).replace(/\t/g,"")+o,pos:r-t+i.length}}function KT(e,t){return HT.repeat(" ",t-e.length)+e}var QT=function(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),"number"!=typeof t.indent&&(t.indent=1),"number"!=typeof t.linesBefore&&(t.linesBefore=3),"number"!=typeof t.linesAfter&&(t.linesAfter=2);for(var n,r=/\r?\n|\r|\0/g,a=[0],i=[],o=-1;n=r.exec(e.buffer);)i.push(n.index),a.push(n.index+n[0].length),e.position<=n.index&&o<0&&(o=a.length-2);o<0&&(o=a.length-1);var s,c,l="",d=Math.min(e.line+t.linesAfter,i.length).toString().length,u=t.maxLength-(t.indent+d+3);for(s=1;s<=t.linesBefore&&!(o-s<0);s++)c=ZT(e.buffer,a[o-s],i[o-s],e.position-(a[o]-a[o-s]),u),l=HT.repeat(" ",t.indent)+KT((e.line-s+1).toString(),d)+" | "+c.str+"\n"+l;for(c=ZT(e.buffer,a[o],i[o],e.position,u),l+=HT.repeat(" ",t.indent)+KT((e.line+1).toString(),d)+" | "+c.str+"\n",l+=HT.repeat("-",t.indent+d+3+c.pos)+"^\n",s=1;s<=t.linesAfter&&!(o+s>=i.length);s++)c=ZT(e.buffer,a[o+s],i[o+s],e.position-(a[o]-a[o+s]),u),l+=HT.repeat(" ",t.indent)+KT((e.line+s+1).toString(),d)+" | "+c.str+"\n";return l.replace(/\n$/,"")},YT=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],GT=["scalar","sequence","mapping"];var XT=function(e,t){if(t=t||{},Object.keys(t).forEach((function(t){if(-1===YT.indexOf(t))throw new WT('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=function(e){var t={};return null!==e&&Object.keys(e).forEach((function(n){e[n].forEach((function(e){t[String(e)]=n}))})),t}(t.styleAliases||null),-1===GT.indexOf(this.kind))throw new WT('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')};function JT(e,t){var n=[];return e[t].forEach((function(e){var t=n.length;n.forEach((function(n,r){n.tag===e.tag&&n.kind===e.kind&&n.multi===e.multi&&(t=r)})),n[t]=e})),n}function e$(e){return this.extend(e)}e$.prototype.extend=function(e){var t=[],n=[];if(e instanceof XT)n.push(e);else if(Array.isArray(e))n=n.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new WT("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit))}t.forEach((function(e){if(!(e instanceof XT))throw new WT("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new WT("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new WT("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),n.forEach((function(e){if(!(e instanceof XT))throw new WT("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var r=Object.create(e$.prototype);return r.implicit=(this.implicit||[]).concat(t),r.explicit=(this.explicit||[]).concat(n),r.compiledImplicit=JT(r,"implicit"),r.compiledExplicit=JT(r,"explicit"),r.compiledTypeMap=function(){var e,t,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function r(e){e.multi?(n.multi[e.kind].push(e),n.multi.fallback.push(e)):n[e.kind][e.tag]=n.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(r);return n}(r.compiledImplicit,r.compiledExplicit),r};var t$=e$,n$=new XT("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),r$=new XT("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),a$=new XT("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}}),i$=new t$({explicit:[n$,r$,a$]});var o$=new XT("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});var s$=new XT("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function c$(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function l$(e){return 48<=e&&e<=55}function d$(e){return 48<=e&&e<=57}var u$=new XT("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n=e.length,r=0,a=!1;if(!n)return!1;if("-"!==(t=e[r])&&"+"!==t||(t=e[++r]),"0"===t){if(r+1===n)return!0;if("b"===(t=e[++r])){for(r++;r<n;r++)if("_"!==(t=e[r])){if("0"!==t&&"1"!==t)return!1;a=!0}return a&&"_"!==t}if("x"===t){for(r++;r<n;r++)if("_"!==(t=e[r])){if(!c$(e.charCodeAt(r)))return!1;a=!0}return a&&"_"!==t}if("o"===t){for(r++;r<n;r++)if("_"!==(t=e[r])){if(!l$(e.charCodeAt(r)))return!1;a=!0}return a&&"_"!==t}}if("_"===t)return!1;for(;r<n;r++)if("_"!==(t=e[r])){if(!d$(e.charCodeAt(r)))return!1;a=!0}return!(!a||"_"===t)},construct:function(e){var t,n=e,r=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(r=-1),t=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===t){if("b"===n[1])return r*parseInt(n.slice(2),2);if("x"===n[1])return r*parseInt(n.slice(2),16);if("o"===n[1])return r*parseInt(n.slice(2),8)}return r*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!HT.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),h$=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var m$=/^[-+]?[0-9]+e/;var p$=new XT("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!h$.test(e)||"_"===e[e.length-1])},construct:function(e){var t,n;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:n*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||HT.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(HT.isNegativeZero(e))return"-0.0";return n=e.toString(10),m$.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"}),f$=i$.extend({implicit:[o$,s$,u$,p$]}),g$=f$,v$=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),_$=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");var y$=new XT("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==v$.exec(e)||null!==_$.exec(e))},construct:function(e){var t,n,r,a,i,o,s,c,l=0,d=null;if(null===(t=v$.exec(e))&&(t=_$.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,a=+t[3],!t[4])return new Date(Date.UTC(n,r,a));if(i=+t[4],o=+t[5],s=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(d=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(d=-d)),c=new Date(Date.UTC(n,r,a,i,o,s,l)),d&&c.setTime(c.getTime()-d),c},instanceOf:Date,represent:function(e){return e.toISOString()}});var b$=new XT("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}}),w$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";var x$=new XT("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,r=0,a=e.length,i=w$;for(n=0;n<a;n++)if(!((t=i.indexOf(e.charAt(n)))>64)){if(t<0)return!1;r+=6}return r%8==0},construct:function(e){var t,n,r=e.replace(/[\r\n=]/g,""),a=r.length,i=w$,o=0,s=[];for(t=0;t<a;t++)t%4==0&&t&&(s.push(o>>16&255),s.push(o>>8&255),s.push(255&o)),o=o<<6|i.indexOf(r.charAt(t));return 0===(n=a%4*6)?(s.push(o>>16&255),s.push(o>>8&255),s.push(255&o)):18===n?(s.push(o>>10&255),s.push(o>>2&255)):12===n&&s.push(o>>4&255),new Uint8Array(s)},predicate:function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},represent:function(e){var t,n,r="",a=0,i=e.length,o=w$;for(t=0;t<i;t++)t%3==0&&t&&(r+=o[a>>18&63],r+=o[a>>12&63],r+=o[a>>6&63],r+=o[63&a]),a=(a<<8)+e[t];return 0===(n=i%3)?(r+=o[a>>18&63],r+=o[a>>12&63],r+=o[a>>6&63],r+=o[63&a]):2===n?(r+=o[a>>10&63],r+=o[a>>4&63],r+=o[a<<2&63],r+=o[64]):1===n&&(r+=o[a>>2&63],r+=o[a<<4&63],r+=o[64],r+=o[64]),r}}),k$=Object.prototype.hasOwnProperty,M$=Object.prototype.toString;var C$=new XT("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,a,i,o=[],s=e;for(t=0,n=s.length;t<n;t+=1){if(r=s[t],i=!1,"[object Object]"!==M$.call(r))return!1;for(a in r)if(k$.call(r,a)){if(i)return!1;i=!0}if(!i)return!1;if(-1!==o.indexOf(a))return!1;o.push(a)}return!0},construct:function(e){return null!==e?e:[]}}),S$=Object.prototype.toString;var E$=new XT("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,a,i,o=e;for(i=new Array(o.length),t=0,n=o.length;t<n;t+=1){if(r=o[t],"[object Object]"!==S$.call(r))return!1;if(1!==(a=Object.keys(r)).length)return!1;i[t]=[a[0],r[a[0]]]}return!0},construct:function(e){if(null===e)return[];var t,n,r,a,i,o=e;for(i=new Array(o.length),t=0,n=o.length;t<n;t+=1)r=o[t],a=Object.keys(r),i[t]=[a[0],r[a[0]]];return i}}),A$=Object.prototype.hasOwnProperty;var T$=new XT("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,n=e;for(t in n)if(A$.call(n,t)&&null!==n[t])return!1;return!0},construct:function(e){return null!==e?e:{}}}),$$=g$.extend({implicit:[y$,b$],explicit:[x$,C$,E$,T$]}),I$=Object.prototype.hasOwnProperty,O$=1,L$=2,D$=3,j$=4,z$=1,P$=2,R$=3,N$=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,F$=/[\x85\u2028\u2029]/,B$=/[,\[\]\{\}]/,V$=/^(?:!|!!|![a-z\-]+!)$/i,H$=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function U$(e){return Object.prototype.toString.call(e)}function q$(e){return 10===e||13===e}function W$(e){return 9===e||32===e}function Z$(e){return 9===e||32===e||10===e||13===e}function K$(e){return 44===e||91===e||93===e||123===e||125===e}function Q$(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function Y$(e){return 120===e?2:117===e?4:85===e?8:0}function G$(e){return 48<=e&&e<=57?e-48:-1}function X$(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?"":76===e?"\u2028":80===e?"\u2029":""}function J$(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var eI=new Array(256),tI=new Array(256),nI=0;nI<256;nI++)eI[nI]=X$(nI)?1:0,tI[nI]=X$(nI);function rI(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||$$,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function aI(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=QT(n),new WT(t,n)}function iI(e,t){throw aI(e,t)}function oI(e,t){e.onWarning&&e.onWarning.call(null,aI(e,t))}var sI={YAML:function(e,t,n){var r,a,i;null!==e.version&&iI(e,"duplication of %YAML directive"),1!==n.length&&iI(e,"YAML directive accepts exactly one argument"),null===(r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&iI(e,"ill-formed argument of the YAML directive"),a=parseInt(r[1],10),i=parseInt(r[2],10),1!==a&&iI(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=i<2,1!==i&&2!==i&&oI(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var r,a;2!==n.length&&iI(e,"TAG directive accepts exactly two arguments"),r=n[0],a=n[1],V$.test(r)||iI(e,"ill-formed tag handle (first argument) of the TAG directive"),I$.call(e.tagMap,r)&&iI(e,'there is a previously declared suffix for "'+r+'" tag handle'),H$.test(a)||iI(e,"ill-formed tag prefix (second argument) of the TAG directive");try{a=decodeURIComponent(a)}catch(t){iI(e,"tag prefix is malformed: "+a)}e.tagMap[r]=a}};function cI(e,t,n,r){var a,i,o,s;if(t<n){if(s=e.input.slice(t,n),r)for(a=0,i=s.length;a<i;a+=1)9===(o=s.charCodeAt(a))||32<=o&&o<=1114111||iI(e,"expected valid JSON character");else N$.test(s)&&iI(e,"the stream contains non-printable characters");e.result+=s}}function lI(e,t,n,r){var a,i,o,s;for(HT.isObject(n)||iI(e,"cannot merge mappings; the provided source object is unacceptable"),o=0,s=(a=Object.keys(n)).length;o<s;o+=1)i=a[o],I$.call(t,i)||(t[i]=n[i],r[i]=!0)}function dI(e,t,n,r,a,i,o,s,c){var l,d;if(Array.isArray(a))for(l=0,d=(a=Array.prototype.slice.call(a)).length;l<d;l+=1)Array.isArray(a[l])&&iI(e,"nested arrays are not supported inside keys"),"object"==typeof a&&"[object Object]"===U$(a[l])&&(a[l]="[object Object]");if("object"==typeof a&&"[object Object]"===U$(a)&&(a="[object Object]"),a=String(a),null===t&&(t={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(i))for(l=0,d=i.length;l<d;l+=1)lI(e,t,i[l],n);else lI(e,t,i,n);else e.json||I$.call(n,a)||!I$.call(t,a)||(e.line=o||e.line,e.lineStart=s||e.lineStart,e.position=c||e.position,iI(e,"duplicated mapping key")),"__proto__"===a?Object.defineProperty(t,a,{configurable:!0,enumerable:!0,writable:!0,value:i}):t[a]=i,delete n[a];return t}function uI(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):iI(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function hI(e,t,n){for(var r=0,a=e.input.charCodeAt(e.position);0!==a;){for(;W$(a);)9===a&&-1===e.firstTabInLine&&(e.firstTabInLine=e.position),a=e.input.charCodeAt(++e.position);if(t&&35===a)do{a=e.input.charCodeAt(++e.position)}while(10!==a&&13!==a&&0!==a);if(!q$(a))break;for(uI(e),a=e.input.charCodeAt(e.position),r++,e.lineIndent=0;32===a;)e.lineIndent++,a=e.input.charCodeAt(++e.position)}return-1!==n&&0!==r&&e.lineIndent<n&&oI(e,"deficient indentation"),r}function mI(e){var t,n=e.position;return!(45!==(t=e.input.charCodeAt(n))&&46!==t||t!==e.input.charCodeAt(n+1)||t!==e.input.charCodeAt(n+2)||(n+=3,0!==(t=e.input.charCodeAt(n))&&!Z$(t)))}function pI(e,t){1===t?e.result+=" ":t>1&&(e.result+=HT.repeat("\n",t-1))}function fI(e,t){var n,r,a=e.tag,i=e.anchor,o=[],s=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=o),r=e.input.charCodeAt(e.position);0!==r&&(-1!==e.firstTabInLine&&(e.position=e.firstTabInLine,iI(e,"tab characters must not be used in indentation")),45===r)&&Z$(e.input.charCodeAt(e.position+1));)if(s=!0,e.position++,hI(e,!0,-1)&&e.lineIndent<=t)o.push(null),r=e.input.charCodeAt(e.position);else if(n=e.line,_I(e,t,D$,!1,!0),o.push(e.result),hI(e,!0,-1),r=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==r)iI(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!s&&(e.tag=a,e.anchor=i,e.kind="sequence",e.result=o,!0)}function gI(e){var t,n,r,a,i=!1,o=!1;if(33!==(a=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&iI(e,"duplication of a tag property"),60===(a=e.input.charCodeAt(++e.position))?(i=!0,a=e.input.charCodeAt(++e.position)):33===a?(o=!0,n="!!",a=e.input.charCodeAt(++e.position)):n="!",t=e.position,i){do{a=e.input.charCodeAt(++e.position)}while(0!==a&&62!==a);e.position<e.length?(r=e.input.slice(t,e.position),a=e.input.charCodeAt(++e.position)):iI(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==a&&!Z$(a);)33===a&&(o?iI(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),V$.test(n)||iI(e,"named tag handle cannot contain such characters"),o=!0,t=e.position+1)),a=e.input.charCodeAt(++e.position);r=e.input.slice(t,e.position),B$.test(r)&&iI(e,"tag suffix cannot contain flow indicator characters")}r&&!H$.test(r)&&iI(e,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch(t){iI(e,"tag name is malformed: "+r)}return i?e.tag=r:I$.call(e.tagMap,n)?e.tag=e.tagMap[n]+r:"!"===n?e.tag="!"+r:"!!"===n?e.tag="tag:yaml.org,2002:"+r:iI(e,'undeclared tag handle "'+n+'"'),!0}function vI(e){var t,n;if(38!==(n=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&iI(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!Z$(n)&&!K$(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&iI(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function _I(e,t,n,r,a){var i,o,s,c,l,d,u,h,m,p=1,f=!1,g=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,i=o=s=j$===n||D$===n,r&&hI(e,!0,-1)&&(f=!0,e.lineIndent>t?p=1:e.lineIndent===t?p=0:e.lineIndent<t&&(p=-1)),1===p)for(;gI(e)||vI(e);)hI(e,!0,-1)?(f=!0,s=i,e.lineIndent>t?p=1:e.lineIndent===t?p=0:e.lineIndent<t&&(p=-1)):s=!1;if(s&&(s=f||a),1!==p&&j$!==n||(h=O$===n||L$===n?t:t+1,m=e.position-e.lineStart,1===p?s&&(fI(e,m)||function(e,t,n){var r,a,i,o,s,c,l,d=e.tag,u=e.anchor,h={},m=Object.create(null),p=null,f=null,g=null,v=!1,_=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=h),l=e.input.charCodeAt(e.position);0!==l;){if(v||-1===e.firstTabInLine||(e.position=e.firstTabInLine,iI(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),i=e.line,63!==l&&58!==l||!Z$(r)){if(o=e.line,s=e.lineStart,c=e.position,!_I(e,n,L$,!1,!0))break;if(e.line===i){for(l=e.input.charCodeAt(e.position);W$(l);)l=e.input.charCodeAt(++e.position);if(58===l)Z$(l=e.input.charCodeAt(++e.position))||iI(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(dI(e,h,m,p,f,null,o,s,c),p=f=g=null),_=!0,v=!1,a=!1,p=e.tag,f=e.result;else{if(!_)return e.tag=d,e.anchor=u,!0;iI(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!_)return e.tag=d,e.anchor=u,!0;iI(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===l?(v&&(dI(e,h,m,p,f,null,o,s,c),p=f=g=null),_=!0,v=!0,a=!0):v?(v=!1,a=!0):iI(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,l=r;if((e.line===i||e.lineIndent>t)&&(v&&(o=e.line,s=e.lineStart,c=e.position),_I(e,t,j$,!0,a)&&(v?f=e.result:g=e.result),v||(dI(e,h,m,p,f,g,o,s,c),p=f=g=null),hI(e,!0,-1),l=e.input.charCodeAt(e.position)),(e.line===i||e.lineIndent>t)&&0!==l)iI(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&dI(e,h,m,p,f,null,o,s,c),_&&(e.tag=d,e.anchor=u,e.kind="mapping",e.result=h),_}(e,m,h))||function(e,t){var n,r,a,i,o,s,c,l,d,u,h,m,p=!0,f=e.tag,g=e.anchor,v=Object.create(null);if(91===(m=e.input.charCodeAt(e.position)))o=93,l=!1,i=[];else{if(123!==m)return!1;o=125,l=!0,i={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=i),m=e.input.charCodeAt(++e.position);0!==m;){if(hI(e,!0,t),(m=e.input.charCodeAt(e.position))===o)return e.position++,e.tag=f,e.anchor=g,e.kind=l?"mapping":"sequence",e.result=i,!0;p?44===m&&iI(e,"expected the node content, but found ','"):iI(e,"missed comma between flow collection entries"),h=null,s=c=!1,63===m&&Z$(e.input.charCodeAt(e.position+1))&&(s=c=!0,e.position++,hI(e,!0,t)),n=e.line,r=e.lineStart,a=e.position,_I(e,t,O$,!1,!0),u=e.tag,d=e.result,hI(e,!0,t),m=e.input.charCodeAt(e.position),!c&&e.line!==n||58!==m||(s=!0,m=e.input.charCodeAt(++e.position),hI(e,!0,t),_I(e,t,O$,!1,!0),h=e.result),l?dI(e,i,v,u,d,h,n,r,a):s?i.push(dI(e,null,v,u,d,h,n,r,a)):i.push(d),hI(e,!0,t),44===(m=e.input.charCodeAt(e.position))?(p=!0,m=e.input.charCodeAt(++e.position)):p=!1}iI(e,"unexpected end of the stream within a flow collection")}(e,h)?g=!0:(o&&function(e,t){var n,r,a,i,o=z$,s=!1,c=!1,l=t,d=0,u=!1;if(124===(i=e.input.charCodeAt(e.position)))r=!1;else{if(62!==i)return!1;r=!0}for(e.kind="scalar",e.result="";0!==i;)if(43===(i=e.input.charCodeAt(++e.position))||45===i)z$===o?o=43===i?R$:P$:iI(e,"repeat of a chomping mode identifier");else{if(!((a=G$(i))>=0))break;0===a?iI(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?iI(e,"repeat of an indentation width identifier"):(l=t+a-1,c=!0)}if(W$(i)){do{i=e.input.charCodeAt(++e.position)}while(W$(i));if(35===i)do{i=e.input.charCodeAt(++e.position)}while(!q$(i)&&0!==i)}for(;0!==i;){for(uI(e),e.lineIndent=0,i=e.input.charCodeAt(e.position);(!c||e.lineIndent<l)&&32===i;)e.lineIndent++,i=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>l&&(l=e.lineIndent),q$(i))d++;else{if(e.lineIndent<l){o===R$?e.result+=HT.repeat("\n",s?1+d:d):o===z$&&s&&(e.result+="\n");break}for(r?W$(i)?(u=!0,e.result+=HT.repeat("\n",s?1+d:d)):u?(u=!1,e.result+=HT.repeat("\n",d+1)):0===d?s&&(e.result+=" "):e.result+=HT.repeat("\n",d):e.result+=HT.repeat("\n",s?1+d:d),s=!0,c=!0,d=0,n=e.position;!q$(i)&&0!==i;)i=e.input.charCodeAt(++e.position);cI(e,n,e.position,!1)}}return!0}(e,h)||function(e,t){var n,r,a;if(39!==(n=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,r=a=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(cI(e,r,e.position,!0),39!==(n=e.input.charCodeAt(++e.position)))return!0;r=e.position,e.position++,a=e.position}else q$(n)?(cI(e,r,a,!0),pI(e,hI(e,!1,t)),r=a=e.position):e.position===e.lineStart&&mI(e)?iI(e,"unexpected end of the document within a single quoted scalar"):(e.position++,a=e.position);iI(e,"unexpected end of the stream within a single quoted scalar")}(e,h)||function(e,t){var n,r,a,i,o,s;if(34!==(s=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;0!==(s=e.input.charCodeAt(e.position));){if(34===s)return cI(e,n,e.position,!0),e.position++,!0;if(92===s){if(cI(e,n,e.position,!0),q$(s=e.input.charCodeAt(++e.position)))hI(e,!1,t);else if(s<256&&eI[s])e.result+=tI[s],e.position++;else if((o=Y$(s))>0){for(a=o,i=0;a>0;a--)(o=Q$(s=e.input.charCodeAt(++e.position)))>=0?i=(i<<4)+o:iI(e,"expected hexadecimal character");e.result+=J$(i),e.position++}else iI(e,"unknown escape sequence");n=r=e.position}else q$(s)?(cI(e,n,r,!0),pI(e,hI(e,!1,t)),n=r=e.position):e.position===e.lineStart&&mI(e)?iI(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}iI(e,"unexpected end of the stream within a double quoted scalar")}(e,h)?g=!0:!function(e){var t,n,r;if(42!==(r=e.input.charCodeAt(e.position)))return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!Z$(r)&&!K$(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&iI(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),I$.call(e.anchorMap,n)||iI(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],hI(e,!0,-1),!0}(e)?function(e,t,n){var r,a,i,o,s,c,l,d,u=e.kind,h=e.result;if(Z$(d=e.input.charCodeAt(e.position))||K$(d)||35===d||38===d||42===d||33===d||124===d||62===d||39===d||34===d||37===d||64===d||96===d)return!1;if((63===d||45===d)&&(Z$(r=e.input.charCodeAt(e.position+1))||n&&K$(r)))return!1;for(e.kind="scalar",e.result="",a=i=e.position,o=!1;0!==d;){if(58===d){if(Z$(r=e.input.charCodeAt(e.position+1))||n&&K$(r))break}else if(35===d){if(Z$(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&mI(e)||n&&K$(d))break;if(q$(d)){if(s=e.line,c=e.lineStart,l=e.lineIndent,hI(e,!1,-1),e.lineIndent>=t){o=!0,d=e.input.charCodeAt(e.position);continue}e.position=i,e.line=s,e.lineStart=c,e.lineIndent=l;break}}o&&(cI(e,a,i,!1),pI(e,e.line-s),a=i=e.position,o=!1),W$(d)||(i=e.position+1),d=e.input.charCodeAt(++e.position)}return cI(e,a,i,!1),!!e.result||(e.kind=u,e.result=h,!1)}(e,h,O$===n)&&(g=!0,null===e.tag&&(e.tag="?")):(g=!0,null===e.tag&&null===e.anchor||iI(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===p&&(g=s&&fI(e,m))),null===e.tag)null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);else if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&iI(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),c=0,l=e.implicitTypes.length;c<l;c+=1)if((u=e.implicitTypes[c]).resolve(e.result)){e.result=u.construct(e.result),e.tag=u.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else if("!"!==e.tag){if(I$.call(e.typeMap[e.kind||"fallback"],e.tag))u=e.typeMap[e.kind||"fallback"][e.tag];else for(u=null,c=0,l=(d=e.typeMap.multi[e.kind||"fallback"]).length;c<l;c+=1)if(e.tag.slice(0,d[c].tag.length)===d[c].tag){u=d[c];break}u||iI(e,"unknown tag !<"+e.tag+">"),null!==e.result&&u.kind!==e.kind&&iI(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+u.kind+'", not "'+e.kind+'"'),u.resolve(e.result,e.tag)?(e.result=u.construct(e.result,e.tag),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):iI(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||g}function yI(e){var t,n,r,a,i=e.position,o=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);0!==(a=e.input.charCodeAt(e.position))&&(hI(e,!0,-1),a=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==a));){for(o=!0,a=e.input.charCodeAt(++e.position),t=e.position;0!==a&&!Z$(a);)a=e.input.charCodeAt(++e.position);for(r=[],(n=e.input.slice(t,e.position)).length<1&&iI(e,"directive name must not be less than one character in length");0!==a;){for(;W$(a);)a=e.input.charCodeAt(++e.position);if(35===a){do{a=e.input.charCodeAt(++e.position)}while(0!==a&&!q$(a));break}if(q$(a))break;for(t=e.position;0!==a&&!Z$(a);)a=e.input.charCodeAt(++e.position);r.push(e.input.slice(t,e.position))}0!==a&&uI(e),I$.call(sI,n)?sI[n](e,n,r):oI(e,'unknown document directive "'+n+'"')}hI(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,hI(e,!0,-1)):o&&iI(e,"directives end mark is expected"),_I(e,e.lineIndent-1,j$,!1,!0),hI(e,!0,-1),e.checkLineBreaks&&F$.test(e.input.slice(i,e.position))&&oI(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&mI(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,hI(e,!0,-1)):e.position<e.length-1&&iI(e,"end of the stream or a document separator is expected")}function bI(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new rI(e,t),r=e.indexOf("\0");for(-1!==r&&(n.position=r,iI(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)yI(n);return n.documents}var wI={loadAll:function(e,t,n){null!==t&&"object"==typeof t&&void 0===n&&(n=t,t=null);var r=bI(e,n);if("function"!=typeof t)return r;for(var a=0,i=r.length;a<i;a+=1)t(r[a])},load:function(e,t){var n=bI(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new WT("expected a single document in the stream, but found more")}}},xI=Object.prototype.toString,kI=Object.prototype.hasOwnProperty,MI=65279,CI=9,SI=10,EI=13,AI=32,TI=33,$I=34,II=35,OI=37,LI=38,DI=39,jI=42,zI=44,PI=45,RI=58,NI=61,FI=62,BI=63,VI=64,HI=91,UI=93,qI=96,WI=123,ZI=124,KI=125,QI={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},YI=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],GI=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function XI(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else{if(!(e<=4294967295))throw new WT("code point within a string may not be greater than 0xFFFFFFFF");n="U",r=8}return"\\"+n+HT.repeat("0",r-t.length)+t}var JI=1,eO=2;function tO(e){this.schema=e.schema||$$,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=HT.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var n,r,a,i,o,s,c;if(null===t)return{};for(n={},a=0,i=(r=Object.keys(t)).length;a<i;a+=1)o=r[a],s=String(t[o]),"!!"===o.slice(0,2)&&(o="tag:yaml.org,2002:"+o.slice(2)),(c=e.compiledTypeMap.fallback[o])&&kI.call(c.styleAliases,s)&&(s=c.styleAliases[s]),n[o]=s;return n}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType='"'===e.quotingType?eO:JI,this.forceQuotes=e.forceQuotes||!1,this.replacer="function"==typeof e.replacer?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function nO(e,t){for(var n,r=HT.repeat(" ",t),a=0,i=-1,o="",s=e.length;a<s;)-1===(i=e.indexOf("\n",a))?(n=e.slice(a),a=s):(n=e.slice(a,i+1),a=i+1),n.length&&"\n"!==n&&(o+=r),o+=n;return o}function rO(e,t){return"\n"+HT.repeat(" ",e.indent*t)}function aO(e){return e===AI||e===CI}function iO(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&e!==MI||65536<=e&&e<=1114111}function oO(e){return iO(e)&&e!==MI&&e!==EI&&e!==SI}function sO(e,t,n){var r=oO(e),a=r&&!aO(e);return(n?r:r&&e!==zI&&e!==HI&&e!==UI&&e!==WI&&e!==KI)&&e!==II&&!(t===RI&&!a)||oO(t)&&!aO(t)&&e===II||t===RI&&a}function cO(e,t){var n,r=e.charCodeAt(t);return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(r-55296)+n-56320+65536:r}function lO(e){return/^\n* /.test(e)}var dO=1,uO=2,hO=3,mO=4,pO=5;function fO(e,t,n,r,a,i,o,s){var c,l=0,d=null,u=!1,h=!1,m=-1!==r,p=-1,f=function(e){return iO(e)&&e!==MI&&!aO(e)&&e!==PI&&e!==BI&&e!==RI&&e!==zI&&e!==HI&&e!==UI&&e!==WI&&e!==KI&&e!==II&&e!==LI&&e!==jI&&e!==TI&&e!==ZI&&e!==NI&&e!==FI&&e!==DI&&e!==$I&&e!==OI&&e!==VI&&e!==qI}(cO(e,0))&&function(e){return!aO(e)&&e!==RI}(cO(e,e.length-1));if(t||o)for(c=0;c<e.length;l>=65536?c+=2:c++){if(!iO(l=cO(e,c)))return pO;f=f&&sO(l,d,s),d=l}else{for(c=0;c<e.length;l>=65536?c+=2:c++){if((l=cO(e,c))===SI)u=!0,m&&(h=h||c-p-1>r&&" "!==e[p+1],p=c);else if(!iO(l))return pO;f=f&&sO(l,d,s),d=l}h=h||m&&c-p-1>r&&" "!==e[p+1]}return u||h?n>9&&lO(e)?pO:o?i===eO?pO:uO:h?mO:hO:!f||o||a(e)?i===eO?pO:uO:dO}function gO(e,t,n,r,a){e.dump=function(){if(0===t.length)return e.quotingType===eO?'""':"''";if(!e.noCompatMode&&(-1!==YI.indexOf(t)||GI.test(t)))return e.quotingType===eO?'"'+t+'"':"'"+t+"'";var i=e.indent*Math.max(1,n),o=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),s=r||e.flowLevel>-1&&n>=e.flowLevel;switch(fO(t,s,e.indent,o,(function(t){return function(e,t){var n,r;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(e.implicitTypes[n].resolve(t))return!0;return!1}(e,t)}),e.quotingType,e.forceQuotes&&!r,a)){case dO:return t;case uO:return"'"+t.replace(/'/g,"''")+"'";case hO:return"|"+vO(t,e.indent)+_O(nO(t,i));case mO:return">"+vO(t,e.indent)+_O(nO(function(e,t){var n,r,a=/(\n+)([^\n]*)/g,i=(s=e.indexOf("\n"),s=-1!==s?s:e.length,a.lastIndex=s,yO(e.slice(0,s),t)),o="\n"===e[0]||" "===e[0];var s;for(;r=a.exec(e);){var c=r[1],l=r[2];n=" "===l[0],i+=c+(o||n||""===l?"":"\n")+yO(l,t),o=n}return i}(t,o),i));case pO:return'"'+function(e){for(var t,n="",r=0,a=0;a<e.length;r>=65536?a+=2:a++)r=cO(e,a),!(t=QI[r])&&iO(r)?(n+=e[a],r>=65536&&(n+=e[a+1])):n+=t||XI(r);return n}(t)+'"';default:throw new WT("impossible error: invalid scalar style")}}()}function vO(e,t){var n=lO(e)?String(t):"",r="\n"===e[e.length-1];return n+(r&&("\n"===e[e.length-2]||"\n"===e)?"+":r?"":"-")+"\n"}function _O(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function yO(e,t){if(""===e||" "===e[0])return e;for(var n,r,a=/ [^ ]/g,i=0,o=0,s=0,c="";n=a.exec(e);)(s=n.index)-i>t&&(r=o>i?o:s,c+="\n"+e.slice(i,r),i=r+1),o=s;return c+="\n",e.length-i>t&&o>i?c+=e.slice(i,o)+"\n"+e.slice(o+1):c+=e.slice(i),c.slice(1)}function bO(e,t,n,r){var a,i,o,s="",c=e.tag;for(a=0,i=n.length;a<i;a+=1)o=n[a],e.replacer&&(o=e.replacer.call(n,String(a),o)),(xO(e,t+1,o,!0,!0,!1,!0)||void 0===o&&xO(e,t+1,null,!0,!0,!1,!0))&&(r&&""===s||(s+=rO(e,t)),e.dump&&SI===e.dump.charCodeAt(0)?s+="-":s+="- ",s+=e.dump);e.tag=c,e.dump=s||"[]"}function wO(e,t,n){var r,a,i,o,s,c;for(i=0,o=(a=n?e.explicitTypes:e.implicitTypes).length;i<o;i+=1)if(((s=a[i]).instanceOf||s.predicate)&&(!s.instanceOf||"object"==typeof t&&t instanceof s.instanceOf)&&(!s.predicate||s.predicate(t))){if(n?s.multi&&s.representName?e.tag=s.representName(t):e.tag=s.tag:e.tag="?",s.represent){if(c=e.styleMap[s.tag]||s.defaultStyle,"[object Function]"===xI.call(s.represent))r=s.represent(t,c);else{if(!kI.call(s.represent,c))throw new WT("!<"+s.tag+'> tag resolver accepts not "'+c+'" style');r=s.represent[c](t,c)}e.dump=r}return!0}return!1}function xO(e,t,n,r,a,i,o){e.tag=null,e.dump=n,wO(e,n,!1)||wO(e,n,!0);var s,c=xI.call(e.dump),l=r;r&&(r=e.flowLevel<0||e.flowLevel>t);var d,u,h="[object Object]"===c||"[object Array]"===c;if(h&&(u=-1!==(d=e.duplicates.indexOf(n))),(null!==e.tag&&"?"!==e.tag||u||2!==e.indent&&t>0)&&(a=!1),u&&e.usedDuplicates[d])e.dump="*ref_"+d;else{if(h&&u&&!e.usedDuplicates[d]&&(e.usedDuplicates[d]=!0),"[object Object]"===c)r&&0!==Object.keys(e.dump).length?(!function(e,t,n,r){var a,i,o,s,c,l,d="",u=e.tag,h=Object.keys(n);if(!0===e.sortKeys)h.sort();else if("function"==typeof e.sortKeys)h.sort(e.sortKeys);else if(e.sortKeys)throw new WT("sortKeys must be a boolean or a function");for(a=0,i=h.length;a<i;a+=1)l="",r&&""===d||(l+=rO(e,t)),s=n[o=h[a]],e.replacer&&(s=e.replacer.call(n,o,s)),xO(e,t+1,o,!0,!0,!0)&&((c=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&SI===e.dump.charCodeAt(0)?l+="?":l+="? "),l+=e.dump,c&&(l+=rO(e,t)),xO(e,t+1,s,!0,c)&&(e.dump&&SI===e.dump.charCodeAt(0)?l+=":":l+=": ",d+=l+=e.dump));e.tag=u,e.dump=d||"{}"}(e,t,e.dump,a),u&&(e.dump="&ref_"+d+e.dump)):(!function(e,t,n){var r,a,i,o,s,c="",l=e.tag,d=Object.keys(n);for(r=0,a=d.length;r<a;r+=1)s="",""!==c&&(s+=", "),e.condenseFlow&&(s+='"'),o=n[i=d[r]],e.replacer&&(o=e.replacer.call(n,i,o)),xO(e,t,i,!1,!1)&&(e.dump.length>1024&&(s+="? "),s+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),xO(e,t,o,!1,!1)&&(c+=s+=e.dump));e.tag=l,e.dump="{"+c+"}"}(e,t,e.dump),u&&(e.dump="&ref_"+d+" "+e.dump));else if("[object Array]"===c)r&&0!==e.dump.length?(e.noArrayIndent&&!o&&t>0?bO(e,t-1,e.dump,a):bO(e,t,e.dump,a),u&&(e.dump="&ref_"+d+e.dump)):(!function(e,t,n){var r,a,i,o="",s=e.tag;for(r=0,a=n.length;r<a;r+=1)i=n[r],e.replacer&&(i=e.replacer.call(n,String(r),i)),(xO(e,t,i,!1,!1)||void 0===i&&xO(e,t,null,!1,!1))&&(""!==o&&(o+=","+(e.condenseFlow?"":" ")),o+=e.dump);e.tag=s,e.dump="["+o+"]"}(e,t,e.dump),u&&(e.dump="&ref_"+d+" "+e.dump));else{if("[object String]"!==c){if("[object Undefined]"===c)return!1;if(e.skipInvalid)return!1;throw new WT("unacceptable kind of an object to dump "+c)}"?"!==e.tag&&gO(e,e.dump,t,i,l)}null!==e.tag&&"?"!==e.tag&&(s=encodeURI("!"===e.tag[0]?e.tag.slice(1):e.tag).replace(/!/g,"%21"),s="!"===e.tag[0]?"!"+s:"tag:yaml.org,2002:"===s.slice(0,18)?"!!"+s.slice(18):"!<"+s+">",e.dump=s+" "+e.dump)}return!0}function kO(e,t){var n,r,a=[],i=[];for(MO(e,a,i),n=0,r=i.length;n<r;n+=1)t.duplicates.push(a[i[n]]);t.usedDuplicates=new Array(r)}function MO(e,t,n){var r,a,i;if(null!==e&&"object"==typeof e)if(-1!==(a=t.indexOf(e)))-1===n.indexOf(a)&&n.push(a);else if(t.push(e),Array.isArray(e))for(a=0,i=e.length;a<i;a+=1)MO(e[a],t,n);else for(a=0,i=(r=Object.keys(e)).length;a<i;a+=1)MO(e[r[a]],t,n)}function CO(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var SO={Type:XT,Schema:t$,FAILSAFE_SCHEMA:i$,JSON_SCHEMA:f$,CORE_SCHEMA:g$,DEFAULT_SCHEMA:$$,load:wI.load,loadAll:wI.loadAll,dump:{dump:function(e,t){var n=new tO(t=t||{});n.noRefs||kO(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),xO(n,0,r,!0,!0)?n.dump+"\n":""}}.dump,YAMLException:WT,types:{binary:x$,float:p$,map:a$,null:o$,pairs:E$,set:T$,timestamp:y$,bool:s$,int:u$,merge:b$,omap:C$,seq:r$,str:n$},safeLoad:CO("safeLoad","load"),safeLoadAll:CO("safeLoadAll","loadAll"),safeDump:CO("safeDump","dump")};class EO{getMessageString(e){return e.message+(e.context&&"string"==typeof e.context?": "+e.context:"")}getIcon(e){return e.icon?e.icon:"error"===e.type?"mdi:alert-circle":"mdi:information-outline"}getURL(e){return e.url?e.url:"error"===e.type?{link:yh,title:hv("error.troubleshooting")}:null}getContextStrings(e){return Array.isArray(e.context)?e.context.map((e=>SO.dump(e))):"object"==typeof e.context?[SO.dump(e.context)]:"string"==typeof e.context?[e.context]:[]}}var AO='.dotdotdot:after {\n  animation: dots 2s linear infinite;\n  content: "";\n  display: inline-block;\n  width: 3em;\n}\n@keyframes dots {\n  0%, 20% {\n    content: ".";\n  }\n  40% {\n    content: "..";\n  }\n  60% {\n    content: "...";\n  }\n  90%, 100% {\n    content: "";\n  }\n}\n\n:host {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  user-select: text;\n  -webkit-user-select: text;\n}\n\n:host(:not([overlay])) {\n  height: 100%;\n  width: 100%;\n  background: var(--advanced-camera-card-message-background);\n  color: var(--advanced-camera-card-message-color);\n}\n\n:host([overlay]) {\n  position: absolute;\n  inset: 5%;\n  background: var(--advanced-camera-card-message-overlay-background);\n  color: var(--advanced-camera-card-message-overlay-color);\n}\n\ndiv.wrapper {\n  height: 100%;\n}\n\ndiv.message {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  box-sizing: border-box;\n  height: 100%;\n}\n\ndiv.message.padded {\n  padding: 20px;\n}\n\ndiv.message div.contents {\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n  margin-top: auto;\n  margin-bottom: auto;\n  min-width: 0;\n}\n\ndiv.message div.icon {\n  padding: 10px;\n}\n\n.vertical {\n  flex-direction: column;\n}\n\na {\n  word-break: break-word;\n}\n\n:host(:not([overlay])) a {\n  color: var(--advanced-camera-card-message-color);\n}\n\n:host([overlay]) a {\n  color: var(--advanced-camera-card-message-overlay-color);\n}\n\n.message pre {\n  margin-top: 20px;\n  overflow-x: auto;\n  border: 1px dotted var(--advanced-camera-card-divider-color);\n  padding: 1em;\n}';function TO(e,t){return q` <advanced-camera-card-message
    .message=${e}
    ?overlay=${!!t?.overlay}
  ></advanced-camera-card-message>`}let $O=class extends le{constructor(){super(...arguments),this.overlay=!1,this._controller=new EO}render(){if(!this.message)return;const e=this._controller.getURL(this.message),t=q`
      ${this._controller.getMessageString(this.message)}
      ${e?q`. <a href="${e.link}">${e.title}</a>`:""}
    `,n=this._controller.getIcon(this.message),r={dotdotdot:!!this.message?.dotdotdot};return q` <div class="wrapper">
      <div class="message padded">
        <div class="icon">
          <advanced-camera-card-icon
            part="icon"
            .icon="${{icon:n}}"
          ></advanced-camera-card-icon>
        </div>
        <div class="contents">
          <span class="${ye(r)}">${t}</span>
          ${this._controller.getContextStrings(this.message).map((e=>q`<pre>${e}</pre>`))}
        </div>
      </div>
    </div>`}static get styles(){return o(AO)}};e([pe({attribute:!1})],$O.prototype,"message",void 0),e([pe({attribute:!0,type:Boolean})],$O.prototype,"overlay",void 0),$O=e([ue("advanced-camera-card-message")],$O);let IO=class extends le{render(){return q`
      <slot name="top"></slot>
      <slot name="left"></slot>
      <slot name="right"></slot>
      <slot name="bottom"></slot>
    `}static get styles(){return o("ha-icon-button {\n  color: var(--advanced-camera-card-button-color);\n  background-color: var(--advanced-camera-card-button-background);\n  border-radius: var(--advanced-camera-card-button-border-radius);\n  padding: 0px;\n  margin: 3px;\n  --ha-icon-display: block;\n  /* Buttons can always be clicked */\n  pointer-events: auto;\n}\n\n:host {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n\nslot {\n  position: absolute;\n  display: flex;\n}\n\n/***************\n * Slot position\n ***************/\nslot[name=top] {\n  top: 0px;\n}\n\nslot[name=bottom] {\n  bottom: 0px;\n}\n\nslot[name=left] {\n  left: 0px;\n}\n\nslot[name=right] {\n  right: 0px;\n}\n\n/***********\n * Slot size\n ***********/\nslot[name=top],\nslot[name=bottom] {\n  width: 100%;\n  flex-direction: column;\n}\n\nslot[name=left],\nslot[name=right] {\n  height: 100%;\n  flex-direction: row;\n}\n\nslot[name=top],\nslot[name=left] {\n  justify-content: flex-start;\n}\n\nslot[name=bottom],\nslot[name=right] {\n  justify-content: flex-end;\n}")}};IO=e([ue("advanced-camera-card-overlay")],IO);class OO{constructor(e){this._config=null,this._popupTimer=new Zu,this._items=[],this._host=e}getRenderItems(){return this._items}setItems(e){const t=e.filter((e=>!!e.exclusive)),n=Gd(t.length?t:e,(e=>e.priority??50),"desc"),r=this._getSufficientValues(this._items),a=this._getSufficientValues(n);this._items=n,"popup"!==this._config?.style||qd(r,a)||(this._show(),this._popupTimer.start(this._config.popup_seconds,(()=>this._hide()))),this._host.requestUpdate()}setConfig(e){this._config=e,this._host.style.setProperty("--advanced-camera-card-status-bar-height",`${e.height}px`),this._host.setAttribute("data-style",e.style),this._host.setAttribute("data-position",e.position),"popup"!==this._config?.style&&this._show(),this._host.requestUpdate()}getConfig(){return this._config}shouldRender(){return this._items.some((e=>!1!==e.enabled&&e.sufficient))}actionHandler(e,t){e.stopPropagation();const n=Hu(e.detail.action,t);n&&OT(this._host,{actions:mu(n),config:t})}_getSufficientValue(e){
/* istanbul ignore else: cannot happen -- @preserve */
return"custom:advanced-camera-card-status-bar-icon"===e.type?e.icon:"custom:advanced-camera-card-status-bar-string"===e.type?e.string:"custom:advanced-camera-card-status-bar-image"===e.type?e.image:null}_getSufficientValues(e){return e.filter((e=>!1!==e.enabled&&e.sufficient)).map((e=>this._getSufficientValue(e)))}_show(){Cu(this._host,!1,"hide")}_hide(){Cu(this._host,!0,"hide")}}let LO=class extends le{constructor(){super(...arguments),this._controller=new OO(this)}willUpdate(e){e.has("config")&&this.config&&this._controller.setConfig(this.config),e.has("items")&&this._controller.setItems(this.items??[])}_renderPerInstanceStyle(){const e=this._controller.getConfig();if(!e)return;const t=e.position,n=e.style,r=e=>`\n        var(--advanced-camera-card-status-bar-override-${e},\n        var(--advanced-camera-card-status-bar-position-${t}-style-${n}-${e},\n        var(--advanced-camera-card-status-bar-position-${t}-${e},\n        var(--advanced-camera-card-status-bar-style-${n}-${e},\n        var(--advanced-camera-card-status-bar-${e})))))`;return q`<style>
      :host(${`[data-position='${t}'][data-style='${n}']`}) {
        color: ${r("color")};
        background: ${r("background")};
      }
    </style>`}render(){if(this._controller.shouldRender())return q`
      ${this._renderPerInstanceStyle()}
      <div class="status">
        ${this._controller.getRenderItems().map((e=>{if(!1===e.enabled)return;const t=ye({item:!0,expand:!!e.expand,action:!!Object.keys(e.actions??{}).length}),n=Yu({hasHold:Uu(e.actions?.hold_action),hasDoubleClick:Uu(e.actions?.double_tap_action)});return"custom:advanced-camera-card-status-bar-string"===e.type?q`<div
              .actionHandler=${n}
              class="${t}"
              @action=${t=>this._controller.actionHandler(t,e.actions)}
            >
              ${e.string}
            </div>`:"custom:advanced-camera-card-status-bar-icon"===e.type?q`<advanced-camera-card-icon
              .actionHandler=${n}
              .icon=${{icon:e.icon}}
              class="${t}"
              @action=${t=>this._controller.actionHandler(t,e.actions)}
            ></advanced-camera-card-icon>`:"custom:advanced-camera-card-status-bar-image"===e.type?q`<img
              .actionHandler=${n}
              class="${t}"
              src="${e.image}"
              @action=${t=>this._controller.actionHandler(t,e.actions)}
            />`:void 0}))}
      </div>
    `}static get styles(){return o("ha-icon-button {\n  color: var(--advanced-camera-card-button-color);\n  background-color: var(--advanced-camera-card-button-background);\n  border-radius: var(--advanced-camera-card-button-border-radius);\n  padding: 0px;\n  margin: 3px;\n  --ha-icon-display: block;\n  /* Buttons can always be clicked */\n  pointer-events: auto;\n}\n\n:host {\n  --mdc-icon-size: calc(var(--advanced-camera-card-status-bar-height) / 2);\n  display: block;\n  width: 100%;\n  pointer-events: auto;\n  opacity: 1;\n  transition: opacity 1s;\n}\n\n/*******************************************************\n * Non-hover styles should not interact with the pointer\n *******************************************************/\n:host(:not([data-style*=hover])) {\n  pointer-events: none;\n}\n\n/**********************\n * Popup style behavior\n **********************/\n:host([data-style=popup][hide]) {\n  opacity: 0;\n}\n\n/*********************\n * Status bar contents\n *********************/\n.status {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  overflow: hidden;\n  width: 100%;\n  height: var(--advanced-camera-card-status-bar-height);\n}\n\n.item {\n  display: inline-block;\n  margin: 3px 5px;\n  align-content: center;\n}\n\n.item:first-child {\n  margin-left: 10px;\n}\n\n.item:last-child {\n  margin-right: 10px;\n}\n\n.item.expand {\n  flex: 1;\n}\n\n.item.action {\n  cursor: pointer;\n}\n\nimg.item,\nadvanced-camera-card-icon.item {\n  display: block;\n  height: var(--mdc-icon-size, 24px);\n  width: auto;\n}\n\n/************************\n * Status bar theme hooks\n ************************/")}};e([pe({attribute:!1})],LO.prototype,"items",void 0),e([pe({attribute:!1})],LO.prototype,"config",void 0),LO=e([ue("advanced-camera-card-status-bar")],LO);class DO{constructor(e){this._keys=e}modify(e){this._keys.forEach((t=>e.removeContext(t)))}}const jO=(e,t,n)=>{Wu(t);const r=n?.manager.getView()?.query;if(!r||!jA.isFolderQuery(r))return;const a=r?.getQuery();if(!a?.path||a?.path.length<=1)return;const i=a.path.slice(0,-1);n?.manager.setViewByParametersWithExistingQuery({params:{query:r.clone().setQuery({folder:a.folder,path:[i[0],...i.slice(1)]})}})},zO=e=>{const t=e?.query;if(!t||!jA.isFolderQuery(t))return null;const n=t.getQuery();return!n?.folder||!n?.path||n.path.length<=1?null:new dh(n.folder,{icon:"mdi:arrow-up-left"})};function PO(e){return"number"==typeof e}function RO(e){return"string"==typeof e}function NO(e){return"boolean"==typeof e}function FO(e){return"[object Object]"===Object.prototype.toString.call(e)}function BO(e){return Math.abs(e)}function VO(e){return Math.sign(e)}function HO(e,t){return BO(e-t)}function UO(e){return QO(e).map(Number)}function qO(e){return e[WO(e)]}function WO(e){return Math.max(0,e.length-1)}function ZO(e,t){return t===WO(e)}function KO(e,t=0){return Array.from(Array(e),((e,n)=>t+n))}function QO(e){return Object.keys(e)}function YO(e,t){return[e,t].reduce(((e,t)=>(QO(t).forEach((n=>{const r=e[n],a=t[n],i=FO(r)&&FO(a);e[n]=i?YO(r,a):a})),e)),{})}function GO(e,t){return void 0!==t.MouseEvent&&e instanceof t.MouseEvent}function XO(){let e=[];const t={add:function(n,r,a,i={passive:!0}){let o;if("addEventListener"in n)n.addEventListener(r,a,i),o=()=>n.removeEventListener(r,a,i);else{const e=n;e.addListener(a),o=()=>e.removeListener(a)}return e.push(o),t},clear:function(){e=e.filter((e=>e()))}};return t}function JO(e,t,n,r){const a=XO(),i=1e3/60;let o=null,s=0,c=0;function l(e){if(!c)return;o||(o=e,n(),n());const a=e-o;for(o=e,s+=a;s>=i;)n(),s-=i;r(s/i),c&&(c=t.requestAnimationFrame(l))}function d(){t.cancelAnimationFrame(c),o=null,s=0,c=0}return{init:function(){a.add(e,"visibilitychange",(()=>{e.hidden&&(o=null,s=0)}))},destroy:function(){d(),a.clear()},start:function(){c||(c=t.requestAnimationFrame(l))},stop:d,update:n,render:r}}function eL(e=0,t=0){const n=BO(e-t);function r(t){return t<e}function a(e){return e>t}function i(e){return r(e)||a(e)}const o={length:n,max:t,min:e,constrain:function(n){return i(n)?r(n)?e:t:n},reachedAny:i,reachedMax:a,reachedMin:r,removeOffset:function(e){return n?e-n*Math.ceil((e-t)/n):e}};return o}function tL(e,t,n){const{constrain:r}=eL(0,e),a=e+1;let i=o(t);function o(e){return n?BO((a+e)%a):r(e)}function s(){return i}function c(){return tL(e,s(),n)}const l={get:s,set:function(e){return i=o(e),l},add:function(e){return c().set(s()+e)},clone:c};return l}function nL(e,t,n,r,a,i,o,s,c,l,d,u,h,m,p,f,g,v,_){const{cross:y,direction:b}=e,w=["INPUT","SELECT","TEXTAREA"],x={passive:!1},k=XO(),M=XO(),C=eL(50,225).constrain(m.measure(20)),S={mouse:300,touch:400},E={mouse:500,touch:600},A=p?43:25;let T=!1,$=0,I=0,O=!1,L=!1,D=!1,j=!1;function z(e){if(!GO(e,r)&&e.touches.length>=2)return P(e);const t=i.readPoint(e),n=i.readPoint(e,y),o=HO(t,$),c=HO(n,I);if(!L&&!j){if(!e.cancelable)return P(e);if(L=o>c,!L)return P(e)}const d=i.pointerMove(e);o>f&&(D=!0),l.useFriction(.3).useDuration(.75),s.start(),a.add(b(d)),e.preventDefault()}function P(e){const t=d.byDistance(0,!1).index!==u.get(),n=i.pointerUp(e)*(p?E:S)[j?"mouse":"touch"],r=function(e,t){const n=u.add(-1*VO(e)),r=d.byDistance(e,!p).distance;return p||BO(e)<C?r:g&&t?.5*r:d.byIndex(n.get(),0).distance}(b(n),t),a=function(e,t){if(0===e||0===t)return 0;if(BO(e)<=BO(t))return 0;const n=HO(BO(e),BO(t));return BO(n/e)}(n,r),o=A-10*a,s=v+a/50;L=!1,O=!1,M.clear(),l.useDuration(o).useFriction(s),c.distance(r,!p),j=!1,h.emit("pointerUp")}function R(e){D&&(e.stopPropagation(),e.preventDefault(),D=!1)}return{init:function(e){if(!_)return;function s(s){(NO(_)||_(e,s))&&function(e){const s=GO(e,r);if(j=s,D=p&&s&&!e.buttons&&T,T=HO(a.get(),o.get())>=2,s&&0!==e.button)return;if(function(e){const t=e.nodeName||"";return w.includes(t)}(e.target))return;O=!0,i.pointerDown(e),l.useFriction(0).useDuration(0),a.set(o),function(){const e=j?n:t;M.add(e,"touchmove",z,x).add(e,"touchend",P).add(e,"mousemove",z,x).add(e,"mouseup",P)}(),$=i.readPoint(e),I=i.readPoint(e,y),h.emit("pointerDown")}(s)}const c=t;k.add(c,"dragstart",(e=>e.preventDefault()),x).add(c,"touchmove",(()=>{}),x).add(c,"touchend",(()=>{})).add(c,"touchstart",s).add(c,"mousedown",s).add(c,"touchcancel",P).add(c,"contextmenu",P).add(c,"click",R,!0)},destroy:function(){k.clear(),M.clear()},pointerDown:function(){return O}}}function rL(e,t){let n,r;function a(e){return e.timeStamp}function i(n,r){const a="client"+("x"===(r||e.scroll)?"X":"Y");return(GO(n,t)?n:n.touches[0])[a]}return{pointerDown:function(e){return n=e,r=e,i(e)},pointerMove:function(e){const t=i(e)-i(r),o=a(e)-a(n)>170;return r=e,o&&(n=e),t},pointerUp:function(e){if(!n||!r)return 0;const t=i(r)-i(n),o=a(e)-a(n),s=a(e)-a(r)>170,c=t/o;return o&&!s&&BO(c)>.1?c:0},readPoint:i}}function aL(e,t,n,r,a,i,o){const s=[e].concat(r);let c,l,d=[],u=!1;function h(e){return a.measureSize(o.measure(e))}return{init:function(a){i&&(l=h(e),d=r.map(h),c=new ResizeObserver((n=>{(NO(i)||i(a,n))&&function(n){for(const i of n){if(u)return;const n=i.target===e,o=r.indexOf(i.target),s=n?l:d[o];if(BO(h(n?e:r[o])-s)>=.5){a.reInit(),t.emit("resize");break}}}(n)})),n.requestAnimationFrame((()=>{s.forEach((e=>c.observe(e)))})))},destroy:function(){u=!0,c&&c.disconnect()}}}function iL(e,t,n,r,a){const i=a.measure(10),o=a.measure(50),s=eL(.1,.99);let c=!1;function l(){return!c&&(!!e.reachedAny(n.get())&&!!e.reachedAny(t.get()))}return{shouldConstrain:l,constrain:function(a){if(!l())return;const c=e.reachedMin(t.get())?"min":"max",d=BO(e[c]-t.get()),u=n.get()-t.get(),h=s.constrain(d/o);n.subtract(u*h),!a&&BO(u)<i&&(n.set(e.constrain(n.get())),r.useDuration(25).useBaseFriction())},toggleActive:function(e){c=!e}}}function oL(e,t,n,r){const a=t.min+.1,i=t.max+.1,{reachedMin:o,reachedMax:s}=eL(a,i);const c={loop:function(t){if(!function(e){return 1===e?s(n.get()):-1===e&&o(n.get())}(t))return;const a=e*(-1*t);r.forEach((e=>e.add(a)))}};return c}function sL(e,t,n,r,a){const{reachedAny:i,removeOffset:o,constrain:s}=r;function c(e){return e.concat().sort(((e,t)=>BO(e)-BO(t)))[0]}function l(t,r){const a=[t,t+n,t-n];if(!e)return t;if(!r)return c(a);const i=a.filter((e=>VO(e)===r));return i.length?c(i):qO(a)-n}const d={byDistance:function(n,r){const c=a.get()+n,{index:d,distance:u}=function(n){const r=e?o(n):s(n),a=t.map(((e,t)=>({diff:l(e-r,0),index:t}))).sort(((e,t)=>BO(e.diff)-BO(t.diff))),{index:i}=a[0];return{index:i,distance:r}}(c),h=!e&&i(c);return!r||h?{index:d,distance:n}:{index:d,distance:n+l(t[d]-u,0)}},byIndex:function(e,n){return{index:e,distance:l(t[e]-a.get(),n)}},shortcut:l};return d}function cL(e,t,n,r,a,i,o,s){const c={passive:!0,capture:!0};let l=0;function d(e){"Tab"===e.code&&(l=(new Date).getTime())}return{init:function(u){s&&(i.add(document,"keydown",d,!1),t.forEach(((t,d)=>{i.add(t,"focus",(t=>{(NO(s)||s(u,t))&&function(t){if((new Date).getTime()-l>10)return;o.emit("slideFocusStart"),e.scrollLeft=0;const i=n.findIndex((e=>e.includes(t)));PO(i)&&(a.useDuration(0),r.index(i,0),o.emit("slideFocus"))}(d)}),c)})))}}}function lL(e){let t=e;function n(e){return PO(e)?e:e.get()}const r={get:function(){return t},set:function(e){t=n(e)},add:function(e){t+=n(e)},subtract:function(e){t-=n(e)}};return r}function dL(e,t){const n="x"===e.scroll?function(e){return`translate3d(${e}px,0px,0px)`}:function(e){return`translate3d(0px,${e}px,0px)`},r=t.style;let a=null,i=!1;return{clear:function(){i||(r.transform="",t.getAttribute("style")||t.removeAttribute("style"))},to:function(t){if(i)return;const o=(s=e.direction(t),Math.round(100*s)/100);var s;o!==a&&(r.transform=n(o),a=o)},toggleActive:function(e){i=!e}}}function uL(e,t,n,r,a,i,o,s,c){const l=.5,d=UO(a),u=UO(a).reverse(),h=function(){const e=o[0];return f(p(u,e),n,!1)}().concat(function(){const e=t-o[0]-1;return f(p(d,e),-n,!0)}());function m(e,t){return e.reduce(((e,t)=>e-a[t]),t)}function p(e,t){return e.reduce(((e,n)=>m(e,t)>0?e.concat([n]):e),[])}function f(a,o,d){const u=function(e){return i.map(((n,a)=>({start:n-r[a]+l+e,end:n+t-l+e})))}(o);return a.map((t=>{const r=d?0:-n,a=d?n:0,i=d?"end":"start",o=u[t][i];return{index:t,loopPoint:o,slideLocation:lL(-1),translate:dL(e,c[t]),target:()=>s.get()>o?r:a}}))}const g={canLoop:function(){return h.every((({index:e})=>{const n=d.filter((t=>t!==e));return m(n,t)<=.1}))},clear:function(){h.forEach((e=>e.translate.clear()))},loop:function(){h.forEach((e=>{const{target:t,translate:n,slideLocation:r}=e,a=t();a!==r.get()&&(n.to(a),r.set(a))}))},loopPoints:h};return g}function hL(e,t,n){let r,a=!1;return{init:function(i){n&&(r=new MutationObserver((e=>{a||(NO(n)||n(i,e))&&function(e){for(const n of e)if("childList"===n.type){i.reInit(),t.emit("slidesChanged");break}}(e)})),r.observe(e,{childList:!0}))},destroy:function(){r&&r.disconnect(),a=!0}}}function mL(e,t,n,r){const a={};let i,o=null,s=null,c=!1;const l={init:function(){i=new IntersectionObserver((e=>{c||(e.forEach((e=>{const n=t.indexOf(e.target);a[n]=e})),o=null,s=null,n.emit("slidesInView"))}),{root:e.parentElement,threshold:r}),t.forEach((e=>i.observe(e)))},destroy:function(){i&&i.disconnect(),c=!0},get:function(e=!0){if(e&&o)return o;if(!e&&s)return s;const t=function(e){return QO(a).reduce(((t,n)=>{const r=parseInt(n),{isIntersecting:i}=a[r];return(e&&i||!e&&!i)&&t.push(r),t}),[])}(e);return e&&(o=t),e||(s=t),t}};return l}function pL(e,t,n,r,a,i,o,s,c){const{startEdge:l,endEdge:d,direction:u}=e,h=PO(n);const m={groupSlides:function(e){return h?function(e,t){return UO(e).filter((e=>e%t==0)).map((n=>e.slice(n,n+t)))}(e,n):function(e){return e.length?UO(e).reduce(((n,h,m)=>{const p=qO(n)||0,f=0===p,g=h===WO(e),v=a[l]-i[p][l],_=a[l]-i[h][d],y=!r&&f?u(o):0,b=BO(_-(!r&&g?u(s):0)-(v+y));return m&&b>t+c&&n.push(h),g&&n.push(e.length),n}),[]).map(((t,n,r)=>{const a=Math.max(r[n-1]||0);return e.slice(a,t)})):[]}(e)}};return m}function fL(e,t,n,r,a,i,o){const{align:s,axis:c,direction:l,startIndex:d,loop:u,duration:h,dragFree:m,dragThreshold:p,inViewThreshold:f,slidesToScroll:g,skipSnaps:v,containScroll:_,watchResize:y,watchSlides:b,watchDrag:w,watchFocus:x}=i,k={measure:function(e){const{offsetTop:t,offsetLeft:n,offsetWidth:r,offsetHeight:a}=e;return{top:t,right:n+r,bottom:t+a,left:n,width:r,height:a}}},M=k.measure(t),C=n.map(k.measure),S=function(e,t){const n="rtl"===t,r="y"===e,a=!r&&n?-1:1,i={scroll:r?"y":"x",cross:r?"x":"y",startEdge:r?"top":n?"right":"left",endEdge:r?"bottom":n?"left":"right",measureSize:function(e){const{height:t,width:n}=e;return r?t:n},direction:function(e){return e*a}};return i}(c,l),E=S.measureSize(M),A=function(e){const t={measure:function(t){return e*(t/100)}};return t}(E),T=function(e,t){const n={start:function(){return 0},center:function(e){return r(e)/2},end:r};function r(e){return t-e}const a={measure:function(r,a){return RO(e)?n[e](r):e(t,r,a)}};return a}(s,E),$=!u&&!!_,I=u||!!_,{slideSizes:O,slideSizesWithGaps:L,startGap:D,endGap:j}=function(e,t,n,r,a,i){const{measureSize:o,startEdge:s,endEdge:c}=e,l=n[0]&&a,d=function(){if(!l)return 0;const e=n[0];return BO(t[s]-e[s])}(),u=function(){if(!l)return 0;const e=i.getComputedStyle(qO(r));return parseFloat(e.getPropertyValue(`margin-${c}`))}(),h=n.map(o),m=n.map(((e,t,n)=>{const r=!t,a=ZO(n,t);return r?h[t]+d:a?h[t]+u:n[t+1][s]-e[s]})).map(BO);return{slideSizes:h,slideSizesWithGaps:m,startGap:d,endGap:u}}(S,M,C,n,I,a),z=pL(S,E,g,u,M,C,D,j,2),{snaps:P,snapsAligned:R}=function(e,t,n,r,a){const{startEdge:i,endEdge:o}=e,{groupSlides:s}=a,c=s(r).map((e=>qO(e)[o]-e[0][i])).map(BO).map(t.measure),l=r.map((e=>n[i]-e[i])).map((e=>-BO(e))),d=s(l).map((e=>e[0])).map(((e,t)=>e+c[t]));return{snaps:l,snapsAligned:d}}(S,T,M,C,z),N=-qO(P)+qO(L),{snapsContained:F,scrollContainLimit:B}=function(e,t,n,r,a){const i=eL(-t+e,0),o=n.map(((e,t)=>{const{min:r,max:a}=i,o=i.constrain(e),s=!t,c=ZO(n,t);return s?a:c||l(r,o)?r:l(a,o)?a:o})).map((e=>parseFloat(e.toFixed(3)))),s=function(){const e=o[0],t=qO(o);return eL(o.lastIndexOf(e),o.indexOf(t)+1)}(),c=function(){if(t<=e+a)return[i.max];if("keepSnaps"===r)return o;const{min:n,max:c}=s;return o.slice(n,c)}();function l(e,t){return HO(e,t)<=1}return{snapsContained:c,scrollContainLimit:s}}(E,N,R,_,2),V=$?F:R,{limit:H}=function(e,t,n){const r=t[0];return{limit:eL(n?r-e:qO(t),r)}}(N,V,u),U=tL(WO(V),d,u),q=U.clone(),W=UO(n),Z=JO(r,a,(()=>(({dragHandler:e,scrollBody:t,scrollBounds:n,options:{loop:r}})=>{r||n.constrain(e.pointerDown()),t.seek()})(se)),(e=>(({scrollBody:e,translate:t,location:n,offsetLocation:r,previousLocation:a,scrollLooper:i,slideLooper:o,dragHandler:s,animation:c,eventHandler:l,scrollBounds:d,options:{loop:u}},h)=>{const m=e.settled(),p=!d.shouldConstrain(),f=u?m:m&&p,g=f&&!s.pointerDown();g&&c.stop();const v=n.get()*h+a.get()*(1-h);r.set(v),u&&(i.loop(e.direction()),o.loop()),t.to(r.get()),g&&l.emit("settle"),f||l.emit("scroll")})(se,e))),K=V[U.get()],Q=lL(K),Y=lL(K),G=lL(K),X=lL(K),J=function(e,t,n,r,a,i){let o=0,s=0,c=a,l=i,d=e.get(),u=0;function h(e){return c=e,p}function m(e){return l=e,p}const p={direction:function(){return s},duration:function(){return c},velocity:function(){return o},seek:function(){const t=r.get()-e.get();let a=0;return c?(n.set(e),o+=t/c,o*=l,d+=o,e.add(o),a=d-u):(o=0,n.set(r),e.set(r),a=t),s=VO(a),u=d,p},settled:function(){return BO(r.get()-t.get())<.001},useBaseFriction:function(){return m(i)},useBaseDuration:function(){return h(a)},useFriction:m,useDuration:h};return p}(Q,G,Y,X,h,.68),ee=sL(u,V,N,H,X),te=function(e,t,n,r,a,i,o){function s(a){const s=a.distance,c=a.index!==t.get();i.add(s),s&&(r.duration()?e.start():(e.update(),e.render(1),e.update())),c&&(n.set(t.get()),t.set(a.index),o.emit("select"))}const c={distance:function(e,t){s(a.byDistance(e,t))},index:function(e,n){const r=t.clone().set(e);s(a.byIndex(r.get(),n))}};return c}(Z,U,q,J,ee,X,o),ne=function(e){const{max:t,length:n}=e,r={get:function(e){return n?(e-t)/-n:0}};return r}(H),re=XO(),ae=mL(t,n,o,f),{slideRegistry:ie}=function(e,t,n,r,a,i){const{groupSlides:o}=a,{min:s,max:c}=r;return{slideRegistry:function(){const r=o(i),a=!e||"keepSnaps"===t;return 1===n.length?[i]:a?r:r.slice(s,c).map(((e,t,n)=>{const r=!t,a=ZO(n,t);return r?KO(qO(n[0])+1):a?KO(WO(i)-qO(n)[0]+1,qO(n)[0]):e}))}()}}($,_,V,B,z,W),oe=cL(e,n,ie,te,J,re,o,x),se={ownerDocument:r,ownerWindow:a,eventHandler:o,containerRect:M,slideRects:C,animation:Z,axis:S,dragHandler:nL(S,e,r,a,X,rL(S,a),Q,Z,te,J,ee,U,o,A,m,p,v,.68,w),eventStore:re,percentOfView:A,index:U,indexPrevious:q,limit:H,location:Q,offsetLocation:G,previousLocation:Y,options:i,resizeHandler:aL(t,o,a,n,S,y,k),scrollBody:J,scrollBounds:iL(H,G,X,J,A),scrollLooper:oL(N,H,G,[Q,G,Y,X]),scrollProgress:ne,scrollSnapList:V.map(ne.get),scrollSnaps:V,scrollTarget:ee,scrollTo:te,slideLooper:uL(S,E,N,O,L,P,V,G,n),slideFocus:oe,slidesHandler:hL(t,o,b),slidesInView:ae,slideIndexes:W,slideRegistry:ie,slidesToScroll:z,target:X,translate:dL(S,t)};return se}const gL={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function vL(e){function t(e,t){return YO(e,t||{})}const n={mergeOptions:t,optionsAtMedia:function(n){const r=n.breakpoints||{},a=QO(r).filter((t=>e.matchMedia(t).matches)).map((e=>r[e])).reduce(((e,n)=>t(e,n)),{});return t(n,a)},optionsMediaQueries:function(t){return t.map((e=>QO(e.breakpoints||{}))).reduce(((e,t)=>e.concat(t)),[]).map(e.matchMedia)}};return n}function _L(e,t,n){const r=e.ownerDocument,a=r.defaultView,i=vL(a),o=function(e){let t=[];const n={init:function(n,r){return t=r.filter((({options:t})=>!1!==e.optionsAtMedia(t).active)),t.forEach((t=>t.init(n,e))),r.reduce(((e,t)=>Object.assign(e,{[t.name]:t})),{})},destroy:function(){t=t.filter((e=>e.destroy()))}};return n}(i),s=XO(),c=function(){let e,t={};function n(e){return t[e]||[]}const r={init:function(t){e=t},emit:function(t){return n(t).forEach((n=>n(e,t))),r},off:function(e,a){return t[e]=n(e).filter((e=>e!==a)),r},on:function(e,a){return t[e]=n(e).concat([a]),r},clear:function(){t={}}};return r}(),{mergeOptions:l,optionsAtMedia:d,optionsMediaQueries:u}=i,{on:h,off:m,emit:p}=c,f=S;let g,v,_,y,b=!1,w=l(gL,_L.globalOptions),x=l(w),k=[];function M(t){const n=fL(e,_,y,r,a,t,c);if(t.loop&&!n.slideLooper.canLoop()){return M(Object.assign({},t,{loop:!1}))}return n}function C(t,n){b||(w=l(w,t),x=d(w),k=n||k,function(){const{container:t,slides:n}=x,r=RO(t)?e.querySelector(t):t;_=r||e.children[0];const a=RO(n)?_.querySelectorAll(n):n;y=[].slice.call(a||_.children)}(),g=M(x),u([w,...k.map((({options:e})=>e))]).forEach((e=>s.add(e,"change",S))),x.active&&(g.translate.to(g.location.get()),g.animation.init(),g.slidesInView.init(),g.slideFocus.init($),g.eventHandler.init($),g.resizeHandler.init($),g.slidesHandler.init($),g.options.loop&&g.slideLooper.loop(),_.offsetParent&&y.length&&g.dragHandler.init($),v=o.init($,k)))}function S(e,t){const n=T();E(),C(l({startIndex:n},e),t),c.emit("reInit")}function E(){g.dragHandler.destroy(),g.eventStore.clear(),g.translate.clear(),g.slideLooper.clear(),g.resizeHandler.destroy(),g.slidesHandler.destroy(),g.slidesInView.destroy(),g.animation.destroy(),o.destroy(),s.clear()}function A(e,t,n){x.active&&!b&&(g.scrollBody.useBaseFriction().useDuration(!0===t?0:x.duration),g.scrollTo.index(e,n||0))}function T(){return g.index.get()}const $={canScrollNext:function(){return g.index.add(1).get()!==T()},canScrollPrev:function(){return g.index.add(-1).get()!==T()},containerNode:function(){return _},internalEngine:function(){return g},destroy:function(){b||(b=!0,s.clear(),E(),c.emit("destroy"),c.clear())},off:m,on:h,emit:p,plugins:function(){return v},previousScrollSnap:function(){return g.indexPrevious.get()},reInit:f,rootNode:function(){return e},scrollNext:function(e){A(g.index.add(1).get(),e,-1)},scrollPrev:function(e){A(g.index.add(-1).get(),e,1)},scrollProgress:function(){return g.scrollProgress.get(g.offsetLocation.get())},scrollSnapList:function(){return g.scrollSnapList},scrollTo:A,selectedScrollSnap:T,slideNodes:function(){return y},slidesInView:function(){return g.slidesInView.get()},slidesNotInView:function(){return g.slidesInView.get(!1)}};return C(t,n),setTimeout((()=>c.emit("init")),0),$}function yL(){return yL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yL.apply(this,arguments)}_L.globalOptions=void 0;var bL=function(e,t){return void 0===t&&(t=.996),e*t/(1-t)};function wL(e,t){if(e.length!==t.length)throw new Error("vectors must be same length");return e.map((function(e,n){return e+t[n]}))}function xL(e){return Math.max.apply(Math,e.map(Math.abs))}function kL(e){return Object.freeze(e),Object.values(e).forEach((function(e){null===e||"object"!=typeof e||Object.isFrozen(e)||kL(e)})),e}var ML=[1,18,"undefined"!=typeof window&&window.innerHeight||800];var CL=[-1,-1,-1];var SL=function(e){return yL({},e,{axisDelta:e.axisDelta.map((function(e){return function(e,t,n){return Math.min(Math.max(t,e),n)}(e,-700,700)}))})},EL=.6,AL=.96,TL=2,$L=5,IL=kL({preventWheelAction:!0,reverseSign:[!0,!0,!1]}),OL=400;function LL(){return{isStarted:!1,isStartPublished:!1,isMomentum:!1,startTime:0,lastAbsDelta:1/0,axisMovement:[0,0,0],axisVelocity:[0,0,0],accelerationFactors:[],scrollPoints:[],scrollPointsToMerge:[],willEndTimeout:OL}}function DL(e){void 0===e&&(e={});var t,n,r,a=function(){var e={};function t(t,n){e[t]=(e[t]||[]).filter((function(e){return e!==n}))}return kL({on:function(n,r){return e[n]=(e[n]||[]).concat(r),function(){return t(n,r)}},off:t,dispatch:function(t,n){t in e&&e[t].forEach((function(e){return e(n)}))}})}(),i=a.on,o=a.off,s=a.dispatch,c=IL,l=LL(),d=!1,u=function(e){Array.isArray(e)?e.forEach((function(e){return p(e)})):p(e)},h=function(e){return void 0===e&&(e={}),Object.values(e).some((function(e){return null==e}))?c:c=kL(yL({},IL,c,e))},m=function(e){var r=yL({event:t,isStart:!1,isEnding:!1,isMomentumCancel:!1,isMomentum:l.isMomentum,axisDelta:[0,0,0],axisVelocity:l.axisVelocity,axisMovement:l.axisMovement,get axisMovementProjection(){return wL(r.axisMovement,r.axisVelocity.map((function(e){return bL(e)})))}},e);s("wheel",yL({},r,{previous:n})),n=r},p=function(e){var n=SL(function(e,t){if(!t)return e;var n=!0===t?CL:t.map((function(e){return e?-1:1}));return yL({},e,{axisDelta:e.axisDelta.map((function(e,t){return e*n[t]}))})}(function(e){var t=e.deltaX*ML[e.deltaMode],n=e.deltaY*ML[e.deltaMode],r=(e.deltaZ||0)*ML[e.deltaMode];return{timeStamp:e.timeStamp,axisDelta:[t,n,r]}}(e),c.reverseSign)),r=n.axisDelta,a=n.timeStamp,i=xL(r);e.preventDefault&&function(e,t){var n=c.preventWheelAction,r=t[0],a=t[1],i=t[2];if("boolean"==typeof n)return n;switch(n){case"x":return Math.abs(r)>=e;case"y":return Math.abs(a)>=e;case"z":return Math.abs(i)>=e;default:return!1}}(i,r)&&e.preventDefault(),l.isStarted?l.isMomentum&&i>Math.max(2,2*l.lastAbsDelta)&&(M(!0),x()):x(),0===i&&Object.is&&Object.is(e.deltaX,-0)?d=!0:(t=e,l.axisMovement=wL(l.axisMovement,r),l.lastAbsDelta=i,l.scrollPointsToMerge.push({axisDelta:r,timeStamp:a}),f(),m({axisDelta:r,isStart:!l.isStartPublished}),l.isStartPublished=!0,k())},f=function(){var e;l.scrollPointsToMerge.length===TL?(l.scrollPoints.unshift({axisDeltaSum:l.scrollPointsToMerge.map((function(e){return e.axisDelta})).reduce(wL),timeStamp:(e=l.scrollPointsToMerge.map((function(e){return e.timeStamp})),e.reduce((function(e,t){return e+t}))/e.length)}),v(),l.scrollPointsToMerge.length=0,l.scrollPoints.length=1,l.isMomentum||b()):l.isStartPublished||g()},g=function(){var e;l.axisVelocity=(e=l.scrollPointsToMerge,e[e.length-1]).axisDelta.map((function(e){return e/l.willEndTimeout}))},v=function(){var e=l.scrollPoints,t=e[0],n=e[1];if(n&&t){var r=t.timeStamp-n.timeStamp;if(!(r<=0)){var a=t.axisDeltaSum.map((function(e){return e/r})),i=a.map((function(e,t){return e/(l.axisVelocity[t]||1)}));l.axisVelocity=a,l.accelerationFactors.push(i),_(r)}}},_=function(e){var t=10*Math.ceil(e/10)*1.2;l.isMomentum||(t=Math.max(100,2*t)),l.willEndTimeout=Math.min(1e3,Math.round(t))},y=function(e){return 0===e||e<=AL&&e>=EL},b=function(){if(l.accelerationFactors.length>=$L){if(d&&(d=!1,xL(l.axisVelocity)>=.2))return void w();var e=l.accelerationFactors.slice(-1*$L);e.every((function(e){var t=!!e.reduce((function(e,t){return e&&e<1&&e===t?1:0})),n=e.filter(y).length===e.length;return t||n}))&&w(),l.accelerationFactors=e}},w=function(){l.isMomentum=!0},x=function(){(l=LL()).isStarted=!0,l.startTime=Date.now(),n=void 0,d=!1},k=function(){clearTimeout(r),r=setTimeout(M,l.willEndTimeout)},M=function(e){void 0===e&&(e=!1),l.isStarted&&(l.isMomentum&&e?m({isEnding:!0,isMomentumCancel:!0}):m({isEnding:!0}),l.isMomentum=!1,l.isStarted=!1)},C=function(e){var t=[],n=function(n){n.removeEventListener("wheel",e),t=t.filter((function(e){return e!==n}))};return kL({observe:function(r){return r.addEventListener("wheel",e,{passive:!1}),t.push(r),function(){return n(r)}},unobserve:n,disconnect:function(){t.forEach(n)}})}(u),S=C.observe,E=C.unobserve,A=C.disconnect;return h(e),kL({on:i,off:o,observe:S,unobserve:E,disconnect:A,feedWheel:u,updateOptions:h})}var jL={active:!0,breakpoints:{},wheelDraggingClass:"is-wheel-dragging",forceWheelAxis:void 0,target:void 0};function zL(e){var t;void 0===e&&(e={});var n=function(){};var r={name:"wheelGestures",options:e,init:function(r,a){var i,o,s=a.mergeOptions,c=a.optionsAtMedia,l=s(jL,zL.globalOptions),d=s(l,e);t=c(d);var u,h=r.internalEngine(),m=null!=(i=t.target)?i:r.containerNode().parentNode,p=null!=(o=t.forceWheelAxis)?o:h.options.axis,f=DL({preventWheelAction:p,reverseSign:[!0,!0,!1]}),g=f.observe(m),v=f.on("wheel",(function(e){var r=e.axisDelta,a=r[0],i=r[1],o="x"===p?a:i,s="x"===p?i:a,c=e.isMomentum&&e.previous&&!e.previous.isMomentum,l=e.isEnding&&!e.isMomentum||c;Math.abs(o)>Math.abs(s)&&!_&&!e.isMomentum&&function(e){try{x(u=new MouseEvent("mousedown",e.event))}catch(e){return n()}_=!0,document.documentElement.addEventListener("mousemove",b,!0),document.documentElement.addEventListener("mouseup",b,!0),void document.documentElement.addEventListener("mousedown",b,!0),t.wheelDraggingClass&&m.classList.add(t.wheelDraggingClass)}(e);if(!_)return;l?function(e){_=!1,x(w("mouseup",e)),y(),t.wheelDraggingClass&&m.classList.remove(t.wheelDraggingClass)}(e):x(w("mousemove",e))})),_=!1;function y(){document.documentElement.removeEventListener("mousemove",b,!0),document.documentElement.removeEventListener("mouseup",b,!0),document.documentElement.removeEventListener("mousedown",b,!0)}function b(e){_&&e.isTrusted&&e.stopImmediatePropagation()}function w(e,t){var n,r;if(p===h.options.axis){var a=t.axisMovement;n=a[0],r=a[1]}else{var i=t.axisMovement;r=i[0],n=i[1]}if(!h.options.skipSnaps&&!h.options.dragFree){var o=h.containerRect.width,s=h.containerRect.height;n=n<0?Math.max(n,-o):Math.min(n,o),r=r<0?Math.max(r,-s):Math.min(r,s)}return new MouseEvent(e,{clientX:u.clientX+n,clientY:u.clientY+r,screenX:u.screenX+n,screenY:u.screenY+r,movementX:n,movementY:r,button:0,bubbles:!0,cancelable:!0,composed:!0})}function x(e){r.containerNode().dispatchEvent(e)}n=function(){g(),v(),y()}},destroy:function(){return n()}};return r}zL.globalOptions=void 0;class PL{constructor(e,t,n){this._mutationObserver=new MutationObserver(((e,t)=>this._refreshCarouselContents())),this._refreshCarouselContents=()=>{const e=Tu(this._parent);!qd(this._carousel.slideNodes(),e)&&(this._carousel.destroy(),this._carousel=this._createCarousel(e))},this._root=e,this._parent=t,this._direction=n?.direction??"horizontal",this._transitionEffect=n?.transitionEffect??"slide",this._startIndex=n?.startIndex??0,this._dragFree=n?.dragFree??!1,this._loop=n?.loop??!1,this._draggable=n?.dragEnabled??!0,this._plugins=n?.plugins??[],this._textDirection=n?.textDirection??"ltr",this._wheelScrolling=n?.wheelScrolling??!0,this._carousel=this._createCarousel(Tu(this._parent)),t instanceof HTMLSlotElement&&t.addEventListener("slotchange",this._refreshCarouselContents),this._mutationObserver.observe(this._parent,{childList:!0})}destroy(){this._parent instanceof HTMLSlotElement&&this._parent.removeEventListener("slotchange",this._refreshCarouselContents),this._mutationObserver.disconnect(),this._carousel.destroy()}getSlide(e){return this._carousel.slideNodes()[e]??null}getSelectedSlide(){return this.getSlide(this.getSelectedIndex())}getSelectedIndex(){return this._carousel.selectedScrollSnap()}selectSlide(e){this._carousel.scrollTo(e,"none"===this._transitionEffect);const t=this.getSlide(e);t&&cA(this._parent,"carousel:force-select",{index:e,element:t})}_createCarousel(e){const t=_L(this._root,{slides:e,axis:"horizontal"===this._direction?"x":"y",duration:20,startIndex:this._startIndex,dragFree:this._dragFree,loop:this._loop,containScroll:"trimSnaps",watchSlides:!1,watchResize:!0,watchDrag:this._draggable,direction:this._textDirection},[...this._plugins,...e.length>1&&this._wheelScrolling?[zL({forceWheelAxis:"y"})]:[]]),n=()=>{const e=(()=>{const e=t.selectedScrollSnap(),n=t.slideNodes()[e]??null;return n?{index:e,element:n}:null})();e&&cA(this._parent,"carousel:select",e)};return t.on("select",(()=>n())),t}}const RL=e=>"rtl"===getComputedStyle(e).direction?"rtl":"ltr";let NL=class extends le{constructor(){super(...arguments),this.direction="horizontal",this.dragEnabled=!0,this.selected=0,this._refParent=Pe(),this._refRoot=Pe(),this._carousel=null}connectedCallback(){super.connectedCallback(),this.requestUpdate()}disconnectedCallback(){this._carousel?.destroy(),this._carousel=null,super.disconnectedCallback()}willUpdate(e){e.has("direction")&&this.setAttribute("direction",this.direction);["direction","dragEnabled","dragFree","loop","plugins","transitionEffect"].some((t=>e.has(t)))&&(this._carousel?.destroy(),this._carousel=null)}render(){return q` <div class="embla">
      <slot name="left"></slot>
      <div ${Fe(this._refRoot)} class="embla__viewport">
        <div class="embla__container">
          <slot ${Fe(this._refParent)}></slot>
        </div>
      </div>
      <slot name="right"></slot>
    </div>`}updated(e){!this._carousel&&this._refRoot.value&&this._refParent.value&&this.isConnected?this._carousel=new PL(this._refRoot.value,this._refParent.value,{direction:this.direction,dragEnabled:this.dragEnabled,dragFree:this.dragFree,startIndex:this.selected,transitionEffect:this.transitionEffect,loop:this.loop,plugins:this.plugins,textDirection:RL(this),wheelScrolling:this.wheelScrolling}):e.has("selected")&&this._carousel?.selectSlide(this.selected)}static get styles(){return o(":host {\n  display: block;\n  height: 100%;\n  width: 100%;\n}\n\n.embla {\n  width: 100%;\n  height: 100%;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n.embla__container {\n  display: flex;\n  width: 100%;\n  height: 100%;\n  user-select: none;\n  -webkit-touch-callout: none;\n  -khtml-user-select: none;\n  -webkit-tap-highlight-color: transparent;\n}\n\n:host([direction=vertical]) .embla__container {\n  flex-direction: column;\n}\n\n:host([direction=horizontal]) .embla__container {\n  flex-direction: row;\n}\n\n.embla__viewport {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.embla__viewport.is-draggable {\n  cursor: move;\n  cursor: grab;\n}\n\n.embla__viewport.is-dragging {\n  cursor: grabbing;\n}\n\n:host([direction=vertical]) ::slotted(.embla__slide:not(:last-of-type)) {\n  margin-bottom: 5px;\n}\n\n:host([direction=horizontal]) ::slotted(.embla__slide:not(:last-of-type)) {\n  margin-right: 5px;\n}")}};e([pe({attribute:!0,reflect:!0})],NL.prototype,"direction",void 0),e([pe({attribute:!0})],NL.prototype,"transitionEffect",void 0),e([pe({attribute:!1})],NL.prototype,"loop",void 0),e([pe({attribute:!1})],NL.prototype,"dragFree",void 0),e([pe({attribute:!1})],NL.prototype,"dragEnabled",void 0),e([pe({attribute:!1})],NL.prototype,"plugins",void 0),e([pe({attribute:!1})],NL.prototype,"wheelScrolling",void 0),e([pe({attribute:!1})],NL.prototype,"selected",void 0),NL=e([ue("advanced-camera-card-carousel")],NL);class FL{constructor(){this._details=[],this._heading=null}calculate(e,t,n){const r=uh.isMedia(t)?t.getCameraID():null,a=r?e?.getCameraMetadata(r)??null:null;this._calculateHeading(a,t),this._calculateDetails(a,t,n)}_calculateHeading(e,t){if(uh.isEvent(t)){const e=uu(t.getWhat()?.join(", "))??null,n=uu(t.getTags()?.join(", "))??null,r=e||n?(e??"")+(e&&n?": ":"")+(n??""):null,a=t.getScore(),i=a?(100*a).toFixed(2)+"%":null;this._heading=r?`${r}${i?` ${i}`:""}`:null}else this._heading=e?.title?e.title:null}_calculateDetails(e,t,n){const r=t?.getTitle()??null,a=uh.isMedia(t)?t.getStartTime():null,i=uh.isMedia(t)?t.getEndTime():null,o=a&&i?wu(a,i):null,s=uh.isMedia(t)&&t.inProgress()?hv("thumbnail.in_progress"):null,c=uh.isMedia(t)?uu(t?.getWhere()?.join(", "))??null:null,l=uh.isEvent(t)?uu(t?.getTags()?.join(", "))??null:null,d=n?ja(n,"HH:mm:ss"):null,u=[...a?[{hint:hv("thumbnail.start"),icon:{icon:"mdi:calendar-clock-outline"},title:ja(a,"yyyy-MM-dd HH:mm:ss")}]:[],...o||s?[{hint:hv("thumbnail.duration"),icon:{icon:"mdi:clock-outline"},title:`${o??""}${o&&s?" ":""}${s??""}`}]:[],...e?.title?[{hint:hv("thumbnail.camera"),title:e.title,icon:{icon:"mdi:cctv"}}]:[],...c?[{hint:hv("thumbnail.where"),title:c,icon:{icon:"mdi:map-marker-outline"}}]:[],...l?[{hint:hv("thumbnail.tag"),title:l,icon:{icon:"mdi:tag"}}]:[],...d?[{hint:hv("thumbnail.seek"),title:d,icon:{icon:"mdi:clock-fast"}}]:[]],h=!uh.isEvent(t)||!a;this._details=[...h&&r?[{title:r,...u.length>0&&{icon:{icon:"mdi:rename"},hint:hv("thumbnail.title")}}]:[],...u]}getHeading(){return this._heading}getDetails(){return this._details}}let BL=class extends le{constructor(){super(...arguments),this._controller=new FL}willUpdate(e){["item","seek","cameraManager"].some((t=>e.has(t)))&&this._controller.calculate(this.cameraManager,this.item,this.seek)}render(){const e=this._controller.getHeading(),t=this._controller.getDetails();return q`
      ${e?q` <div class="heading">
            <span title=${e}>${e}</span>
          </div>`:""}
      ${t?q` <div class="details">
            ${t.map((e=>q`<div>
                  ${e.icon?q` <advanced-camera-card-icon
                        title=${e.hint??""}
                        .icon=${e.icon}
                      ></advanced-camera-card-icon>`:""}
                  <span>${e.title}</span>
                </div>`))}
          </div>`:""}
    `}static get styles(){return o(":host {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  margin-left: 5px;\n  padding: 5px;\n  color: var(--advanced-camera-card-thumbnail-text-color);\n  overflow: hidden;\n  column-gap: 5%;\n}\n\ndiv.heading {\n  font-size: 1.2rem;\n  font-weight: bold;\n}\n\ndiv.details {\n  flex: 1;\n  justify-content: center;\n  display: flex;\n  flex-direction: column;\n  flex-wrap: wrap;\n  --mdc-icon-size: 16px;\n  min-height: 0px;\n}\n\ndiv.details div {\n  display: flex;\n  align-items: center;\n}\n\ndiv.details div * {\n  margin: 0px 3px;\n}")}};e([pe({attribute:!1})],BL.prototype,"hass",void 0),e([pe({attribute:!1})],BL.prototype,"cameraManager",void 0),e([pe({attribute:!1})],BL.prototype,"item",void 0),e([pe({attribute:!1})],BL.prototype,"seek",void 0),BL=e([ue("advanced-camera-card-thumbnail-details")],BL);const VL=e=>!!e?.startsWith("https://brands.home-assistant.io/");class HL{constructor(){this._title=null,this._subtitles=[],this._icon=null,this._thumbnail=null,this._thumbnailClass=null}calculate(e,t,n){const r=uh.isMedia(t)?t.getCameraID():null,a=r?e?.getCameraMetadata(r)??null:null;this._calculateVisuals(a,t),this._calculateTitles(a,t,n)}_calculateTitles(e,t,n){if(n)return;if(this._thumbnail&&uh.isMedia(t))return this._title=null,void(this._subtitles=[]);const r=uh.isEvent(t)||uh.isRecording(t)?t.getStartTime():null;this._title=r?ja(r,"HH:mm"):null;const a=r?ja(r,"MMM do"):null,i=t?.getTitle()??null,o=e?.title??i??null;this._subtitles=[...a?[a]:[],...o?[o]:[]]}_calculateVisuals(e,t){let n=t?.getThumbnail()??null;var r,a;n&&VL(n)&&(n=`https://brands.home-assistant.io/${(r={domain:(a=n,a.split("/")[4]),type:"icon",useFallback:!0,brand:!0}).brand?"brands/":""}${r.useFallback?"_/":""}${r.domain}/${r.darkOptimized?"dark_":""}${r.type}.png`),n?(this._thumbnail=n,this._icon=null,this._thumbnailClass=VL(n)?"brand":null):(this._thumbnail=null,this._thumbnailClass=null,this._icon=t?.getIcon()??e?.engineIcon??null)}getTitle(){return this._title}getSubtitles(){return this._subtitles}getIcon(){return this._icon}getThumbnail(){return this._thumbnail}getThumbnailClass(){return this._thumbnailClass}}
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const UL=window,qL=UL.ShadowRoot&&(void 0===UL.ShadyCSS||UL.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,WL=Symbol(),ZL=new WeakMap;let KL=class{constructor(e,t,n){if(this._$cssResult$=!0,n!==WL)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(qL&&void 0===e){const n=void 0!==t&&1===t.length;n&&(e=ZL.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&ZL.set(t,e))}return e}toString(){return this.cssText}};const QL=(e,t)=>{qL?e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):t.forEach((t=>{const n=document.createElement("style"),r=UL.litNonce;void 0!==r&&n.setAttribute("nonce",r),n.textContent=t.cssText,e.appendChild(n)}))},YL=qL?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return(e=>new KL("string"==typeof e?e:e+"",void 0,WL))(t)})(e):e
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var GL;const XL=window,JL=XL.trustedTypes,eD=JL?JL.emptyScript:"",tD=XL.reactiveElementPolyfillSupport,nD={toAttribute(e,t){switch(t){case Boolean:e=e?eD:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(e){n=null}}return n}},rD=(e,t)=>t!==e&&(t==t||e==e),aD={attribute:!0,type:String,converter:nD,reflect:!1,hasChanged:rD},iD="finalized";class oD extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,n)=>{const r=this._$Ep(n,t);void 0!==r&&(this._$Ev.set(r,n),e.push(r))})),e}static createProperty(e,t=aD){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const n="symbol"==typeof e?Symbol():"__"+e,r=this.getPropertyDescriptor(e,n,t);void 0!==r&&Object.defineProperty(this.prototype,e,r)}}static getPropertyDescriptor(e,t,n){return{get(){return this[t]},set(r){const a=this[e];this[t]=r,this.requestUpdate(e,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||aD}static finalize(){if(this.hasOwnProperty(iD))return!1;this[iD]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const n of t)this.createProperty(n,e[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const e of n)t.unshift(YL(e))}else void 0!==e&&t.push(YL(e));return t}static _$Ep(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,n;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(n=e.hostConnected)||void 0===n||n.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return QL(t,this.constructor.elementStyles),t}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$EO(e,t,n=aD){var r;const a=this.constructor._$Ep(e,n);if(void 0!==a&&!0===n.reflect){const i=(void 0!==(null===(r=n.converter)||void 0===r?void 0:r.toAttribute)?n.converter:nD).toAttribute(t,n.type);this._$El=e,null==i?this.removeAttribute(a):this.setAttribute(a,i),this._$El=null}}_$AK(e,t){var n;const r=this.constructor,a=r._$Ev.get(e);if(void 0!==a&&this._$El!==a){const e=r.getPropertyOptions(a),i="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(n=e.converter)||void 0===n?void 0:n.fromAttribute)?e.converter:nD;this._$El=a,this[a]=i.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,n){let r=!0;void 0!==e&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||rD)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===n.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,n))):r=!1),!this.isUpdatePending&&r&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const n=this._$AL;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(n)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(n)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}oD[iD]=!0,oD.elementProperties=new Map,oD.elementStyles=[],oD.shadowRootOptions={mode:"open"},null==tD||tD({ReactiveElement:oD}),(null!==(GL=XL.reactiveElementVersions)&&void 0!==GL?GL:XL.reactiveElementVersions=[]).push("1.6.3");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const sD=0,cD=Symbol();let lD=class{constructor(e,t,n){this.o=0,this.status=0,this.autoRun=!0,this.i=e,this.i.addController(this);const r="object"==typeof t?t:{task:t,args:n};this.t=r.task,this.h=r.args,void 0!==r.autoRun&&(this.autoRun=r.autoRun),this.taskComplete=new Promise(((e,t)=>{this.l=e,this.u=t}))}hostUpdated(){this.performTask()}async performTask(){var e;const t=null===(e=this.h)||void 0===e?void 0:e.call(this);this.shouldRun(t)&&this.run(t)}shouldRun(e){return this.autoRun&&this.v(e)}async run(e){var t;let n,r;null!=e||(e=null===(t=this.h)||void 0===t?void 0:t.call(this)),2!==this.status&&3!==this.status||(this.taskComplete=new Promise(((e,t)=>{this.l=e,this.u=t}))),this.status=1,this._=void 0,this.m=void 0,this.i.requestUpdate();const a=++this.o;try{n=await this.t(e)}catch(e){r=e}this.o===a&&(n===cD?this.status=0:(void 0===r?(this.status=2,this.l(n)):(this.status=3,this.u(r)),this.m=n,this._=r),this.i.requestUpdate())}get value(){return this.m}get error(){return this._}render(e){var t,n,r,a;switch(this.status){case 0:return null===(t=e.initial)||void 0===t?void 0:t.call(e);case 1:return null===(n=e.pending)||void 0===n?void 0:n.call(e);case 2:return null===(r=e.complete)||void 0===r?void 0:r.call(e,this.value);case 3:return null===(a=e.error)||void 0===a?void 0:a.call(e,this.error);default:this.status}}v(e){const t=this.T;return this.T=e,Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.some(((e,n)=>rD(e,t[n]))):e!==t}};function dD(e){return q`
    <advanced-camera-card-progress-indicator
      class="${ye(e?.classes??{})}"
      .size=${e?.size}
      ${e?.componentRef?Fe(e.componentRef):""}
      .message=${e?.message||""}
      .animated=${e?.cardWideConfig?.performance?.features.animated_progress_indicator??!0}
    >
    </advanced-camera-card-progress-indicator>
  `}let uD=class extends le{constructor(){super(...arguments),this.message="",this.animated=!1,this.size="large"}render(){return q` <div class="message vertical">
      ${this.animated?q`<ha-spinner indeterminate size="${this.size}"> </ha-spinner>`:q`<advanced-camera-card-icon
            .icon=${{icon:"mdi:timer-sand"}}
          ></advanced-camera-card-icon>`}
      ${this.message?q`<span>${this.message}</span>`:q``}
    </div>`}static get styles(){return o(AO)}};e([pe({attribute:!1})],uD.prototype,"message",void 0),e([pe({attribute:!1})],uD.prototype,"animated",void 0),e([pe({attribute:!1})],uD.prototype,"size",void 0),uD=e([ue("advanced-camera-card-progress-indicator")],uD);const hD=(e,t,n)=>{const r={...n?.cardWideConfig&&{cardWideConfig:n.cardWideConfig}};return q` ${e.render({initial:()=>n?.inProgressFunc?.()??dD(r),pending:()=>n?.inProgressFunc?.()??dD(r),error:e=>(gu(e),n?.errorFunc?.(e)),complete:t})}`},mD=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,pD=(e,t,n,r=!0)=>new lD(e,{args:()=>[!!t(),n()],task:async([e,n])=>{const r=t();return e&&r&&n?await(async(e,t)=>t.startsWith("data:")||t.match(mD)?t:new Promise(((n,r)=>{e.fetchWithAuth(t).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.blob()})).then((e=>{const t=new FileReader;t.onload=()=>{const e=t.result;n("string"==typeof e?e:null)},t.onerror=e=>r(e),t.readAsDataURL(e)})).catch((e=>r(e)))})))(r,n):null},autoRun:r});let fD=class extends le{constructor(){super(...arguments),this._intersectionObserver=new IntersectionObserver(this._intersectionHandler.bind(this))}connectedCallback(){super.connectedCallback(),this._intersectionObserver.observe(this)}disconnectedCallback(){this._intersectionObserver.disconnect(),super.disconnectedCallback()}willUpdate(e){e.has("thumbnail")&&(this._embedThumbnailTask=pD(this,(()=>this.hass),(()=>this.thumbnail),!1),this._intersectionObserver.unobserve(this),this._intersectionObserver.observe(this))}_intersectionHandler(e){this._embedThumbnailTask?.status===sD&&e.some((e=>e.isIntersecting))&&this._embedThumbnailTask?.run()}render(){const e=q`<advanced-camera-card-icon
      .icon=${{icon:"mdi:image-off"}}
      title=${hv("thumbnail.no_thumbnail")}
    ></advanced-camera-card-icon> `;return this._embedThumbnailTask?q`${this.thumbnail?hD(this._embedThumbnailTask,(e=>e?q`<img src="${e}" />`:q``),{inProgressFunc:()=>q`<advanced-camera-card-icon
                .icon=${{icon:"mdi:image-refresh"}}
                title=${hv("thumbnail.no_thumbnail")}
              ></advanced-camera-card-icon> `,errorFunc:()=>e}):e} `:e}static get styles(){return o(":host {\n  display: block;\n  overflow: hidden;\n  aspect-ratio: 1/1;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\nimg {\n  display: block;\n}\n\nimg {\n  display: inline-block;\n  width: 100%;\n  height: 100%;\n  vertical-align: top;\n  margin: 0;\n  border-radius: var(--advanced-camera-card-border-radius-final);\n  object-fit: cover;\n}\n\nadvanced-camera-card-icon {\n  display: flex;\n  width: 50%;\n  --mdc-icon-size: 100%;\n  color: var(--primary-text-color);\n  justify-content: center;\n  align-items: center;\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  box-sizing: border-box;\n  opacity: 0.2;\n}")}};e([pe({attribute:!1})],fD.prototype,"thumbnail",void 0),e([pe({attribute:!1})],fD.prototype,"hass",void 0),fD=e([ue("advanced-camera-card-thumbnail-feature-thumbnail")],fD);let gD=class extends le{constructor(){super(...arguments),this._controller=new HL}willUpdate(e){["item","hasDetails","cameraManager"].some((t=>e.has(t)))&&this._controller.calculate(this.cameraManager,this.item,this.hasDetails)}render(){const e=this._controller.getTitle(),t=this._controller.getSubtitles(),n=ye({background:e||t.length}),r=this._controller.getThumbnailClass(),a=ye({...r&&{[r]:!0}});return q`
      ${this._controller.getThumbnail()?q` <advanced-camera-card-thumbnail-feature-thumbnail
            class="${a}"
            .hass=${this.hass}
            .thumbnail=${this._controller.getThumbnail()}
            aria-label=${this.item?.getTitle()??""}
            title=${this.item?.getTitle()??""}
          ></advanced-camera-card-thumbnail-feature-thumbnail>`:this._controller.getIcon()?q`<advanced-camera-card-icon
              class="${n}"
              .icon=${{icon:this._controller.getIcon()}}
            ></advanced-camera-card-icon>`:""}
      ${e||t.length?q`
            ${e?q`<div class="title">${e}</div>`:""}
            ${t.length?q`<div>
                  ${t.map((e=>q`<div class="subtitle">${e}</div>`))}
                </div>`:""}
          `:q``}
    `}static get styles(){return o(":host {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly;\n  align-items: center;\n  max-width: var(--advanced-camera-card-thumbnail-size);\n  max-height: var(--advanced-camera-card-thumbnail-size);\n  aspect-ratio: 1/1;\n  border: 1px solid var(--secondary-color);\n  background-color: var(--secondary-background-color);\n  border-radius: var(--advanced-camera-card-border-radius-final);\n  box-sizing: border-box;\n  position: relative;\n}\n\nadvanced-camera-card-thumbnail-feature-thumbnail {\n  height: 50%;\n}\n\nadvanced-camera-card-thumbnail-feature-thumbnail.brand:only-child {\n  height: 60%;\n}\n\nadvanced-camera-card-thumbnail-feature-thumbnail:not(.brand):only-child {\n  height: 100%;\n}\n\nadvanced-camera-card-icon:only-child {\n  width: 60%;\n  height: 60%;\n  --mdc-icon-size: 100%;\n}\n\nadvanced-camera-card-icon.background {\n  display: block;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  inset: 0;\n  padding: 10%;\n  box-sizing: border-box;\n  pointer-events: none;\n  opacity: 0.1;\n  --mdc-icon-size: 100%;\n}\n\ndiv {\n  text-align: center;\n  color: var(--primary-text-color);\n}\n\ndiv.title {\n  font-size: 1.5rem;\n}\n\ndiv.subtitle {\n  font-size: 0.8em;\n}")}};e([pe({attribute:!1})],gD.prototype,"hass",void 0),e([pe({attribute:!1})],gD.prototype,"cameraManager",void 0),e([pe({attribute:!1})],gD.prototype,"item",void 0),e([pe({attribute:!1})],gD.prototype,"hasDetails",void 0),gD=e([ue("advanced-camera-card-thumbnail-feature")],gD);let vD=class extends le{constructor(){super(...arguments),this.details=!1,this.show_favorite_control=!1,this.show_timeline_control=!1,this.show_download_control=!1}render(){if(!this.item)return;const e={star:!0,starred:uh.isMedia(this.item)&&!!this.item?.isFavorite()},t=this.show_timeline_control&&(uh.isEvent(this.item)&&this.item.getStartTime()||uh.isRecording(this.item)&&this.item.getStartTime()&&this.item.getEndTime()),n=this.viewItemManager?.getCapabilities(this.item)??null,r=this.show_favorite_control&&this.item&&this.hass&&n?.canFavorite,a=this.show_download_control&&this.hass&&this.item.getID()&&n?.canDownload;return q`
      <advanced-camera-card-thumbnail-feature
        .cameraManager=${this.cameraManager}
        .hasDetails=${this.details}
        .hass=${this.hass}
        .item=${this.item}
      >
      </advanced-camera-card-thumbnail-feature>
      ${r?q` <advanced-camera-card-icon
            class="${ye(e)}"
            title=${hv("thumbnail.retain_indefinitely")}
            .icon=${{icon:this.item.isFavorite()?"mdi:star":"mdi:star-outline"}}
            @click=${async e=>{if(Wu(e),this.hass&&this.item){try{await(this.viewItemManager?.favorite(this.item,!this.item.isFavorite()))}catch(e){return void gu(e)}this.requestUpdate()}}}
          /></advanced-camera-card-icon>`:""}
      ${this.details?q`<advanced-camera-card-thumbnail-details
            .hass=${this.hass}
            .item=${this.item??void 0}
            .cameraManager=${this.cameraManager}
            .seek=${this.seek}
          ></advanced-camera-card-thumbnail-details>`:""}
      ${t?q`<advanced-camera-card-icon
            class="timeline"
            .icon=${{icon:"mdi:target"}}
            title=${hv("thumbnail.timeline")}
            @click=${e=>{Wu(e),this.viewManagerEpoch&&this.item&&this.viewManagerEpoch.manager.setViewByParameters({params:{view:"timeline",queryResults:this.viewManagerEpoch?.manager.getView()?.queryResults?.clone().selectResultIfFound((e=>e===this.item))},modifiers:[new DO(["timeline"])]})}}
          ></advanced-camera-card-icon>`:""}
      ${a?q` <advanced-camera-card-icon
            class="download"
            .icon=${{icon:"mdi:download"}}
            title=${hv("thumbnail.download")}
            @click=${async e=>{if(Wu(e),this.hass&&this.item)try{this.viewItemManager?.download(this.item)}catch(e){aT(this,e)}}}
          ></advanced-camera-card-icon>`:""}
    `}static get styles(){return o(":host {\n  display: flex;\n  flex-direction: row;\n  box-sizing: border-box;\n  position: relative;\n  overflow: hidden;\n  transition: transform 0.2s linear;\n}\n\n:host(:not([details])) {\n  aspect-ratio: 1/1;\n}\n\n:host([details]) {\n  border: 1px solid var(--advanced-camera-card-thumbnail-border-color);\n  border-radius: var(--advanced-camera-card-border-radius-final);\n  padding: 2px;\n  background-color: var(--advanced-camera-card-thumbnail-background);\n}\n\n:host(:hover) {\n  transform: scale(1.04);\n}\n\nadvanced-camera-card-icon {\n  position: absolute;\n  border-radius: 50%;\n  color: var(--advanced-camera-card-thumbnail-icon-color);\n  cursor: pointer;\n  transition: opacity 0.2s ease-in-out, color 0.2s ease-in-out;\n}\n\nadvanced-camera-card-icon:hover {\n  opacity: 1;\n}\n\nadvanced-camera-card-icon.star {\n  top: 3px;\n  left: 3px;\n}\n\nadvanced-camera-card-icon.star.starred {\n  color: var(--advanced-camera-card-thumbnail-icon-favorite-color);\n}\n\nadvanced-camera-card-icon.timeline {\n  top: 3px;\n  right: 3px;\n}\n\nadvanced-camera-card-icon.download {\n  right: 3px;\n  bottom: 3px;\n}\n\nadvanced-camera-card-thumbnail-details {\n  flex: 1;\n}")}};e([pe({attribute:!1})],vD.prototype,"cameraManager",void 0),e([pe({attribute:!1})],vD.prototype,"viewItemManager",void 0),e([pe({attribute:!1})],vD.prototype,"folderManager",void 0),e([pe({attribute:!1})],vD.prototype,"item",void 0),e([pe({attribute:!0,type:Boolean})],vD.prototype,"details",void 0),e([pe({attribute:!0,type:Boolean})],vD.prototype,"show_favorite_control",void 0),e([pe({attribute:!0,type:Boolean})],vD.prototype,"show_timeline_control",void 0),e([pe({attribute:!0,type:Boolean})],vD.prototype,"show_download_control",void 0),e([pe({attribute:!1})],vD.prototype,"seek",void 0),vD=e([ue("advanced-camera-card-thumbnail")],vD);let _D=class extends le{constructor(){super(...arguments),this.fadeThumbnails=!1,this._thumbnails=[]}willUpdate(e){if(e.has("config")){this.config?.size&&this.style.setProperty("--advanced-camera-card-thumbnail-size",`${this.config.size}px`);const e=this._getDirection();e?this.setAttribute("direction",e):this.removeAttribute("direction")}["cameraManager","config","transitionEffect","viewManagerEpoch"].some((t=>e.has(t)))&&(this._thumbnails=this._renderThumbnails()),e.has("viewManagerEpoch")&&this.style.setProperty("--advanced-camera-card-carousel-thumbnail-opacity",this.fadeThumbnails&&null!==this._getSelectedSlide()?"0.4":"1.0")}_getSelectedSlide(){return this.viewManagerEpoch?.manager.getView()?.queryResults?.getSelectedIndex()??null}_itemClickCallback(e,t){Wu(t);const n=this.viewManagerEpoch?.manager.getView(),r=n?.query,a=n?.queryResults;if(n&&r&&a)if(uh.isMedia(e)){const t=a.clone().selectResultIfFound((t=>t===e)),n=e.getCameraID();cA(this,"thumbnails-carousel:media-select",{media:e}),this.viewManagerEpoch?.manager.setViewByParameters({params:{view:"media",queryResults:t,...n&&{camera:n}},modifiers:[new DO(["timeline","mediaViewer"])]})}else if(jA.isFolderQuery(r)&&uh.isFolder(e)){const t=r.getQuery();if(!t)return;this.viewManagerEpoch?.manager.setViewByParametersWithExistingQuery({params:{query:r.clone().setQuery({folder:t.folder,path:[...t.path??[],{folder:e}]})}})}}_renderThumbnail(e,t,n,r){return q` <advanced-camera-card-thumbnail
      class="${ye({embla__slide:!0,"slide-selected":t})}"
      .cameraManager=${this.cameraManager}
      .hass=${this.hass}
      .item=${e}
      .viewManagerEpoch=${this.viewManagerEpoch}
      .viewItemManager=${this.viewItemManager}
      .seek=${r&&uh.isMedia(e)&&e.includesTime(r)?r:void 0}
      ?details=${!!this.config?.show_details}
      ?show_favorite_control=${this.config?.show_favorite_control}
      ?show_timeline_control=${this.config?.show_timeline_control}
      ?show_download_control=${this.config?.show_download_control}
      @click=${t=>n(e,t)}
    >
    </advanced-camera-card-thumbnail>`}_renderThumbnails(){const e=zO(this.viewManagerEpoch?.manager.getView()),t=[...e?[this._renderThumbnail(e,!1,((e,t)=>jO(0,t,this.viewManagerEpoch)))]:[]],n=this.viewManagerEpoch?.manager.getView(),r=this._getSelectedSlide();for(const e of n?.queryResults?.getResults()??[])t.push(this._renderThumbnail(e,r===t.length,((e,t)=>this._itemClickCallback(e,t)),n?.context?.mediaViewer?.seek));return t}_getDirection(){return"left"===this.config?.mode||"right"===this.config?.mode?"vertical":"above"===this.config?.mode||"below"===this.config?.mode?"horizontal":null}render(){const e=this._getDirection();if(this._thumbnails.length&&this.config&&e)return q`<advanced-camera-card-carousel
      direction=${e}
      .selected=${this._getSelectedSlide()??0}
      .dragFree=${!0}
    >
      ${this._thumbnails}
    </advanced-camera-card-carousel>`}static get styles(){return o(":host {\n  --advanced-camera-card-thumbnail-size-max: 300px;\n  --advanced-camera-card-thumbnail-details-width: calc(\n    var(--advanced-camera-card-thumbnail-size) + 200px\n  );\n}\n\n:host {\n  display: block;\n  width: 100%;\n  height: 100%;\n  background-color: var(--advanced-camera-card-thumbnail-background);\n  --advanced-camera-card-carousel-thumbnail-opacity: 1;\n}\n\n:host([direction=vertical]) {\n  height: 100%;\n}\n\n:host([direction=horizontal]) {\n  height: auto;\n}\n\n.embla__slide {\n  flex: 0 0 auto;\n  opacity: var(--advanced-camera-card-carousel-thumbnail-opacity);\n}\n\n.embla__slide.slide-selected {\n  opacity: 1;\n}\n\nadvanced-camera-card-thumbnail {\n  width: var(--advanced-camera-card-thumbnail-size);\n  height: var(--advanced-camera-card-thumbnail-size);\n  max-width: 100%;\n}\n\nadvanced-camera-card-thumbnail[details] {\n  width: var(--advanced-camera-card-thumbnail-details-width);\n}")}};e([pe({attribute:!1})],_D.prototype,"hass",void 0),e([pe({attribute:!1})],_D.prototype,"viewManagerEpoch",void 0),e([pe({attribute:!1})],_D.prototype,"cameraManager",void 0),e([pe({attribute:!1})],_D.prototype,"viewItemManager",void 0),e([pe({attribute:!1})],_D.prototype,"config",void 0),e([pe({attribute:!1})],_D.prototype,"fadeThumbnails",void 0),_D=e([ue("advanced-camera-card-thumbnail-carousel")],_D);var yD=":host {\n  width: 100%;\n  height: 100%;\n  display: block;\n}";const bD=document.createElement("template");bD.innerHTML='<style>\n:host {\n  background-color: #ffffff;\n  width: 350px;\n  max-width: 75vw;\n\n  visibility: hidden;\n  transition: visibility 0.5s;\n}\n\n:host([open]) {\n  visibility: visible;\n}\n\n::slotted(div) {\n  box-sizing: border-box;\n}\n\n#d {\n  position: fixed;\n  z-index: 99;\n  background-color: inherit;\n  -webkit-overflow-scrolling: touch;\n  overflow: auto;\n  overscroll-behavior: contain;\n  backdrop-filter: var(--side-drawer-backdrop-filter, none);\n\n  top: 0;\n  bottom: 0;\n  left: 0;\n  height: 100%;\n  box-sizing: border-box;\n  transform: translateX(-100%);\n  transition: var(\n    --side-drawer-transition,\n    transform 0.25s ease-out\n  );\n  width: inherit;\n  max-width: inherit;\n  border-top-right-radius: inherit;\n  border-bottom-right-radius: inherit;\n}\n\n:host([open]) #d {\n  transform: none;\n  box-shadow: 0px 0px 25px 0px rgba(0, 0, 0, 0.5);\n}\n\n#fs {\n  position: fixed;\n  z-index: 98;\n  background-color: #000000;\n  backdrop-filter: var(--side-drawer-backdrop-filter, none);\n\n  top: 0;\n  bottom: 0;\n  right: -30px; /* hide scrollbar until overscroll bug is fixed */\n  height: 100vh;\n  transition: var(\n    --side-drawer-overlay-transition,\n    opacity linear 0.25s\n  );\n  width: calc(\n    100vw + 30px\n  ); /* put back to just 100vw once overscroll bug fixed */\n  opacity: 0;\n  visibility: hidden;\n\n  overflow: auto;\n  overscroll-behavior: contain;\n}\n\n:host([open]) #fs {\n  opacity: var(--side-drawer-overlay-opacity, 0.7);\n  visibility: visible;\n}\n\n/*\n   * Workaround for bug https://bugs.chromium.org/p/chromium/issues/detail?id=813094\n   * Once bug is fixed and in the wild we can remove this element and make #if overflow:hidden\n   * and set "right: 0; width: 100vw" for #fs\n   */\n#ifs {\n  height: calc(100vh + 1px);\n}\n</style>\n<div id="d"><slot></slot></div>\n<div id="fs"><div id="ifs"></div></div>\n';class wD extends HTMLElement{constructor(){super();const e=this.attachShadow({mode:"open"});e.appendChild(bD.content.cloneNode(!0)),this._freeSpaceDiv=e.getElementById("fs")}connectedCallback(){this._freeSpaceDiv&&this._freeSpaceDiv.addEventListener("click",this.handleFreeSpaceDivClick),this.upgradeProperty("open")}disconnectedCallback(){document.removeEventListener("keyup",this.handleKeyUp)}upgradeProperty(e){if(this.hasOwnProperty(e)){let t=this[e];delete this[e],this[e]=t}}handleKeyUp=e=>{if(!e.altKey&&"Escape"===e.key)e.preventDefault(),this.open=!1};get open(){return this.hasAttribute("open")}set open(e){e?this.hasAttribute("open")||this.setAttribute("open",""):this.hasAttribute("open")&&this.removeAttribute("open")}static get observedAttributes(){return["open"]}attributeChangedCallback(e,t,n){"open"===e&&(this.open?(this.setAttribute("tabindex","0"),this.setAttribute("aria-disabled","false"),this.focus({preventScroll:!0}),document.addEventListener("keyup",this.handleKeyUp),this.dispatchEvent(new CustomEvent("open",{bubbles:!0}))):(this.setAttribute("tabindex","-1"),this.setAttribute("aria-disabled","true"),document.removeEventListener("keyup",this.handleKeyUp),this.dispatchEvent(new CustomEvent("close",{bubbles:!0}))))}handleFreeSpaceDivClick=()=>{this.open=!1}}customElements.define("side-drawer",wD);let xD=class extends le{constructor(){super(...arguments),this.location="left",this.control=!0,this.open=!1,this.empty=!0,this._refDrawer=Pe(),this._refSlot=Pe(),this._resizeObserver=new ResizeObserver((()=>this._hideDrawerIfNecessary())),this._isHoverableDevice=vu()}firstUpdated(e){super.firstUpdated(e);const t=document.createElement("style");t.innerHTML='/************\n * Managing z-indicies and stacking contexts is very challenging on the card,\n * due to the volume of different potentially overlapping surfaces. In\n * particular, care must be taken to not generate new stacking contexts\n * inadvertently which would make "z-index" weaving challenging (e.g. submenu\n * shown for PTZ presets, needs to render "over" the media drawer open/close\n * control).\n *************/\n:host {\n  width: unset;\n}\n\n#fs {\n  display: none;\n  width: 100%;\n  inset: 0;\n}\n\n#d,\n#fs {\n  height: 100%;\n  position: absolute;\n}\n\n#d {\n  overflow: visible;\n  max-width: 90%;\n  z-index: 3;\n}\n\n:host([location=right]) #d {\n  left: unset;\n  right: 0;\n  transform: translateX(100%);\n}\n\n:host([location=right][open]) #d {\n  transform: none;\n  box-shadow: var(--advanced-camera-card-box-shadow-override, 0px 0px 25px 0px black);\n}\n\n#ifs {\n  height: 100%;\n}',this._refDrawer.value?.shadowRoot?.appendChild(t)}_slotChanged(){const e=this._refSlot.value?Tu(this._refSlot.value):[];this._resizeObserver.disconnect();for(const t of e)this._resizeObserver.observe(t);this._hideDrawerIfNecessary()}_hideDrawerIfNecessary(){if(!this._refDrawer.value)return;const e=this._refSlot.value?Tu(this._refSlot.value):null;this.empty=!e||!e.length||e.every((e=>{const t=e.getBoundingClientRect();return!t.width||!t.height}))}render(){return q`
      <side-drawer
        ${Fe(this._refDrawer)}
        location="${this.location}"
        ?open=${this.open}
        @mouseleave=${()=>{this.open=!1}}
      >
        ${this.control?q`
              <div
                class="control-surround"
                @click=${e=>{Wu(e),this.open=!this.open}}
              >
                <advanced-camera-card-icon
                  class="control"
                  .icon="${{icon:this.open?this.icons?.open??"mdi:menu-open":this.icons?.closed??"mdi:menu"}}"
                  @mouseenter=${()=>{this._isHoverableDevice&&!this.open&&(this.open=!0)}}
                >
                </advanced-camera-card-icon>
              </div>
            `:""}
        <slot ${Fe(this._refSlot)} @slotchange=${()=>this._slotChanged()}></slot>
      </side-drawer>
    `}static get styles(){return o("side-drawer {\n  background-color: var(--card-background-color);\n}\n\ndiv.control-surround {\n  position: absolute;\n  bottom: 50%;\n  transform: translateY(50%);\n  padding-top: 20px;\n  padding-bottom: 20px;\n}\n\n:host([location=left]) div.control-surround {\n  padding-right: 12px;\n  left: 100%;\n}\n\n:host([location=right]) div.control-surround {\n  padding-left: 12px;\n  right: 100%;\n}\n\n:host([empty]),\n:host([empty]) > * {\n  visibility: hidden;\n}\n\n:host(:not([empty])),\n:host(:not([empty])) > * {\n  visibility: visible;\n}\n\nadvanced-camera-card-icon.control {\n  color: var(--advanced-camera-card-button-color);\n  background-color: var(--advanced-camera-card-button-background);\n  pointer-events: all;\n  --mdc-icon-size: 20px;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  transition: opacity 0.5s ease;\n}\n\n:host([location=left]) advanced-camera-card-icon.control {\n  border-top-right-radius: 20px;\n  border-bottom-right-radius: 20px;\n}\n\n:host([location=right]) advanced-camera-card-icon.control {\n  border-top-left-radius: 20px;\n  border-bottom-left-radius: 20px;\n}")}};e([pe({attribute:!0,reflect:!0})],xD.prototype,"location",void 0),e([pe({attribute:!0,reflect:!0,type:Boolean})],xD.prototype,"control",void 0),e([pe({type:Boolean,reflect:!0,attribute:!0})],xD.prototype,"open",void 0),e([pe({attribute:!1})],xD.prototype,"icons",void 0),e([pe({type:Boolean,reflect:!0,attribute:!0})],xD.prototype,"empty",void 0),xD=e([ue("advanced-camera-card-drawer")],xD);let kD=class extends le{constructor(){super(...arguments),this._refDrawerLeft=Pe(),this._refDrawerRight=Pe(),this._boundDrawerHandler=this._drawerHandler.bind(this)}connectedCallback(){super.connectedCallback(),this.addEventListener("advanced-camera-card:drawer:open",this._boundDrawerHandler),this.addEventListener("advanced-camera-card:drawer:close",this._boundDrawerHandler)}disconnectedCallback(){this.removeEventListener("advanced-camera-card:drawer:open",this._boundDrawerHandler),this.removeEventListener("advanced-camera-card:drawer:close",this._boundDrawerHandler),super.disconnectedCallback()}_drawerHandler(e){const t=e.detail.drawer,n=e.type.endsWith(":open");"left"===t&&this._refDrawerLeft.value?this._refDrawerLeft.value.open=n:"right"===t&&this._refDrawerRight.value&&(this._refDrawerRight.value.open=n)}render(){return q` <slot name="above"></slot>
      <slot></slot>
      <advanced-camera-card-drawer
        ${Fe(this._refDrawerLeft)}
        location="left"
        .icons=${this.drawerIcons?.left}
      >
        <slot name="left"></slot>
      </advanced-camera-card-drawer>
      <advanced-camera-card-drawer
        ${Fe(this._refDrawerRight)}
        location="right"
        .icons=${this.drawerIcons?.right}
      >
        <slot name="right"></slot>
      </advanced-camera-card-drawer>
      <slot name="below"></slot>`}static get styles(){return o(":host {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  overflow: hidden;\n}\n\n::slotted(:not([slot])) {\n  flex: 1;\n  min-height: 0px;\n}")}};e([pe({attribute:!1})],kD.prototype,"drawerIcons",void 0),kD=e([ue("advanced-camera-card-surround-basic")],kD);let MD=class extends le{constructor(){super(...arguments),this._timelineKeys=null}_hasDrawer(){return!!this.thumbnailConfig&&["left","right"].includes(this.thumbnailConfig.mode)}willUpdate(e){this.timelineConfig?.mode&&"none"!==this.timelineConfig.mode&&import("./timeline-core-77c3f6e5.js");const t=this.viewManagerEpoch?.manager.getView();if(e.has("viewManagerEpoch")&&(this.viewManagerEpoch?.manager.hasMajorMediaChange(this.viewManagerEpoch?.oldView)||this.viewManagerEpoch?.oldView?.displayMode!==t?.displayMode)){const e=this._getTimelineKeys();qd(e,this._timelineKeys)||(this._timelineKeys=e??void 0)}}_getTimelineKeys(){const e=e=>e?.size?{type:"camera",cameraIDs:e}:null,t=this.viewManagerEpoch?.manager.getView();if(!t||!this.cameraManager)return null;if(t.is("live")){const n={anyCapabilities:["clips","snapshots","recordings"]};return t.supportsMultipleDisplayModes()&&t.isGrid()?e(this.cameraManager.getStore().getCameraIDsWithCapability(n)):e(this.cameraManager.getStore().getAllDependentCameras(t.camera,n))}const n=t.query;if(t.isViewerView()){if(jA.isMediaQuery(n))return e(n.getQueryCameraIDs());if(jA.isFolderQuery(n)){const e=n.getQuery()?.folder;return e?(e=>({type:"folder",folder:e}))(e):null}}return null}render(){const e=this.viewManagerEpoch?.manager.getView();if(!this.hass||!e)return;const t=(e,t)=>{this.thumbnailConfig&&this._hasDrawer()&&cA(e.composedPath()[0],"drawer:"+t,{drawer:this.thumbnailConfig.mode})};return q` <advanced-camera-card-surround-basic
      @advanced-camera-card:thumbnails-carousel:media-select=${e=>t(e,"close")}
    >
      ${this.thumbnailConfig&&"none"!==this.thumbnailConfig.mode?q` <advanced-camera-card-thumbnail-carousel
            slot=${this.thumbnailConfig.mode}
            .hass=${this.hass}
            .config=${this.thumbnailConfig}
            .cameraManager=${this.cameraManager}
            .viewItemManager=${this.viewItemManager}
            .fadeThumbnails=${e.isViewerView()}
            .viewManagerEpoch=${this.viewManagerEpoch}
            .selected=${e.queryResults?.getSelectedIndex()??void 0}
          >
          </advanced-camera-card-thumbnail-carousel>`:""}
      ${this.timelineConfig&&"none"!==this.timelineConfig.mode?q` <advanced-camera-card-timeline-core
            slot=${this.timelineConfig.mode}
            .hass=${this.hass}
            .viewManagerEpoch=${this.viewManagerEpoch}
            .itemClickAction=${e.isViewerView()||!this.thumbnailConfig||"none"===this.thumbnailConfig?.mode?"play":"select"}
            .keys=${this._timelineKeys}
            .mini=${!0}
            .timelineConfig=${this.timelineConfig}
            .thumbnailConfig=${this.thumbnailConfig}
            .cameraManager=${this.cameraManager}
            .foldersManager=${this.foldersManager}
            .conditionStateManager=${this.conditionStateManager}
            .viewItemManager=${this.viewItemManager}
            .cardWideConfig=${this.cardWideConfig}
          >
          </advanced-camera-card-timeline-core>`:""}
      <slot></slot>
    </advanced-camera-card-surround-basic>`}static get styles(){return o(yD)}};e([pe({attribute:!1})],MD.prototype,"hass",void 0),e([pe({attribute:!1})],MD.prototype,"viewManagerEpoch",void 0),e([pe({attribute:!1,hasChanged:fu})],MD.prototype,"thumbnailConfig",void 0),e([pe({attribute:!1,hasChanged:fu})],MD.prototype,"timelineConfig",void 0),e([pe({attribute:!1})],MD.prototype,"cameraManager",void 0),e([pe({attribute:!1})],MD.prototype,"foldersManager",void 0),e([pe({attribute:!1})],MD.prototype,"conditionStateManager",void 0),e([pe({attribute:!1})],MD.prototype,"viewItemManager",void 0),e([pe({attribute:!1})],MD.prototype,"cardWideConfig",void 0),MD=e([ue("advanced-camera-card-surround")],MD);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
class CD{constructor(e){this.Y=e}disconnect(){this.Y=void 0}reconnect(e){this.Y=e}deref(){return this.Y}}class SD{constructor(){this.Z=void 0,this.q=void 0}get(){return this.Z}pause(){this.Z??=new Promise((e=>this.q=e))}resume(){this.q?.(),this.Z=this.q=void 0}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ED=e=>!(e=>null===e||"object"!=typeof e&&"function"!=typeof e)(e)&&"function"==typeof e.then,AD=1073741823;const TD=ve(class extends ze{constructor(){super(...arguments),this._$Cwt=AD,this._$Cbt=[],this._$CK=new CD(this),this._$CX=new SD}render(...e){return e.find((e=>!ED(e)))??W}update(e,t){const n=this._$Cbt;let r=n.length;this._$Cbt=t;const a=this._$CK,i=this._$CX;this.isConnected||this.disconnected();for(let e=0;e<t.length&&!(e>this._$Cwt);e++){const o=t[e];if(!ED(o))return this._$Cwt=e,o;e<r&&o===n[e]||(this._$Cwt=AD,r=0,Promise.resolve(o).then((async e=>{for(;i.get();)await i.get();const t=a.deref();if(void 0!==t){const n=t._$Cbt.indexOf(o);n>-1&&n<t._$Cwt&&(t._$Cwt=n,t.setValue(e))}})))}return W}disconnected(){this._$CK.disconnect(),this._$CX.pause()}reconnected(){this._$CK.reconnect(this),this._$CX.resume()}});let $D=class extends le{async _renderDiagnostics(){const e=await(async(e,t,n)=>{const r=e&&t?await t.getMatchingDevices(e,(e=>"Frigate"===e.manufacturer)):[],a=new Map;return r?.forEach((e=>{e.config_entries.forEach((t=>{e.model&&a.set(t,e.model)}))})),{card_version:"7.27.3",browser:navigator.userAgent,date:new Date,lang:uv(),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,git:{hash:bT,build_date:yT,commit_date:wT},...e&&{ha_version:e.config.version},custom_integrations:{frigate:{...await ET("frigate",e),...a.size&&{devices:Object.fromEntries(a)}},hass_web_proxy:await ET(kT,e)},...n&&{config:n}}})(this.hass,this.deviceRegistryManager,this.rawConfig);return TO({message:hv("error.diagnostics"),icon:"mdi:cogs",context:e})}render(){return q`${TD(this._renderDiagnostics(),TO({message:hv("error.fetching_diagnostics"),dotdotdot:!0,icon:"mdi:cogs"}))}`}static get styles(){return o(yD)}};e([pe({attribute:!1})],$D.prototype,"deviceRegistryManager",void 0),e([pe({attribute:!1})],$D.prototype,"rawConfig",void 0),$D=e([ue("advanced-camera-card-diagnostics")],$D);let ID=class extends le{willUpdate(e){if(e.has("viewManagerEpoch")||e.has("config")){const e=this.viewManagerEpoch?.manager.getView();(e?.is("live")||this._shouldLivePreload())&&import("./index-68748161.js"),e?.isMediaGalleryView()&&!e.is("folders")?import("./media-gallery-9e3f2af1.js"):e?.isViewerView()?import("./index-59514253.js"):e?.is("image")?import("./image-4030349f.js"):e?.is("timeline")?import("./timeline-64ea1072.js"):e?.is("folders")&&import("./folder-gallery-89dfed93.js")}e.has("hide")&&(this.hide?this.setAttribute("hidden",""):this.removeAttribute("hidden"))}_shouldLivePreload(){const e=this.viewManagerEpoch?.manager.getView();return!!this.config?.live.preload&&!e?.is("diagnostics")}render(){if(!this.hass||!this.config||!this.cardWideConfig)return q``;const e=this.viewManagerEpoch?.manager.getView(),t={hidden:this._shouldLivePreload()&&!e?.is("live")},n={hidden:!!this.hide},r=e?.is("live")?this.config.live.controls.thumbnails:e?.isViewerView()?this.config.media_viewer.controls.thumbnails:e?.is("timeline")?this.config.timeline.controls.thumbnails:void 0,a=e?.is("live")?this.config.live.controls.timeline:e?.isViewerView()?this.config.media_viewer.controls.timeline:void 0,i=e?this.cameraManager?.getStore().getCameraConfig(e.camera)??null:null;return q` <advanced-camera-card-surround
      class="${ye(n)}"
      .hass=${this.hass}
      .viewManagerEpoch=${this.viewManagerEpoch}
      .thumbnailConfig=${this.hide?void 0:r}
      .timelineConfig=${this.hide?void 0:a}
      .cameraManager=${this.cameraManager}
      .foldersManager=${this.foldersManager}
      .conditionStateManager=${this.conditionStateManager}
      .viewItemManager=${this.viewItemManager}
      .cardWideConfig=${this.cardWideConfig}
    >
      ${!this.hide&&e?.is("image")&&i?q` <advanced-camera-card-image
            .imageConfig=${this.config.image}
            .viewManagerEpoch=${this.viewManagerEpoch}
            .hass=${this.hass}
            .cameraConfig=${i}
            .cameraManager=${this.cameraManager}
          >
          </advanced-camera-card-image>`:""}
      ${this.hide||!e?.isMediaGalleryView()||e.is("folders")?"":q` <advanced-camera-card-media-gallery
            .hass=${this.hass}
            .viewManagerEpoch=${this.viewManagerEpoch}
            .galleryConfig=${this.config.media_gallery}
            .cameraManager=${this.cameraManager}
            .viewItemManager=${this.viewItemManager}
            .cardWideConfig=${this.cardWideConfig}
          >
          </advanced-camera-card-media-gallery>`}
      ${!this.hide&&e?.isViewerView()?q`
            <advanced-camera-card-viewer
              .hass=${this.hass}
              .viewManagerEpoch=${this.viewManagerEpoch}
              .viewerConfig=${this.config.media_viewer}
              .resolvedMediaCache=${this.resolvedMediaCache}
              .cameraManager=${this.cameraManager}
              .cardWideConfig=${this.cardWideConfig}
            >
            </advanced-camera-card-viewer>
          `:""}
      ${!this.hide&&e?.is("timeline")?q` <advanced-camera-card-timeline
            .hass=${this.hass}
            .viewManagerEpoch=${this.viewManagerEpoch}
            .timelineConfig=${this.config.timeline}
            .cameraManager=${this.cameraManager}
            .conditionStateManager=${this.conditionStateManager}
            .foldersManager=${this.foldersManager}
            .viewItemManager=${this.viewItemManager}
            .cardWideConfig=${this.cardWideConfig}
          >
          </advanced-camera-card-timeline>`:""}
      ${!this.hide&&e?.is("diagnostics")?q` <advanced-camera-card-diagnostics
            .hass=${this.hass}
            .rawConfig=${this.rawConfig}
            .deviceRegistryManager=${this.deviceRegistryManager}
          >
          </advanced-camera-card-diagnostics>`:""}
      ${!this.hide&&e?.is("folders")?q` <advanced-camera-card-folder-gallery
            .hass=${this.hass}
            .viewManagerEpoch=${this.viewManagerEpoch}
            .viewItemManager=${this.viewItemManager}
            .galleryConfig=${this.config.media_gallery}
            .foldersManager=${this.foldersManager}
          ></advanced-camera-card-folder-gallery>`:""}
      ${this._shouldLivePreload()||!this.hide&&e?.is("live")?q`
              <advanced-camera-card-live
                .hass=${this.hass}
                .viewManagerEpoch=${this.viewManagerEpoch}
                .liveConfig=${this.config.live}
                .cameraManager=${this.cameraManager}
                .cardWideConfig=${this.cardWideConfig}
                .microphoneState=${this.microphoneState}
                .triggeredCameraIDs=${this.triggeredCameraIDs}
                class="${ye(t)}"
              >
              </advanced-camera-card-live>
            `:""}
    </advanced-camera-card-surround>`}static get styles(){return o(":host {\n  width: 100%;\n  height: 100%;\n  display: block;\n}\n\n:host([hidden]),\n.hidden {\n  display: none;\n}")}};e([pe({attribute:!1})],ID.prototype,"hass",void 0),e([pe({attribute:!1})],ID.prototype,"viewManagerEpoch",void 0),e([pe({attribute:!1})],ID.prototype,"cameraManager",void 0),e([pe({attribute:!1})],ID.prototype,"foldersManager",void 0),e([pe({attribute:!1})],ID.prototype,"viewItemManager",void 0),e([pe({attribute:!1})],ID.prototype,"config",void 0),e([pe({attribute:!1})],ID.prototype,"cardWideConfig",void 0),e([pe({attribute:!1})],ID.prototype,"rawConfig",void 0),e([pe({attribute:!1})],ID.prototype,"resolvedMediaCache",void 0),e([pe({attribute:!1})],ID.prototype,"hide",void 0),e([pe({attribute:!1})],ID.prototype,"microphoneState",void 0),e([pe({attribute:!1})],ID.prototype,"triggeredCameraIDs",void 0),e([pe({attribute:!1})],ID.prototype,"deviceRegistryManager",void 0),e([pe({attribute:!1})],ID.prototype,"conditionStateManager",void 0),ID=e([ue("advanced-camera-card-views")],ID);console.info("%c  Advanced Camera Card %c 7.27.3 ","padding: 3px; color: black; background: pink;","padding: 3px; color: black; background: white;"),window.customCards=window.customCards||[],window.customCards.push({type:"advanced-camera-card",name:hv("common.advanced_camera_card"),description:hv("common.advanced_camera_card_description"),preview:!0,documentationURL:"https://github.com/dermotduffy/advanced-camera-card"});let OD=class extends le{constructor(){super(...arguments),this._controller=new XA(this,(()=>this._refMain.value?.scroll({top:0})),(()=>this._refMenu.value?.toggleMenu()),(()=>this._refEffects.value??null)),this._menuButtonController=new eT,this._refEffects=Pe(),this._refElements=Pe(),this._refMain=Pe(),this._refMenu=Pe(),this._refOverlay=Pe(),this._refViews=Pe()}get _config(){return this._controller.getConfigManager().getConfig()}get _hass(){return this._controller.getHASSManager().getHASS()}set hass(e){this._controller.getHASSManager().setHASS(e),this._refMenu.value&&(this._refMenu.value.hass=e),this._refElements.value&&(this._refElements.value.hass=e),this._refViews.value&&(this._refViews.value.hass=e)}set isPanel(e){this._controller.getConditionStateManager().setState({panel:e})}get isPanel(){return!!this._controller.getConditionStateManager().getState().panel}static async getConfigElement(){return await XA.getConfigElement()}static getStubConfig(e,t){return XA.getStubConfig(t)}setConfig(e){this._controller.getConfigManager().setConfig(e)}shouldUpdate(){return!!this.isConnected&&(this._controller.getMessageManager().hasMessage()||this._controller.getInitializationManager().isInitializedMandatory()||this._controller.getInitializationManager().initializeMandatory(),!0)}_renderMenuStatusContainer(e){if(!this._config)return;const t=this._config.menu.style,n=this._config.menu.position,r=this._config.status_bar.style,a=this._config.status_bar.position;if("none"===t&&"none"===r||"overlay"===e&&"outside"===t&&"outside"===r||"overlay"!==e&&("outside"!==t||n!==e)&&("outside"!==r||a!==e))return;const i=i=>{const o="none"!==t&&("outside"===t&&"outerlay"===i&&n===e||"outside"!==t&&"overlay"===i),s="none"!==r&&("outside"===r&&"outerlay"===i&&a===e||"outside"!==r&&"overlay"===i),c="left"===n||"right"===n||"bottom"===n&&"hidden"===t&&"popup"!==r||"top"===n&&"popup"===r;return q`
        ${o&&c?this._renderMenu(n):""}
        ${s?this._renderStatusBar(a):""}
        ${o&&!c?this._renderMenu(n):""}
      `};return q`
      ${"overlay"===e?q`<advanced-camera-card-overlay
            >${i("overlay")}</advanced-camera-card-overlay
          >`:q`<div class="outerlay" data-position="${e}">
            ${i("outerlay")}
          </div>`}
    `}_renderMenu(e){const t=this._controller.getViewManager().getView();if(this._hass&&this._config)return q`
      <advanced-camera-card-menu
        ${Fe(this._refMenu)}
        slot=${be(e)}
        .hass=${this._hass}
        .menuConfig=${this._config.menu}
        .buttons=${this._menuButtonController.calculateButtons(this._hass,this._config,this._controller.getCameraManager(),this._controller.getFoldersManager(),{currentMediaLoadedInfo:this._controller.getMediaLoadedInfoManager().get(),fullscreenManager:this._controller.getFullscreenManager(),inExpandedMode:this._controller.getExpandManager().isExpanded(),mediaPlayerController:this._controller.getMediaPlayerManager(),microphoneManager:this._controller.getMicrophoneManager(),showCameraUIButton:this._controller.getCameraURLManager().hasCameraURL(),view:t,viewManager:this._controller.getViewManager()})}
        .entityRegistryManager=${this._controller.getEntityRegistryManager()}
      ></advanced-camera-card-menu>
    `}_renderStatusBar(e){if(this._config)return q`
      <advanced-camera-card-status-bar
        slot=${be(e)}
        .items=${this._controller.getStatusBarItemManager().calculateItems({statusConfig:this._config.status_bar,cameraManager:this._controller.getCameraManager(),view:this._controller.getViewManager().getView(),mediaLoadedInfo:this._controller.getMediaLoadedInfoManager().get()})}
        .config=${this._config.status_bar}
      ></advanced-camera-card-status-bar>
    `}updated(){this._controller.getInitializationManager().isInitializedMandatory()&&this._controller.getQueryStringManager().executeIfNecessary()}_renderInDialogIfNecessary(e){return this._controller.getExpandManager().isExpanded()?q` <web-dialog
        open
        center
        @close=${()=>{this._controller.getExpandManager().setExpanded(!1)}}
      >
        ${e}
      </web-dialog>`:e}render(){if(!this._hass)return;const e="outside"===this._config?.menu.style||"outside"===this._config?.status_bar.style,t={main:!0,"curve-top":!e||"top"!==this._config?.menu.position&&"top"!==this._config?.status_bar.position,"curve-bottom":!e||"bottom"!==this._config?.menu.position&&"bottom"!==this._config?.status_bar.position},n=this._controller.getActionsManager().getMergedActions(),r=this._controller.getCameraManager(),a=!1!==this._config?.performance?.features.card_loading_indicator&&!this._controller.getMessageManager().hasMessage();return this._renderInDialogIfNecessary(q` <advanced-camera-card-effects
          ${Fe(this._refEffects)}
        ></advanced-camera-card-effects>
        <ha-card
          id="ha-card"
          .actionHandler=${Yu({hasHold:Uu(n.hold_action),hasDoubleClick:Uu(n.double_tap_action)})}
          style="${He(this._controller.getStyleManager().getAspectRatioStyle())}"
          @advanced-camera-card:message=${e=>this._controller.getMessageManager().setMessageIfHigherPriority(e.detail)}
          @advanced-camera-card:media:loaded=${e=>this._controller.getMediaLoadedInfoManager().set(e.detail)}
          @advanced-camera-card:media:unloaded=${()=>this._controller.getMediaLoadedInfoManager().clear()}
          @advanced-camera-card:media:volumechange=${()=>this.requestUpdate()}
          @advanced-camera-card:media:play=${()=>this.requestUpdate()}
          @advanced-camera-card:media:pause=${()=>this.requestUpdate()}
          @advanced-camera-card:focus=${()=>this.focus()}
        >
          ${a?q`<advanced-camera-card-loading
                .loaded=${this._controller.getInitializationManager().wasEverInitialized()}
                .effectsControllerAPI=${!1!==this._config?.performance?.features.card_loading_effects?this._controller.getEffectsControllerAPI():void 0}
              ></advanced-camera-card-loading>`:""}
          ${this._renderMenuStatusContainer("top")}
          ${this._renderMenuStatusContainer("overlay")}
          <div ${Fe(this._refMain)} class="${ye(t)}">
            <advanced-camera-card-views
              ${Fe(this._refViews)}
              .hass=${this._hass}
              .viewManagerEpoch=${this._controller.getViewManager().getEpoch()}
              .cameraManager=${r}
              .foldersManager=${this._controller.getFoldersManager()}
              .viewItemManager=${this._controller.getViewItemManager()}
              .resolvedMediaCache=${this._controller.getResolvedMediaCache()}
              .config=${this._controller.getConfigManager().getConfig()}
              .cardWideConfig=${this._controller.getConfigManager().getCardWideConfig()}
              .rawConfig=${this._controller.getConfigManager().getRawConfig()}
              .configManager=${this._controller.getConfigManager()}
              .hide=${!!this._controller.getMessageManager().hasMessage()}
              .microphoneState=${this._controller.getMicrophoneManager().getState()}
              .conditionStateManager=${this._controller.getConditionStateManager()}
              .triggeredCameraIDs=${this._config?.view.triggers.show_trigger_status?this._controller.getTriggersManager().getTriggeredCameraIDs():void 0}
              .deviceRegistryManager=${this._controller.getDeviceRegistryManager()}
            ></advanced-camera-card-views>
            ${this._controller.getMessageManager().hasMessage()?TO(this._controller.getMessageManager().getMessage()):""}
          </div>
          ${this._renderMenuStatusContainer("bottom")}
          ${this._config?.elements?q` <advanced-camera-card-elements
                ${Fe(this._refElements)}
                .hass=${this._hass}
                .elements=${this._config?.elements}
                .conditionStateManager=${this._controller.getConditionStateManager()}
                @advanced-camera-card:menu:add=${e=>{this._menuButtonController.addDynamicMenuButton(e.detail),this.requestUpdate()}}
                @advanced-camera-card:menu:remove=${e=>{this._menuButtonController.removeDynamicMenuButton(e.detail),this.requestUpdate()}}
                @advanced-camera-card:status-bar:add=${e=>{this._controller.getStatusBarItemManager().addDynamicStatusBarItem(e.detail)}}
                @advanced-camera-card:status-bar:remove=${e=>{this._controller.getStatusBarItemManager().removeDynamicStatusBarItem(e.detail)}}
                @advanced-camera-card:condition-state-manager:get=${e=>{e.conditionStateManager=this._controller.getConditionStateManager()}}
              >
              </advanced-camera-card-elements>`:""}
        </ha-card>`)}static get styles(){return o(':host([themes~=dark]) {\n  --sidebar-text-color: var(--primary-text-color);\n  --sidebar-background-color: var(--card-background-color);\n  --app-header-text-color: var(--sidebar-text-color);\n  --app-header-background-color: var(--sidebar-background-color);\n  --app-header-border-bottom: 1px solid var(--divider-color);\n  --primary-background-color: #111111;\n  --card-background-color: #1c1c1c;\n  --secondary-background-color: #282828;\n  --clear-background-color: #111111;\n  --primary-text-color: #e1e1e1;\n  --secondary-text-color: #9b9b9b;\n  --disabled-text-color: #6f6f6f;\n  --switch-unchecked-button-color: #999999;\n  --switch-unchecked-track-color: #9b9b9b;\n  --divider-color: rgba(225, 225, 225, 0.12);\n  --outline-color: rgba(225, 225, 225, 0.12);\n  --outline-hover-color: rgba(225, 225, 225, 0.24);\n  --shadow-color: rgba(0, 0, 0, 0.48);\n  --mdc-ripple-color: #aaaaaa;\n  --mdc-linear-progress-buffer-color: rgba(255, 255, 255, 0.1);\n  --input-idle-line-color: rgba(255, 255, 255, 0.42);\n  --input-hover-line-color: rgba(255, 255, 255, 0.87);\n  --input-disabled-line-color: rgba(255, 255, 255, 0.06);\n  --input-outlined-idle-border-color: rgba(255, 255, 255, 0.38);\n  --input-outlined-hover-border-color: rgba(255, 255, 255, 0.87);\n  --input-outlined-disabled-border-color: rgba(255, 255, 255, 0.06);\n  --input-fill-color: rgba(255, 255, 255, 0.05);\n  --input-disabled-fill-color: rgba(255, 255, 255, 0.02);\n  --input-ink-color: rgba(255, 255, 255, 0.87);\n  --input-label-ink-color: rgba(255, 255, 255, 0.6);\n  --input-disabled-ink-color: rgba(255, 255, 255, 0.37);\n  --input-dropdown-icon-color: rgba(255, 255, 255, 0.54);\n  --codemirror-keyword: #c792ea;\n  --codemirror-operator: #89ddff;\n  --codemirror-variable: #f07178;\n  --codemirror-variable-2: #eeffff;\n  --codemirror-variable-3: #decb6b;\n  --codemirror-builtin: #ffcb6b;\n  --codemirror-atom: #f78c6c;\n  --codemirror-number: #ff5370;\n  --codemirror-def: #82aaff;\n  --codemirror-string: #c3e88d;\n  --codemirror-string-2: #f07178;\n  --codemirror-comment: #545454;\n  --codemirror-tag: #ff5370;\n  --codemirror-meta: #ffcb6b;\n  --codemirror-attribute: #c792ea;\n  --codemirror-property: #c792ea;\n  --codemirror-qualifier: #decb6b;\n  --codemirror-type: #decb6b;\n  --energy-grid-return-color: #a280db;\n  --map-filter: invert(0.9) hue-rotate(170deg) brightness(1.5) contrast(1.2)\n    saturate(0.3);\n  --disabled-color: #464646;\n  --ha-button-primary-light-color: #4082a040;\n  --ha-button-warning-light-color: #917b54c1;\n  --ha-button-neutral-color: #d9dae0;\n  --ha-button-neutral-light-color: #6a7081;\n  --bar-box-shadow: 0 2px 12px var(--shadow-color);\n  /* text */\n  --ha-color-text-primary: var(--white-color);\n  --ha-color-text-secondary: var(--ha-color-neutral-80);\n  --ha-color-text-link: var(--ha-color-primary-60);\n  /* border primary */\n  --ha-color-border-normal: var(--ha-color-primary-50);\n  /* border neutral */\n  --ha-color-border-neutral-quiet: var(--ha-color-neutral-40);\n  --ha-color-border-neutral-normal: var(--ha-color-neutral-50);\n  --ha-color-border-neutral-loud: var(--ha-color-neutral-70);\n  /* border danger */\n  --ha-color-border-danger-normal: var(--ha-color-red-50);\n  --ha-color-border-danger-loud: var(--ha-color-red-50);\n  /* border warning */\n  --ha-color-border-warning-normal: var(--ha-color-orange-50);\n  --ha-color-border-warning-loud: var(--ha-color-orange-50);\n  /* fill primary quiet */\n  --ha-color-fill-primary-quiet-resting: var(--ha-color-primary-05);\n  --ha-color-fill-primary-quiet-hover: var(--ha-color-primary-10);\n  --ha-color-fill-primary-quiet-active: var(--ha-color-primary-05);\n  /* fill primary normal */\n  --ha-color-fill-primary-normal-resting: var(--ha-color-primary-10);\n  --ha-color-fill-primary-normal-hover: var(--ha-color-primary-20);\n  --ha-color-fill-primary-normal-active: var(--ha-color-primary-10);\n  /* fill neutral quiet */\n  --ha-color-fill-neutral-quiet-resting: var(--ha-color-neutral-05);\n  --ha-color-fill-neutral-quiet-hover: var(--ha-color-neutral-10);\n  --ha-color-fill-neutral-quiet-active: var(--ha-color-neutral-00);\n  /* fill neutral normal */\n  --ha-color-fill-neutral-normal-resting: var(--ha-color-neutral-10);\n  --ha-color-fill-neutral-normal-hover: var(--ha-color-neutral-20);\n  --ha-color-fill-neutral-normal-active: var(--ha-color-neutral-10);\n  /* fill disabled quiet */\n  --ha-color-fill-disabled-quiet-resting: var(--ha-color-neutral-10);\n  /* fill disabled normal */\n  --ha-color-fill-disabled-normal-resting: var(--ha-color-neutral-20);\n  /* fill disabled loud */\n  --ha-color-fill-disabled-loud-resting: var(--ha-color-neutral-30);\n  /* fill danger quiet */\n  --ha-color-fill-danger-quiet-resting: var(--ha-color-red-05);\n  --ha-color-fill-danger-quiet-hover: var(--ha-color-red-10);\n  --ha-color-fill-danger-quiet-active: var(--ha-color-red-05);\n  /* fill danger normal */\n  --ha-color-fill-danger-normal-resting: var(--ha-color-red-10);\n  --ha-color-fill-danger-normal-hover: var(--ha-color-red-20);\n  --ha-color-fill-danger-normal-active: var(--ha-color-red-10);\n  /* fill danger loud */\n  --ha-color-fill-danger-loud-resting: var(--ha-color-red-40);\n  --ha-color-fill-danger-loud-hover: var(--ha-color-red-30);\n  --ha-color-fill-danger-loud-active: var(--ha-color-red-40);\n  /* fill warning quiet */\n  --ha-color-fill-warning-quiet-resting: var(--ha-color-orange-05);\n  --ha-color-fill-warning-quiet-hover: var(--ha-color-orange-10);\n  --ha-color-fill-warning-quiet-active: var(--ha-color-orange-05);\n  /* fill warning normal */\n  --ha-color-fill-warning-normal-resting: var(--ha-color-orange-10);\n  --ha-color-fill-warning-normal-hover: var(--ha-color-orange-20);\n  --ha-color-fill-warning-normal-active: var(--ha-color-orange-10);\n  /* fill warning loud */\n  --ha-color-fill-warning-loud-resting: var(--ha-color-orange-40);\n  --ha-color-fill-warning-loud-hover: var(--ha-color-orange-30);\n  --ha-color-fill-warning-loud-active: var(--ha-color-orange-40);\n  /* fill success quiet */\n  --ha-color-fill-success-quiet-resting: var(--ha-color-green-05);\n  --ha-color-fill-success-quiet-hover: var(--ha-color-green-10);\n  --ha-color-fill-success-quiet-active: var(--ha-color-green-05);\n  /* fill success normal */\n  --ha-color-fill-success-normal-resting: var(--ha-color-green-10);\n  --ha-color-fill-success-normal-hover: var(--ha-color-green-20);\n  --ha-color-fill-success-normal-active: var(--ha-color-green-10);\n  /* fill success loud */\n  --ha-color-fill-success-loud-resting: var(--ha-color-green-40);\n  --ha-color-fill-success-loud-hover: var(--ha-color-green-30);\n  --ha-color-fill-success-loud-active: var(--ha-color-green-40);\n  /* on primary */\n  --ha-color-on-primary-quiet: var(--ha-color-primary-70);\n  --ha-color-on-primary-normal: var(--ha-color-primary-60);\n  /* on neutral */\n  --ha-color-on-neutral-quiet: var(--ha-color-neutral-70);\n  --ha-color-on-neutral-normal: var(--ha-color-neutral-60);\n  --ha-color-on-neutral-loud: var(--white-color);\n  /* on disabled */\n  --ha-color-on-disabled-quiet: var(--ha-color-neutral-40);\n  --ha-color-on-disabled-normal: var(--ha-color-neutral-50);\n  --ha-color-on-disabled-loud: var(--ha-color-neutral-50);\n  /* on danger */\n  --ha-color-on-danger-quiet: var(--ha-color-red-70);\n  --ha-color-on-danger-normal: var(--ha-color-red-60);\n  --ha-color-on-danger-loud: var(--white-color);\n  /* on warning */\n  --ha-color-on-warning-quiet: var(--ha-color-orange-70);\n  --ha-color-on-warning-normal: var(--ha-color-orange-60);\n  --ha-color-on-warning-loud: var(--white-color);\n  /* on success */\n  --ha-color-on-success-quiet: var(--ha-color-green-70);\n  --ha-color-on-success-normal: var(--ha-color-green-60);\n  --ha-color-on-success-loud: var(--white-color);\n  /* Surfaces */\n  --ha-color-surface-default: var(--ha-color-neutral-10);\n  --ha-color-on-surface-default: var(--ha-color-neutral-95);\n}\n\n:host([themes~=light]) {\n  /* text */\n  --primary-text-color: var(--ha-color-text-primary);\n  --secondary-text-color: var(--ha-color-text-secondary);\n  --text-primary-color: #ffffff;\n  --text-light-primary-color: #212121;\n  --disabled-text-color: #bdbdbd;\n  /* main interface colors */\n  --primary-color: var(--ha-color-primary-40);\n  --dark-primary-color: #0288d1;\n  --darker-primary-color: #016194;\n  --light-primary-color: #b3e5fc;\n  --accent-color: #ff9800;\n  --divider-color: rgba(0, 0, 0, 0.12);\n  --outline-color: rgba(0, 0, 0, 0.12);\n  --outline-hover-color: rgba(0, 0, 0, 0.24);\n  --shadow-color: rgba(0, 0, 0, 0.16);\n  /* rgb */\n  --rgb-primary-color: 0, 154, 199;\n  --rgb-accent-color: 255, 152, 0;\n  --rgb-primary-text-color: 33, 33, 33;\n  --rgb-secondary-text-color: 114, 114, 114;\n  --rgb-text-primary-color: 255, 255, 255;\n  --rgb-card-background-color: 255, 255, 255;\n  --rgb-warning-color: 255, 166, 0;\n  --rgb-error-color: 219, 68, 55;\n  --rgb-success-color: 67, 160, 71;\n  --rgb-info-color: 3, 155, 229;\n  --scrollbar-thumb-color: rgb(194, 194, 194);\n  --error-color: #db4437;\n  --warning-color: #ffa600;\n  --success-color: #43a047;\n  --info-color: #039be5;\n  /* backgrounds */\n  --card-background-color: #ffffff;\n  --primary-background-color: #fafafa;\n  --secondary-background-color: #e5e5e5; /* behind the cards on state */\n  --clear-background-color: #ffffff;\n  /* for label-badge */\n  --label-badge-grey: #9e9e9e;\n  /* states icon */\n  --state-icon-color: #44739e;\n  /* an error state is anything that would be considered an error */\n  /* --state-icon-error-color: #db4437; derived from error-color */\n  /* energy */\n  --energy-grid-consumption-color: #488fc2;\n  --energy-grid-return-color: #8353d1;\n  --energy-solar-color: #ff9800;\n  --energy-non-fossil-color: #0f9d58;\n  --energy-battery-out-color: #4db6ac;\n  --energy-battery-in-color: #f06292;\n  --energy-gas-color: #8e021b;\n  --energy-water-color: #00bcd4;\n  /* color */\n  --disabled-color: #bdbdbd;\n  --red-color: #f44336;\n  --pink-color: #e91e63;\n  --purple-color: #926bc7;\n  --deep-purple-color: #6e41ab;\n  --indigo-color: #3f51b5;\n  --blue-color: #2196f3;\n  --light-blue-color: #03a9f4;\n  --cyan-color: #00bcd4;\n  --teal-color: #009688;\n  --green-color: #4caf50;\n  --light-green-color: #8bc34a;\n  --lime-color: #cddc39;\n  --yellow-color: #ffeb3b;\n  --amber-color: #ffc107;\n  --orange-color: #ff9800;\n  --deep-orange-color: #ff6f22;\n  --brown-color: #795548;\n  --light-grey-color: #bdbdbd;\n  --grey-color: #9e9e9e;\n  --dark-grey-color: #606060;\n  --blue-grey-color: #607d8b;\n  --black-color: #000000;\n  --white-color: #ffffff;\n  /* colors - used for graphs, calendars, maps, etc */\n  --color-1: #4269d0;\n  --color-2: #f4bd4a;\n  --color-3: #ff725c;\n  --color-4: #6cc5b0;\n  --color-5: #a463f2;\n  --color-6: #ff8ab7;\n  --color-7: #9c6b4e;\n  --color-8: #97bbf5;\n  --color-9: #01ab63;\n  --color-10: #094bad;\n  --color-11: #c99000;\n  --color-12: #d84f3e;\n  --color-13: #49a28f;\n  --color-14: #048732;\n  --color-15: #d96895;\n  --color-16: #8043ce;\n  --color-17: #7599d1;\n  --color-18: #7a4c31;\n  --color-19: #6989f4;\n  --color-20: #ffd444;\n  --color-21: #ff957c;\n  --color-22: #8fe9d3;\n  --color-23: #62cc71;\n  --color-24: #ffadda;\n  --color-25: #c884ff;\n  --color-26: #badeff;\n  --color-27: #bf8b6d;\n  --color-28: #927acc;\n  --color-29: #97ee3f;\n  --color-30: #bf3947;\n  --color-31: #9f5b00;\n  --color-32: #f48758;\n  --color-33: #8caed6;\n  --color-34: #f2b94f;\n  --color-35: #eff26e;\n  --color-36: #e43872;\n  --color-37: #d9b100;\n  --color-38: #9d7a00;\n  --color-39: #698cff;\n  --color-40: #00d27e;\n  --color-41: #d06800;\n  --color-42: #009f82;\n  --color-43: #c49200;\n  --color-44: #cbe8ff;\n  --color-45: #fecddf;\n  --color-46: #c27eb6;\n  --color-47: #8cd2ce;\n  --color-48: #c4b8d9;\n  --color-49: #f883b0;\n  --color-50: #a49100;\n  --color-51: #f48800;\n  --color-52: #27d0df;\n  --color-53: #a04a9b;\n  --color-54: #4269d0;\n  /* history colors */\n  --history-unavailable-color: transparent;\n  /* input components */\n  --input-idle-line-color: rgba(0, 0, 0, 0.42);\n  --input-hover-line-color: rgba(0, 0, 0, 0.87);\n  --input-disabled-line-color: rgba(0, 0, 0, 0.06);\n  --input-outlined-idle-border-color: rgba(0, 0, 0, 0.38);\n  --input-outlined-hover-border-color: rgba(0, 0, 0, 0.87);\n  --input-outlined-disabled-border-color: rgba(0, 0, 0, 0.06);\n  --input-fill-color: rgb(245, 245, 245);\n  --input-disabled-fill-color: rgb(250, 250, 250);\n  --input-ink-color: rgba(0, 0, 0, 0.87);\n  --input-label-ink-color: rgba(0, 0, 0, 0.6);\n  --input-disabled-ink-color: rgba(0, 0, 0, 0.37);\n  --input-dropdown-icon-color: rgba(0, 0, 0, 0.54);\n  /* for label-badge */\n  --label-badge-red: var(--error-color);\n  --label-badge-blue: var(--info-color);\n  --label-badge-green: var(--success-color);\n  --label-badge-yellow: var(--warning-color);\n  /* state color */\n  --state-active-color: var(--amber-color);\n  --state-inactive-color: var(--grey-color);\n  --state-unavailable-color: var(\n    --state-icon-unavailable-color,\n    var(--disabled-text-color)\n  );\n  /* state domain colors */\n  --state-alarm_control_panel-armed_away-color: var(--green-color);\n  --state-alarm_control_panel-armed_custom_bypass-color: var(--green-color);\n  --state-alarm_control_panel-armed_home-color: var(--green-color);\n  --state-alarm_control_panel-armed_night-color: var(--green-color);\n  --state-alarm_control_panel-armed_vacation-color: var(--green-color);\n  --state-alarm_control_panel-arming-color: var(--orange-color);\n  --state-alarm_control_panel-disarming-color: var(--orange-color);\n  --state-alarm_control_panel-pending-color: var(--orange-color);\n  --state-alarm_control_panel-triggered-color: var(--red-color);\n  --state-alert-off-color: var(--orange-color);\n  --state-alert-on-color: var(--red-color);\n  --state-binary_sensor-active-color: var(--amber-color);\n  --state-binary_sensor-battery-on-color: var(--red-color);\n  --state-binary_sensor-carbon_monoxide-on-color: var(--red-color);\n  --state-binary_sensor-gas-on-color: var(--red-color);\n  --state-binary_sensor-heat-on-color: var(--red-color);\n  --state-binary_sensor-lock-on-color: var(--red-color);\n  --state-binary_sensor-moisture-on-color: var(--red-color);\n  --state-binary_sensor-problem-on-color: var(--red-color);\n  --state-binary_sensor-safety-on-color: var(--red-color);\n  --state-binary_sensor-smoke-on-color: var(--red-color);\n  --state-binary_sensor-sound-on-color: var(--red-color);\n  --state-binary_sensor-tamper-on-color: var(--red-color);\n  --state-climate-auto-color: var(--green-color);\n  --state-climate-cool-color: var(--blue-color);\n  --state-climate-dry-color: var(--orange-color);\n  --state-climate-fan_only-color: var(--cyan-color);\n  --state-climate-heat-color: var(--deep-orange-color);\n  --state-climate-heat-cool-color: var(--amber-color);\n  --state-cover-active-color: var(--purple-color);\n  --state-device_tracker-active-color: var(--blue-color);\n  --state-device_tracker-home-color: var(--green-color);\n  --state-fan-active-color: var(--cyan-color);\n  --state-humidifier-on-color: var(--blue-color);\n  --state-lawn_mower-error-color: var(--red-color);\n  --state-lawn_mower-mowing-color: var(--teal-color);\n  --state-light-active-color: var(--amber-color);\n  --state-lock-jammed-color: var(--red-color);\n  --state-lock-locked-color: var(--green-color);\n  --state-lock-locking-color: var(--orange-color);\n  --state-lock-unlocked-color: var(--red-color);\n  --state-lock-unlocking-color: var(--orange-color);\n  --state-lock-open-color: var(--red-color);\n  --state-lock-opening-color: var(--orange-color);\n  --state-media_player-active-color: var(--light-blue-color);\n  --state-person-active-color: var(--blue-color);\n  --state-person-home-color: var(--green-color);\n  --state-plant-active-color: var(--red-color);\n  --state-siren-active-color: var(--red-color);\n  --state-sun-above_horizon-color: var(--amber-color);\n  --state-sun-below_horizon-color: var(--indigo-color);\n  --state-switch-active-color: var(--amber-color);\n  --state-update-active-color: var(--orange-color);\n  --state-vacuum-active-color: var(--teal-color);\n  --state-valve-active-color: var(--blue-color);\n  --state-sensor-battery-high-color: var(--green-color);\n  --state-sensor-battery-low-color: var(--red-color);\n  --state-sensor-battery-medium-color: var(--orange-color);\n  --state-water_heater-eco-color: var(--green-color);\n  --state-water_heater-electric-color: var(--orange-color);\n  --state-water_heater-gas-color: var(--orange-color);\n  --state-water_heater-heat_pump-color: var(--orange-color);\n  --state-water_heater-high_demand-color: var(--deep-orange-color);\n  --state-water_heater-performance-color: var(--deep-orange-color);\n  --state-weather-clear_night-color: var(--deep-purple-color);\n  --state-weather-cloudy-color: var(--light-grey-color);\n  --state-weather-exceptional-color: var(--red-color);\n  --state-weather-fog-color: var(--grey-color);\n  --state-weather-hail-color: var(--cyan-color);\n  --state-weather-lightning_rainy-color: var(--lime-color);\n  --state-weather-lightning-color: var(--yellow-color);\n  --state-weather-partlycloudy-color: var(--blue-grey-color);\n  --state-weather-pouring-color: var(--indigo-color);\n  --state-weather-rainy-color: var(--blue-color);\n  --state-weather-snowy_rainy-color: var(--light-blue-color);\n  --state-weather-snowy-color: #c0e0ff;\n  --state-weather-sunny-color: var(--amber-color);\n  --state-weather-windy_variant-color: var(--green-color);\n  --state-weather-windy-color: var(--green-color);\n  /* history colors */\n  --history-unknown-color: var(--dark-grey-color);\n  --state-icon-error-color: var(--error-state-color, var(--error-color));\n  --sidebar-text-color: var(--primary-text-color);\n  --sidebar-background-color: var(--card-background-color);\n  --sidebar-selected-text-color: var(--primary-color);\n  --sidebar-selected-icon-color: var(--primary-color);\n  --sidebar-icon-color: rgba(var(--rgb-primary-text-color), 0.6);\n  --switch-checked-color: var(--primary-color);\n  --switch-checked-button-color: var(\n    --switch-checked-color,\n    var(--primary-background-color)\n  );\n  --switch-checked-track-color: var(--switch-checked-color, #000000);\n  --switch-unchecked-button-color: var(\n    --switch-unchecked-color,\n    var(--primary-background-color)\n  );\n  --switch-unchecked-track-color: var(--switch-unchecked-color, #000000);\n  --slider-color: var(--primary-color);\n  --slider-secondary-color: var(--light-primary-color);\n  --slider-track-color: var(--scrollbar-thumb-color);\n  --label-badge-background-color: var(--card-background-color);\n  --label-badge-text-color: rgba(var(--rgb-primary-text-color), 0.8);\n  --table-header-background-color: var(--input-fill-color);\n  --table-row-background-color: var(--primary-background-color);\n  --table-row-alternative-background-color: var(--secondary-background-color);\n  --data-table-background-color: var(--card-background-color);\n  --markdown-code-background-color: var(--primary-background-color);\n  --bar-box-shadow: 0 2px 12px var(--shadow-color);\n  /* https://github.com/material-components/material-web/blob/master/docs/theming.md */\n  --mdc-theme-primary: var(--primary-color);\n  --mdc-theme-secondary: var(--accent-color);\n  --mdc-theme-background: var(--primary-background-color);\n  --mdc-theme-surface: var(--card-background-color);\n  --mdc-theme-on-primary: var(--text-primary-color);\n  --mdc-theme-on-secondary: var(--text-primary-color);\n  --mdc-theme-on-surface: var(--primary-text-color);\n  --mdc-theme-text-disabled-on-light: var(--disabled-text-color);\n  --mdc-theme-text-primary-on-background: var(--primary-text-color);\n  --mdc-theme-text-secondary-on-background: var(--secondary-text-color);\n  --mdc-theme-text-hint-on-background: var(--secondary-text-color);\n  --mdc-theme-text-icon-on-background: var(--secondary-text-color);\n  --mdc-theme-error: var(--error-color);\n  --app-header-text-color: var(--sidebar-text-color);\n  --app-header-background-color: var(--sidebar-background-color);\n  --app-header-border-bottom: 1px solid var(--divider-color);\n  --app-theme-color: var(--app-header-background-color);\n  --mdc-checkbox-unchecked-color: rgba(var(--rgb-primary-text-color), 0.54);\n  --mdc-checkbox-disabled-color: var(--disabled-text-color);\n  --mdc-radio-unchecked-color: rgba(var(--rgb-primary-text-color), 0.54);\n  --mdc-radio-disabled-color: var(--disabled-text-color);\n  --mdc-tab-text-label-color-default: var(--primary-text-color);\n  --mdc-button-disabled-ink-color: var(--disabled-text-color);\n  --mdc-button-outline-color: var(--outline-color);\n  --mdc-dialog-scroll-divider-color: var(--divider-color);\n  --mdc-dialog-heading-ink-color: var(--primary-text-color);\n  --mdc-dialog-content-ink-color: var(--primary-text-color);\n  --mdc-top-app-bar-fixed-box-shadow: var(--bar-box-shadow);\n  --mdc-text-field-idle-line-color: var(--input-idle-line-color);\n  --mdc-text-field-hover-line-color: var(--input-hover-line-color);\n  --mdc-text-field-disabled-line-color: var(--input-disabled-line-color);\n  --mdc-text-field-outlined-idle-border-color: var(--input-outlined-idle-border-color);\n  --mdc-text-field-outlined-hover-border-color: var(--input-outlined-hover-border-color);\n  --mdc-text-field-outlined-disabled-border-color: var(\n    --input-outlined-disabled-border-color\n  );\n  --mdc-text-field-fill-color: var(--input-fill-color);\n  --mdc-text-field-disabled-fill-color: var(--input-disabled-fill-color);\n  --mdc-text-field-ink-color: var(--input-ink-color);\n  --mdc-text-field-label-ink-color: var(--input-label-ink-color);\n  --mdc-text-field-disabled-ink-color: var(--input-disabled-ink-color);\n  --mdc-select-idle-line-color: var(--input-idle-line-color);\n  --mdc-select-hover-line-color: var(--input-hover-line-color);\n  --mdc-select-outlined-idle-border-color: var(--input-outlined-idle-border-color);\n  --mdc-select-outlined-hover-border-color: var(--input-outlined-hover-border-color);\n  --mdc-select-outlined-disabled-border-color: var(\n    --input-outlined-disabled-border-color\n  );\n  --mdc-select-fill-color: var(--input-fill-color);\n  --mdc-select-disabled-fill-color: var(--input-disabled-fill-color);\n  --mdc-select-ink-color: var(--input-ink-color);\n  --mdc-select-label-ink-color: var(--input-label-ink-color);\n  --mdc-select-disabled-ink-color: var(--input-disabled-ink-color);\n  --mdc-select-dropdown-icon-color: var(--input-dropdown-icon-color);\n  --mdc-select-disabled-dropdown-icon-color: var(--input-disabled-ink-color);\n  --ha-assist-chip-filled-container-color: rgba(var(--rgb-primary-text-color), 0.15);\n  --ha-assist-chip-active-container-color: rgba(var(--rgb-primary-color), 0.15);\n  --chip-background-color: rgba(var(--rgb-primary-text-color), 0.15);\n  --ha-color-focus: var(--ha-color-orange-60);\n  /* text */\n  --ha-color-text-primary: var(--ha-color-neutral-05);\n  --ha-color-text-secondary: var(--ha-color-neutral-40);\n  --ha-color-text-disabled: var(--ha-color-neutral-60);\n  --ha-color-text-link: var(--ha-color-primary-40);\n  /* border primary */\n  --ha-color-border-primary-quiet: var(--ha-color-primary-90);\n  --ha-color-border-primary-normal: var(--ha-color-primary-70);\n  --ha-color-border-primary-loud: var(--ha-color-primary-40);\n  /* border neutral */\n  --ha-color-border-neutral-quiet: var(--ha-color-neutral-90);\n  --ha-color-border-neutral-normal: var(--ha-color-neutral-60);\n  --ha-color-border-neutral-loud: var(--ha-color-neutral-40);\n  /* border danger */\n  --ha-color-border-danger-quiet: var(--ha-color-red-90);\n  --ha-color-border-danger-normal: var(--ha-color-red-70);\n  --ha-color-border-danger-loud: var(--ha-color-red-40);\n  /* border warning */\n  --ha-color-border-warning-quiet: var(--ha-color-orange-90);\n  --ha-color-border-warning-normal: var(--ha-color-orange-70);\n  --ha-color-border-warning-loud: var(--ha-color-orange-40);\n  /* border success */\n  --ha-color-border-success-quiet: var(--ha-color-green-90);\n  --ha-color-border-success-normal: var(--ha-color-green-70);\n  --ha-color-border-success-loud: var(--ha-color-green-40);\n  /* fill primary quiet */\n  --ha-color-fill-primary-quiet-resting: var(--ha-color-primary-95);\n  --ha-color-fill-primary-quiet-hover: var(--ha-color-primary-90);\n  --ha-color-fill-primary-quiet-active: var(--ha-color-primary-95);\n  /* fill primary normal */\n  --ha-color-fill-primary-normal-resting: var(--ha-color-primary-90);\n  --ha-color-fill-primary-normal-hover: var(--ha-color-primary-80);\n  --ha-color-fill-primary-normal-active: var(--ha-color-primary-90);\n  /* fill primary loud */\n  --ha-color-fill-primary-loud-resting: var(--ha-color-primary-40);\n  --ha-color-fill-primary-loud-hover: var(--ha-color-primary-30);\n  --ha-color-fill-primary-loud-active: var(--ha-color-primary-40);\n  /* fill neutral quiet */\n  --ha-color-fill-neutral-quiet-resting: var(--ha-color-neutral-95);\n  --ha-color-fill-neutral-quiet-hover: var(--ha-color-neutral-90);\n  --ha-color-fill-neutral-quiet-active: var(--ha-color-neutral-95);\n  /* fill neutral normal */\n  --ha-color-fill-neutral-normal-resting: var(--ha-color-neutral-90);\n  --ha-color-fill-neutral-normal-hover: var(--ha-color-neutral-80);\n  --ha-color-fill-neutral-normal-active: var(--ha-color-neutral-90);\n  /* fill neutral loud */\n  --ha-color-fill-neutral-loud-resting: var(--ha-color-neutral-40);\n  --ha-color-fill-neutral-loud-hover: var(--ha-color-neutral-30);\n  --ha-color-fill-neutral-loud-active: var(--ha-color-neutral-40);\n  /* fill disabled quiet */\n  --ha-color-fill-disabled-quiet-resting: var(--ha-color-neutral-95);\n  /* fill disabled normal */\n  --ha-color-fill-disabled-normal-resting: var(--ha-color-neutral-95);\n  /* fill disabled loud */\n  --ha-color-fill-disabled-loud-resting: var(--ha-color-neutral-80);\n  /* fill danger quiet */\n  --ha-color-fill-danger-quiet-resting: var(--ha-color-red-95);\n  --ha-color-fill-danger-quiet-hover: var(--ha-color-red-90);\n  --ha-color-fill-danger-quiet-active: var(--ha-color-red-95);\n  /* fill danger normal */\n  --ha-color-fill-danger-normal-resting: var(--ha-color-red-90);\n  --ha-color-fill-danger-normal-hover: var(--ha-color-red-80);\n  --ha-color-fill-danger-normal-active: var(--ha-color-red-90);\n  /* fill danger loud */\n  --ha-color-fill-danger-loud-resting: var(--ha-color-red-50);\n  --ha-color-fill-danger-loud-hover: var(--ha-color-red-40);\n  --ha-color-fill-danger-loud-active: var(--ha-color-red-50);\n  /* fill warning quiet */\n  --ha-color-fill-warning-quiet-resting: var(--ha-color-orange-95);\n  --ha-color-fill-warning-quiet-hover: var(--ha-color-orange-90);\n  --ha-color-fill-warning-quiet-active: var(--ha-color-orange-95);\n  /* fill warning normal */\n  --ha-color-fill-warning-normal-resting: var(--ha-color-orange-90);\n  --ha-color-fill-warning-normal-hover: var(--ha-color-orange-80);\n  --ha-color-fill-warning-normal-active: var(--ha-color-orange-90);\n  /* fill warning loud */\n  --ha-color-fill-warning-loud-resting: var(--ha-color-orange-70);\n  --ha-color-fill-warning-loud-hover: var(--ha-color-orange-50);\n  --ha-color-fill-warning-loud-active: var(--ha-color-orange-70);\n  /* fill success quiet */\n  --ha-color-fill-success-quiet-resting: var(--ha-color-green-95);\n  --ha-color-fill-success-quiet-hover: var(--ha-color-green-90);\n  --ha-color-fill-success-quiet-active: var(--ha-color-green-95);\n  /* fill success normal */\n  --ha-color-fill-success-normal-resting: var(--ha-color-green-90);\n  --ha-color-fill-success-normal-hover: var(--ha-color-green-80);\n  --ha-color-fill-success-normal-active: var(--ha-color-green-90);\n  /* fill success loud */\n  --ha-color-fill-success-loud-resting: var(--ha-color-green-50);\n  --ha-color-fill-success-loud-hover: var(--ha-color-green-40);\n  --ha-color-fill-success-loud-active: var(--ha-color-green-50);\n  /* on primary */\n  --ha-color-on-primary-quiet: var(--ha-color-primary-50);\n  --ha-color-on-primary-normal: var(--ha-color-primary-40);\n  --ha-color-on-primary-loud: var(--white-color);\n  /* on neutral */\n  --ha-color-on-neutral-quiet: var(--ha-color-neutral-50);\n  --ha-color-on-neutral-normal: var(--ha-color-neutral-40);\n  --ha-color-on-neutral-loud: var(--white-color);\n  /* on disabled */\n  --ha-color-on-disabled-quiet: var(--ha-color-neutral-80);\n  --ha-color-on-disabled-normal: var(--ha-color-neutral-70);\n  --ha-color-on-disabled-loud: var(--ha-color-neutral-95);\n  /* on danger */\n  --ha-color-on-danger-quiet: var(--ha-color-red-50);\n  --ha-color-on-danger-normal: var(--ha-color-red-40);\n  --ha-color-on-danger-loud: var(--white-color);\n  /* on warning */\n  --ha-color-on-warning-quiet: var(--ha-color-orange-50);\n  --ha-color-on-warning-normal: var(--ha-color-orange-40);\n  --ha-color-on-warning-loud: var(--white-color);\n  /* on success */\n  --ha-color-on-success-quiet: var(--ha-color-green-50);\n  --ha-color-on-success-normal: var(--ha-color-green-40);\n  --ha-color-on-success-loud: var(--white-color);\n  /* Surfaces */\n  --ha-color-surface-default: var(--ha-color-neutral-95);\n  --ha-color-on-surface-default: var(--ha-color-neutral-05);\n  /* Scrollable fade */\n  --ha-color-shadow-scrollable-fade: rgba(0, 0, 0, 0.08);\n  --app-header-background-color: #03a9f4;\n  --app-header-text-color: white;\n  --wa-color-surface-border: var(--ha-color-border-neutral-quiet);\n}\n\n:host([themes~=traditional]) {\n  /*********\n   * General\n   *********/\n  --advanced-camera-card-control-background: black;\n  --advanced-camera-card-control-foreground: white;\n  /******\n   * Menu\n   ******/\n  --advanced-camera-card-menu-button-active-color: var(--primary-color, white);\n  --advanced-camera-card-menu-button-background: rgba(0, 0, 0, 0.6);\n  --advanced-camera-card-menu-position-left-alignment-top-background: linear-gradient(180deg, var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), color-mix(in oklab, var(--advanced-camera-card-menu-background), transparent 100%));\n  --advanced-camera-card-menu-position-left-alignment-bottom-background: linear-gradient(0deg, var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), color-mix(in oklab, var(--advanced-camera-card-menu-background), transparent 100%));\n  --advanced-camera-card-menu-position-right-alignment-top-background: linear-gradient(180deg, var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), color-mix(in oklab, var(--advanced-camera-card-menu-background), transparent 100%));\n  --advanced-camera-card-menu-position-right-alignment-bottom-background: linear-gradient(0deg, var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), color-mix(in oklab, var(--advanced-camera-card-menu-background), transparent 100%));\n  --advanced-camera-card-menu-position-top-alignment-left-background: linear-gradient(90deg, var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), color-mix(in oklab, var(--advanced-camera-card-menu-background), transparent 100%));\n  --advanced-camera-card-menu-position-top-alignment-right-background: linear-gradient(270deg, var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), color-mix(in oklab, var(--advanced-camera-card-menu-background), transparent 100%));\n  --advanced-camera-card-menu-position-bottom-alignment-left-background: linear-gradient(90deg, var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), color-mix(in oklab, var(--advanced-camera-card-menu-background), transparent 100%));\n  --advanced-camera-card-menu-position-bottom-alignment-right-background: linear-gradient(270deg, var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), color-mix(in oklab, var(--advanced-camera-card-menu-background), transparent 100%));\n  --advanced-camera-card-menu-position-top-alignment-left-style-outside-background: var(\n    --secondary-background-color\n  );\n  --advanced-camera-card-menu-position-top-alignment-right-style-outside-background: var(\n    --secondary-background-color\n  );\n  --advanced-camera-card-menu-position-bottom-alignment-left-style-outside-background: var(\n    --secondary-background-color\n  );\n  --advanced-camera-card-menu-position-bottom-alignment-right-style-outside-background: var(\n    --secondary-background-color\n  );\n  /************\n   * Status bar\n   ************/\n  --advanced-camera-card-status-bar-color: white;\n  --advanced-camera-card-status-bar-position-top-background: linear-gradient(90deg, var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), color-mix(in oklab, var(--advanced-camera-card-menu-background), transparent 100%));\n  --advanced-camera-card-status-bar-position-bottom-background: linear-gradient(90deg, var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), color-mix(in oklab, var(--advanced-camera-card-menu-background), transparent 100%));\n  --advanced-camera-card-status-bar-position-top-style-outside-background: var(\n    --secondary-background-color\n  );\n  --advanced-camera-card-status-bar-position-bottom-style-outside-background: var(\n    --secondary-background-color\n  );\n  --advanced-camera-card-status-bar-position-top-style-outside-color: var(\n    --secondary-text-color\n  );\n  --advanced-camera-card-status-bar-position-bottom-style-outside-color: var(\n    --secondary-text-color\n  );\n}\n\n:host {\n  /*********\n   * General\n   *********/\n  --advanced-camera-card-exterior: var(--secondary-background-color, black);\n  --advanced-camera-card-background: var(--card-background-color, white);\n  --advanced-camera-card-foreground-primary: var(--primary-color, black);\n  --advanced-camera-card-active-color: var(--accent-color, orange);\n  --advanced-camera-card-warning-color: var(--error-color, red);\n  --advanced-camera-card-text-color: var(--primary-text-color);\n  --advanced-camera-card-divider-color: var(--divider-color);\n  --advanced-camera-card-border-radius-final: var(\n    --advanced-camera-card-border-radius-override,\n    var(--advanced-camera-card-border-radius, var(--ha-card-border-radius, 4px))\n  );\n  --advanced-camera-card-control-background: var(--app-header-background-color);\n  --advanced-camera-card-control-background-opacity: 60%;\n  --advanced-camera-card-control-background-transparent: color-mix(\n    in oklab,\n    var(--advanced-camera-card-control-background),\n    transparent var(--advanced-camera-card-control-background-opacity)\n  );\n  --advanced-camera-card-control-foreground: var(--app-header-text-color);\n  /*********\n   * Buttons\n   *********/\n  --advanced-camera-card-button-color: var(--advanced-camera-card-control-foreground);\n  --advanced-camera-card-button-background: var(\n    --advanced-camera-card-control-background-transparent\n  );\n  --advanced-camera-card-button-border-radius: 50%;\n  /******\n   * Menu\n   ******/\n  --advanced-camera-card-menu-button-active-color: var(\n    --advanced-camera-card-active-color\n  );\n  --advanced-camera-card-menu-button-inactive-color: var(\n    --advanced-camera-card-button-color\n  );\n  --advanced-camera-card-menu-button-critical-color: var(\n    --error-color,\n    var(--advanced-camera-card-warning-color)\n  );\n  --advanced-camera-card-menu-button-background: color-mix(\n    in oklab,\n    var(--advanced-camera-card-menu-button-inactive-color),\n    transparent var(--advanced-camera-card-control-background-opacity)\n  );\n  --advanced-camera-card-menu-background: var(\n    --advanced-camera-card-control-background-transparent\n  );\n  --advanced-camera-card-menu-style-outside-background: var(\n    --advanced-camera-card-control-background\n  );\n  --advanced-camera-card-menu-override-background: unset;\n  --advanced-camera-card-menu-override-button-inactive-color: unset;\n  --advanced-camera-card-menu-override-button-background: unset;\n  /*********\n   * Submenu\n   *********/\n  --advanced-camera-card-submenu-color: var(--advanced-camera-card-text-color);\n  --advanced-camera-card-submenu-background-color: var(\n    --advanced-camera-card-background\n  );\n  --advanced-camera-card-submenu-hover-color: var(--advanced-camera-card-text-color);\n  --advanced-camera-card-submenu-hover-background-color: var(\n    --ha-color-fill-neutral-normal-resting\n  );\n  --advanced-camera-card-submenu-selected-color: var(\n    --advanced-camera-card-foreground-primary\n  );\n  --advanced-camera-card-submenu-selected-background-color: var(\n    --ha-color-fill-primary-quiet-resting\n  );\n  /************\n   * Status bar\n   ************/\n  --advanced-camera-card-status-bar-override-background: unset;\n  --advanced-camera-card-status-bar-override-color: unset;\n  --advanced-camera-card-status-bar-color: var(\n    --advanced-camera-card-control-foreground\n  );\n  --advanced-camera-card-status-bar-background: var(\n    --advanced-camera-card-control-background-transparent\n  );\n  --advanced-camera-card-status-bar-style-outside-background: var(\n    --advanced-camera-card-control-background\n  );\n  /************\n   * Thumbnails\n   ************/\n  --advanced-camera-card-thumbnail-icon-color: var(\n    --advanced-camera-card-foreground-primary\n  );\n  --advanced-camera-card-thumbnail-border-color: var(\n    --advanced-camera-card-foreground-primary\n  );\n  --advanced-camera-card-thumbnail-background: var(--advanced-camera-card-background);\n  --advanced-camera-card-thumbnail-icon-favorite-color: color-mix(\n    in oklab,\n    gold,\n    transparent 25%\n  );\n  --advanced-camera-card-thumbnail-text-color: var(--advanced-camera-card-text-color);\n  /**********\n   * Timeline\n   **********/\n  --advanced-camera-card-timeline-text-color: var(--advanced-camera-card-text-color);\n  --advanced-camera-card-timeline-item-color: var(\n    --advanced-camera-card-foreground-primary\n  );\n  --advanced-camera-card-timeline-tool-color: var(\n    --advanced-camera-card-foreground-primary\n  );\n  --advanced-camera-card-timeline-background: var(--advanced-camera-card-background);\n  --advanced-camera-card-timeline-background-item-color: color-mix(\n    in oklab,\n    var(--advanced-camera-card-timeline-item-color),\n    transparent 90%\n  );\n  --advanced-camera-card-timeline-divider-color: var(\n    --advanced-camera-card-divider-color\n  );\n  --advanced-camera-card-timeline-target-bar-color: var(\n    --advanced-camera-card-active-color\n  );\n  /*******************\n   * Loading Indicator\n   *******************/\n  --advanced-camera-card-loading-background-color: var(\n    --advanced-camera-card-control-background-transparent\n  );\n  --advanced-camera-card-loading-foreground-color: var(\n    --advanced-camera-card-control-foreground\n  );\n  /*********\n   * Message\n   *********/\n  --advanced-camera-card-message-color: var(--advanced-camera-card-text-color);\n  --advanced-camera-card-message-background: var(--advanced-camera-card-background);\n  --advanced-camera-card-message-overlay-background: var(\n    --advanced-camera-card-control-background-transparent\n  );\n  --advanced-camera-card-message-overlay-color: var(\n    --advanced-camera-card-control-foreground\n  );\n  /*********\n  * Trigger\n  *********/\n  --advanced-camera-card-trigger-border-color: var(--advanced-camera-card-warning-color);\n  --advanced-camera-card-trigger-border-color-base: unset;\n  /*****\n  * Grid\n  ******/\n  --advanced-camera-card-grid-selected-border-color: var(\n    --advanced-camera-card-foreground-primary\n  );\n  /****\n  * PTZ\n  *****/\n  --advanced-camera-card-ptz-color: var(--advanced-camera-card-control-foreground);\n  --advanced-camera-card-ptz-background: var(--advanced-camera-card-control-background);\n  --advanced-camera-card-ptz-color-active: color-mix(\n    in oklab,\n    var(--advanced-camera-card-ptz-color),\n    transparent 20%\n  );\n  --advanced-camera-card-ptz-background-active: color-mix(\n    in oklab,\n    var(--advanced-camera-card-ptz-background),\n    transparent 20%\n  );\n  --advanced-camera-card-ptz-color-inactive: color-mix(\n    in oklab,\n    var(--advanced-camera-card-ptz-color),\n    transparent var(--advanced-camera-card-control-background-opacity)\n  );\n  --advanced-camera-card-ptz-background-inactive: color-mix(\n    in oklab,\n    var(--advanced-camera-card-ptz-background),\n    transparent var(--advanced-camera-card-control-background-opacity)\n  );\n}\n\n/************\n * Managing z-indicies and stacking contexts is very challenging on the card,\n * due to the volume of different potentially overlapping surfaces. In\n * particular, care must be taken to not generate new stacking contexts\n * inadvertently which would make "z-index" weaving challenging (e.g. submenu\n * shown for PTZ presets, needs to render "over" the media drawer open/close\n * control).\n *************/\n:host {\n  display: block;\n  position: relative;\n  background-color: var(--advanced-camera-card-background);\n  border-radius: var(--advanced-camera-card-border-radius-final);\n  overflow: auto;\n  height: var(--advanced-camera-card-height);\n  min-height: 100px;\n  pointer-events: all;\n  --advanced-camera-card-expand-max-height: calc((100vh - (2 * 56px)) * 0.85);\n  --advanced-camera-card-expand-max-width: 85vw;\n  --advanced-camera-card-expand-width: none;\n  --advanced-camera-card-expand-height: none;\n  --advanced-camera-card-expand-aspect-ratio: unset;\n  --advanced-camera-card-height: auto;\n}\n\n:host(:not(:hover):not([expanded])) {\n  z-index: auto;\n  isolation: isolate;\n}\n\nadvanced-camera-card-loading {\n  position: absolute;\n  inset: 0;\n  z-index: 6;\n}\n\n:host([dimmable]:not([interaction])) {\n  filter: brightness(75%);\n}\n\n:host([panel]:not([casted])) {\n  height: calc(100vh - var(--kiosk-header-height, var(--header-height)));\n}\n\n:host([panel][casted]) {\n  height: 100%;\n}\n\ndiv.main {\n  position: relative;\n  overflow: auto;\n  width: 100%;\n  height: 100%;\n  margin: auto;\n  display: block;\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n}\n\n/* Hide scrollbar for Chrome, Safari and Opera */\ndiv.main::-webkit-scrollbar {\n  display: none;\n}\n\nha-card {\n  display: flex;\n  flex-direction: column;\n  margin: auto;\n  border: 0px;\n  overflow: visible;\n  width: 100%;\n  height: 100%;\n  position: static;\n  color: var(--secondary-text-color, white);\n  background-color: transparent;\n}\n\n/************\n * Fullscreen\n *************/\n:host(:fullscreen) #ha-card {\n  border-radius: 0px;\n  box-shadow: none;\n  margin: 0;\n}\n\n:host(:-webkit-full-screen) #ha-card {\n  border-radius: 0px;\n  box-shadow: none;\n  margin: 0;\n}\n\n:host(:fullscreen) div.main,\n:host(:fullscreen) advanced-camera-card-menu {\n  border-radius: 0px;\n}\n\n:host(:-webkit-full-screen) div.main,\n:host(:-webkit-full-screen) advanced-camera-card-menu {\n  border-radius: 0px;\n}\n\n/***************\n * Expanded mode\n ***************/\nweb-dialog {\n  --dialog-padding: 0px;\n  --dialog-container-padding: 0px;\n  --dialog-max-height: var(--advanced-camera-card-expand-max-height);\n  --dialog-max-width: var(--advanced-camera-card-expand-max-width);\n  --dialog-width: var(--advanced-camera-card-expand-width);\n  --dialog-height: var(--advanced-camera-card-expand-height);\n  --dialog-overflow-x: visible;\n  --dialog-overflow-y: visible;\n  max-height: 100vh;\n}\n\nweb-dialog::part(dialog) {\n  aspect-ratio: var(--advanced-camera-card-expand-aspect-ratio);\n  border-radius: 0px;\n  background: transparent;\n}\n\n/*******************\n * Menu hover styles\n *******************/\nadvanced-camera-card-menu {\n  z-index: 4;\n}\n\nadvanced-camera-card-menu[data-style*=hover] {\n  transition: opacity 0.5s ease;\n  opacity: 0;\n}\n\nadvanced-camera-card-menu[data-style*=hover]:hover,\nha-card:hover > advanced-camera-card-overlay > advanced-camera-card-menu[data-style=hover-card] {\n  opacity: 1;\n}\n\n/*************************\n * Status bar hover styles\n *************************/\nadvanced-camera-card-status-bar {\n  z-index: 2;\n}\n\nadvanced-camera-card-status-bar[data-style*=hover] {\n  transition: opacity 0.5s ease;\n  opacity: 0;\n}\n\nadvanced-camera-card-status-bar[data-style*=hover]:hover,\nha-card:hover > advanced-camera-card-overlay > advanced-camera-card-status-bar[data-style=hover-card] {\n  opacity: 1;\n}')}getCardSize(){return 6}};OD=e([ue("advanced-camera-card")],OD);let LD=class extends OD{};LD=e([ue("frigate-card")],LD);export{yC as $,up as A,hp as B,ep as C,mp as D,Um as E,qm as F,Wm as G,Zm as H,Km as I,Qm as J,Ym as K,Gm as L,Xm as M,Tg as N,vg as O,xr as P,ye as Q,J_ as R,kr as S,ig as T,eg as U,tg as V,ng as W,ag as X,Mr as Y,X_ as Z,e as _,le as a,pf as a$,wC as a0,hu as a1,Lm as a2,gk as a3,TO as a4,xh as a5,mv as a6,kh as a7,tt as a8,vk as a9,Vf as aA,Of as aB,jf as aC,zf as aD,Lf as aE,Df as aF,of as aG,ff as aH,sf as aI,cf as aJ,yf as aK,bf as aL,xf as aM,kf as aN,wf as aO,gf as aP,vf as aQ,_f as aR,Ef as aS,$f as aT,If as aU,Mf as aV,Cf as aW,Tf as aX,Sf as aY,Af as aZ,hf as a_,Ug as aa,Bm as ab,Fm as ac,Vm as ad,Hm as ae,Jm as af,ip as ag,fg as ah,pg as ai,mg as aj,gg as ak,Sg as al,Cg as am,Ag as an,GS as ao,Eg as ap,Ff as aq,Pf as ar,Wf as as,Rf as at,Nf as au,tf as av,nf as aw,rf as ax,af as ay,Bf as az,fe as b,Ng as b$,mf as b0,df as b1,uf as b2,lf as b3,Hf as b4,qf as b5,Uf as b6,bp as b7,gp as b8,_p as b9,Rp as bA,Zp as bB,Yp as bC,Gp as bD,Up as bE,qp as bF,Qp as bG,Wp as bH,Kp as bI,Yf as bJ,Xf as bK,Kf as bL,Qf as bM,Gf as bN,rg as bO,sg as bP,cg as bQ,dg as bR,ug as bS,lg as bT,og as bU,Og as bV,Ig as bW,Lg as bX,Rg as bY,Pg as bZ,zg as b_,yp as ba,vp as bb,fp as bc,xp as bd,kp as be,Mp as bf,Cp as bg,Ip as bh,Jp as bi,Op as bj,Dp as bk,Lp as bl,Sp as bm,Tp as bn,$p as bo,Ep as bp,Ap as bq,jp as br,Xp as bs,zp as bt,Pp as bu,Hp as bv,Np as bw,Bp as bx,Vp as by,Fp as bz,fk as c,gm as c$,Wg as c0,Fg as c1,Hg as c2,Vg as c3,qg as c4,pk as c5,hk as c6,Rm as c7,Pm as c8,jm as c9,Uh as cA,Wh as cB,em as cC,tm as cD,am as cE,rm as cF,km as cG,xm as cH,Mm as cI,Cm as cJ,Th as cK,$h as cL,Ih as cM,Oh as cN,Lh as cO,im as cP,cm as cQ,lm as cR,dm as cS,um as cT,hm as cU,mm as cV,pm as cW,om as cX,sm as cY,Eh as cZ,Ah as c_,zm as ca,Dm as cb,Ch as cc,nm as cd,Jh as ce,Bh as cf,Vh as cg,Mh as ch,Sh as ci,zh as cj,jh as ck,Ph as cl,Dh as cm,Xh as cn,Kh as co,Qh as cp,Yh as cq,Gh as cr,wm as cs,bm as ct,Rh as cu,Nh as cv,Fh as cw,qh as cx,Zh as cy,Hh as cz,_k as d,ja as d$,vm as d0,fm as d1,ym as d2,_m as d3,Bg as d4,fE as d5,uA as d6,Pe as d7,hA as d8,Fe as d9,fu as dA,UA as dB,Zu as dC,Pd as dD,pD as dE,hD as dF,Hu as dG,OT as dH,Fu as dI,Yu as dJ,Uu as dK,cA as dL,Zg as dM,ve as dN,_e as dO,W as dP,Su as dQ,$u as dR,zO as dS,jO as dT,Ir as dU,qr as dV,c as dW,zv as dX,su as dY,Ii as dZ,Gd as d_,bh as da,G_ as db,RL as dc,Wu as dd,x_ as de,be as df,yD as dg,bC as dh,jA as di,gu as dj,OA as dk,LA as dl,KA as dm,dA as dn,mA as dp,pA as dq,fA as dr,uh as ds,i_ as dt,zE as du,PE as dv,ST as dw,EA as dx,dD as dy,ch as dz,vE as e,Z_ as e$,yu as e0,Oi as e1,nu as e2,ly as e3,ge as e4,Ae as e5,Ce as e6,Me as e7,Te as e8,Ee as e9,Rv as eA,bu as eB,xu as eC,Pv as eD,xv as eE,Mu as eF,DE as eG,Mv as eH,kv as eI,Cv as eJ,Vu as eK,RE as eL,CA as eM,fv as eN,jv as eO,Xu as eP,Tu as eQ,xe as eR,Z as eS,jT as eT,lA as eU,U_ as eV,q_ as eW,W_ as eX,Lu as eY,K_ as eZ,Jd as e_,ju as ea,Gu as eb,Ev as ec,Av as ed,yv as ee,jr as ef,DA as eg,Iv as eh,vu as ei,Q_ as ej,_u as ek,WA as el,zA as em,Eu as en,Yr as eo,$v as ep,ou as eq,br as er,ku as es,gv as et,cu as eu,Fv as ev,Dv as ew,ru as ex,sh as ey,lh as ez,Dk as f,s as f0,Du as f1,TD as f2,iy as f3,oy as f4,lD as f5,mk as g,JA as h,qd as i,uu as j,ap as k,hv as l,np as m,pe as n,tp as o,ZS as p,rp as q,o as r,Cu as s,ue as t,op as u,cp as v,sp as w,q as x,lp as y,dp as z};
