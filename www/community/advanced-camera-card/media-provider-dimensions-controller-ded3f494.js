import{dK as t,dL as e,dM as i,dN as s,dO as r,s as a}from"./card-d84eb2c6.js";
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const o={},n=t(class extends e{constructor(){super(...arguments),this.ot=o}render(t,e){return e()}update(t,[e,s]){if(Array.isArray(e)){if(Array.isArray(this.ot)&&this.ot.length===e.length&&e.every(((t,e)=>t===this.ot[e])))return i}else if(this.ot===e)return i;return this.ot=Array.isArray(e)?Array.from(e):e,this.render(e,s)}}),h="size";class d{constructor(t){this.resize=s(this._resizeHandler.bind(this),100,{trailing:!0}),this._container=null,this._cameraConfig=null,this._resizeObserver=new ResizeObserver(this.resize),this._intendedHostSize=null,this._mediaLoadHandler=t=>{window.requestAnimationFrame((()=>this.resize()))},this._host=t,this._host.addController(this)}hostConnected(){this._host.addEventListener("advanced-camera-card:media:loaded",this._mediaLoadHandler),this._resizeObserver.observe(this._host)}hostDisconnected(){this._host.removeEventListener("advanced-camera-card:media:loaded",this._mediaLoadHandler),this._resizeObserver.disconnect()}setContainer(t){t!==this._container&&(this._container=t??null,this._setAttributesFromConfig())}_setAttributesFromConfig(){this._container&&(this._container.style.aspectRatio=r({ratio:this._cameraConfig?.aspect_ratio})),((t,e)=>{void 0!==e?.fit?t.style.setProperty("--advanced-camera-card-media-layout-fit",e.fit):t.style.removeProperty("--advanced-camera-card-media-layout-fit");for(const i of["x","y"])void 0!==e?.position?.[i]?t.style.setProperty(`--advanced-camera-card-media-layout-position-${i}`,`${e.position[i]}%`):t.style.removeProperty(`--advanced-camera-card-media-layout-position-${i}`);for(const i of["top","bottom","left","right"])void 0!==e?.view_box?.[i]?t.style.setProperty(`--advanced-camera-card-media-layout-view-box-${i}`,`${e.view_box[i]}%`):t.style.removeProperty(`--advanced-camera-card-media-layout-view-box-${i}`)})(this._host,this._cameraConfig?.layout),a(this._host,!0,h,this._cameraConfig?.aspect_ratio?this._cameraConfig?.aspect_ratio[0]>=this._cameraConfig?.aspect_ratio[1]?"unsized-landscape":"unsized-portrait":"unsized")}setCameraConfig(t){this._cameraConfig=t??null,this._setAttributesFromConfig()}_resizeHandler(t){const e=()=>{this._intendedHostSize=this._host.getBoundingClientRect()},i=()=>{a(this._host,!0,h,"unsized")},s=this._host.getBoundingClientRect();if(s.width===this._intendedHostSize?.width&&s.height===this._intendedHostSize?.height)return;if(!this._container)return void i();var r;(r=this._container).style.width="100%",r.style.height="auto",e();const o=this._container.getBoundingClientRect();if(!o.width||!o.height)return void i();const n=o.width/o.height,d=this._host.getBoundingClientRect();o.height>d.height&&((t,i,s)=>{t.style.width=`${i}px`,t.style.height=`${s}px`,e()})(this._container,d.height*n,d.height),a(this._host,!0,h,"sized")}}export{d as M,n as i};
