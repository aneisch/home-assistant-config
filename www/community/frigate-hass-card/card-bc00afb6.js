function e(e,t,n,a){var i,r=arguments.length,s=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s}"function"==typeof SuppressedError&&SuppressedError;
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const t=globalThis,n=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,a=Symbol(),i=new WeakMap;let r=class{constructor(e,t,n){if(this._$cssResult$=!0,n!==a)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(n&&void 0===e){const n=void 0!==t&&1===t.length;n&&(e=i.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&i.set(t,e))}return e}toString(){return this.cssText}};const s=e=>new r("string"==typeof e?e:e+"",void 0,a),o=(e,...t)=>{const n=1===e.length?e[0]:t.reduce(((t,n,a)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+e[a+1]),e[0]);return new r(n,e,a)},c=(e,a)=>{if(n)e.adoptedStyleSheets=a.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet));else for(const n of a){const a=document.createElement("style"),i=t.litNonce;void 0!==i&&a.setAttribute("nonce",i),a.textContent=n.cssText,e.appendChild(a)}},l=n?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return s(t)})(e):e
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,{is:d,defineProperty:u,getOwnPropertyDescriptor:h,getOwnPropertyNames:m,getOwnPropertySymbols:p,getPrototypeOf:g}=Object,f=globalThis,_=f.trustedTypes,v=_?_.emptyScript:"",y=f.reactiveElementPolyfillSupport,b=(e,t)=>e,w={toAttribute(e,t){switch(t){case Boolean:e=e?v:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(e){n=null}}return n}},x=(e,t)=>!d(e,t),C={attribute:!0,type:String,converter:w,reflect:!1,hasChanged:x};Symbol.metadata??=Symbol("metadata"),f.litPropertyMetadata??=new WeakMap;class M extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=C){if(t.state&&(t.attribute=!1),this._$Ei(),this.elementProperties.set(e,t),!t.noAccessor){const n=Symbol(),a=this.getPropertyDescriptor(e,n,t);void 0!==a&&u(this.prototype,e,a)}}static getPropertyDescriptor(e,t,n){const{get:a,set:i}=h(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get(){return a?.call(this)},set(t){const r=a?.call(this);i.call(this,t),this.requestUpdate(e,r,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??C}static _$Ei(){if(this.hasOwnProperty(b("elementProperties")))return;const e=g(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(b("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(b("properties"))){const e=this.properties,t=[...m(e),...p(e)];for(const n of t)this.createProperty(n,e[n])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,n]of t)this.elementProperties.set(e,n)}this._$Eh=new Map;for(const[e,t]of this.elementProperties){const n=this._$Eu(e,t);void 0!==n&&this._$Eh.set(n,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const e of n)t.unshift(l(e))}else void 0!==e&&t.push(l(e));return t}static _$Eu(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const n of t.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return c(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$EC(e,t){const n=this.constructor.elementProperties.get(e),a=this.constructor._$Eu(e,n);if(void 0!==a&&!0===n.reflect){const i=(void 0!==n.converter?.toAttribute?n.converter:w).toAttribute(t,n.type);this._$Em=e,null==i?this.removeAttribute(a):this.setAttribute(a,i),this._$Em=null}}_$AK(e,t){const n=this.constructor,a=n._$Eh.get(e);if(void 0!==a&&this._$Em!==a){const e=n.getPropertyOptions(a),i="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:w;this._$Em=a,this[a]=i.fromAttribute(t,e.type),this._$Em=null}}requestUpdate(e,t,n){if(void 0!==e){if(n??=this.constructor.getPropertyOptions(e),!(n.hasChanged??x)(this[e],t))return;this.P(e,t,n)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(e,t,n){this._$AL.has(e)||this._$AL.set(e,t),!0===n.reflect&&this._$Em!==e&&(this._$Ej??=new Set).add(e)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,n]of e)!0!==n.wrapped||this._$AL.has(t)||void 0===this[t]||this.P(t,this[t],n)}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach((e=>e.hostUpdate?.())),this.update(t)):this._$EU()}catch(t){throw e=!1,this._$EU(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach((e=>e.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Ej&&=this._$Ej.forEach((e=>this._$EC(e,this[e]))),this._$EU()}updated(e){}firstUpdated(e){}}M.elementStyles=[],M.shadowRootOptions={mode:"open"},M[b("elementProperties")]=new Map,M[b("finalized")]=new Map,y?.({ReactiveElement:M}),(f.reactiveElementVersions??=[]).push("2.0.4");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const S=globalThis,k=S.trustedTypes,$=k?k.createPolicy("lit-html",{createHTML:e=>e}):void 0,E="$lit$",A=`lit$${(Math.random()+"").slice(9)}$`,I="?"+A,T=`<${I}>`,z=document,j=()=>z.createComment(""),O=e=>null===e||"object"!=typeof e&&"function"!=typeof e,D=Array.isArray,P="[ \t\n\f\r]",R=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,L=/-->/g,N=/>/g,F=RegExp(`>|${P}(?:([^\\s"'>=/]+)(${P}*=${P}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),V=/'/g,H=/"/g,B=/^(?:script|style|textarea|title)$/i,q=(e=>(t,...n)=>({_$litType$:e,strings:t,values:n}))(1),U=Symbol.for("lit-noChange"),Z=Symbol.for("lit-nothing"),W=new WeakMap,Q=z.createTreeWalker(z,129);function K(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==$?$.createHTML(t):t}const Y=(e,t)=>{const n=e.length-1,a=[];let i,r=2===t?"<svg>":"",s=R;for(let t=0;t<n;t++){const n=e[t];let o,c,l=-1,d=0;for(;d<n.length&&(s.lastIndex=d,c=s.exec(n),null!==c);)d=s.lastIndex,s===R?"!--"===c[1]?s=L:void 0!==c[1]?s=N:void 0!==c[2]?(B.test(c[2])&&(i=RegExp("</"+c[2],"g")),s=F):void 0!==c[3]&&(s=F):s===F?">"===c[0]?(s=i??R,l=-1):void 0===c[1]?l=-2:(l=s.lastIndex-c[2].length,o=c[1],s=void 0===c[3]?F:'"'===c[3]?H:V):s===H||s===V?s=F:s===L||s===N?s=R:(s=F,i=void 0);const u=s===F&&e[t+1].startsWith("/>")?" ":"";r+=s===R?n+T:l>=0?(a.push(o),n.slice(0,l)+E+n.slice(l)+A+u):n+A+(-2===l?t:u)}return[K(e,r+(e[n]||"<?>")+(2===t?"</svg>":"")),a]};class G{constructor({strings:e,_$litType$:t},n){let a;this.parts=[];let i=0,r=0;const s=e.length-1,o=this.parts,[c,l]=Y(e,t);if(this.el=G.createElement(c,n),Q.currentNode=this.el.content,2===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(a=Q.nextNode())&&o.length<s;){if(1===a.nodeType){if(a.hasAttributes())for(const e of a.getAttributeNames())if(e.endsWith(E)){const t=l[r++],n=a.getAttribute(e).split(A),s=/([.?@])?(.*)/.exec(t);o.push({type:1,index:i,name:s[2],strings:n,ctor:"."===s[1]?ne:"?"===s[1]?ae:"@"===s[1]?ie:te}),a.removeAttribute(e)}else e.startsWith(A)&&(o.push({type:6,index:i}),a.removeAttribute(e));if(B.test(a.tagName)){const e=a.textContent.split(A),t=e.length-1;if(t>0){a.textContent=k?k.emptyScript:"";for(let n=0;n<t;n++)a.append(e[n],j()),Q.nextNode(),o.push({type:2,index:++i});a.append(e[t],j())}}}else if(8===a.nodeType)if(a.data===I)o.push({type:2,index:i});else{let e=-1;for(;-1!==(e=a.data.indexOf(A,e+1));)o.push({type:7,index:i}),e+=A.length-1}i++}}static createElement(e,t){const n=z.createElement("template");return n.innerHTML=e,n}}function X(e,t,n=e,a){if(t===U)return t;let i=void 0!==a?n._$Co?.[a]:n._$Cl;const r=O(t)?void 0:t._$litDirective$;return i?.constructor!==r&&(i?._$AO?.(!1),void 0===r?i=void 0:(i=new r(e),i._$AT(e,n,a)),void 0!==a?(n._$Co??=[])[a]=i:n._$Cl=i),void 0!==i&&(t=X(e,i._$AS(e,t.values),i,a)),t}let J=class{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:n}=this._$AD,a=(e?.creationScope??z).importNode(t,!0);Q.currentNode=a;let i=Q.nextNode(),r=0,s=0,o=n[0];for(;void 0!==o;){if(r===o.index){let t;2===o.type?t=new ee(i,i.nextSibling,this,e):1===o.type?t=new o.ctor(i,o.name,o.strings,this,e):6===o.type&&(t=new re(i,this,e)),this._$AV.push(t),o=n[++s]}r!==o?.index&&(i=Q.nextNode(),r++)}return Q.currentNode=z,a}p(e){let t=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}};class ee{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,n,a){this.type=2,this._$AH=Z,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=a,this._$Cv=a?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=X(this,e,t),O(e)?e===Z||null==e||""===e?(this._$AH!==Z&&this._$AR(),this._$AH=Z):e!==this._$AH&&e!==U&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):(e=>D(e)||"function"==typeof e?.[Symbol.iterator])(e)?this.k(e):this._(e)}S(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.S(e))}_(e){this._$AH!==Z&&O(this._$AH)?this._$AA.nextSibling.data=e:this.T(z.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:n}=e,a="number"==typeof n?this._$AC(e):(void 0===n.el&&(n.el=G.createElement(K(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===a)this._$AH.p(t);else{const e=new J(a,this),n=e.u(this.options);e.p(t),this.T(n),this._$AH=e}}_$AC(e){let t=W.get(e.strings);return void 0===t&&W.set(e.strings,t=new G(e)),t}k(e){D(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,a=0;for(const i of e)a===t.length?t.push(n=new ee(this.S(j()),this.S(j()),this,this.options)):n=t[a],n._$AI(i),a++;a<t.length&&(this._$AR(n&&n._$AB.nextSibling,a),t.length=a)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}class te{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,n,a,i){this.type=1,this._$AH=Z,this._$AN=void 0,this.element=e,this.name=t,this._$AM=a,this.options=i,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=Z}_$AI(e,t=this,n,a){const i=this.strings;let r=!1;if(void 0===i)e=X(this,e,t,0),r=!O(e)||e!==this._$AH&&e!==U,r&&(this._$AH=e);else{const a=e;let s,o;for(e=i[0],s=0;s<i.length-1;s++)o=X(this,a[n+s],t,s),o===U&&(o=this._$AH[s]),r||=!O(o)||o!==this._$AH[s],o===Z?e=Z:e!==Z&&(e+=(o??"")+i[s+1]),this._$AH[s]=o}r&&!a&&this.j(e)}j(e){e===Z?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class ne extends te{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Z?void 0:e}}class ae extends te{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Z)}}class ie extends te{constructor(e,t,n,a,i){super(e,t,n,a,i),this.type=5}_$AI(e,t=this){if((e=X(this,e,t,0)??Z)===U)return;const n=this._$AH,a=e===Z&&n!==Z||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,i=e!==Z&&(n===Z||a);a&&this.element.removeEventListener(this.name,this,n),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class re{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){X(this,e)}}const se=S.litHtmlPolyfillSupport;se?.(G,ee),(S.litHtmlVersions??=[]).push("3.1.2");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
let oe=class extends M{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,n)=>{const a=n?.renderBefore??t;let i=a._$litPart$;if(void 0===i){const e=n?.renderBefore??null;a._$litPart$=i=new ee(t.insertBefore(j(),e),e,void 0,n??{})}return i._$AI(e),i})(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return U}};oe._$litElement$=!0,oe.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:oe});const ce=globalThis.litElementPolyfillSupport;ce?.({LitElement:oe}),(globalThis.litElementVersions??=[]).push("4.0.4");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const le=e=>(t,n)=>{void 0!==n?n.addInitializer((()=>{customElements.define(e,t)})):customElements.define(e,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,de={attribute:!0,type:String,converter:w,reflect:!1,hasChanged:x},ue=(e=de,t,n)=>{const{kind:a,metadata:i}=n;let r=globalThis.litPropertyMetadata.get(i);if(void 0===r&&globalThis.litPropertyMetadata.set(i,r=new Map),r.set(n.name,e),"accessor"===a){const{name:a}=n;return{set(n){const i=t.get.call(this);t.set.call(this,n),this.requestUpdate(a,i,e)},init(t){return void 0!==t&&this.P(a,void 0,e),t}}}if("setter"===a){const{name:a}=n;return function(n){const i=this[a];t.call(this,n),this.requestUpdate(a,i,e)}}throw Error("Unsupported decorator location: "+a)};function he(e){return(t,n)=>"object"==typeof n?ue(e,t,n):((e,t,n)=>{const a=t.hasOwnProperty(n);return t.constructor.createProperty(n,a?{...e,wrapped:!0}:e),a?Object.getOwnPropertyDescriptor(t,n):void 0})(e,t,n)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}function me(e){return he({...e,state:!0,attribute:!1})}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const pe={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},ge=e=>(...t)=>({_$litDirective$:e,values:t});let fe=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,n){this._$Ct=e,this._$AM=t,this._$Ci=n}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}};
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const _e=ge(class extends fe{constructor(e){if(super(e),e.type!==pe.ATTRIBUTE||"class"!==e.name||e.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter((t=>e[t])).join(" ")+" "}update(e,[t]){if(void 0===this.st){this.st=new Set,void 0!==e.strings&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter((e=>""!==e))));for(const e in t)t[e]&&!this.nt?.has(e)&&this.st.add(e);return this.render(t)}const n=e.element.classList;for(const e of this.st)e in t||(n.remove(e),this.st.delete(e));for(const e in t){const a=!!t[e];a===this.st.has(e)||this.nt?.has(e)||(a?(n.add(e),this.st.add(e)):(n.remove(e),this.st.delete(e)))}return U}}),ve=e=>e??Z
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,ye=e=>void 0===e.strings,be={},we=(e,t=be)=>e._$AH=t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,xe=(e,t)=>{const n=e._$AN;if(void 0===n)return!1;for(const e of n)e._$AO?.(t,!1),xe(e,t);return!0},Ce=e=>{let t,n;do{if(void 0===(t=e._$AM))break;n=t._$AN,n.delete(e),e=t}while(0===n?.size)},Me=e=>{for(let t;t=e._$AM;e=t){let n=t._$AN;if(void 0===n)t._$AN=n=new Set;else if(n.has(e))break;n.add(e),$e(t)}};
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Se(e){void 0!==this._$AN?(Ce(this),this._$AM=e,Me(this)):this._$AM=e}function ke(e,t=!1,n=0){const a=this._$AH,i=this._$AN;if(void 0!==i&&0!==i.size)if(t)if(Array.isArray(a))for(let e=n;e<a.length;e++)xe(a[e],!1),Ce(a[e]);else null!=a&&(xe(a,!1),Ce(a));else xe(this,e)}const $e=e=>{e.type==pe.CHILD&&(e._$AP??=ke,e._$AQ??=Se)};class Ee extends fe{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,n){super._$AT(e,t,n),Me(this),this.isConnected=e._$AU}_$AO(e,t=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),t&&(xe(this,e),Ce(this))}setValue(e){if(ye(this._$Ct))this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}}
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ae=()=>new Ie;let Ie=class{};const Te=new WeakMap,ze=ge(class extends Ee{render(e){return Z}update(e,[t]){const n=t!==this.Y;return n&&void 0!==this.Y&&this.rt(void 0),(n||this.lt!==this.ct)&&(this.Y=t,this.ht=e.options?.host,this.rt(this.ct=e.element)),Z}rt(e){if("function"==typeof this.Y){const t=this.ht??globalThis;let n=Te.get(t);void 0===n&&(n=new WeakMap,Te.set(t,n)),void 0!==n.get(this.Y)&&this.Y.call(this.ht,void 0),n.set(this.Y,e),void 0!==e&&this.Y.call(this.ht,e)}else this.Y.value=e}get lt(){return"function"==typeof this.Y?Te.get(this.ht??globalThis)?.get(this.Y):this.Y?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}}),je="important",Oe=" !"+je,De=ge(class extends fe{constructor(e){if(super(e),e.type!==pe.ATTRIBUTE||"style"!==e.name||e.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce(((t,n)=>{const a=e[n];return null==a?t:t+`${n=n.includes("-")?n:n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${a};`}),"")}update(e,[t]){const{style:n}=e.element;if(void 0===this.ft)return this.ft=new Set(Object.keys(t)),this.render(t);for(const e of this.ft)null==t[e]&&(this.ft.delete(e),e.includes("-")?n.removeProperty(e):n[e]=null);for(const e in t){const a=t[e];if(null!=a){this.ft.add(e);const t="string"==typeof a&&a.endsWith(Oe);e.includes("-")||t?n.setProperty(e,t?a.slice(0,-11):a,t?je:""):n[e]=a}}return U}});
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Pe(e,t,n,a=20,i=0){let r=[];if(i>=a)return r;const s=e=>{const r=e.assignedNodes().filter((e=>1===e.nodeType));return r.length>0?Pe(r[0].parentElement,t,n,a,i+1):[]},o=Array.from(e.children||[]);for(const e of o)t(e)||(n(e)&&r.push(e),null!=e.shadowRoot?r.push(...Pe(e.shadowRoot,t,n,a,i+1)):"SLOT"===e.tagName?r.push(...s(e)):r.push(...Pe(e,t,n,a,i+1)));return r}function Re(e){return e.hasAttribute("hidden")||e.hasAttribute("aria-hidden")&&"false"!==e.getAttribute("aria-hidden")||"none"===e.style.display||"0"===e.style.opacity||"hidden"===e.style.visibility||"collapse"===e.style.visibility}function Le(e){return"-1"!==e.getAttribute("tabindex")&&!Re(e)&&!function(e){return e.hasAttribute("disabled")||e.hasAttribute("aria-disabled")&&"false"!==e.getAttribute("aria-disabled")}(e)&&(e.hasAttribute("tabindex")||(e instanceof HTMLAnchorElement||e instanceof HTMLAreaElement)&&e.hasAttribute("href")||e instanceof HTMLButtonElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement||e instanceof HTMLIFrameElement)}const Ne=new Map;const Fe=document.createElement("template");Fe.innerHTML='\n\t<div id="start"></div>\n\t<div id="backup"></div>\n\t<slot></slot>\n\t<div id="end"></div>\n';class Ve extends HTMLElement{constructor(){super(),this.debounceId=Math.random().toString(),this._focused=!1;const e=this.attachShadow({mode:"open"});e.appendChild(Fe.content.cloneNode(!0)),this.$backup=e.querySelector("#backup"),this.$start=e.querySelector("#start"),this.$end=e.querySelector("#end"),this.focusLastElement=this.focusLastElement.bind(this),this.focusFirstElement=this.focusFirstElement.bind(this),this.onFocusIn=this.onFocusIn.bind(this),this.onFocusOut=this.onFocusOut.bind(this)}static get observedAttributes(){return["inactive"]}get inactive(){return this.hasAttribute("inactive")}set inactive(e){e?this.setAttribute("inactive",""):this.removeAttribute("inactive")}get focused(){return this._focused}connectedCallback(){this.$start.addEventListener("focus",this.focusLastElement),this.$end.addEventListener("focus",this.focusFirstElement),this.addEventListener("focusin",this.onFocusIn),this.addEventListener("focusout",this.onFocusOut),this.render()}disconnectedCallback(){this.$start.removeEventListener("focus",this.focusLastElement),this.$end.removeEventListener("focus",this.focusFirstElement),this.removeEventListener("focusin",this.onFocusIn),this.removeEventListener("focusout",this.onFocusOut)}attributeChangedCallback(){this.render()}focusFirstElement(){this.trapFocus()}focusLastElement(){this.trapFocus(!0)}getFocusableElements(){return Pe(this,Re,Le)}trapFocus(e){if(this.inactive)return;let t=this.getFocusableElements();t.length>0?(e?t[t.length-1].focus():t[0].focus(),this.$backup.setAttribute("tabindex","-1")):(this.$backup.setAttribute("tabindex","0"),this.$backup.focus())}onFocusIn(){this.updateFocused(!0)}onFocusOut(){this.updateFocused(!1)}updateFocused(e){!function(e,t,n){const a=Ne.get(n);null!=a&&window.clearTimeout(a),Ne.set(n,window.setTimeout((()=>{e(),Ne.delete(n)}),t))}((()=>{this.focused!==e&&(this._focused=e,this.render())}),0,this.debounceId)}render(){this.$start.setAttribute("tabindex",!this.focused||this.inactive?"-1":"0"),this.$end.setAttribute("tabindex",!this.focused||this.inactive?"-1":"0"),this.focused?this.setAttribute("focused",""):this.removeAttribute("focused")}}function He(e){return Number(e.getAttribute("data-dialog-count"))||0}function Be(e,t){e.setAttribute("data-dialog-count",t.toString())}function qe(e=document.activeElement){return null!=e&&null!=e.shadowRoot&&null!=e.shadowRoot.activeElement?qe(e.shadowRoot.activeElement):e}window.customElements.define("focus-trap",Ve);const Ue=document.createElement("template");Ue.innerHTML='\n  <style>*{box-sizing:border-box}:host{padding:var(--dialog-container-padding,5vw 24px);z-index:var(--dialog-z-index,12345678);outline:none}#backdrop,:host{position:fixed;top:0;left:0;bottom:0;right:0}:host,:host([center]) #dialog{overflow-x:var(--dialog-overflow-x,hidden);overflow-y:var(--dialog-overflow-y,auto);overscroll-behavior:contain;-webkit-overflow-scrolling:touch}:host([center]){display:flex;align-items:center;justify-content:center;overflow:hidden}:host([center]) #dialog{max-height:var(--dialog-max-height,100%)}:host(:not(:defined)),:host(:not([open])){display:none}#backdrop{background:var(--dialog-backdrop-bg,rgba(0,0,0,.6));animation:fadeIn var(--dialog-animation-duration,.1s) var(--dialog-animation-easing,ease-out);z-index:-1}#dialog{animation:scaleIn var(--dialog-animation-duration,.1s) var(--dialog-animation-easing,ease-out);border-radius:var(--dialog-border-radius,12px);box-shadow:var(--dialog-box-shadow,0 2px 10px -5px rgba(0,0,0,.6));max-width:var(--dialog-max-width,700px);width:var(--dialog-width,100%);padding:var(--dialog-padding,24px);max-height:var(--dialog-max-height,unset);height:var(--dialog-height,auto);color:var(--dialog-color,currentColor);background:var(--dialog-bg,#fff);z-index:1;position:relative;display:flex;flex-direction:column;margin:0 auto;border:none}::slotted(article),article{flex-grow:1;overflow-y:auto;-webkit-overflow-scrolling:touch}::slotted(footer),::slotted(header),footer,header{flex-shrink:0}@keyframes scaleIn{0%{transform:scale(.9) translateY(30px);opacity:0}to{transform:scale(1) translateY(0);opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}</style>\n  <div id="backdrop" part="backdrop"></div>\n  <focus-trap id="dialog" part="dialog">\n    <slot></slot>\n  </focus-trap>\n';class Ze extends HTMLElement{constructor(){super(),this.$scrollContainer=document.documentElement,this.$previousActiveElement=null;const e=this.attachShadow({mode:"open"});e.appendChild(Ue.content.cloneNode(!0)),this.$dialog=e.querySelector("#dialog"),this.$backdrop=e.querySelector("#backdrop"),this.onBackdropClick=this.onBackdropClick.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.setAttribute("aria-modal","true"),this.$dialog.setAttribute("role","alertdialog")}static get observedAttributes(){return["open","center"]}get open(){return this.hasAttribute("open")}set open(e){e?this.setAttribute("open",""):this.removeAttribute("open")}get center(){return this.hasAttribute("center")}set center(e){e?this.setAttribute("center",""):this.removeAttribute("center")}connectedCallback(){this.$backdrop.addEventListener("click",this.onBackdropClick)}disconnectedCallback(){this.$backdrop.removeEventListener("click",this.onBackdropClick),this.open&&this.didClose()}show(){this.open=!0}close(e){this.result=e,this.open=!1}onBackdropClick(){this.assertClosing()&&this.close()}onKeyDown(e){if("Escape"===e.code)this.assertClosing()&&(this.close(),e.stopImmediatePropagation())}assertClosing(){return this.dispatchEvent(new CustomEvent("closing",{cancelable:!0}))}didOpen(){this.$previousActiveElement=qe(document.activeElement),requestAnimationFrame((()=>{this.$dialog.focusFirstElement()})),this.tabIndex=0,this.$scrollContainer.style.overflow="hidden",this.addEventListener("keydown",this.onKeyDown,{capture:!0,passive:!0}),Be(this.$scrollContainer,He(this.$scrollContainer)+1),this.dispatchEvent(new CustomEvent("open"))}didClose(){this.removeEventListener("keydown",this.onKeyDown,{capture:!0}),Be(this.$scrollContainer,Math.max(0,He(this.$scrollContainer)-1)),He(this.$scrollContainer)<=0&&(this.$scrollContainer.style.overflow=""),this.tabIndex=-1,null!=this.$previousActiveElement&&(this.$previousActiveElement.focus(),this.$previousActiveElement=null),this.dispatchEvent(new CustomEvent("close",{detail:this.result}))}attributeChangedCallback(e,t,n){if("open"===e)this.open?this.didOpen():this.didClose()}}var We,Qe;function Ke(e){return e.substr(0,e.indexOf("."))}customElements.define("web-dialog",Ze),function(e){e.language="language",e.system="system",e.comma_decimal="comma_decimal",e.decimal_comma="decimal_comma",e.space_comma="space_comma",e.none="none"}(We||(We={})),function(e){e.language="language",e.system="system",e.am_pm="12",e.twenty_four="24"}(Qe||(Qe={}));var Ye,Ge,Xe=["closed","locked","off"],Je=function(e,t,n,a){a=a||{},n=null==n?{}:n;var i=new Event(t,{bubbles:void 0===a.bubbles||a.bubbles,cancelable:Boolean(a.cancelable),composed:void 0===a.composed||a.composed});return i.detail=n,e.dispatchEvent(i),i},et=function(e){Je(window,"haptic",e)},tt=function(e,t){return function(e,t,n){void 0===n&&(n=!0);var a,i=Ke(t),r="group"===i?"homeassistant":i;switch(i){case"lock":a=n?"unlock":"lock";break;case"cover":a=n?"open_cover":"close_cover";break;default:a=n?"turn_on":"turn_off"}return e.callService(r,a,{entity_id:t})}(e,t,Xe.includes(e.states[t].state))},nt=function(e,t,n,a){if(a||(a={action:"more-info"}),!a.confirmation||a.confirmation.exemptions&&a.confirmation.exemptions.some((function(e){return e.user===t.user.id}))||(et("warning"),confirm(a.confirmation.text||"Are you sure you want to "+a.action+"?")))switch(a.action){case"more-info":(n.entity||n.camera_image)&&Je(e,"hass-more-info",{entityId:n.entity?n.entity:n.camera_image});break;case"navigate":a.navigation_path&&function(e,t,n){void 0===n&&(n=!1),n?history.replaceState(null,"",t):history.pushState(null,"",t),Je(window,"location-changed",{replace:n})}(0,a.navigation_path);break;case"url":a.url_path&&window.open(a.url_path);break;case"toggle":n.entity&&(tt(t,n.entity),et("success"));break;case"perform-action":if(!a.perform_action)return void et("failure");var i=a.perform_action.split(".",2);t.callService(i[0],i[1],a.data,a.target),et("success");break;case"call-service":if(!a.service)return void et("failure");var r=a.service.split(".",2);t.callService(r[0],r[1],a.data,a.target),et("success");break;case"fire-dom-event":Je(e,"ll-custom",a)}};!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),a={};for(const e of n)a[e]=t[e];return e.objectValues(a)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(Ye||(Ye={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(Ge||(Ge={}));const at=Ye.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),it=e=>{switch(typeof e){case"undefined":return at.undefined;case"string":return at.string;case"number":return isNaN(e)?at.nan:at.number;case"boolean":return at.boolean;case"function":return at.function;case"bigint":return at.bigint;case"symbol":return at.symbol;case"object":return Array.isArray(e)?at.array:null===e?at.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?at.promise:"undefined"!=typeof Map&&e instanceof Map?at.map:"undefined"!=typeof Set&&e instanceof Set?at.set:"undefined"!=typeof Date&&e instanceof Date?at.date:at.object;default:return at.unknown}},rt=Ye.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class st extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},n={_errors:[]},a=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(a);else if("invalid_return_type"===i.code)a(i.returnTypeError);else if("invalid_arguments"===i.code)a(i.argumentsError);else if(0===i.path.length)n._errors.push(t(i));else{let e=n,a=0;for(;a<i.path.length;){const n=i.path[a];a===i.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(i))):e[n]=e[n]||{_errors:[]},e=e[n],a++}}};return a(this),n}static assert(e){if(!(e instanceof st))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ye.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},n=[];for(const a of this.issues)a.path.length>0?(t[a.path[0]]=t[a.path[0]]||[],t[a.path[0]].push(e(a))):n.push(e(a));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}st.create=e=>new st(e);const ot=(e,t)=>{let n;switch(e.code){case rt.invalid_type:n=e.received===at.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case rt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Ye.jsonStringifyReplacer)}`;break;case rt.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ye.joinValues(e.keys,", ")}`;break;case rt.invalid_union:n="Invalid input";break;case rt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ye.joinValues(e.options)}`;break;case rt.invalid_enum_value:n=`Invalid enum value. Expected ${Ye.joinValues(e.options)}, received '${e.received}'`;break;case rt.invalid_arguments:n="Invalid function arguments";break;case rt.invalid_return_type:n="Invalid function return type";break;case rt.invalid_date:n="Invalid date";break;case rt.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Ye.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case rt.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case rt.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case rt.custom:n="Invalid input";break;case rt.invalid_intersection_types:n="Intersection results could not be merged";break;case rt.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case rt.not_finite:n="Number must be finite";break;default:n=t.defaultError,Ye.assertNever(e)}return{message:n}};let ct=ot;function lt(){return ct}const dt=e=>{const{data:t,path:n,errorMaps:a,issueData:i}=e,r=[...n,...i.path||[]],s={...i,path:r};if(void 0!==i.message)return{...i,path:r,message:i.message};let o="";const c=a.filter((e=>!!e)).slice().reverse();for(const e of c)o=e(s,{data:t,defaultError:o}).message;return{...i,path:r,message:o}};function ut(e,t){const n=lt(),a=dt({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===ot?void 0:ot].filter((e=>!!e))});e.common.issues.push(a)}class ht{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const a of t){if("aborted"===a.status)return mt;"dirty"===a.status&&e.dirty(),n.push(a.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const e of t){const t=await e.key,a=await e.value;n.push({key:t,value:a})}return ht.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const a of t){const{key:t,value:i}=a;if("aborted"===t.status)return mt;if("aborted"===i.status)return mt;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||void 0===i.value&&!a.alwaysSet||(n[t.value]=i.value)}return{status:e.value,value:n}}}const mt=Object.freeze({status:"aborted"}),pt=e=>({status:"dirty",value:e}),gt=e=>({status:"valid",value:e}),ft=e=>"aborted"===e.status,_t=e=>"dirty"===e.status,vt=e=>"valid"===e.status,yt=e=>"undefined"!=typeof Promise&&e instanceof Promise;function bt(e,t,n,a){if("a"===n&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?a:"a"===n?a.call(e):a?a.value:t.get(e)}function wt(e,t,n,a,i){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?i.call(e,n):i?i.value=n:t.set(e,n),n}var xt,Ct,Mt;"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(xt||(xt={}));class St{constructor(e,t,n,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const kt=(e,t)=>{if(vt(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new st(e.common.issues);return this._error=t,this._error}}};function $t(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:a,description:i}=e;if(t&&(n||a))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:i};return{errorMap:(t,i)=>{var r,s;const{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:i.defaultError}:void 0===i.data?{message:null!==(r=null!=o?o:a)&&void 0!==r?r:i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:null!==(s=null!=o?o:n)&&void 0!==s?s:i.defaultError}},description:i}}class Et{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return it(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:it(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ht,ctx:{common:e.parent.common,data:e.data,parsedType:it(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(yt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const a={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:it(e)},i=this._parseSync({data:e,path:a.path,parent:a});return kt(a,i)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:it(e)},a=this._parse({data:e,path:n.path,parent:n}),i=await(yt(a)?a:Promise.resolve(a));return kt(n,i)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,a)=>{const i=e(t),r=()=>a.addIssue({code:rt.custom,...n(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then((e=>!!e||(r(),!1))):!!i||(r(),!1)}))}refinement(e,t){return this._refinement(((n,a)=>!!e(n)||(a.addIssue("function"==typeof t?t(n,a):t),!1)))}_refinement(e){return new Mn({schema:this,typeName:Pn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Sn.create(this,this._def)}nullable(){return kn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return rn.create(this,this._def)}promise(){return Cn.create(this,this._def)}or(e){return cn.create([this,e],this._def)}and(e){return hn.create(this,e,this._def)}transform(e){return new Mn({...$t(this._def),schema:this,typeName:Pn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new $n({...$t(this._def),innerType:this,defaultValue:t,typeName:Pn.ZodDefault})}brand(){return new Tn({typeName:Pn.ZodBranded,type:this,...$t(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new En({...$t(this._def),innerType:this,catchValue:t,typeName:Pn.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return zn.create(this,e)}readonly(){return jn.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const At=/^c[^\s-]{8,}$/i,It=/^[0-9a-z]+$/,Tt=/^[0-9A-HJKMNP-TV-Z]{26}$/,zt=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,jt=/^[a-z0-9_-]{21}$/i,Ot=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Dt=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Pt;const Rt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Lt=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Nt=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Ft="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Vt=new RegExp(`^${Ft}$`);function Ht(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function Bt(e){let t=`${Ft}T${Ht(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function qt(e,t){return!("v4"!==t&&t||!Rt.test(e))||!("v6"!==t&&t||!Lt.test(e))}class Ut extends Et{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==at.string){const t=this._getOrReturnCtx(e);return ut(t,{code:rt.invalid_type,expected:at.string,received:t.parsedType}),mt}const t=new ht;let n;for(const a of this._def.checks)if("min"===a.kind)e.data.length<a.value&&(n=this._getOrReturnCtx(e,n),ut(n,{code:rt.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("max"===a.kind)e.data.length>a.value&&(n=this._getOrReturnCtx(e,n),ut(n,{code:rt.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("length"===a.kind){const i=e.data.length>a.value,r=e.data.length<a.value;(i||r)&&(n=this._getOrReturnCtx(e,n),i?ut(n,{code:rt.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):r&&ut(n,{code:rt.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),t.dirty())}else if("email"===a.kind)Dt.test(e.data)||(n=this._getOrReturnCtx(e,n),ut(n,{validation:"email",code:rt.invalid_string,message:a.message}),t.dirty());else if("emoji"===a.kind)Pt||(Pt=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Pt.test(e.data)||(n=this._getOrReturnCtx(e,n),ut(n,{validation:"emoji",code:rt.invalid_string,message:a.message}),t.dirty());else if("uuid"===a.kind)zt.test(e.data)||(n=this._getOrReturnCtx(e,n),ut(n,{validation:"uuid",code:rt.invalid_string,message:a.message}),t.dirty());else if("nanoid"===a.kind)jt.test(e.data)||(n=this._getOrReturnCtx(e,n),ut(n,{validation:"nanoid",code:rt.invalid_string,message:a.message}),t.dirty());else if("cuid"===a.kind)At.test(e.data)||(n=this._getOrReturnCtx(e,n),ut(n,{validation:"cuid",code:rt.invalid_string,message:a.message}),t.dirty());else if("cuid2"===a.kind)It.test(e.data)||(n=this._getOrReturnCtx(e,n),ut(n,{validation:"cuid2",code:rt.invalid_string,message:a.message}),t.dirty());else if("ulid"===a.kind)Tt.test(e.data)||(n=this._getOrReturnCtx(e,n),ut(n,{validation:"ulid",code:rt.invalid_string,message:a.message}),t.dirty());else if("url"===a.kind)try{new URL(e.data)}catch(i){n=this._getOrReturnCtx(e,n),ut(n,{validation:"url",code:rt.invalid_string,message:a.message}),t.dirty()}else if("regex"===a.kind){a.regex.lastIndex=0;a.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),ut(n,{validation:"regex",code:rt.invalid_string,message:a.message}),t.dirty())}else if("trim"===a.kind)e.data=e.data.trim();else if("includes"===a.kind)e.data.includes(a.value,a.position)||(n=this._getOrReturnCtx(e,n),ut(n,{code:rt.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),t.dirty());else if("toLowerCase"===a.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===a.kind)e.data=e.data.toUpperCase();else if("startsWith"===a.kind)e.data.startsWith(a.value)||(n=this._getOrReturnCtx(e,n),ut(n,{code:rt.invalid_string,validation:{startsWith:a.value},message:a.message}),t.dirty());else if("endsWith"===a.kind)e.data.endsWith(a.value)||(n=this._getOrReturnCtx(e,n),ut(n,{code:rt.invalid_string,validation:{endsWith:a.value},message:a.message}),t.dirty());else if("datetime"===a.kind){Bt(a).test(e.data)||(n=this._getOrReturnCtx(e,n),ut(n,{code:rt.invalid_string,validation:"datetime",message:a.message}),t.dirty())}else if("date"===a.kind){Vt.test(e.data)||(n=this._getOrReturnCtx(e,n),ut(n,{code:rt.invalid_string,validation:"date",message:a.message}),t.dirty())}else if("time"===a.kind){new RegExp(`^${Ht(a)}$`).test(e.data)||(n=this._getOrReturnCtx(e,n),ut(n,{code:rt.invalid_string,validation:"time",message:a.message}),t.dirty())}else"duration"===a.kind?Ot.test(e.data)||(n=this._getOrReturnCtx(e,n),ut(n,{validation:"duration",code:rt.invalid_string,message:a.message}),t.dirty()):"ip"===a.kind?qt(e.data,a.version)||(n=this._getOrReturnCtx(e,n),ut(n,{validation:"ip",code:rt.invalid_string,message:a.message}),t.dirty()):"base64"===a.kind?Nt.test(e.data)||(n=this._getOrReturnCtx(e,n),ut(n,{validation:"base64",code:rt.invalid_string,message:a.message}),t.dirty()):Ye.assertNever(a);return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement((t=>e.test(t)),{validation:t,code:rt.invalid_string,...xt.errToObj(n)})}_addCheck(e){return new Ut({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...xt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...xt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...xt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...xt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...xt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...xt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...xt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...xt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...xt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...xt.errToObj(e)})}datetime(e){var t,n;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(n=null==e?void 0:e.local)&&void 0!==n&&n,...xt.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...xt.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...xt.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...xt.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...xt.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...xt.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...xt.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...xt.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...xt.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...xt.errToObj(t)})}nonempty(e){return this.min(1,xt.errToObj(e))}trim(){return new Ut({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ut({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ut({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Zt(e,t){const n=(e.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,i=n>a?n:a;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}Ut.create=e=>{var t;return new Ut({checks:[],typeName:Pn.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...$t(e)})};class Wt extends Et{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==at.number){const t=this._getOrReturnCtx(e);return ut(t,{code:rt.invalid_type,expected:at.number,received:t.parsedType}),mt}let t;const n=new ht;for(const a of this._def.checks)if("int"===a.kind)Ye.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),ut(t,{code:rt.invalid_type,expected:"integer",received:"float",message:a.message}),n.dirty());else if("min"===a.kind){(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),ut(t,{code:rt.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty())}else if("max"===a.kind){(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),ut(t,{code:rt.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty())}else"multipleOf"===a.kind?0!==Zt(e.data,a.value)&&(t=this._getOrReturnCtx(e,t),ut(t,{code:rt.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):"finite"===a.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),ut(t,{code:rt.not_finite,message:a.message}),n.dirty()):Ye.assertNever(a);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,xt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,xt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,xt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,xt.toString(t))}setLimit(e,t,n,a){return new Wt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:xt.toString(a)}]})}_addCheck(e){return new Wt({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:xt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:xt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:xt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:xt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:xt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:xt.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:xt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:xt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:xt.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&Ye.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Wt.create=e=>new Wt({checks:[],typeName:Pn.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...$t(e)});class Qt extends Et{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==at.bigint){const t=this._getOrReturnCtx(e);return ut(t,{code:rt.invalid_type,expected:at.bigint,received:t.parsedType}),mt}let t;const n=new ht;for(const a of this._def.checks)if("min"===a.kind){(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),ut(t,{code:rt.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty())}else if("max"===a.kind){(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),ut(t,{code:rt.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty())}else"multipleOf"===a.kind?e.data%a.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),ut(t,{code:rt.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):Ye.assertNever(a);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,xt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,xt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,xt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,xt.toString(t))}setLimit(e,t,n,a){return new Qt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:xt.toString(a)}]})}_addCheck(e){return new Qt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:xt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:xt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:xt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:xt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:xt.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Qt.create=e=>{var t;return new Qt({checks:[],typeName:Pn.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...$t(e)})};class Kt extends Et{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==at.boolean){const t=this._getOrReturnCtx(e);return ut(t,{code:rt.invalid_type,expected:at.boolean,received:t.parsedType}),mt}return gt(e.data)}}Kt.create=e=>new Kt({typeName:Pn.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...$t(e)});class Yt extends Et{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==at.date){const t=this._getOrReturnCtx(e);return ut(t,{code:rt.invalid_type,expected:at.date,received:t.parsedType}),mt}if(isNaN(e.data.getTime())){return ut(this._getOrReturnCtx(e),{code:rt.invalid_date}),mt}const t=new ht;let n;for(const a of this._def.checks)"min"===a.kind?e.data.getTime()<a.value&&(n=this._getOrReturnCtx(e,n),ut(n,{code:rt.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),t.dirty()):"max"===a.kind?e.data.getTime()>a.value&&(n=this._getOrReturnCtx(e,n),ut(n,{code:rt.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),t.dirty()):Ye.assertNever(a);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Yt({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:xt.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:xt.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Yt.create=e=>new Yt({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:Pn.ZodDate,...$t(e)});class Gt extends Et{_parse(e){if(this._getType(e)!==at.symbol){const t=this._getOrReturnCtx(e);return ut(t,{code:rt.invalid_type,expected:at.symbol,received:t.parsedType}),mt}return gt(e.data)}}Gt.create=e=>new Gt({typeName:Pn.ZodSymbol,...$t(e)});class Xt extends Et{_parse(e){if(this._getType(e)!==at.undefined){const t=this._getOrReturnCtx(e);return ut(t,{code:rt.invalid_type,expected:at.undefined,received:t.parsedType}),mt}return gt(e.data)}}Xt.create=e=>new Xt({typeName:Pn.ZodUndefined,...$t(e)});class Jt extends Et{_parse(e){if(this._getType(e)!==at.null){const t=this._getOrReturnCtx(e);return ut(t,{code:rt.invalid_type,expected:at.null,received:t.parsedType}),mt}return gt(e.data)}}Jt.create=e=>new Jt({typeName:Pn.ZodNull,...$t(e)});class en extends Et{constructor(){super(...arguments),this._any=!0}_parse(e){return gt(e.data)}}en.create=e=>new en({typeName:Pn.ZodAny,...$t(e)});class tn extends Et{constructor(){super(...arguments),this._unknown=!0}_parse(e){return gt(e.data)}}tn.create=e=>new tn({typeName:Pn.ZodUnknown,...$t(e)});class nn extends Et{_parse(e){const t=this._getOrReturnCtx(e);return ut(t,{code:rt.invalid_type,expected:at.never,received:t.parsedType}),mt}}nn.create=e=>new nn({typeName:Pn.ZodNever,...$t(e)});class an extends Et{_parse(e){if(this._getType(e)!==at.undefined){const t=this._getOrReturnCtx(e);return ut(t,{code:rt.invalid_type,expected:at.void,received:t.parsedType}),mt}return gt(e.data)}}an.create=e=>new an({typeName:Pn.ZodVoid,...$t(e)});class rn extends Et{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),a=this._def;if(t.parsedType!==at.array)return ut(t,{code:rt.invalid_type,expected:at.array,received:t.parsedType}),mt;if(null!==a.exactLength){const e=t.data.length>a.exactLength.value,i=t.data.length<a.exactLength.value;(e||i)&&(ut(t,{code:e?rt.too_big:rt.too_small,minimum:i?a.exactLength.value:void 0,maximum:e?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(null!==a.minLength&&t.data.length<a.minLength.value&&(ut(t,{code:rt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),null!==a.maxLength&&t.data.length>a.maxLength.value&&(ut(t,{code:rt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>a.type._parseAsync(new St(t,e,t.path,n))))).then((e=>ht.mergeArray(n,e)));const i=[...t.data].map(((e,n)=>a.type._parseSync(new St(t,e,t.path,n))));return ht.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new rn({...this._def,minLength:{value:e,message:xt.toString(t)}})}max(e,t){return new rn({...this._def,maxLength:{value:e,message:xt.toString(t)}})}length(e,t){return new rn({...this._def,exactLength:{value:e,message:xt.toString(t)}})}nonempty(e){return this.min(1,e)}}function sn(e){if(e instanceof on){const t={};for(const n in e.shape){const a=e.shape[n];t[n]=Sn.create(sn(a))}return new on({...e._def,shape:()=>t})}return e instanceof rn?new rn({...e._def,type:sn(e.element)}):e instanceof Sn?Sn.create(sn(e.unwrap())):e instanceof kn?kn.create(sn(e.unwrap())):e instanceof mn?mn.create(e.items.map((e=>sn(e)))):e}rn.create=(e,t)=>new rn({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Pn.ZodArray,...$t(t)});class on extends Et{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=Ye.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==at.object){const t=this._getOrReturnCtx(e);return ut(t,{code:rt.invalid_type,expected:at.object,received:t.parsedType}),mt}const{status:t,ctx:n}=this._processInputParams(e),{shape:a,keys:i}=this._getCached(),r=[];if(!(this._def.catchall instanceof nn&&"strip"===this._def.unknownKeys))for(const e in n.data)i.includes(e)||r.push(e);const s=[];for(const e of i){const t=a[e],i=n.data[e];s.push({key:{status:"valid",value:e},value:t._parse(new St(n,i,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof nn){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of r)s.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)r.length>0&&(ut(n,{code:rt.unrecognized_keys,keys:r}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of r){const a=n.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new St(n,a,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of s){const n=await t.key,a=await t.value;e.push({key:n,value:a,alwaysSet:t.alwaysSet})}return e})).then((e=>ht.mergeObjectSync(t,e))):ht.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return xt.errToObj,new on({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var a,i,r,s;const o=null!==(r=null===(i=(a=this._def).errorMap)||void 0===i?void 0:i.call(a,t,n).message)&&void 0!==r?r:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(s=xt.errToObj(e).message)&&void 0!==s?s:o}:{message:o}}}:{}})}strip(){return new on({...this._def,unknownKeys:"strip"})}passthrough(){return new on({...this._def,unknownKeys:"passthrough"})}extend(e){return new on({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new on({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Pn.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new on({...this._def,catchall:e})}pick(e){const t={};return Ye.objectKeys(e).forEach((n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])})),new on({...this._def,shape:()=>t})}omit(e){const t={};return Ye.objectKeys(this.shape).forEach((n=>{e[n]||(t[n]=this.shape[n])})),new on({...this._def,shape:()=>t})}deepPartial(){return sn(this)}partial(e){const t={};return Ye.objectKeys(this.shape).forEach((n=>{const a=this.shape[n];e&&!e[n]?t[n]=a:t[n]=a.optional()})),new on({...this._def,shape:()=>t})}required(e){const t={};return Ye.objectKeys(this.shape).forEach((n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof Sn;)e=e._def.innerType;t[n]=e}})),new on({...this._def,shape:()=>t})}keyof(){return bn(Ye.objectKeys(this.shape))}}on.create=(e,t)=>new on({shape:()=>e,unknownKeys:"strip",catchall:nn.create(),typeName:Pn.ZodObject,...$t(t)}),on.strictCreate=(e,t)=>new on({shape:()=>e,unknownKeys:"strict",catchall:nn.create(),typeName:Pn.ZodObject,...$t(t)}),on.lazycreate=(e,t)=>new on({shape:e,unknownKeys:"strip",catchall:nn.create(),typeName:Pn.ZodObject,...$t(t)});class cn extends Et{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const n=e.map((e=>new st(e.ctx.common.issues)));return ut(t,{code:rt.invalid_union,unionErrors:n}),mt}));{let e;const a=[];for(const i of n){const n={...t,common:{...t.common,issues:[]},parent:null},r=i._parseSync({data:t.data,path:t.path,parent:n});if("valid"===r.status)return r;"dirty"!==r.status||e||(e={result:r,ctx:n}),n.common.issues.length&&a.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=a.map((e=>new st(e)));return ut(t,{code:rt.invalid_union,unionErrors:i}),mt}}get options(){return this._def.options}}cn.create=(e,t)=>new cn({options:e,typeName:Pn.ZodUnion,...$t(t)});const ln=e=>e instanceof vn?ln(e.schema):e instanceof Mn?ln(e.innerType()):e instanceof yn?[e.value]:e instanceof wn?e.options:e instanceof xn?Ye.objectValues(e.enum):e instanceof $n?ln(e._def.innerType):e instanceof Xt?[void 0]:e instanceof Jt?[null]:e instanceof Sn?[void 0,...ln(e.unwrap())]:e instanceof kn?[null,...ln(e.unwrap())]:e instanceof Tn||e instanceof jn?ln(e.unwrap()):e instanceof En?ln(e._def.innerType):[];class dn extends Et{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==at.object)return ut(t,{code:rt.invalid_type,expected:at.object,received:t.parsedType}),mt;const n=this.discriminator,a=t.data[n],i=this.optionsMap.get(a);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(ut(t,{code:rt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),mt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const a=new Map;for(const n of t){const t=ln(n.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const i of t){if(a.has(i))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);a.set(i,n)}}return new dn({typeName:Pn.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a,...$t(n)})}}function un(e,t){const n=it(e),a=it(t);if(e===t)return{valid:!0,data:e};if(n===at.object&&a===at.object){const n=Ye.objectKeys(t),a=Ye.objectKeys(e).filter((e=>-1!==n.indexOf(e))),i={...e,...t};for(const n of a){const a=un(e[n],t[n]);if(!a.valid)return{valid:!1};i[n]=a.data}return{valid:!0,data:i}}if(n===at.array&&a===at.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let a=0;a<e.length;a++){const i=un(e[a],t[a]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}return n===at.date&&a===at.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class hn extends Et{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=(e,a)=>{if(ft(e)||ft(a))return mt;const i=un(e.value,a.value);return i.valid?((_t(e)||_t(a))&&t.dirty(),{status:t.value,value:i.data}):(ut(n,{code:rt.invalid_intersection_types}),mt)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([e,t])=>a(e,t))):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}hn.create=(e,t,n)=>new hn({left:e,right:t,typeName:Pn.ZodIntersection,...$t(n)});class mn extends Et{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==at.array)return ut(n,{code:rt.invalid_type,expected:at.array,received:n.parsedType}),mt;if(n.data.length<this._def.items.length)return ut(n,{code:rt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),mt;!this._def.rest&&n.data.length>this._def.items.length&&(ut(n,{code:rt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...n.data].map(((e,t)=>{const a=this._def.items[t]||this._def.rest;return a?a._parse(new St(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(a).then((e=>ht.mergeArray(t,e))):ht.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new mn({...this._def,rest:e})}}mn.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new mn({items:e,typeName:Pn.ZodTuple,rest:null,...$t(t)})};class pn extends Et{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==at.object)return ut(n,{code:rt.invalid_type,expected:at.object,received:n.parsedType}),mt;const a=[],i=this._def.keyType,r=this._def.valueType;for(const e in n.data)a.push({key:i._parse(new St(n,e,n.path,e)),value:r._parse(new St(n,n.data[e],n.path,e)),alwaysSet:e in n.data});return n.common.async?ht.mergeObjectAsync(t,a):ht.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,n){return new pn(t instanceof Et?{keyType:e,valueType:t,typeName:Pn.ZodRecord,...$t(n)}:{keyType:Ut.create(),valueType:e,typeName:Pn.ZodRecord,...$t(t)})}}class gn extends Et{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==at.map)return ut(n,{code:rt.invalid_type,expected:at.map,received:n.parsedType}),mt;const a=this._def.keyType,i=this._def.valueType,r=[...n.data.entries()].map((([e,t],r)=>({key:a._parse(new St(n,e,n.path,[r,"key"])),value:i._parse(new St(n,t,n.path,[r,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of r){const a=await n.key,i=await n.value;if("aborted"===a.status||"aborted"===i.status)return mt;"dirty"!==a.status&&"dirty"!==i.status||t.dirty(),e.set(a.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of r){const a=n.key,i=n.value;if("aborted"===a.status||"aborted"===i.status)return mt;"dirty"!==a.status&&"dirty"!==i.status||t.dirty(),e.set(a.value,i.value)}return{status:t.value,value:e}}}}gn.create=(e,t,n)=>new gn({valueType:t,keyType:e,typeName:Pn.ZodMap,...$t(n)});class fn extends Et{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==at.set)return ut(n,{code:rt.invalid_type,expected:at.set,received:n.parsedType}),mt;const a=this._def;null!==a.minSize&&n.data.size<a.minSize.value&&(ut(n,{code:rt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),null!==a.maxSize&&n.data.size>a.maxSize.value&&(ut(n,{code:rt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const i=this._def.valueType;function r(e){const n=new Set;for(const a of e){if("aborted"===a.status)return mt;"dirty"===a.status&&t.dirty(),n.add(a.value)}return{status:t.value,value:n}}const s=[...n.data.values()].map(((e,t)=>i._parse(new St(n,e,n.path,t))));return n.common.async?Promise.all(s).then((e=>r(e))):r(s)}min(e,t){return new fn({...this._def,minSize:{value:e,message:xt.toString(t)}})}max(e,t){return new fn({...this._def,maxSize:{value:e,message:xt.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}fn.create=(e,t)=>new fn({valueType:e,minSize:null,maxSize:null,typeName:Pn.ZodSet,...$t(t)});class _n extends Et{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==at.function)return ut(t,{code:rt.invalid_type,expected:at.function,received:t.parsedType}),mt;function n(e,n){return dt({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,lt(),ot].filter((e=>!!e)),issueData:{code:rt.invalid_arguments,argumentsError:n}})}function a(e,n){return dt({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,lt(),ot].filter((e=>!!e)),issueData:{code:rt.invalid_return_type,returnTypeError:n}})}const i={errorMap:t.common.contextualErrorMap},r=t.data;if(this._def.returns instanceof Cn){const e=this;return gt((async function(...t){const s=new st([]),o=await e._def.args.parseAsync(t,i).catch((e=>{throw s.addIssue(n(t,e)),s})),c=await Reflect.apply(r,this,o),l=await e._def.returns._def.type.parseAsync(c,i).catch((e=>{throw s.addIssue(a(c,e)),s}));return l}))}{const e=this;return gt((function(...t){const s=e._def.args.safeParse(t,i);if(!s.success)throw new st([n(t,s.error)]);const o=Reflect.apply(r,this,s.data),c=e._def.returns.safeParse(o,i);if(!c.success)throw new st([a(o,c.error)]);return c.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new _n({...this._def,args:mn.create(e).rest(tn.create())})}returns(e){return new _n({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new _n({args:e||mn.create([]).rest(tn.create()),returns:t||tn.create(),typeName:Pn.ZodFunction,...$t(n)})}}class vn extends Et{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}vn.create=(e,t)=>new vn({getter:e,typeName:Pn.ZodLazy,...$t(t)});class yn extends Et{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return ut(t,{received:t.data,code:rt.invalid_literal,expected:this._def.value}),mt}return{status:"valid",value:e.data}}get value(){return this._def.value}}function bn(e,t){return new wn({values:e,typeName:Pn.ZodEnum,...$t(t)})}yn.create=(e,t)=>new yn({value:e,typeName:Pn.ZodLiteral,...$t(t)});class wn extends Et{constructor(){super(...arguments),Ct.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return ut(t,{expected:Ye.joinValues(n),received:t.parsedType,code:rt.invalid_type}),mt}if(bt(this,Ct,"f")||wt(this,Ct,new Set(this._def.values),"f"),!bt(this,Ct,"f").has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return ut(t,{received:t.data,code:rt.invalid_enum_value,options:n}),mt}return gt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return wn.create(e,{...this._def,...t})}exclude(e,t=this._def){return wn.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}Ct=new WeakMap,wn.create=bn;class xn extends Et{constructor(){super(...arguments),Mt.set(this,void 0)}_parse(e){const t=Ye.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==at.string&&n.parsedType!==at.number){const e=Ye.objectValues(t);return ut(n,{expected:Ye.joinValues(e),received:n.parsedType,code:rt.invalid_type}),mt}if(bt(this,Mt,"f")||wt(this,Mt,new Set(Ye.getValidEnumValues(this._def.values)),"f"),!bt(this,Mt,"f").has(e.data)){const e=Ye.objectValues(t);return ut(n,{received:n.data,code:rt.invalid_enum_value,options:e}),mt}return gt(e.data)}get enum(){return this._def.values}}Mt=new WeakMap,xn.create=(e,t)=>new xn({values:e,typeName:Pn.ZodNativeEnum,...$t(t)});class Cn extends Et{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==at.promise&&!1===t.common.async)return ut(t,{code:rt.invalid_type,expected:at.promise,received:t.parsedType}),mt;const n=t.parsedType===at.promise?t.data:Promise.resolve(t.data);return gt(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}Cn.create=(e,t)=>new Cn({type:e,typeName:Pn.ZodPromise,...$t(t)});class Mn extends Et{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Pn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=this._def.effect||null,i={addIssue:e=>{ut(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===a.type){const e=a.transform(n.data,i);if(n.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return mt;const a=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===a.status?mt:"dirty"===a.status||"dirty"===t.value?pt(a.value):a}));{if("aborted"===t.value)return mt;const a=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===a.status?mt:"dirty"===a.status||"dirty"===t.value?pt(a.value):a}}if("refinement"===a.type){const e=e=>{const t=a.refinement(e,i);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===a.status?mt:("dirty"===a.status&&t.dirty(),e(a.value),{status:t.value,value:a.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?mt:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===a.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!vt(e))return e;const r=a.transform(e.value,i);if(r instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:r}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>vt(e)?Promise.resolve(a.transform(e.value,i)).then((e=>({status:t.value,value:e}))):e))}Ye.assertNever(a)}}Mn.create=(e,t,n)=>new Mn({schema:e,typeName:Pn.ZodEffects,effect:t,...$t(n)}),Mn.createWithPreprocess=(e,t,n)=>new Mn({schema:t,effect:{type:"preprocess",transform:e},typeName:Pn.ZodEffects,...$t(n)});class Sn extends Et{_parse(e){return this._getType(e)===at.undefined?gt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Sn.create=(e,t)=>new Sn({innerType:e,typeName:Pn.ZodOptional,...$t(t)});class kn extends Et{_parse(e){return this._getType(e)===at.null?gt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}kn.create=(e,t)=>new kn({innerType:e,typeName:Pn.ZodNullable,...$t(t)});class $n extends Et{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===at.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}$n.create=(e,t)=>new $n({innerType:e,typeName:Pn.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...$t(t)});class En extends Et{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return yt(a)?a.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new st(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new st(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}En.create=(e,t)=>new En({innerType:e,typeName:Pn.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...$t(t)});class An extends Et{_parse(e){if(this._getType(e)!==at.nan){const t=this._getOrReturnCtx(e);return ut(t,{code:rt.invalid_type,expected:at.nan,received:t.parsedType}),mt}return{status:"valid",value:e.data}}}An.create=e=>new An({typeName:Pn.ZodNaN,...$t(e)});const In=Symbol("zod_brand");class Tn extends Et{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class zn extends Et{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?mt:"dirty"===e.status?(t.dirty(),pt(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?mt:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new zn({in:e,out:t,typeName:Pn.ZodPipeline})}}class jn extends Et{_parse(e){const t=this._def.innerType._parse(e),n=e=>(vt(e)&&(e.value=Object.freeze(e.value)),e);return yt(t)?t.then((e=>n(e))):n(t)}unwrap(){return this._def.innerType}}function On(e,t={},n){return e?en.create().superRefine(((a,i)=>{var r,s;if(!e(a)){const e="function"==typeof t?t(a):"string"==typeof t?{message:t}:t,o=null===(s=null!==(r=e.fatal)&&void 0!==r?r:n)||void 0===s||s,c="string"==typeof e?{message:e}:e;i.addIssue({code:"custom",...c,fatal:o})}})):en.create()}jn.create=(e,t)=>new jn({innerType:e,typeName:Pn.ZodReadonly,...$t(t)});const Dn={object:on.lazycreate};var Pn;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Pn||(Pn={}));const Rn=Ut.create,Ln=Wt.create,Nn=An.create,Fn=Qt.create,Vn=Kt.create,Hn=Yt.create,Bn=Gt.create,qn=Xt.create,Un=Jt.create,Zn=en.create,Wn=tn.create,Qn=nn.create,Kn=an.create,Yn=rn.create,Gn=on.create,Xn=on.strictCreate,Jn=cn.create,ea=dn.create,ta=hn.create,na=mn.create,aa=pn.create,ia=gn.create,ra=fn.create,sa=_n.create,oa=vn.create,ca=yn.create,la=wn.create,da=xn.create,ua=Cn.create,ha=Mn.create,ma=Sn.create,pa=kn.create,ga=Mn.createWithPreprocess,fa=zn.create,_a={string:e=>Ut.create({...e,coerce:!0}),number:e=>Wt.create({...e,coerce:!0}),boolean:e=>Kt.create({...e,coerce:!0}),bigint:e=>Qt.create({...e,coerce:!0}),date:e=>Yt.create({...e,coerce:!0})},va=mt;var ya=Object.freeze({__proto__:null,defaultErrorMap:ot,setErrorMap:function(e){ct=e},getErrorMap:lt,makeIssue:dt,EMPTY_PATH:[],addIssueToContext:ut,ParseStatus:ht,INVALID:mt,DIRTY:pt,OK:gt,isAborted:ft,isDirty:_t,isValid:vt,isAsync:yt,get util(){return Ye},get objectUtil(){return Ge},ZodParsedType:at,getParsedType:it,ZodType:Et,datetimeRegex:Bt,ZodString:Ut,ZodNumber:Wt,ZodBigInt:Qt,ZodBoolean:Kt,ZodDate:Yt,ZodSymbol:Gt,ZodUndefined:Xt,ZodNull:Jt,ZodAny:en,ZodUnknown:tn,ZodNever:nn,ZodVoid:an,ZodArray:rn,ZodObject:on,ZodUnion:cn,ZodDiscriminatedUnion:dn,ZodIntersection:hn,ZodTuple:mn,ZodRecord:pn,ZodMap:gn,ZodSet:fn,ZodFunction:_n,ZodLazy:vn,ZodLiteral:yn,ZodEnum:wn,ZodNativeEnum:xn,ZodPromise:Cn,ZodEffects:Mn,ZodTransformer:Mn,ZodOptional:Sn,ZodNullable:kn,ZodDefault:$n,ZodCatch:En,ZodNaN:An,BRAND:In,ZodBranded:Tn,ZodPipeline:zn,ZodReadonly:jn,custom:On,Schema:Et,ZodSchema:Et,late:Dn,get ZodFirstPartyTypeKind(){return Pn},coerce:_a,any:Zn,array:Yn,bigint:Fn,boolean:Vn,date:Hn,discriminatedUnion:ea,effect:ha,enum:la,function:sa,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>On((t=>t instanceof e),t),intersection:ta,lazy:oa,literal:ca,map:ia,nan:Nn,nativeEnum:da,never:Qn,null:Un,nullable:pa,number:Ln,object:Gn,oboolean:()=>Vn().optional(),onumber:()=>Ln().optional(),optional:ma,ostring:()=>Rn().optional(),pipeline:fa,preprocess:ga,promise:ua,record:aa,set:ra,strictObject:Xn,string:Rn,symbol:Bn,transformer:ha,tuple:na,undefined:qn,union:Jn,unknown:Wn,void:Kn,NEVER:va,ZodIssueCode:rt,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:st});const ba="https://card.camera/#/troubleshooting",wa=`${ba}?id=stream-does-not-load`,xa="cameras",Ca=`${xa}.#.always_error_if_entity_unavailable`,Ma=`${xa}.#.camera_entity`,Sa=`${xa}.#.frigate.camera_name`,ka=`${xa}.#.capabilities.disable`,$a=`${xa}.#.capabilities.disable_except`,Ea=`${xa}.#.cast.method`,Aa=`${xa}.#.cast.dashboard.dashboard_path`,Ia=`${xa}.#.cast.dashboard.view_path`,Ta=`${xa}.#.dimensions.aspect_ratio`,za=`${xa}.#.frigate.client_id`,ja=`${xa}.#.frigate.labels`,Oa=`${xa}.#.frigate.url`,Da=`${xa}.#.frigate.zones`,Pa=`${xa}.#.go2rtc.modes`,Ra=`${xa}.#.go2rtc.stream`,La=`${xa}.#.go2rtc.url`,Na=`${xa}.#.icon`,Fa=`${xa}.#.id`,Va=`${xa}.#.image.entity`,Ha=`${xa}.#.image.entity_parameters`,Ba=`${xa}.#.image.mode`,qa=`${xa}.#.image.refresh_seconds`,Ua=`${xa}.#.image.url`,Za=`${xa}.#.motioneye.images.directory_pattern`,Wa=`${xa}.#.motioneye.images.file_pattern`,Qa=`${xa}.#.motioneye.movies.directory_pattern`,Ka=`${xa}.#.motioneye.movies.file_pattern`,Ya=`${xa}.#.motioneye.url`,Ga=`${xa}.#.title`,Xa=`${xa}.#.webrtc_card.entity`,Ja=`${xa}.#.webrtc_card.url`,ei=`${xa}.#.live_provider`,ti=`${xa}.#.dependencies.cameras`,ni=`${xa}.#.dependencies.all_cameras`,ai=`${xa}.#.dimensions.layout.fit`,ii=`${xa}.#.dimensions.layout.pan.x`,ri=`${xa}.#.dimensions.layout.pan.y`,si=`${xa}.#.dimensions.layout.position.x`,oi=`${xa}.#.dimensions.layout.position.y`,ci=`${xa}.#.dimensions.layout.view_box.top`,li=`${xa}.#.dimensions.layout.view_box.bottom`,di=`${xa}.#.dimensions.layout.view_box.left`,ui=`${xa}.#.dimensions.layout.view_box.right`,hi=`${xa}.#.dimensions.layout.zoom`,mi=`${xa}.#.proxy.dynamic`,pi=`${xa}.#.proxy.media`,gi=`${xa}.#.proxy.ssl_ciphers`,fi=`${xa}.#.proxy.ssl_verification`,_i=`${xa}.#.reolink.media_resolution`,vi=`${xa}.#.reolink.url`,yi=`${xa}.#.triggers.motion`,bi=`${xa}.#.triggers.occupancy`,wi=`${xa}.#.triggers.entities`,xi=`${xa}.#.triggers.events`,Ci="cameras_global",Mi=`${Ci}.live_provider`,Si=`${Ci}.triggers.occupancy`,ki=`${Ci}.image.refresh_seconds`,$i=`${Ci}.dimensions.layout`,Ei=`${Ci}.ptz`,Ai="elements",Ii="view",Ti=`${Ii}.camera_select`,zi=`${Ii}.default`,ji=`${Ii}.dim`,Oi=`${Ii}.interaction_seconds`,Di=`${Ii}.keyboard_shortcuts`,Pi=`${Ii}.keyboard_shortcuts.enabled`,Ri=`${Di}.ptz_left`,Li=`${Di}.ptz_right`,Ni=`${Di}.ptz_up`,Fi=`${Di}.ptz_down`,Vi=`${Di}.ptz_zoom_in`,Hi=`${Di}.ptz_zoom_out`,Bi=`${Di}.ptz_home`,qi=`${Ii}.default_cycle_camera`,Ui=`${Ii}.default_reset`,Zi=`${Ui}.interaction_mode`,Wi=`${Ui}.every_seconds`,Qi=`${Ui}.entities`,Ki=`${Ui}.after_interaction`,Yi=`${Ii}.theme.themes`,Gi=`${Ii}.triggers`,Xi=`${Gi}.show_trigger_status`,Ji=`${Gi}.filter_selected_camera`,er=`${Gi}.untrigger_seconds`,tr=`${Gi}.actions`,nr=`${tr}.trigger`,ar=`${tr}.untrigger`,ir=`${tr}.interaction_mode`,rr="media_gallery",sr=`${rr}.controls.filter.mode`,or=`${rr}.controls.thumbnails.show_details`,cr=`${rr}.controls.thumbnails.show_download_control`,lr=`${rr}.controls.thumbnails.show_favorite_control`,dr=`${rr}.controls.thumbnails.show_timeline_control`,ur=`${rr}.controls.thumbnails.size`,hr="media_viewer",mr=`${hr}.auto_play`,pr=`${hr}.auto_pause`,gr=`${hr}.auto_mute`,fr=`${hr}.auto_unmute`,_r=`${hr}.display.mode`,vr=`${hr}.display.grid_columns`,yr=`${hr}.display.grid_max_columns`,br=`${hr}.display.grid_selected_width_factor`,wr=`${hr}.draggable`,xr=`${hr}.lazy_load`,Cr=`${hr}.snapshot_click_plays_clip`,Mr=`${hr}.transition_effect`,Sr=`${hr}.controls.builtin`,kr=`${hr}.controls.next_previous.style`,$r=`${hr}.controls.next_previous.size`,Er=`${hr}.controls.thumbnails.mode`,Ar=`${hr}.controls.thumbnails.show_details`,Ir=`${hr}.controls.thumbnails.show_download_control`,Tr=`${hr}.controls.thumbnails.show_favorite_control`,zr=`${hr}.controls.thumbnails.show_timeline_control`,jr=`${hr}.controls.thumbnails.size`,Or=`${hr}.controls.timeline.clustering_threshold`,Dr=`${hr}.controls.timeline.events_media_type`,Pr=`${hr}.controls.timeline.format.24h`,Rr=`${hr}.controls.timeline.mode`,Lr=`${hr}.controls.timeline.pan_mode`,Nr=`${hr}.controls.timeline.show_recordings`,Fr=`${hr}.controls.timeline.style`,Vr=`${hr}.controls.timeline.window_seconds`,Hr=`${hr}.zoomable`,Br="live",qr=`${Br}.auto_play`,Ur=`${Br}.auto_pause`,Zr=`${Br}.auto_mute`,Wr=`${Br}.auto_unmute`,Qr=`${Br}.controls.builtin`,Kr=`${Br}.controls.next_previous.style`,Yr=`${Br}.controls.next_previous.size`,Gr=`${Br}.controls.ptz.hide_home`,Xr=`${Br}.controls.ptz.hide_pan_tilt`,Jr=`${Br}.controls.ptz.hide_zoom`,es=`${Br}.controls.ptz.mode`,ts=`${Br}.controls.ptz.orientation`,ns=`${Br}.controls.ptz.position`,as=`${Br}.controls.thumbnails.media_type`,is=`${Br}.controls.thumbnails.events_media_type`,rs=`${Br}.controls.thumbnails.mode`,ss=`${Br}.controls.thumbnails.size`,os=`${Br}.controls.thumbnails.show_details`,cs=`${Br}.controls.thumbnails.show_download_control`,ls=`${Br}.controls.thumbnails.show_favorite_control`,ds=`${Br}.controls.thumbnails.show_timeline_control`,us=`${Br}.controls.timeline.clustering_threshold`,hs=`${Br}.controls.timeline.events_media_type`,ms=`${Br}.controls.timeline.format.24h`,ps=`${Br}.controls.timeline.mode`,gs=`${Br}.controls.timeline.pan_mode`,fs=`${Br}.controls.timeline.show_recordings`,_s=`${Br}.controls.timeline.style`,vs=`${Br}.controls.timeline.window_seconds`,ys=`${Br}.display.mode`,bs=`${Br}.display.grid_columns`,ws=`${Br}.display.grid_max_columns`,xs=`${Br}.display.grid_selected_width_factor`,Cs=`${Br}.draggable`,Ms=`${Br}.lazy_load`,Ss=`${Br}.lazy_unload`,ks=`${Br}.preload`,$s=`${Br}.transition_effect`,Es=`${Br}.show_image_during_load`,As=`${Br}.microphone.disconnect_seconds`,Is=`${Br}.microphone.mute_after_microphone_mute_seconds`,Ts=`${Br}.microphone.always_connected`,zs=`${Br}.zoomable`,js="image",Os=`${js}.entity`,Ds=`${js}.entity_parameters`,Ps=`${js}.mode`,Rs=`${js}.refresh_seconds`,Ls=`${js}.url`,Ns="timeline",Fs=`${Ns}.window_seconds`,Vs=`${Ns}.clustering_threshold`,Hs=`${Ns}.events_media_type`,Bs=`${Ns}.format.24h`,qs=`${Ns}.show_recordings`,Us=`${Ns}.style`,Zs=`${Ns}.controls.thumbnails.mode`,Ws=`${Ns}.controls.thumbnails.size`,Qs=`${Ns}.controls.thumbnails.show_details`,Ks=`${Ns}.controls.thumbnails.show_download_control`,Ys=`${Ns}.controls.thumbnails.show_favorite_control`,Gs=`${Ns}.controls.thumbnails.show_timeline_control`,Xs="menu",Js=`${Xs}.alignment`,eo=`${Xs}.position`,to=`${Xs}.style`,no=`${Xs}.button_size`,ao=`${Xs}.buttons`,io=`${ao}.fullscreen`,ro=`${ao}.iris`,so=`${ao}.play`,oo=`${ao}.mute`,co=`${ao}.media_player`,lo=`${ao}.timeline`,uo="status_bar",ho=`${uo}.position`,mo=`${uo}.style`,po=`${uo}.popup_seconds`,go=`${uo}.height`,fo=`${uo}.items`,_o="dimensions",vo=`${_o}.aspect_ratio`,yo=`${_o}.aspect_ratio_mode`,bo=`${_o}.height`,wo="overrides",xo="performance",Co=`${xo}.features.animated_progress_indicator`,Mo=`${xo}.features.card_loading_indicator`,So=`${xo}.features.media_chunk_size`,ko=`${xo}.features.max_simultaneous_engine_requests`,$o=`${xo}.profile`,Eo=`${xo}.style.box_shadow`,Ao=`${xo}.style.border_radius`,Io="profiles",To=1e3,zo="__IMAGE_VIEW_ZOOM__";class jo extends Error{constructor(e,t){super(e),this.context=t}}const Oo=["clips","favorite-events","favorite-recordings","live","menu","ptz","recordings","seek","snapshots","substream","trigger"],Do=ya.object({url:ya.string(),mime_type:ya.string()}),Po=ya.object({path:ya.string()});function Ro(e){if(e instanceof ya.ZodDefault)return Ro(e.removeDefault());if(e instanceof ya.ZodObject){const t={};for(const n in e.shape){const a=e.shape[n];t[n]=ya.ZodOptional.create(Ro(a))}return new ya.ZodObject({...e._def,shape:()=>t})}return e instanceof ya.ZodArray?ya.ZodArray.create(Ro(e.element)).min(e._def.minLength?.value,e._def.minLength?.message).max(e._def.maxLength?.value,e._def.maxLength?.message).length(e._def.exactLength?.value,e._def.exactLength?.message):e instanceof ya.ZodOptional?ya.ZodOptional.create(Ro(e.unwrap())):e instanceof ya.ZodNullable?ya.ZodNullable.create(Ro(e.unwrap())):e instanceof ya.ZodTuple?ya.ZodTuple.create(e.items.map((e=>Ro(e)))):e}function Lo(e){const t=e.format();return Object.keys(t).filter((e=>!e.startsWith("_")))}const No=e=>{const t=new Set;if(e.issues.length)for(const n of e.issues)if("invalid_union"===n.code){const e=n.unionErrors;for(const n of e)No(n).forEach(t.add,t)}else t.add(Fo(n.path));return t},Fo=e=>{let t="";for(let n=0;n<e.length;n++){const a=e[n];"number"==typeof a?t+="["+a+"]":t?t+=" -> "+a:t=a}return t},Vo=ya.object({key:ya.string(),ctrl:ya.boolean().optional(),shift:ya.boolean().optional(),alt:ya.boolean().optional(),meta:ya.boolean().optional()}),Ho={enabled:!0,ptz_left:{key:"ArrowLeft"},ptz_right:{key:"ArrowRight"},ptz_up:{key:"ArrowUp"},ptz_down:{key:"ArrowDown"},ptz_zoom_in:{key:"+"},ptz_zoom_out:{key:"-"},ptz_home:{key:"h"}},Bo=ya.object({enabled:ya.boolean().default(Ho.enabled),ptz_left:Vo.nullable().default(Ho.ptz_left),ptz_right:Vo.nullable().default(Ho.ptz_right),ptz_up:Vo.nullable().default(Ho.ptz_up),ptz_down:Vo.nullable().default(Ho.ptz_down),ptz_zoom_in:Vo.nullable().default(Ho.ptz_zoom_in),ptz_zoom_out:Vo.nullable().default(Ho.ptz_zoom_out),ptz_home:Vo.nullable().default(Ho.ptz_home)}),qo=[...["left","right","up","down","zoom_in","zoom_out"],"preset"],Uo=20,Zo=20,Wo=100,Qo=Wo,Ko=["diagnostics","live","clip","clips","snapshot","snapshots","recording","recordings","image","timeline"],Yo="live",Go=["unselected","hidden"],Xo=["selected","visible"],Jo=[...Xo,"microphone"],ec=[...Go,"microphone"],tc=["start","stop"],nc=["events","clips","snapshots"],ac=/^[-\w]+$/,ic=1,rc=10,sc=ya.object({x:ya.number().min(0).max(100).optional(),y:ya.number().min(0).max(100).optional()}),oc=ya.number().min(1).max(10),cc=ya.enum(["single","grid"]),lc=ya.object({mode:cc.optional(),grid_selected_width_factor:ya.number().min(0).optional(),grid_max_columns:ya.number().min(0).optional(),grid_columns:ya.number().min(0).optional()}).optional(),dc=ya.object({confirmation:ya.boolean().or(ya.object({text:ya.string().optional(),exemptions:ya.object({user:ya.string()}).array().optional()})).optional()}),uc=dc.extend({action:ya.literal("toggle")}),hc=ya.object({entity_id:ya.string().optional(),device_id:ya.string().optional(),area_id:ya.string().optional()}),mc=dc.extend({action:ya.literal("perform-action"),perform_action:ya.string(),data:ya.object({}).passthrough().optional(),target:hc.optional()}),pc=dc.extend({action:ya.literal("call-service"),service:ya.string(),data:ya.object({}).passthrough().optional(),target:hc.optional()}),gc=dc.extend({action:ya.literal("navigate"),navigation_path:ya.string()}),fc=dc.extend({action:ya.literal("url"),url_path:ya.string()}),_c=dc.extend({action:ya.literal("more-info")}),vc=dc.extend({action:ya.literal("fire-dom-event")}).passthrough(),yc=dc.extend({action:ya.literal("none")}),bc=vc.extend({action:ya.literal("custom:advanced-camera-card-action").transform((()=>"fire-dom-event")).or(ya.literal("fire-dom-event")),card_id:ya.string().regex(ac,"card_id parameter can only contain [a-z][A-Z][0-9_]-").optional()}),wc=bc.extend({advanced_camera_card_action:ya.enum(Ko)}),xc=bc.extend({advanced_camera_card_action:ya.enum(["camera_ui","default","download","expand","fullscreen","live_substream_off","live_substream_on","menu_toggle","microphone_connect","microphone_disconnect","microphone_mute","microphone_unmute","mute","pause","play","screenshot","unmute"])}),Cc=bc.extend({advanced_camera_card_action:ya.literal("camera_select"),camera:ya.string().optional(),triggered:ya.boolean().optional()}),Mc=bc.extend({advanced_camera_card_action:ya.literal("live_substream_select"),camera:ya.string()}),Sc=bc.extend({advanced_camera_card_action:ya.literal("media_player"),media_player:ya.string(),media_player_action:ya.enum(["play","stop"])}),kc=bc.extend({advanced_camera_card_action:ya.literal("display_mode_select"),display_mode:cc}),$c=bc.extend({advanced_camera_card_action:ya.literal("ptz"),camera:ya.string().optional(),ptz_action:ya.enum(qo).optional(),ptz_phase:ya.enum(tc).optional(),ptz_preset:ya.string().optional()}),Ec=bc.extend({advanced_camera_card_action:ya.literal("ptz_digital"),target_id:ya.string().optional(),absolute:ya.object({zoom:oc.optional(),pan:sc.optional()}).optional(),ptz_action:ya.enum(qo).optional(),ptz_phase:ya.enum(tc).optional()}),Ac=bc.extend({advanced_camera_card_action:ya.literal("ptz_multi"),target_id:ya.string().optional(),ptz_action:ya.enum(qo).optional(),ptz_phase:ya.enum(tc).optional(),ptz_preset:ya.string().optional()}),Ic=bc.extend({advanced_camera_card_action:ya.literal("ptz_controls"),enabled:ya.boolean()}),Tc=ya.object({ms:ya.number().optional(),s:ya.number().optional(),m:ya.number().optional(),h:ya.number().optional()}),zc=bc.extend({advanced_camera_card_action:ya.literal("sleep"),duration:Tc.optional().default({s:1})}),jc=bc.extend({advanced_camera_card_action:ya.literal("status_bar"),status_bar_action:ya.enum(["add","remove","reset"]),items:ya.lazy((()=>dl)).array().optional()}),Oc=bc.extend({advanced_camera_card_action:ya.literal("log"),message:ya.string(),level:ya.enum(["debug","info","warn","error"]).default("info")}),Dc=ya.union([Cc,xc,Mc,Oc,Sc,$c,Ec,Ac,Ic,wc,kc,zc,jc]),Pc=ya.union([uc,pc,mc,gc,fc,_c,yc,vc,Dc]),Rc=ya.object({tap_action:Pc.or(Pc.array()).optional(),hold_action:Pc.or(Pc.array()).optional(),double_tap_action:Pc.or(Pc.array()).optional(),start_tap_action:Pc.or(Pc.array()).optional(),end_tap_action:Pc.or(Pc.array()).optional()}).passthrough(),Lc=ya.object({actions:Rc.optional()}),Nc=Rc.extend({style:ya.record(ya.string().nullable().or(ya.undefined()).or(ya.number())).optional(),title:ya.string().nullable().optional()}),Fc=Nc.extend({type:ya.literal("state-badge"),entity:ya.string()}),Vc=Nc.extend({type:ya.literal("state-icon"),entity:ya.string(),icon:ya.string().optional(),state_color:ya.boolean().default(!0)}),Hc=Nc.extend({type:ya.literal("state-label"),entity:ya.string(),attribute:ya.string().optional(),prefix:ya.string().optional(),suffix:ya.string().optional()}),Bc=Nc.extend({type:ya.literal("service-button"),title:ya.string(),service:ya.string(),service_data:ya.object({}).passthrough().optional()}),qc=Nc.extend({type:ya.literal("icon"),icon:ya.string(),entity:ya.string().optional()}),Uc=Nc.extend({type:ya.literal("image"),entity:ya.string().optional(),image:ya.string().optional(),camera_image:ya.string().optional(),camera_view:ya.string().optional(),state_image:ya.object({}).passthrough().optional(),filter:ya.string().optional(),state_filter:ya.object({}).passthrough().optional(),aspect_ratio:ya.string().optional()}),Zc=ya.object({condition:ya.literal("state").optional(),entity:ya.string(),state:ya.string().or(ya.string().array()).optional(),state_not:ya.string().or(ya.string().array()).optional()}),Wc=ya.object({condition:ya.literal("numeric_state"),entity:ya.string(),above:ya.number().optional(),below:ya.number().optional()}),Qc=ya.object({condition:ya.literal("screen"),media_query:ya.string()}),Kc=ya.object({condition:ya.literal("user"),users:ya.string().array().min(1)}),Yc=ya.discriminatedUnion("condition",[Zc,Wc,Qc,Kc]),Gc=ya.object({type:ya.literal("conditional"),conditions:Yc.array(),elements:ya.lazy((()=>Ml))}),Xc=ya.object({type:ya.string().superRefine(((e,t)=>{e.match(/^custom:(?!advanced-camera-card).+/)||t.addIssue({code:ya.ZodIssueCode.custom,message:"advanced-camera-card custom elements must match specific schemas",fatal:!0})}))}).passthrough(),Jc=ya.object({enabled:ya.boolean().default(!0).optional(),priority:ya.number().min(0).max(Wo).default(50).optional(),alignment:ya.enum(["matching","opposing"]).default("matching").optional(),icon:ya.string().optional(),permanent:ya.boolean().default(!1).optional()}),el=Jc.merge(qc).extend({type:ya.literal("custom:advanced-camera-card-menu-icon")}),tl=Jc.merge(Vc).extend({type:ya.literal("custom:advanced-camera-card-menu-state-icon")}).merge(Jc),nl=Nc.extend({entity:ya.string().optional(),icon:ya.string().optional(),state_color:ya.boolean().default(!0),selected:ya.boolean().default(!1),subtitle:ya.string().optional(),enabled:ya.boolean().default(!0)}),al=Jc.merge(qc).extend({type:ya.literal("custom:advanced-camera-card-menu-submenu"),items:nl.array()}),il=Jc.merge(Vc).extend({type:ya.literal("custom:advanced-camera-card-menu-submenu-select"),options:ya.record(nl.deepPartial()).optional()}),rl=ya.object({enabled:ya.boolean().default(!0).optional(),priority:ya.number().min(0).max(100).default(50).optional()}),sl=rl.extend({sufficient:ya.boolean().default(!1).optional(),exclusive:ya.boolean().default(!1).optional(),expand:ya.boolean().default(!1).optional(),actions:Rc.optional()}),ol=sl.extend({type:ya.literal("custom:advanced-camera-card-status-bar-icon"),icon:ya.string()}),cl=sl.extend({type:ya.literal("custom:advanced-camera-card-status-bar-image"),image:ya.string()}),ll=sl.extend({type:ya.literal("custom:advanced-camera-card-status-bar-string"),string:ya.string()}),dl=ya.union([ol,cl,ll]),ul=ya.object({condition:ya.literal("view"),views:ya.string().array()}),hl=ya.object({condition:ya.literal("fullscreen"),fullscreen:ya.boolean()}),ml=ya.object({condition:ya.literal("expand"),expand:ya.boolean()}),pl=ya.object({condition:ya.literal("camera"),cameras:ya.string().array()}),gl=ya.object({condition:ya.literal("media_loaded"),media_loaded:ya.boolean()}),fl=ya.object({condition:ya.literal("display_mode"),display_mode:cc}),_l=ya.object({condition:ya.literal("triggered"),triggered:ya.string().array()}),vl=ya.object({condition:ya.literal("interaction"),interaction:ya.boolean()}),yl=ya.object({condition:ya.literal("microphone"),connected:ya.boolean().optional(),muted:ya.boolean().optional()}),bl=ya.object({condition:ya.literal("key"),key:ya.string(),state:ya.enum(["down","up"]).optional(),ctrl:ya.boolean().optional(),shift:ya.boolean().optional(),alt:ya.boolean().optional(),meta:ya.boolean().optional()}),wl=ya.object({condition:ya.literal("user_agent"),user_agent:ya.string().optional(),user_agent_re:ya.string().refine((e=>{try{new RegExp(e)}catch{return!1}return!0}),{message:"Invalid regular expression"}).optional(),companion:ya.boolean().optional()}),xl=ya.discriminatedUnion("condition",[Zc,Wc,Qc,Kc,ul,hl,ml,pl,gl,fl,_l,vl,yl,bl,wl]),Cl=ya.object({type:ya.literal("custom:advanced-camera-card-conditional"),conditions:xl.array(),elements:ya.lazy((()=>Ml))}),Ml=ya.union([Gc,Xc,Cl,qc,Uc,el,tl,al,il,Bc,Fc,Vc,Hc,ol,cl,ll]).array().optional(),Sl=ya.object({fit:ya.enum(["contain","cover","fill"]).optional(),position:ya.object({x:ya.number().min(0).max(100).optional(),y:ya.number().min(0).max(100).optional()}).optional(),view_box:ya.object({bottom:ya.number().min(0).max(100).optional().default(0),left:ya.number().min(0).max(100).optional().default(0),right:ya.number().min(0).max(100).optional().default(0),top:ya.number().min(0).max(100).optional().default(0)}).optional(),pan:sc.optional(),zoom:oc.optional()}),kl=ya.number().array().length(2).or(ya.string().regex(/^\s*\d+\.?\d*\s*[:/]\s*\d+\.?\d*\s*$/).transform((e=>e.split(/[:\/]/).map((e=>Number(e)))))),$l={r2c_delay_between_calls_seconds:.5,c2r_delay_between_calls_seconds:.2},El=function(e){return t=>{if(!t||"object"!=typeof t||!t.service)return t;const n={...t};return Object.keys(t).forEach((a=>{const i=a.match(/^data_(.+)$/),r=i?.[1];r&&!(`${e}${r}`in t)&&(n[`${e}${r}`]={action:"perform-action",perform_action:t.service,data:t[a]},delete n[a],delete n.service)})),n}},Al=ya.preprocess(El("actions_"),ya.object({actions_left:mc.optional(),actions_left_start:mc.optional(),actions_left_stop:mc.optional(),actions_right:mc.optional(),actions_right_start:mc.optional(),actions_right_stop:mc.optional(),actions_up:mc.optional(),actions_up_start:mc.optional(),actions_up_stop:mc.optional(),actions_down:mc.optional(),actions_down_start:mc.optional(),actions_down_stop:mc.optional(),actions_zoom_in:mc.optional(),actions_zoom_in_start:mc.optional(),actions_zoom_in_stop:mc.optional(),actions_zoom_out:mc.optional(),actions_zoom_out_start:mc.optional(),actions_zoom_out_stop:mc.optional(),r2c_delay_between_calls_seconds:ya.number().default($l.r2c_delay_between_calls_seconds),c2r_delay_between_calls_seconds:ya.number().default($l.c2r_delay_between_calls_seconds),presets:ya.preprocess(El(""),ya.union([ya.record(mc),ya.object({service:ya.string().optional()})])).optional(),service:ya.string().optional()}).passthrough()),Il={orientation:"horizontal",mode:"auto",hide_pan_tilt:!1,hide_zoom:!1,hide_home:!1,position:"bottom-right"},Tl=ya.object({mode:ya.enum(["off","auto","on"]).default(Il.mode),position:ya.enum(["top-left","top-right","bottom-left","bottom-right"]).default(Il.position),orientation:ya.enum(["vertical","horizontal"]).default(Il.orientation),hide_pan_tilt:ya.boolean().default(Il.hide_pan_tilt),hide_zoom:ya.boolean().default(Il.hide_zoom),hide_home:ya.boolean().default(Il.hide_home),style:ya.object({}).passthrough().optional()}),zl={mode:"auto",refresh_seconds:1,zoomable:!0},jl=ya.object({mode:ya.enum(["auto","camera","entity","screensaver","url"]).default(zl.mode),refresh_seconds:ya.number().min(0).default(zl.refresh_seconds),url:ya.string().optional(),entity:ya.string().optional(),entity_parameters:ya.string().optional()}),Ol=jl.extend({zoomable:ya.boolean().default(zl.zoomable)}).merge(Lc).default(zl),Dl=75,Pl=300,Rl={size:100,show_details:!0,show_favorite_control:!0,show_timeline_control:!0,show_download_control:!0},Ll=ya.object({size:ya.number().min(75).max(300).default(Rl.size),show_details:ya.boolean().default(Rl.show_details),show_favorite_control:ya.boolean().default(Rl.show_favorite_control),show_timeline_control:ya.boolean().default(Rl.show_timeline_control),show_download_control:ya.boolean().default(Rl.show_download_control)}),Nl={...Rl,mode:"right"},Fl=Ll.extend({mode:ya.enum(["none","above","below","left","right"]).default(Nl.mode)}),Vl=ya.enum(["all","clips","snapshots"]),Hl={clustering_threshold:3,events_media_type:"all",window_seconds:3600,show_recordings:!0,style:"stack",pan_mode:"pan",format:{"24h":!0}},Bl=ya.enum(["pan","seek","seek-in-media","seek-in-camera"]),ql=ya.object({"24h":ya.boolean().optional().default(Hl.format["24h"])}),Ul=ya.object({clustering_threshold:ya.number().optional().default(Hl.clustering_threshold),events_media_type:Vl.optional().default(Hl.events_media_type),window_seconds:ya.number().min(60).max(86400).optional().default(Hl.window_seconds),show_recordings:ya.boolean().optional().default(Hl.show_recordings),style:ya.enum(["stack","ribbon"]).optional().default(Hl.style),pan_mode:Bl.optional().default(Hl.pan_mode),format:ql.optional().default(Hl.format)}),Zl={...Hl,mode:"none",style:"ribbon"},Wl=Ul.extend({mode:ya.enum(["none","above","below"]).default(Zl.mode),style:Ul.shape.style.default(Zl.style)}),Ql={...Hl,controls:{thumbnails:Nl}},Kl=Ul.extend({controls:ya.object({thumbnails:Fl.default(Ql.controls.thumbnails)}).default(Ql.controls)}).default(Ql),Yl=ya.object({style:ya.enum(["none","chevrons","icons","thumbnails"]),size:ya.number().min(20)}),Gl=ya.enum(["none","slide"]),Xl={always_connected:!1,disconnect_seconds:90,mute_after_microphone_mute_seconds:60},Jl=ya.object({always_connected:ya.boolean().default(Xl.always_connected),disconnect_seconds:ya.number().min(0).default(Xl.disconnect_seconds),mute_after_microphone_mute_seconds:ya.number().min(0).default(Xl.mute_after_microphone_mute_seconds)}).default(Xl),ed=ya.object({url:ya.string().transform((e=>e.replace(/\/+$/,""))).optional(),host:ya.string().optional(),modes:ya.enum(["webrtc","mse","mp4","mjpeg"]).array().optional(),stream:ya.string().optional()}),td=ya.object({entity:ya.string().optional(),url:ya.string().optional()}).passthrough(),nd=ya.object({options:ya.object({audio:ya.boolean().optional(),video:ya.boolean().optional(),pauseWhenHidden:ya.boolean().optional(),disableGl:ya.boolean().optional(),disableWebAssembly:ya.boolean().optional(),preserveDrawingBuffer:ya.boolean().optional(),progressive:ya.boolean().optional(),throttled:ya.boolean().optional(),chunkSize:ya.number().optional(),maxAudioLag:ya.number().optional(),videoBufferSize:ya.number().optional(),audioBufferSize:ya.number().optional()}).optional()}),ad={...Nl,media_type:"events",events_media_type:"all"},id={auto_play:[...Xo],auto_pause:[],auto_mute:[...ec],auto_unmute:["microphone"],preload:!1,lazy_load:!0,lazy_unload:[],draggable:!0,zoomable:!0,transition_effect:"slide",show_image_during_load:!0,mode:"single",controls:{builtin:!0,next_previous:{size:48,style:"chevrons"},ptz:Il,thumbnails:ad,timeline:Zl},microphone:{...Xl}},rd=Fl.extend({media_type:ya.enum(["events","recordings"]).default(id.controls.thumbnails.media_type),events_media_type:Vl.default(id.controls.thumbnails.events_media_type)}),sd=ya.object({auto_pause:ya.enum(Go).array().default(id.auto_pause),auto_play:ya.enum(Xo).array().default(id.auto_play),auto_mute:ya.enum(ec).array().default(id.auto_mute),auto_unmute:ya.enum(Jo).array().default(id.auto_unmute),controls:ya.object({builtin:ya.boolean().default(id.controls.builtin),next_previous:Yl.extend({style:ya.enum(["none","chevrons","icons"]).default(id.controls.next_previous.style),size:Yl.shape.size.default(id.controls.next_previous.size)}).default(id.controls.next_previous),ptz:Tl.default(id.controls.ptz),thumbnails:rd.default(id.controls.thumbnails),timeline:Wl.default(id.controls.timeline)}).default(id.controls),display:lc,draggable:ya.boolean().default(id.draggable),lazy_load:ya.boolean().default(id.lazy_load),lazy_unload:ya.enum(Go).array().default(id.lazy_unload),microphone:Jl.default(id.microphone),preload:ya.boolean().default(id.preload),show_image_during_load:ya.boolean().default(id.show_image_during_load),transition_effect:Gl.default(id.transition_effect),zoomable:ya.boolean().default(id.zoomable)}).merge(Lc).default(id),od=ya.object({live:sd}),cd=ya.object({method:ya.enum(["standard","dashboard"]).default("standard").optional(),dashboard:ya.object({dashboard_path:ya.string().optional(),view_path:ya.string().optional()}).optional()}),ld={dependencies:{all_cameras:!1,cameras:[]},engine:"auto",frigate:{client_id:"frigate"},live_provider:"auto",motioneye:{images:{directory_pattern:"%Y-%m-%d",file_pattern:"%H-%M-%S"},movies:{directory_pattern:"%Y-%m-%d",file_pattern:"%H-%M-%S"}},reolink:{media_resolution:"low"},ptz:$l,triggers:{motion:!1,occupancy:!1,events:[...nc],entities:[]},proxy:{media:"auto",dynamic:!0,ssl_verification:"auto",ssl_ciphers:"auto"},always_error_if_entity_unavailable:!1},dd=ya.object({media:ya.boolean().or(ya.literal("auto")).default(ld.proxy.media),dynamic:ya.boolean().default(ld.proxy.dynamic),ssl_verification:ya.boolean().or(ya.literal("auto")).default(ld.proxy.ssl_verification),ssl_ciphers:ya.enum(["default","insecure","intermediate","modern"]).or(ya.literal("auto")).default(ld.proxy.ssl_ciphers)}),ud=ya.object({camera_entity:ya.string().optional(),icon:ya.string().optional(),title:ya.string().optional(),capabilities:ya.object({disable:ya.enum(Oo).array().optional(),disable_except:ya.enum(Oo).array().optional()}).optional(),id:ya.string().optional(),dependencies:ya.object({all_cameras:ya.boolean().default(ld.dependencies.all_cameras),cameras:ya.string().array().default(ld.dependencies.cameras)}).default(ld.dependencies),triggers:ya.object({motion:ya.boolean().default(ld.triggers.motion),occupancy:ya.boolean().default(ld.triggers.occupancy),entities:ya.string().array().default(ld.triggers.entities),events:ya.enum(nc).array().default(ld.triggers.events)}).default(ld.triggers),engine:ya.enum(["auto","frigate","generic","motioneye","reolink"]).default("auto"),frigate:ya.object({url:ya.string().optional(),client_id:ya.string().default(ld.frigate.client_id),camera_name:ya.string().optional(),labels:ya.string().array().optional(),zones:ya.string().array().optional()}).default(ld.frigate),motioneye:ya.object({url:ya.string().optional(),images:ya.object({directory_pattern:ya.string().includes("%").default(ld.motioneye.images.directory_pattern),file_pattern:ya.string().includes("%").default(ld.motioneye.images.file_pattern)}).default(ld.motioneye.images),movies:ya.object({directory_pattern:ya.string().includes("%").default(ld.motioneye.movies.directory_pattern),file_pattern:ya.string().includes("%").default(ld.motioneye.movies.file_pattern)}).default(ld.motioneye.movies)}).default(ld.motioneye),reolink:ya.object({url:ya.string().optional(),media_resolution:ya.enum(["high","low"]).default(ld.reolink.media_resolution)}).default(ld.reolink),live_provider:ya.enum(["auto","image","ha","jsmpeg","go2rtc","webrtc-card"]).default(ld.live_provider),go2rtc:ed.optional(),image:jl.optional().default(zl),jsmpeg:nd.optional(),webrtc_card:td.optional(),cast:cd.optional(),ptz:Al.default(ld.ptz),dimensions:ya.object({aspect_ratio:kl.optional(),layout:Sl.optional()}).optional(),proxy:dd.default(ld.proxy),always_error_if_entity_unavailable:ya.boolean().default(ld.always_error_if_entity_unavailable)}).default(ld),hd=ud.array().min(1),md={default:Yo,camera_select:"current",interaction_seconds:300,default_reset:{every_seconds:0,after_interaction:!1,entities:[],interaction_mode:"inactive"},default_cycle_camera:!1,dim:!1,theme:{themes:["traditional"]},triggers:{show_trigger_status:!1,filter_selected_camera:!0,actions:{trigger:"update",untrigger:"none"},untrigger_seconds:0},keyboard_shortcuts:Ho},pd=ya.enum(["all","inactive","active"]).default("inactive"),gd=ya.object({actions:ya.object({interaction_mode:pd,trigger:ya.enum(["default","live","media","none","update"]).default(md.triggers.actions.trigger),untrigger:ya.enum(["default","none"]).default(md.triggers.actions.untrigger)}).default(md.triggers.actions),filter_selected_camera:ya.boolean().default(md.triggers.filter_selected_camera),show_trigger_status:ya.boolean().default(md.triggers.show_trigger_status),untrigger_seconds:ya.number().default(md.triggers.untrigger_seconds)}),fd=ya.enum(["ha","dark","light","traditional"]),_d=ya.object({themes:fd.array().default(md.theme.themes),overrides:ya.record(ya.string()).optional()}),vd=ya.object({default:ya.enum(Ko).default(md.default),camera_select:ya.enum([...Ko,"current"]).default(md.camera_select),interaction_seconds:ya.number().default(md.interaction_seconds),default_cycle_camera:ya.boolean().default(md.default_cycle_camera),default_reset:ya.object({after_interaction:ya.boolean().default(md.default_reset.after_interaction),every_seconds:ya.number().default(md.default_reset.every_seconds),entities:ya.string().array().default(md.default_reset.entities),interaction_mode:pd.default(md.default_reset.interaction_mode)}).default(md.default_reset),render_entities:ya.string().array().optional(),theme:_d.default(md.theme),dim:ya.boolean().default(md.dim),triggers:gd.default(md.triggers),keyboard_shortcuts:Bo.default(md.keyboard_shortcuts)}).merge(Lc).default(md),yd=["left","right","top","bottom"],bd=yd,wd={priority:50,enabled:!0},xd={priority:50,enabled:!1},Cd={alignment:"left",button_size:40,buttons:{camera_ui:wd,cameras:wd,clips:wd,ptz_home:xd,display_mode:wd,download:wd,expand:xd,iris:wd,fullscreen:wd,image:xd,live:wd,media_player:wd,microphone:{...xd,type:"momentary"},mute:xd,play:xd,ptz_controls:xd,recordings:xd,screenshot:xd,snapshots:wd,substreams:wd,timeline:wd},position:"top",style:"hidden"},Md=Jc.extend({enabled:Jc.shape.enabled.default(wd.enabled),priority:Jc.shape.priority.default(wd.priority)}),Sd=Jc.extend({enabled:Jc.shape.enabled.default(xd.enabled),priority:Jc.shape.priority.default(xd.priority)}),kd=ya.object({style:ya.enum(["none","hidden","overlay","hover","hover-card","outside"]).default(Cd.style),position:ya.enum(yd).default(Cd.position),alignment:ya.enum(bd).default(Cd.alignment),buttons:ya.object({camera_ui:Md.default(Cd.buttons.camera_ui),cameras:Md.default(Cd.buttons.cameras),clips:Md.default(Cd.buttons.clips),ptz_home:Sd.default(Cd.buttons.ptz_home),display_mode:Md.default(Cd.buttons.display_mode),download:Md.default(Cd.buttons.download),expand:Sd.default(Cd.buttons.expand),iris:Md.default(Cd.buttons.iris),fullscreen:Md.default(Cd.buttons.fullscreen),image:Sd.default(Cd.buttons.image),live:Md.default(Cd.buttons.live),media_player:Md.default(Cd.buttons.media_player),microphone:Sd.extend({type:ya.enum(["momentary","toggle"]).default(Cd.buttons.microphone.type)}).default(Cd.buttons.microphone),mute:Sd.default(Cd.buttons.mute),play:Sd.default(Cd.buttons.play),ptz_controls:Sd.default(Cd.buttons.ptz_controls),recordings:Sd.default(Cd.buttons.recordings),screenshot:Sd.default(Cd.buttons.screenshot),snapshots:Md.default(Cd.buttons.snapshots),substreams:Md.default(Cd.buttons.substreams),timeline:Md.default(Cd.buttons.timeline)}).default(Cd.buttons),button_size:ya.number().min(20).default(Cd.button_size)}).default(Cd),$d={priority:50,enabled:!0},Ed={height:40,items:{engine:$d,resolution:$d,technology:$d,title:$d},position:"bottom",style:"popup",popup_seconds:3},Ad=ya.object({position:ya.enum(["top","bottom"]).default(Ed.position),style:ya.enum(["none","overlay","hover","hover-card","outside","popup"]).default(Ed.style),popup_seconds:ya.number().min(0).max(60).default(Ed.popup_seconds),height:ya.number().min(20).default(Ed.height),items:ya.object({engine:rl.default(Ed.items.engine),technology:rl.default(Ed.items.technology),resolution:rl.default(Ed.items.resolution),title:rl.default(Ed.items.title)}).default(Ed.items)}).default(Ed),Id={auto_play:[...Xo],auto_pause:[...Go],auto_mute:[...Go],auto_unmute:[],lazy_load:!0,draggable:!0,zoomable:!0,transition_effect:"slide",snapshot_click_plays_clip:!0,display_mode:"single",controls:{builtin:!0,next_previous:{size:48,style:"thumbnails"},thumbnails:Nl,timeline:Zl,ptz:{...Il,mode:"off"}}},Td=Yl.extend({style:ya.enum(["none","thumbnails","chevrons"]).default(Id.controls.next_previous.style),size:Yl.shape.size.default(Id.controls.next_previous.size)}),zd=ya.object({auto_play:ya.enum(Xo).array().default(Id.auto_play),auto_pause:ya.enum(Go).array().default(Id.auto_pause),auto_mute:ya.enum(Go).array().default(Id.auto_mute),auto_unmute:ya.enum(Xo).array().default(Id.auto_unmute),lazy_load:ya.boolean().default(Id.lazy_load),draggable:ya.boolean().default(Id.draggable),zoomable:ya.boolean().default(Id.zoomable),transition_effect:Gl.default(Id.transition_effect),snapshot_click_plays_clip:ya.boolean().default(Id.snapshot_click_plays_clip),display:lc,controls:ya.object({builtin:ya.boolean().default(Id.controls.builtin),next_previous:Td.default(Id.controls.next_previous),ptz:Tl.extend({mode:ya.enum(["off","on"]).default(Id.controls.ptz.mode)}).default(Id.controls.ptz),thumbnails:Fl.default(Id.controls.thumbnails),timeline:Wl.default(Id.controls.timeline)}).default(Id.controls)}).merge(Lc).default(Id),jd={...Nl,show_details:!1},Od={controls:{thumbnails:jd,filter:{mode:"right"}}},Dd=Fl.extend({show_details:ya.boolean().default(jd.show_details)}),Pd=ya.object({controls:ya.object({thumbnails:Dd.default(Od.controls.thumbnails),filter:ya.object({mode:ya.enum(["none","left","right"]).default(Od.controls.filter.mode)}).default(Od.controls.filter)}).default(Od.controls)}).merge(Lc).default(Od),Rd={aspect_ratio_mode:"dynamic",aspect_ratio:[16,9],height:"auto"},Ld=ya.object({aspect_ratio_mode:ya.enum(["dynamic","static","unconstrained"]).default(Rd.aspect_ratio_mode),aspect_ratio:kl.default(Rd.aspect_ratio),height:ya.string().default(Rd.height)}).default(Rd),Nd=ya.object({conditions:xl.array(),merge:ya.object({}).passthrough().optional(),set:ya.object({}).passthrough().optional(),delete:ya.string().array().optional()}).array().optional(),Fd=Pc.array(),Vd=ya.object({conditions:xl.array(),actions:Fd.optional(),actions_not:Fd.optional()}).refine((e=>e.actions?.length||e.actions_not?.length),"Automations must include at least one action").array(),Hd={features:{animated_progress_indicator:!0,card_loading_indicator:!0,media_chunk_size:50},style:{border_radius:!0,box_shadow:!0}},Bd=ya.object({features:ya.object({animated_progress_indicator:ya.boolean().default(Hd.features.animated_progress_indicator),card_loading_indicator:ya.boolean().default(Hd.features.card_loading_indicator),media_chunk_size:ya.number().min(0).max(1e3).default(Hd.features.media_chunk_size),max_simultaneous_engine_requests:ya.number().min(1).optional()}).default(Hd.features),style:ya.object({border_radius:ya.boolean().default(Hd.style.border_radius),box_shadow:ya.boolean().default(Hd.style.box_shadow)}).default(Hd.style)}).default(Hd),qd={logging:!1},Ud=ya.object({logging:ya.boolean().default(qd.logging)}).default(qd),Zd=ya.enum(["casting","low-performance","scrubbing"]).array().optional(),Wd=ya.object({cameras:Ro(hd),cameras_global:ud,view:vd,menu:kd,status_bar:Ad,live:sd,media_gallery:Pd,media_viewer:zd,image:Ol,elements:Ml,dimensions:Ld,timeline:Kl,performance:Bd,debug:Ud,automations:Vd.optional(),profiles:Zd,overrides:Nd,card_mod:ya.unknown(),card_id:ya.string().regex(ac).optional(),type:ya.string()}),Qd={cameras:ld,view:md,menu:Cd,status_bar:Ed,live:id,media_gallery:Od,media_viewer:Id,image:zl,timeline:Ql,performance:Hd,debug:qd};function Kd(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function Yd(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Gd(e,t){const n=Kd(e);return isNaN(t)?Yd(e,NaN):t?(n.setDate(n.getDate()+t),n):n}function Xd(e,t){const n=Kd(e);if(isNaN(t))return Yd(e,NaN);if(!t)return n;const a=n.getDate(),i=Yd(e,n.getTime());i.setMonth(n.getMonth()+t+1,0);return a>=i.getDate()?i:(n.setFullYear(i.getFullYear(),i.getMonth(),a),n)}function Jd(e,t){const{years:n=0,months:a=0,weeks:i=0,days:r=0,hours:s=0,minutes:o=0,seconds:c=0}=t,l=Kd(e),d=a||n?Xd(l,a+12*n):l,u=1e3*(c+60*(o+60*s));return Yd(e,(r||i?Gd(d,r+7*i):d).getTime()+u)}const eu=6048e5,tu=864e5,nu=6e4,au=36e5,iu=1e3;let ru={};function su(){return ru}function ou(e,t){const n=su(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=Kd(e),r=i.getDay(),s=(r<a?7:0)+r-a;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function cu(e){return ou(e,{weekStartsOn:1})}function lu(e){const t=Kd(e),n=t.getFullYear(),a=Yd(e,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const i=cu(a),r=Yd(e,0);r.setFullYear(n,0,4),r.setHours(0,0,0,0);const s=cu(r);return t.getTime()>=i.getTime()?n+1:t.getTime()>=s.getTime()?n:n-1}function du(e){const t=Kd(e);return t.setHours(0,0,0,0),t}function uu(e){const t=Kd(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function hu(e){if(!(t=e,t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)||"number"==typeof e))return!1;var t;const n=Kd(e);return!isNaN(Number(n))}function mu(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return 0===n?0:n}}function pu(e,t){return+Kd(e)-+Kd(t)}function gu(e,t,n){const a=pu(e,t)/1e3;return mu(n?.roundingMethod)(a)}const fu={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function _u(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const vu={date:_u({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:_u({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:_u({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},yu={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function bu(e){return(t,n)=>{let a;if("formatting"===(n?.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,i=n?.width?String(n.width):t;a=e.formattingValues[i]||e.formattingValues[t]}else{const t=e.defaultWidth,i=n?.width?String(n.width):e.defaultWidth;a=e.values[i]||e.values[t]}return a[e.argumentCallback?e.argumentCallback(t):t]}}function wu(e){return(t,n={})=>{const a=n.width,i=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],r=t.match(i);if(!r)return null;const s=r[0],o=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,(e=>e.test(s))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,(e=>e.test(s)));let l;l=e.valueCallback?e.valueCallback(c):c,l=n.valueCallback?n.valueCallback(l):l;return{value:l,rest:t.slice(s.length)}}}var xu;const Cu={code:"en-US",formatDistance:(e,t,n)=>{let a;const i=fu[e];return a="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a},formatLong:vu,formatRelative:(e,t,n,a)=>yu[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:bu({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:bu({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:bu({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:bu({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:bu({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(xu={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const n=e.match(xu.matchPattern);if(!n)return null;const a=n[0],i=e.match(xu.parsePattern);if(!i)return null;let r=xu.valueCallback?xu.valueCallback(i[0]):i[0];return r=t.valueCallback?t.valueCallback(r):r,{value:r,rest:e.slice(a.length)}}),era:wu({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:wu({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:wu({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:wu({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:wu({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function Mu(e){const t=Kd(e),n=function(e,t){const n=du(e),a=du(t),i=+n-uu(n),r=+a-uu(a);return Math.round((i-r)/tu)}(t,function(e){const t=Kd(e),n=Yd(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}(t));return n+1}function Su(e){const t=Kd(e),n=+cu(t)-+function(e){const t=lu(e),n=Yd(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),cu(n)}(t);return Math.round(n/eu)+1}function ku(e,t){const n=Kd(e),a=n.getFullYear(),i=su(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,s=Yd(e,0);s.setFullYear(a+1,0,r),s.setHours(0,0,0,0);const o=ou(s,t),c=Yd(e,0);c.setFullYear(a,0,r),c.setHours(0,0,0,0);const l=ou(c,t);return n.getTime()>=o.getTime()?a+1:n.getTime()>=l.getTime()?a:a-1}function $u(e,t){const n=Kd(e),a=+ou(n,t)-+function(e,t){const n=su(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=ku(e,t),r=Yd(e,0);return r.setFullYear(i,0,a),r.setHours(0,0,0,0),ou(r,t)}(n,t);return Math.round(a/eu)+1}function Eu(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const Au={y(e,t){const n=e.getFullYear(),a=n>0?n:1-n;return Eu("yy"===t?a%100:a,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):Eu(n+1,2)},d:(e,t)=>Eu(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>Eu(e.getHours()%12||12,t.length),H:(e,t)=>Eu(e.getHours(),t.length),m:(e,t)=>Eu(e.getMinutes(),t.length),s:(e,t)=>Eu(e.getSeconds(),t.length),S(e,t){const n=t.length,a=e.getMilliseconds();return Eu(Math.trunc(a*Math.pow(10,n-3)),t.length)}},Iu="midnight",Tu="noon",zu="morning",ju="afternoon",Ou="evening",Du="night",Pu={G:function(e,t,n){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});default:return n.era(a,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),a=t>0?t:1-t;return n.ordinalNumber(a,{unit:"year"})}return Au.y(e,t)},Y:function(e,t,n,a){const i=ku(e,a),r=i>0?i:1-i;if("YY"===t){return Eu(r%100,2)}return"Yo"===t?n.ordinalNumber(r,{unit:"year"}):Eu(r,t.length)},R:function(e,t){return Eu(lu(e),t.length)},u:function(e,t){return Eu(e.getFullYear(),t.length)},Q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return Eu(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return Eu(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,n){const a=e.getMonth();switch(t){case"M":case"MM":return Au.M(e,t);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,n){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return Eu(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,n,a){const i=$u(e,a);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):Eu(i,t.length)},I:function(e,t,n){const a=Su(e);return"Io"===t?n.ordinalNumber(a,{unit:"week"}):Eu(a,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):Au.d(e,t)},D:function(e,t,n){const a=Mu(e);return"Do"===t?n.ordinalNumber(a,{unit:"dayOfYear"}):Eu(a,t.length)},E:function(e,t,n){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,n,a){const i=e.getDay(),r=(i-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(r);case"ee":return Eu(r,2);case"eo":return n.ordinalNumber(r,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,a){const i=e.getDay(),r=(i-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(r);case"cc":return Eu(r,t.length);case"co":return n.ordinalNumber(r,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const a=e.getDay(),i=0===a?7:a;switch(t){case"i":return String(i);case"ii":return Eu(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const a=e.getHours();let i;switch(i=12===a?Tu:0===a?Iu:a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const a=e.getHours();let i;switch(i=a>=17?Ou:a>=12?ju:a>=4?zu:Du,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return Au.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):Au.H(e,t)},K:function(e,t,n){const a=e.getHours()%12;return"Ko"===t?n.ordinalNumber(a,{unit:"hour"}):Eu(a,t.length)},k:function(e,t,n){let a=e.getHours();return 0===a&&(a=24),"ko"===t?n.ordinalNumber(a,{unit:"hour"}):Eu(a,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Au.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Au.s(e,t)},S:function(e,t){return Au.S(e,t)},X:function(e,t,n){const a=e.getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return Lu(a);case"XXXX":case"XX":return Nu(a);default:return Nu(a,":")}},x:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"x":return Lu(a);case"xxxx":case"xx":return Nu(a);default:return Nu(a,":")}},O:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Ru(a,":");default:return"GMT"+Nu(a,":")}},z:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Ru(a,":");default:return"GMT"+Nu(a,":")}},t:function(e,t,n){return Eu(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,n){return Eu(e.getTime(),t.length)}};function Ru(e,t=""){const n=e>0?"-":"+",a=Math.abs(e),i=Math.trunc(a/60),r=a%60;return 0===r?n+String(i):n+String(i)+t+Eu(r,2)}function Lu(e,t){if(e%60==0){return(e>0?"-":"+")+Eu(Math.abs(e)/60,2)}return Nu(e,t)}function Nu(e,t=""){const n=e>0?"-":"+",a=Math.abs(e);return n+Eu(Math.trunc(a/60),2)+t+Eu(a%60,2)}const Fu=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Vu=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Hu={p:Vu,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],a=n[1],i=n[2];if(!i)return Fu(e,t);let r;switch(a){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",Fu(a,t)).replace("{{time}}",Vu(i,t))}},Bu=/^D+$/,qu=/^Y+$/,Uu=["D","DD","YY","YYYY"];function Zu(e){return Bu.test(e)}function Wu(e){return qu.test(e)}function Qu(e,t,n){const a=function(e,t,n){const a="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(console.warn(a),Uu.includes(e))throw new RangeError(a)}const Ku=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Yu=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Gu=/^'([^]*?)'?$/,Xu=/''/g,Ju=/[a-zA-Z]/;function eh(e,t,n){const a=su(),i=n?.locale??a.locale??Cu,r=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,s=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,o=Kd(e);if(!hu(o))throw new RangeError("Invalid time value");let c=t.match(Yu).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,Hu[t])(e,i.formatLong)}return e})).join("").match(Ku).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:th(e)};if(Pu[t])return{isToken:!0,value:e};if(t.match(Ju))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));i.localize.preprocessor&&(c=i.localize.preprocessor(o,c));const l={firstWeekContainsDate:r,weekStartsOn:s,locale:i};return c.map((a=>{if(!a.isToken)return a.value;const r=a.value;(!n?.useAdditionalWeekYearTokens&&Wu(r)||!n?.useAdditionalDayOfYearTokens&&Zu(r))&&Qu(r,t,String(e));return(0,Pu[r[0]])(o,r,i.localize,l)})).join("")}function th(e){const t=e.match(Gu);return t?t[1].replace(Xu,"'"):e}function nh(e,t){const{years:n=0,months:a=0,weeks:i=0,days:r=0,hours:s=0,minutes:o=0,seconds:c=0}=t,l=function(e,t){return Xd(e,-t)}(e,a+12*n),d=function(e,t){return Gd(e,-t)}(l,r+7*i),u=1e3*(c+60*(o+60*s));return Yd(e,d.getTime()-u)}function ah(e,t){return e===t||e!=e&&t!=t}function ih(e,t){for(var n=e.length;n--;)if(ah(e[n][0],t))return n;return-1}var rh=Array.prototype.splice;function sh(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}sh.prototype.clear=function(){this.__data__=[],this.size=0},sh.prototype.delete=function(e){var t=this.__data__,n=ih(t,e);return!(n<0)&&(n==t.length-1?t.pop():rh.call(t,n,1),--this.size,!0)},sh.prototype.get=function(e){var t=this.__data__,n=ih(t,e);return n<0?void 0:t[n][1]},sh.prototype.has=function(e){return ih(this.__data__,e)>-1},sh.prototype.set=function(e,t){var n=this.__data__,a=ih(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this};var oh="object"==typeof global&&global&&global.Object===Object&&global,ch="object"==typeof self&&self&&self.Object===Object&&self,lh=oh||ch||Function("return this")(),dh=lh.Symbol,uh=Object.prototype,hh=uh.hasOwnProperty,mh=uh.toString,ph=dh?dh.toStringTag:void 0;var gh=Object.prototype.toString;var fh="[object Null]",_h="[object Undefined]",vh=dh?dh.toStringTag:void 0;function yh(e){return null==e?void 0===e?_h:fh:vh&&vh in Object(e)?function(e){var t=hh.call(e,ph),n=e[ph];try{e[ph]=void 0;var a=!0}catch(e){}var i=mh.call(e);return a&&(t?e[ph]=n:delete e[ph]),i}(e):function(e){return gh.call(e)}(e)}function bh(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var wh="[object AsyncFunction]",xh="[object Function]",Ch="[object GeneratorFunction]",Mh="[object Proxy]";function Sh(e){if(!bh(e))return!1;var t=yh(e);return t==xh||t==Ch||t==wh||t==Mh}var kh,$h=lh["__core-js_shared__"],Eh=(kh=/[^.]+$/.exec($h&&$h.keys&&$h.keys.IE_PROTO||""))?"Symbol(src)_1."+kh:"";var Ah=Function.prototype.toString;function Ih(e){if(null!=e){try{return Ah.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Th=/^\[object .+?Constructor\]$/,zh=Function.prototype,jh=Object.prototype,Oh=zh.toString,Dh=jh.hasOwnProperty,Ph=RegExp("^"+Oh.call(Dh).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Rh(e){return!(!bh(e)||(t=e,Eh&&Eh in t))&&(Sh(e)?Ph:Th).test(Ih(e));var t}function Lh(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Rh(n)?n:void 0}var Nh=Lh(lh,"Map"),Fh=Lh(Object,"create");var Vh=Object.prototype.hasOwnProperty;var Hh=Object.prototype.hasOwnProperty;function Bh(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}function qh(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Uh(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}Bh.prototype.clear=function(){this.__data__=Fh?Fh(null):{},this.size=0},Bh.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Bh.prototype.get=function(e){var t=this.__data__;if(Fh){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Vh.call(t,e)?t[e]:void 0},Bh.prototype.has=function(e){var t=this.__data__;return Fh?void 0!==t[e]:Hh.call(t,e)},Bh.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Fh&&void 0===t?"__lodash_hash_undefined__":t,this},Uh.prototype.clear=function(){this.size=0,this.__data__={hash:new Bh,map:new(Nh||sh),string:new Bh}},Uh.prototype.delete=function(e){var t=qh(this,e).delete(e);return this.size-=t?1:0,t},Uh.prototype.get=function(e){return qh(this,e).get(e)},Uh.prototype.has=function(e){return qh(this,e).has(e)},Uh.prototype.set=function(e,t){var n=qh(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this};function Zh(e){var t=this.__data__=new sh(e);this.size=t.size}Zh.prototype.clear=function(){this.__data__=new sh,this.size=0},Zh.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Zh.prototype.get=function(e){return this.__data__.get(e)},Zh.prototype.has=function(e){return this.__data__.has(e)},Zh.prototype.set=function(e,t){var n=this.__data__;if(n instanceof sh){var a=n.__data__;if(!Nh||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new Uh(a)}return n.set(e,t),this.size=n.size,this};function Wh(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Uh;++t<n;)this.add(e[t])}function Qh(e,t){for(var n=-1,a=null==e?0:e.length;++n<a;)if(t(e[n],n,e))return!0;return!1}function Kh(e,t){return e.has(t)}Wh.prototype.add=Wh.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Wh.prototype.has=function(e){return this.__data__.has(e)};var Yh=1,Gh=2;function Xh(e,t,n,a,i,r){var s=n&Yh,o=e.length,c=t.length;if(o!=c&&!(s&&c>o))return!1;var l=r.get(e),d=r.get(t);if(l&&d)return l==t&&d==e;var u=-1,h=!0,m=n&Gh?new Wh:void 0;for(r.set(e,t),r.set(t,e);++u<o;){var p=e[u],g=t[u];if(a)var f=s?a(g,p,u,t,e,r):a(p,g,u,e,t,r);if(void 0!==f){if(f)continue;h=!1;break}if(m){if(!Qh(t,(function(e,t){if(!Kh(m,t)&&(p===e||i(p,e,n,a,r)))return m.push(t)}))){h=!1;break}}else if(p!==g&&!i(p,g,n,a,r)){h=!1;break}}return r.delete(e),r.delete(t),h}var Jh=lh.Uint8Array;function em(e){var t=-1,n=Array(e.size);return e.forEach((function(e,a){n[++t]=[a,e]})),n}function tm(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var nm=1,am=2,im="[object Boolean]",rm="[object Date]",sm="[object Error]",om="[object Map]",cm="[object Number]",lm="[object RegExp]",dm="[object Set]",um="[object String]",hm="[object Symbol]",mm="[object ArrayBuffer]",pm="[object DataView]",gm=dh?dh.prototype:void 0,fm=gm?gm.valueOf:void 0;function _m(e,t){for(var n=-1,a=t.length,i=e.length;++n<a;)e[i+n]=t[n];return e}var vm=Array.isArray;function ym(e,t,n){var a=t(e);return vm(e)?a:_m(a,n(e))}function bm(){return[]}var wm=Object.prototype.propertyIsEnumerable,xm=Object.getOwnPropertySymbols,Cm=xm?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,a=null==e?0:e.length,i=0,r=[];++n<a;){var s=e[n];t(s,n,e)&&(r[i++]=s)}return r}(xm(e),(function(t){return wm.call(e,t)})))}:bm;function Mm(e){return null!=e&&"object"==typeof e}function Sm(e){return Mm(e)&&"[object Arguments]"==yh(e)}var km=Object.prototype,$m=km.hasOwnProperty,Em=km.propertyIsEnumerable,Am=Sm(function(){return arguments}())?Sm:function(e){return Mm(e)&&$m.call(e,"callee")&&!Em.call(e,"callee")};var Im="object"==typeof exports&&exports&&!exports.nodeType&&exports,Tm=Im&&"object"==typeof module&&module&&!module.nodeType&&module,zm=Tm&&Tm.exports===Im?lh.Buffer:void 0,jm=(zm?zm.isBuffer:void 0)||function(){return!1},Om=9007199254740991,Dm=/^(?:0|[1-9]\d*)$/;function Pm(e,t){var n=typeof e;return!!(t=null==t?Om:t)&&("number"==n||"symbol"!=n&&Dm.test(e))&&e>-1&&e%1==0&&e<t}var Rm=9007199254740991;function Lm(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Rm}var Nm={};function Fm(e){return function(t){return e(t)}}Nm["[object Float32Array]"]=Nm["[object Float64Array]"]=Nm["[object Int8Array]"]=Nm["[object Int16Array]"]=Nm["[object Int32Array]"]=Nm["[object Uint8Array]"]=Nm["[object Uint8ClampedArray]"]=Nm["[object Uint16Array]"]=Nm["[object Uint32Array]"]=!0,Nm["[object Arguments]"]=Nm["[object Array]"]=Nm["[object ArrayBuffer]"]=Nm["[object Boolean]"]=Nm["[object DataView]"]=Nm["[object Date]"]=Nm["[object Error]"]=Nm["[object Function]"]=Nm["[object Map]"]=Nm["[object Number]"]=Nm["[object Object]"]=Nm["[object RegExp]"]=Nm["[object Set]"]=Nm["[object String]"]=Nm["[object WeakMap]"]=!1;var Vm="object"==typeof exports&&exports&&!exports.nodeType&&exports,Hm=Vm&&"object"==typeof module&&module&&!module.nodeType&&module,Bm=Hm&&Hm.exports===Vm&&oh.process,qm=function(){try{var e=Hm&&Hm.require&&Hm.require("util").types;return e||Bm&&Bm.binding&&Bm.binding("util")}catch(e){}}(),Um=qm,Zm=Um&&Um.isTypedArray,Wm=Zm?Fm(Zm):function(e){return Mm(e)&&Lm(e.length)&&!!Nm[yh(e)]},Qm=Object.prototype.hasOwnProperty;function Km(e,t){var n=vm(e),a=!n&&Am(e),i=!n&&!a&&jm(e),r=!n&&!a&&!i&&Wm(e),s=n||a||i||r,o=s?function(e,t){for(var n=-1,a=Array(e);++n<e;)a[n]=t(n);return a}(e.length,String):[],c=o.length;for(var l in e)!t&&!Qm.call(e,l)||s&&("length"==l||i&&("offset"==l||"parent"==l)||r&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Pm(l,c))||o.push(l);return o}var Ym=Object.prototype;function Gm(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ym)}function Xm(e,t){return function(n){return e(t(n))}}var Jm=Xm(Object.keys,Object),ep=Object.prototype.hasOwnProperty;function tp(e){return null!=e&&Lm(e.length)&&!Sh(e)}function np(e){return tp(e)?Km(e):function(e){if(!Gm(e))return Jm(e);var t=[];for(var n in Object(e))ep.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}function ap(e){return ym(e,np,Cm)}var ip=1,rp=Object.prototype.hasOwnProperty;var sp=Lh(lh,"DataView"),op=Lh(lh,"Promise"),cp=Lh(lh,"Set"),lp=Lh(lh,"WeakMap"),dp="[object Map]",up="[object Promise]",hp="[object Set]",mp="[object WeakMap]",pp="[object DataView]",gp=Ih(sp),fp=Ih(Nh),_p=Ih(op),vp=Ih(cp),yp=Ih(lp),bp=yh;(sp&&bp(new sp(new ArrayBuffer(1)))!=pp||Nh&&bp(new Nh)!=dp||op&&bp(op.resolve())!=up||cp&&bp(new cp)!=hp||lp&&bp(new lp)!=mp)&&(bp=function(e){var t=yh(e),n="[object Object]"==t?e.constructor:void 0,a=n?Ih(n):"";if(a)switch(a){case gp:return pp;case fp:return dp;case _p:return up;case vp:return hp;case yp:return mp}return t});var wp=bp,xp=1,Cp="[object Arguments]",Mp="[object Array]",Sp="[object Object]",kp=Object.prototype.hasOwnProperty;function $p(e,t,n,a,i,r){var s=vm(e),o=vm(t),c=s?Mp:wp(e),l=o?Mp:wp(t),d=(c=c==Cp?Sp:c)==Sp,u=(l=l==Cp?Sp:l)==Sp,h=c==l;if(h&&jm(e)){if(!jm(t))return!1;s=!0,d=!1}if(h&&!d)return r||(r=new Zh),s||Wm(e)?Xh(e,t,n,a,i,r):function(e,t,n,a,i,r,s){switch(n){case pm:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case mm:return!(e.byteLength!=t.byteLength||!r(new Jh(e),new Jh(t)));case im:case rm:case cm:return ah(+e,+t);case sm:return e.name==t.name&&e.message==t.message;case lm:case um:return e==t+"";case om:var o=em;case dm:var c=a&nm;if(o||(o=tm),e.size!=t.size&&!c)return!1;var l=s.get(e);if(l)return l==t;a|=am,s.set(e,t);var d=Xh(o(e),o(t),a,i,r,s);return s.delete(e),d;case hm:if(fm)return fm.call(e)==fm.call(t)}return!1}(e,t,c,n,a,i,r);if(!(n&xp)){var m=d&&kp.call(e,"__wrapped__"),p=u&&kp.call(t,"__wrapped__");if(m||p){var g=m?e.value():e,f=p?t.value():t;return r||(r=new Zh),i(g,f,n,a,r)}}return!!h&&(r||(r=new Zh),function(e,t,n,a,i,r){var s=n&ip,o=ap(e),c=o.length;if(c!=ap(t).length&&!s)return!1;for(var l=c;l--;){var d=o[l];if(!(s?d in t:rp.call(t,d)))return!1}var u=r.get(e),h=r.get(t);if(u&&h)return u==t&&h==e;var m=!0;r.set(e,t),r.set(t,e);for(var p=s;++l<c;){var g=e[d=o[l]],f=t[d];if(a)var _=s?a(f,g,d,t,e,r):a(g,f,d,e,t,r);if(!(void 0===_?g===f||i(g,f,n,a,r):_)){m=!1;break}p||(p="constructor"==d)}if(m&&!p){var v=e.constructor,y=t.constructor;v==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y||(m=!1)}return r.delete(e),r.delete(t),m}(e,t,n,a,i,r))}function Ep(e,t,n,a,i){return e===t||(null==e||null==t||!Mm(e)&&!Mm(t)?e!=e&&t!=t:$p(e,t,n,a,Ep,i))}var Ap=function(){try{var e=Lh(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Ip=Ap;function Tp(e,t,n){"__proto__"==t&&Ip?Ip(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function zp(e,t,n){(void 0!==n&&!ah(e[t],n)||void 0===n&&!(t in e))&&Tp(e,t,n)}var jp,Op=function(e,t,n){for(var a=-1,i=Object(e),r=n(e),s=r.length;s--;){var o=r[jp?s:++a];if(!1===t(i[o],o,i))break}return e},Dp="object"==typeof exports&&exports&&!exports.nodeType&&exports,Pp=Dp&&"object"==typeof module&&module&&!module.nodeType&&module,Rp=Pp&&Pp.exports===Dp?lh.Buffer:void 0,Lp=Rp?Rp.allocUnsafe:void 0;function Np(e,t){if(t)return e.slice();var n=e.length,a=Lp?Lp(n):new e.constructor(n);return e.copy(a),a}function Fp(e){var t=new e.constructor(e.byteLength);return new Jh(t).set(new Jh(e)),t}function Vp(e,t){var n=t?Fp(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Hp(e,t){var n=-1,a=e.length;for(t||(t=Array(a));++n<a;)t[n]=e[n];return t}var Bp=Object.create,qp=function(){function e(){}return function(t){if(!bh(t))return{};if(Bp)return Bp(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Up=Xm(Object.getPrototypeOf,Object);function Zp(e){return"function"!=typeof e.constructor||Gm(e)?{}:qp(Up(e))}var Wp="[object Object]",Qp=Function.prototype,Kp=Object.prototype,Yp=Qp.toString,Gp=Kp.hasOwnProperty,Xp=Yp.call(Object);function Jp(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var eg=Object.prototype.hasOwnProperty;function tg(e,t,n){var a=e[t];eg.call(e,t)&&ah(a,n)&&(void 0!==n||t in e)||Tp(e,t,n)}function ng(e,t,n,a){var i=!n;n||(n={});for(var r=-1,s=t.length;++r<s;){var o=t[r],c=a?a(n[o],e[o],o,n,e):void 0;void 0===c&&(c=e[o]),i?Tp(n,o,c):tg(n,o,c)}return n}var ag=Object.prototype.hasOwnProperty;function ig(e){if(!bh(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Gm(e),n=[];for(var a in e)("constructor"!=a||!t&&ag.call(e,a))&&n.push(a);return n}function rg(e){return tp(e)?Km(e,!0):ig(e)}function sg(e,t,n,a,i,r,s){var o=Jp(e,n),c=Jp(t,n),l=s.get(c);if(l)zp(e,n,l);else{var d,u=r?r(o,c,n+"",e,t,s):void 0,h=void 0===u;if(h){var m=vm(c),p=!m&&jm(c),g=!m&&!p&&Wm(c);u=c,m||p||g?vm(o)?u=o:Mm(d=o)&&tp(d)?u=Hp(o):p?(h=!1,u=Np(c,!0)):g?(h=!1,u=Vp(c,!0)):u=[]:function(e){if(!Mm(e)||yh(e)!=Wp)return!1;var t=Up(e);if(null===t)return!0;var n=Gp.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Yp.call(n)==Xp}(c)||Am(c)?(u=o,Am(o)?u=function(e){return ng(e,rg(e))}(o):bh(o)&&!Sh(o)||(u=Zp(c))):h=!1}h&&(s.set(c,u),i(u,c,a,r,s),s.delete(c)),zp(e,n,u)}}function og(e,t,n,a,i){e!==t&&Op(t,(function(r,s){if(i||(i=new Zh),bh(r))sg(e,t,s,n,og,a,i);else{var o=a?a(Jp(e,s),r,s+"",e,t,i):void 0;void 0===o&&(o=r),zp(e,s,o)}}),rg)}function cg(e){return e}var lg=Math.max;var dg=Ip?function(e,t){return Ip(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:cg,ug=dg,hg=Date.now;var mg,pg,gg,fg=(mg=ug,pg=0,gg=0,function(){var e=hg(),t=16-(e-gg);if(gg=e,t>0){if(++pg>=800)return arguments[0]}else pg=0;return mg.apply(void 0,arguments)});function _g(e,t){return fg(function(e,t,n){return t=lg(void 0===t?e.length-1:t,0),function(){for(var a=arguments,i=-1,r=lg(a.length-t,0),s=Array(r);++i<r;)s[i]=a[t+i];i=-1;for(var o=Array(t+1);++i<t;)o[i]=a[i];return o[t]=n(s),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,o)}}(e,t,cg),e+"")}function vg(e,t,n){if(!bh(n))return!1;var a=typeof t;return!!("number"==a?tp(n)&&Pm(t,n.length):"string"==a&&t in n)&&ah(n[t],e)}function yg(e){return _g((function(t,n){var a=-1,i=n.length,r=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(r=e.length>3&&"function"==typeof r?(i--,r):void 0,s&&vg(n[0],n[1],s)&&(r=i<3?void 0:r,i=1),t=Object(t);++a<i;){var o=n[a];o&&e(t,o,a,r)}return t}))}var bg=yg((function(e,t,n,a){og(e,t,n,a)})),wg=/\s/;var xg=/^\s+/;function Cg(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&wg.test(e.charAt(t)););return t}(e)+1).replace(xg,""):e}var Mg="[object Symbol]";function Sg(e){return"symbol"==typeof e||Mm(e)&&yh(e)==Mg}var kg=NaN,$g=/^[-+]0x[0-9a-f]+$/i,Eg=/^0b[01]+$/i,Ag=/^0o[0-7]+$/i,Ig=parseInt;function Tg(e){if("number"==typeof e)return e;if(Sg(e))return kg;if(bh(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=bh(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Cg(e);var n=Eg.test(e);return n||Ag.test(e)?Ig(e.slice(2),n?2:8):$g.test(e)?kg:+e}var zg=1/0,jg=17976931348623157e292;function Og(e){var t=function(e){return e?(e=Tg(e))===zg||e===-zg?(e<0?-1:1)*jg:e==e?e:0:0===e?e:0}(e),n=t%1;return t==t?n?t-n:t:0}function Dg(e,t){for(var n=-1,a=null==e?0:e.length,i=Array(a);++n<a;)i[n]=t(e[n],n,e);return i}var Pg=1/0,Rg=dh?dh.prototype:void 0,Lg=Rg?Rg.toString:void 0;function Ng(e){if("string"==typeof e)return e;if(vm(e))return Dg(e,Ng)+"";if(Sg(e))return Lg?Lg.call(e):"";var t=e+"";return"0"==t&&1/e==-Pg?"-0":t}function Fg(e){return null==e?"":Ng(e)}var Vg=lh.isFinite,Hg=Math.min;var Bg=function(e){var t=Math[e];return function(e,n){if(e=Tg(e),(n=null==n?0:Hg(Og(n),292))&&Vg(e)){var a=(Fg(e)+"e").split("e");return+((a=(Fg(t(a[0]+"e"+(+a[1]+n)))+"e").split("e"))[0]+"e"+(+a[1]-n))}return t(e)}}("round"),qg=Bg;function Ug(e){return e!=e}function Zg(e,t){return!!(null==e?0:e.length)&&function(e,t,n){return t==t?function(e,t,n){for(var a=n-1,i=e.length;++a<i;)if(e[a]===t)return a;return-1}(e,t,n):function(e,t,n,a){for(var i=e.length,r=n+(a?1:-1);a?r--:++r<i;)if(t(e[r],r,e))return r;return-1}(e,Ug,n)}(e,t,0)>-1}function Wg(e,t,n){for(var a=-1,i=null==e?0:e.length;++a<i;)if(n(t,e[a]))return!0;return!1}var Qg=cp&&1/tm(new cp([,-0]))[1]==1/0?function(e){return new cp(e)}:function(){},Kg=200;function Yg(e,t,n){var a=-1,i=Zg,r=e.length,s=!0,o=[],c=o;if(n)s=!1,i=Wg;else if(r>=Kg){var l=t?null:Qg(e);if(l)return tm(l);s=!1,i=Kh,c=new Wh}else c=t?[]:o;e:for(;++a<r;){var d=e[a],u=t?t(d):d;if(d=n||0!==d?d:0,s&&u==u){for(var h=c.length;h--;)if(c[h]===u)continue e;t&&c.push(u),o.push(d)}else i(c,u,n)||(c!==o&&c.push(u),o.push(d))}return o}function Gg(e,t,n){e.dispatchEvent(new CustomEvent(`advanced-camera-card:${t}`,{bubbles:!0,composed:!0,detail:n}))}function Xg(e){if(!e)return;return e.split(/[_\s]+/).map((e=>e[0].toUpperCase()+e.substring(1))).join(" ")}function Jg(e,t,n){const a=e[t];return e.splice(t,1),e.splice(n,0,a),e}const ef=e=>Array.isArray(e)?e:[e],tf=e=>e instanceof Set?e:new Set(ef(e));function nf(e,t,n){return!function(e,t,n){var a=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===a?Ep(e,t,void 0,n):!!a}(e,t,n)}function af(e,t=console.warn){e instanceof jo&&e.context?t(e,e.context):t("object"==typeof e&&"message"in e?e.message:e)}const rf=()=>window.matchMedia("(hover: hover) and (pointer: fine)").matches,sf=(e,t)=>eh(e,"yyyy-MM-dd HH:mm"+(t?":ss":"")),of=e=>eh(e,"yyyy-MM-dd"),cf=(e,t)=>{window.requestIdleCallback?window.requestIdleCallback(e,{...t&&{timeout:t}}):e()};function lf(e,t){const n=function(e,t,n){const a=pu(e,t)/au;return mu(n?.roundingMethod)(a)}(t,e),a=function(e,t,n){const a=pu(e,t)/nu;return mu(n?.roundingMethod)(a)}(t,e)-60*n;let i="";return n&&(i+=`${n}h `),a&&(i+=`${a}m `),i+=`${gu(t,e)-60*n*60-60*a}s`,i}const df=async(e,t)=>await Promise.all(Array.from(e).map((e=>t(e)))),uf=e=>new Date(`${e}T00:00:00`),hf=async e=>{await new Promise((t=>setTimeout(t,1e3*e)))},mf=e=>!isNaN(e.getTime()),pf=(e,t,n,a)=>{t?e.setAttribute(n,a??""):e.removeAttribute(n)},gf=e=>!!e,ff=e=>e instanceof HTMLElement,_f=e=>(e instanceof HTMLSlotElement?e.assignedElements({flatten:!0}):[...e.children]).filter(ff),vf=e=>e?.ratio&&2===e.ratio.length?`${e.ratio[0]} / ${e.ratio[1]}`:e?.defaultStatic?"16 / 9":"auto",yf=e=>({"aspect-ratio":vf(e)}),bf=e=>{if(Array.isArray(e))return e.filter((e=>void 0!==e)).map((e=>bf(e)));if("object"==typeof e&&null!==e){const t={};for(const n in e)t[n]=bf(e[n]);return t}return e},wf=(e,t,n)=>qg(e,n)===qg(t,n);function xf(e){if(!e)return null;const t=Dc.safeParse(e);return t.success?t.data:null}function Cf(e,t){return{action:"fire-dom-event",advanced_camera_card_action:e,...t?.cardID&&{card_id:t.cardID}}}function Mf(e,t,n){return{action:"fire-dom-event",advanced_camera_card_action:e,camera:t,...n?.cardID&&{card_id:n.cardID}}}function Sf(e,t,n){return{action:"fire-dom-event",advanced_camera_card_action:"media_player",media_player:e,media_player_action:t,...n?.cardID&&{card_id:n.cardID}}}function kf(e){return{action:"fire-dom-event",advanced_camera_card_action:"ptz_multi",...e?.cardID&&{card_id:e.cardID},...e?.ptzAction&&{ptz_action:e.ptzAction},...e?.ptzPhase&&{ptz_phase:e.ptzPhase},...e?.ptzPreset&&{ptz_preset:e.ptzPreset},...e?.targetID&&{target_id:e.targetID}}}function $f(e,t){return e&&t?"tap"===e&&t.tap_action?t.tap_action:"hold"===e&&t.hold_action?t.hold_action:"double_tap"===e&&t.double_tap_action?t.double_tap_action:"end_tap"===e&&t.end_tap_action?t.end_tap_action:"start_tap"===e&&t.start_tap_action?t.start_tap_action:null:null}const Ef=e=>ef(e).some((e=>function(e){return void 0!==e&&"none"!==e.action}(e))),Af=e=>{e.stopPropagation()};class If{constructor(){this._timer=null,this._repeated=!1}stop(){this._timer&&(this._repeated?window.clearInterval(this._timer):window.clearTimeout(this._timer),this._timer=null)}isRunning(){return null!==this._timer}start(e,t){this.stop(),this._timer=window.setTimeout((()=>{this._timer=null,t()}),1e3*e),this._repeated=!1}startRepeated(e,t){this.stop(),this._timer=window.setInterval((()=>{t()}),1e3*e),this._repeated=!0}}class Tf extends HTMLElement{constructor(){super(...arguments),this.holdTime=.4,this.holdTimer=new If,this.doubleClickTimer=new If,this.held=!1,this.started=!1}connectedCallback(){["touchcancel","mouseout","mouseup","touchmove","mousewheel","wheel","scroll"].forEach((e=>{document.addEventListener(e,(()=>{this.holdTimer.stop()}),{passive:!0})}))}bind(e,t){if(e.actionHandlerOptions)return void(e.actionHandlerOptions=t);e.actionHandlerOptions=t,e.addEventListener("contextmenu",(e=>{const t=e||window.event;return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.returnValue=!1,!1}));const n=()=>{this.held=!1,this.holdTimer.start(this.holdTime,(()=>{this.held=!0})),this.started||(this.started=!0,Je(e,"action",{action:"start_tap"}))},a=t=>{this.holdTimer.stop(),this.started&&(this.started=!1,Je(e,"action",{action:"end_tap"}))},i=t=>{const n=e.actionHandlerOptions;n?.allowPropagation||Af(t),["touchend","touchcancel"].includes(t.type)&&!this.held||(a(),n?.hasHold&&this.held?Je(e,"action",{action:"hold"}):n?.hasDoubleClick?"click"===t.type&&t.detail<2||!this.doubleClickTimer.isRunning()?this.doubleClickTimer.start(.25,(()=>Je(e,"action",{action:"tap"}))):(this.doubleClickTimer.stop(),Je(e,"action",{action:"double_tap"})):Je(e,"action",{action:"tap"}))};e.addEventListener("touchstart",n,{passive:!0}),e.addEventListener("touchend",i),e.addEventListener("touchcancel",i),e.addEventListener("mousedown",n,{passive:!0}),e.addEventListener("click",i),e.addEventListener("keyup",(e=>{"Enter"===e.key&&i(e)})),e.addEventListener("mouseleave",a)}}customElements.define("action-handler-advanced-camera-card",Tf);const zf=(e,t)=>{const n=(()=>{const e=document.body;if(e.querySelector("action-handler-advanced-camera-card"))return e.querySelector("action-handler-advanced-camera-card");const t=document.createElement("action-handler-advanced-camera-card");return e.appendChild(t),t})();n&&n.bind(e,t)},jf=ge(class extends fe{update(e,[t]){return zf(e.element,t),U}render(e){}});var Of=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)_m(t,Cm(e)),e=Up(e);return t}:bm;function Df(e){return ym(e,rg,Of)}var Pf=Object.prototype.hasOwnProperty;var Rf=/\w*$/;var Lf=dh?dh.prototype:void 0,Nf=Lf?Lf.valueOf:void 0;var Ff="[object Boolean]",Vf="[object Date]",Hf="[object Map]",Bf="[object Number]",qf="[object RegExp]",Uf="[object Set]",Zf="[object String]",Wf="[object Symbol]",Qf="[object ArrayBuffer]",Kf="[object DataView]",Yf="[object Float32Array]",Gf="[object Float64Array]",Xf="[object Int8Array]",Jf="[object Int16Array]",e_="[object Int32Array]",t_="[object Uint8Array]",n_="[object Uint8ClampedArray]",a_="[object Uint16Array]",i_="[object Uint32Array]";function r_(e,t,n){var a,i,r,s=e.constructor;switch(t){case Qf:return Fp(e);case Ff:case Vf:return new s(+e);case Kf:return function(e,t){var n=t?Fp(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case Yf:case Gf:case Xf:case Jf:case e_:case t_:case n_:case a_:case i_:return Vp(e,n);case Hf:return new s;case Bf:case Zf:return new s(e);case qf:return(r=new(i=e).constructor(i.source,Rf.exec(i))).lastIndex=i.lastIndex,r;case Uf:return new s;case Wf:return a=e,Nf?Object(Nf.call(a)):{}}}var s_=Um&&Um.isMap,o_=s_?Fm(s_):function(e){return Mm(e)&&"[object Map]"==wp(e)};var c_=Um&&Um.isSet,l_=c_?Fm(c_):function(e){return Mm(e)&&"[object Set]"==wp(e)},d_=1,u_=2,h_=4,m_="[object Arguments]",p_="[object Function]",g_="[object GeneratorFunction]",f_="[object Object]",__={};function v_(e,t,n,a,i,r){var s,o=t&d_,c=t&u_,l=t&h_;if(n&&(s=i?n(e,a,i,r):n(e)),void 0!==s)return s;if(!bh(e))return e;var d=vm(e);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Pf.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!o)return Hp(e,s)}else{var u=wp(e),h=u==p_||u==g_;if(jm(e))return Np(e,o);if(u==f_||u==m_||h&&!i){if(s=c||h?{}:Zp(e),!o)return c?function(e,t){return ng(e,Of(e),t)}(e,function(e,t){return e&&ng(t,rg(t),e)}(s,e)):function(e,t){return ng(e,Cm(e),t)}(e,function(e,t){return e&&ng(t,np(t),e)}(s,e))}else{if(!__[u])return i?e:{};s=r_(e,u,o)}}r||(r=new Zh);var m=r.get(e);if(m)return m;r.set(e,s),l_(e)?e.forEach((function(a){s.add(v_(a,t,n,a,e,r))})):o_(e)&&e.forEach((function(a,i){s.set(i,v_(a,t,n,i,e,r))}));var p=d?void 0:(l?c?Df:ap:c?rg:np)(e);return function(e,t){for(var n=-1,a=null==e?0:e.length;++n<a&&!1!==t(e[n],n,e););}(p||e,(function(a,i){p&&(a=e[i=a]),tg(s,i,v_(a,t,n,i,e,r))})),s}__[m_]=__["[object Array]"]=__["[object ArrayBuffer]"]=__["[object DataView]"]=__["[object Boolean]"]=__["[object Date]"]=__["[object Float32Array]"]=__["[object Float64Array]"]=__["[object Int8Array]"]=__["[object Int16Array]"]=__["[object Int32Array]"]=__["[object Map]"]=__["[object Number]"]=__[f_]=__["[object RegExp]"]=__["[object Set]"]=__["[object String]"]=__["[object Symbol]"]=__["[object Uint8Array]"]=__["[object Uint8ClampedArray]"]=__["[object Uint16Array]"]=__["[object Uint32Array]"]=!0,__["[object Error]"]=__[p_]=__["[object WeakMap]"]=!1;function y_(e){return v_(e,5)}var b_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function w_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var x_={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function a(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function r(e,t,a,r,s){if("function"!=typeof a)throw new TypeError("The listener must be a function");var o=new i(a,r||e,s),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],o]:e._events[c].push(o):(e._events[c]=o,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new a:delete e._events[t]}function o(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,a,i=[];if(0===this._eventsCount)return i;for(a in e=this._events)t.call(e,a)&&i.push(n?a.slice(1):a);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=n?n+e:e,a=this._events[t];if(!a)return[];if(a.fn)return[a.fn];for(var i=0,r=a.length,s=new Array(r);i<r;i++)s[i]=a[i].fn;return s},o.prototype.listenerCount=function(e){var t=n?n+e:e,a=this._events[t];return a?a.fn?1:a.length:0},o.prototype.emit=function(e,t,a,i,r,s){var o=n?n+e:e;if(!this._events[o])return!1;var c,l,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,a),!0;case 4:return d.fn.call(d.context,t,a,i),!0;case 5:return d.fn.call(d.context,t,a,i,r),!0;case 6:return d.fn.call(d.context,t,a,i,r,s),!0}for(l=1,c=new Array(u-1);l<u;l++)c[l-1]=arguments[l];d.fn.apply(d.context,c)}else{var h,m=d.length;for(l=0;l<m;l++)switch(d[l].once&&this.removeListener(e,d[l].fn,void 0,!0),u){case 1:d[l].fn.call(d[l].context);break;case 2:d[l].fn.call(d[l].context,t);break;case 3:d[l].fn.call(d[l].context,t,a);break;case 4:d[l].fn.call(d[l].context,t,a,i);break;default:if(!c)for(h=1,c=new Array(u-1);h<u;h++)c[h-1]=arguments[h];d[l].fn.apply(d[l].context,c)}}return!0},o.prototype.on=function(e,t,n){return r(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return r(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,a,i){var r=n?n+e:e;if(!this._events[r])return this;if(!t)return s(this,r),this;var o=this._events[r];if(o.fn)o.fn!==t||i&&!o.once||a&&o.context!==a||s(this,r);else{for(var c=0,l=[],d=o.length;c<d;c++)(o[c].fn!==t||i&&!o[c].once||a&&o[c].context!==a)&&l.push(o[c]);l.length?this._events[r]=1===l.length?l[0]:l:s(this,r)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new a,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(x_);var C_=w_(x_.exports);class M_ extends Error{constructor(e){super(e),this.name="TimeoutError"}}class S_ extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const k_=e=>void 0===globalThis.DOMException?new S_(e):new DOMException(e),$_=e=>{const t=void 0===e.reason?k_("This operation was aborted."):e.reason;return t instanceof Error?t:k_(t)};class E_{#e=[];enqueue(e,t){const n={priority:(t={priority:0,...t}).priority,run:e};if(this.size&&this.#e[this.size-1].priority>=t.priority)return void this.#e.push(n);const a=function(e,t,n){let a=0,i=e.length;for(;i>0;){const r=Math.trunc(i/2);let s=a+r;n(e[s],t)<=0?(a=++s,i-=r+1):i=r}return a}(this.#e,n,((e,t)=>t.priority-e.priority));this.#e.splice(a,0,n)}dequeue(){const e=this.#e.shift();return e?.run}filter(e){return this.#e.filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return this.#e.length}}class A_ extends C_{#t;#n;#a=0;#i;#r;#s=0;#o;#c;#e;#l;#d=0;#u;#h;#m;timeout;constructor(e){if(super(),!("number"==typeof(e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:E_,...e}).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap?.toString()??""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval?.toString()??""}\` (${typeof e.interval})`);this.#t=e.carryoverConcurrencyCount,this.#n=e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,this.#i=e.intervalCap,this.#r=e.interval,this.#e=new e.queueClass,this.#l=e.queueClass,this.concurrency=e.concurrency,this.timeout=e.timeout,this.#m=!0===e.throwOnTimeout,this.#h=!1===e.autoStart}get#p(){return this.#n||this.#a<this.#i}get#g(){return this.#d<this.#u}#f(){this.#d--,this.#_(),this.emit("next")}#v(){this.#y(),this.#b(),this.#c=void 0}get#w(){const e=Date.now();if(void 0===this.#o){const t=this.#s-e;if(!(t<0))return void 0===this.#c&&(this.#c=setTimeout((()=>{this.#v()}),t)),!0;this.#a=this.#t?this.#d:0}return!1}#_(){if(0===this.#e.size)return this.#o&&clearInterval(this.#o),this.#o=void 0,this.emit("empty"),0===this.#d&&this.emit("idle"),!1;if(!this.#h){const e=!this.#w;if(this.#p&&this.#g){const t=this.#e.dequeue();return!!t&&(this.emit("active"),t(),e&&this.#b(),!0)}}return!1}#b(){this.#n||void 0!==this.#o||(this.#o=setInterval((()=>{this.#y()}),this.#r),this.#s=Date.now()+this.#r)}#y(){0===this.#a&&0===this.#d&&this.#o&&(clearInterval(this.#o),this.#o=void 0),this.#a=this.#t?this.#d:0,this.#x()}#x(){for(;this.#_(););}get concurrency(){return this.#u}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this.#u=e,this.#x()}async#C(e){return new Promise(((t,n)=>{e.addEventListener("abort",(()=>{n(e.reason)}),{once:!0})}))}async add(e,t={}){return t={timeout:this.timeout,throwOnTimeout:this.#m,...t},new Promise(((n,a)=>{this.#e.enqueue((async()=>{this.#d++,this.#a++;try{t.signal?.throwIfAborted();let a=e({signal:t.signal});t.timeout&&(a=function(e,t){const{milliseconds:n,fallback:a,message:i,customTimers:r={setTimeout:setTimeout,clearTimeout:clearTimeout}}=t;let s;const o=new Promise(((o,c)=>{if("number"!=typeof n||1!==Math.sign(n))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${n}\``);if(t.signal){const{signal:e}=t;e.aborted&&c($_(e)),e.addEventListener("abort",(()=>{c($_(e))}))}if(n===Number.POSITIVE_INFINITY)return void e.then(o,c);const l=new M_;s=r.setTimeout.call(void 0,(()=>{if(a)try{o(a())}catch(e){c(e)}else"function"==typeof e.cancel&&e.cancel(),!1===i?o():i instanceof Error?c(i):(l.message=i??`Promise timed out after ${n} milliseconds`,c(l))}),n),(async()=>{try{o(await e)}catch(e){c(e)}})()})),c=o.finally((()=>{c.clear()}));return c.clear=()=>{r.clearTimeout.call(void 0,s),s=void 0},c}(Promise.resolve(a),{milliseconds:t.timeout})),t.signal&&(a=Promise.race([a,this.#C(t.signal)]));const i=await a;n(i),this.emit("completed",i)}catch(e){if(e instanceof M_&&!t.throwOnTimeout)return void n();a(e),this.emit("error",e)}finally{this.#f()}}),t),this.emit("add"),this.#_()}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this.#h?(this.#h=!1,this.#x(),this):this}pause(){this.#h=!0}clear(){this.#e=new this.#l}async onEmpty(){0!==this.#e.size&&await this.#M("empty")}async onSizeLessThan(e){this.#e.size<e||await this.#M("next",(()=>this.#e.size<e))}async onIdle(){0===this.#d&&0===this.#e.size||await this.#M("idle")}async#M(e,t){return new Promise((n=>{const a=()=>{t&&!t()||(this.off(e,a),n())};this.on(e,a)}))}get size(){return this.#e.size}sizeBy(e){return this.#e.filter(e).length}get pending(){return this.#d}get isPaused(){return this.#h}}var I_={advanced_camera_card:"Advanced Camera Card",advanced_camera_card_description:"An Advanced Camera Card",live:"Live",no_media:"No media to display",recordings:"Recordings",version:"Version"},T_={cameras:{always_error_if_entity_unavailable:"Always treat entity unavailability as error",camera_entity:"Camera Entity",capabilities:{capabilities:{clips:"Clips","favorite-events":"Favorite Events","favorite-recordings":"Favorite Recordings",live:"Live",menu:"Menu",ptz:"PTZ",recordings:"Recordings",seek:"Seeking",snapshots:"Snapshots",substream:"Substream"},disable:"Disable",disable_except:"Disable except",editor_label:"Camera capabilities"},cast:{dashboard:{dashboard_path:"Dashboard path",view_path:"View path"},editor_label:"Cast options",method:"Cast method",methods:{dashboard:"Dashboard",standard:"Standard"}},dependencies:{all_cameras:"Show events for all cameras with this camera",cameras:"Show events for specific cameras with this camera",editor_label:"Dependency options"},dimensions:{aspect_ratio:"Static aspect ratio",editor_label:"Camera dimensions",layout:{editor_label:"Camera Layout",fit:"Layout fit",fits:{contain:"Media is contained/letterboxed",cover:"Media expands proportionally to cover the card",fill:"Media is stretched to fill the card"},pan:{x:"Pan horizontal percentage",y:"Pan vertical percentage"},position:{editor_label:"Layout Cover Position",x:"Horizontal placement percentage",y:"Vertical placement percentage"},view_box:{bottom:"Bottom inset percentage",editor_label:"Layout View Box",left:"Left inset percentage",right:"Right inset percentage",top:"Top inset percentage"},zoom:"Zoom factor"}},engines:{editor_label:"Camera engine options"},frigate:{camera_name:"Frigate camera name (Autodetected from entity)",client_id:"Frigate client id (For >1 Frigate server)",editor_label:"Frigate options",labels:"Frigate labels/object filters",url:"Frigate server URL",zones:"Frigate zones"},go2rtc:{editor_label:"go2rtc Options",modes:{editor_label:"go2rtc Modes",mjpeg:"Motion JPEG (MJPEG)",mp4:"MPEG-4 (MP4)",mse:"Media Source Extensions (MSE)",webrtc:"Web Real-Time Communication (WebRTC)"},stream:"go2rtc stream name",url:"go2rtc URL"},icon:"Icon for this camera (Autodetected from entity)",id:"Unique id for this camera in this card",image:{editor_label:"Image Options",refresh_seconds:"Number of seconds after which to refresh live image (0=never)",url:"Image URL to use instead of camera entity snapshot"},live_provider:"Live view provider for this camera",live_provider_options:{editor_label:"Live provider options"},live_providers:{auto:"Automatic",go2rtc:"go2rtc",ha:"Home Assistant video stream (i.e. HLS, LL-HLS, WebRTC via HA)",image:"Home Assistant images",jsmpeg:"JSMpeg","webrtc-card":"WebRTC Card (i.e. AlexxIT's WebRTC Card)"},motioneye:{editor_label:"MotionEye options",images:{directory_pattern:"Images directory pattern",file_pattern:"Images file pattern"},movies:{directory_pattern:"Movies directory pattern",file_pattern:"Movies file pattern"},url:"MotionEye UI URL"},proxy:{dynamic:"Dynamic proxying",editor_label:"Camera proxying",media:{auto:"Media proxying automatically configured",editor_label:"Media proxying",false:"Media proxying disabled",true:"Media proxying enabled"},ssl_ciphers:{auto:"SSL ciphers automatically configured",default:"Default SSL ciphers",editor_label:"SSL ciphers",insecure:"Insecure SSL ciphers",intermediate:"Intermediate SSL ciphers",modern:"Modern SSL ciphers"},ssl_verification:{auto:"SSL verification automatically configured",editor_label:"SSL verification",false:"SSL verification disabled",true:"SSL verification enabled"}},reolink:{editor_label:"Reolink options",media_resolution:{editor_label:"Media Resolution",high:"High Resolution",low:"Low Resolution"},url:"Reolink UI URL"},title:"Title for this camera (Autodetected from entity)",triggers:{editor_label:"Trigger options",entities:"Trigger from other entities",events:{clips:"Events with new clips",editor_label:"Trigger Events",events:"All events",snapshots:"Events with new snapshots"},motion:"Trigger by auto-detecting the motion sensor",occupancy:"Trigger by auto-detecting the occupancy sensor"},webrtc_card:{editor_label:"WebRTC Card Options",entity:"WebRTC Card Camera Entity",url:"WebRTC Card Camera URL"}},common:{controls:{builtin:"Built-in video controls",filter:{editor_label:"Media Filter",mode:"Filter mode",modes:{left:"Media filter in a drawer to the left",none:"No media filter",right:"Media filter in a drawer to the right"}},next_previous:{editor_label:"Next & Previous",size:"Next & previous control size in pixels",style:"Next & previous control style",styles:{chevrons:"Chevrons",icons:"Icons",none:"None",thumbnails:"Thumbnails"}},thumbnails:{editor_label:"Thumbnails",events_media_type:"Whether to show event thumbnails of clips or snapshots",events_media_types:{clips:"Clip thumbnails",snapshots:"Snapshot thumbnails"},media_type:"Whether to show thumnails of events or recordings",media_types:{events:"Events",recordings:"Recordings"},mode:"Thumbnails mode",modes:{above:"Thumbnails above",below:"Thumbnails below",left:"Thumbnails in a drawer to the left",none:"No thumbnails",right:"Thumbnails in a drawer to the right"},show_details:"Show details with thumbnails",show_download_control:"Show download control on thumbnails",show_favorite_control:"Show favorite control on thumbnails",show_timeline_control:"Show timeline control on thumbnails",size:"Thumbnails size in pixels"},timeline:{editor_label:"Mini Timeline",format:{editor_label:"Time & date format","24h":"Use 24-hour clock"},mode:"Mode",modes:{above:"Above",below:"Below",none:"None"},pan_mode:"Default pan mode",pan_modes:{pan:"Pan",seek:"Pan seeks across all media","seek-in-camera":"Pan seeks within selected camera only","seek-in-media":"Pan seeks within selected media item only"}}},display:{editor_label:"Display",grid_columns:"Exact number of grid columns",grid_max_columns:"Maximum number of grid columns",grid_selected_width_factor:"Increase selected media width by this factor",mode:"Mode"},image:{entity:"Entity for use with entity mode",entity_parameters:"Query parameters added to the entity-based picture URLs (e.g. width=1920&height=1080)",mode:"Image mode",modes:{camera:"Home Assistant camera snapshot of camera entity",entity:"Entity with entity_picture attribute",screensaver:"Embedded screensaver image",url:"Arbitrary image specified by URL"},refresh_seconds:"Number of seconds after which to refresh (0=never)",url:"Static image URL"},media_action_conditions:{all:"All opportunities",hidden:"On browser/tab hiding",microphone_mute:"On microphone mute",microphone_unmute:"On microphone unmute",never:"Never",selected:"On selection",unselected:"On unselection",visible:"On browser/tab visibility"},timeline:{clustering_threshold:"The count of events at which they are clustered (0=no clustering)",events_media_type:"The events media the timeline displays",events_media_types:{all:"All event media types",clips:"Clips",snapshots:"Snapshots"},show_recordings:"Show recordings",style:"Timeline style",styles:{ribbon:"Events on a single ribbon",stack:"Stacked & clustered events"},window_seconds:"The default length of the timeline view in seconds"}},dimensions:{aspect_ratio:"Default aspect ratio (e.g. '16:9')",aspect_ratio_mode:"Aspect ratio mode",aspect_ratio_modes:{dynamic:"Aspect ratio adjusts to media",static:"Static aspect ratio",unconstrained:"Unconstrained aspect ratio"},height:"Card height in CSS units (e.g. '500px')"},live:{auto_mute:"Automatically mute live cameras",auto_pause:"Automatically pause live cameras",auto_play:"Automatically play live cameras",auto_unmute:"Automatically unmute live cameras",controls:{editor_label:"Live Controls",ptz:{editor_label:"PTZ",hide_home:"Hide home control",hide_pan_tilt:"Hide pan & tilt control",hide_zoom:"Hide zoom control",mode:"Mode",modes:{off:"Off",on:"On"},orientation:"Orientation",orientations:{horizontal:"Horizontal",vertical:"Vertical"},position:"Position",positions:{"bottom-left":"Bottom left","bottom-right":"Bottom right","top-left":"Top left","top-right":"Top right"}}},draggable:"Live cameras view can be dragged/swiped",lazy_load:"Live cameras are lazily loaded",lazy_unload:"Live cameras are lazily unloaded",microphone:{always_connected:"Always keep the microphone connected",disconnect_seconds:"Seconds after which to disconnect microphone (0=never)",editor_label:"Microphone",enabled:"Microphone enabled",mute_after_microphone_mute_seconds:"Seconds after microphone mute to mute inbound audio"},preload:"Preload live view in the background",show_image_during_load:"Show still image while the live stream is loading",transition_effect:"Live camera transition effect",zoomable:"Live cameras can be zoomed/panned"},media_viewer:{auto_mute:"Automatically mute media",auto_pause:"Automatically pause media",auto_play:"Automatically play media",auto_unmute:"Automatically unmute media",controls:{editor_label:"Media Viewer Controls"},draggable:"Media Viewer can be dragged/swiped",lazy_load:"Media Viewer media is lazily loaded in carousel",snapshot_click_plays_clip:"Clicking on a snapshot plays a related clip",transition_effect:"Media Viewer transition effect",transition_effects:{none:"No transition",slide:"Slide transition"},zoomable:"Media Viewer can be zoomed/panned"},menu:{alignment:"Menu alignment",alignments:{bottom:"Aligned to the bottom",left:"Aligned to the left",right:"Aligned to the right",top:"Aligned to the top"},button_size:"Menu button size in pixels",buttons:{alignment:"Button alignment",alignments:{matching:"Matching the menu alignment",opposing:"Opposing the menu alignment"},camera_ui:"Camera user interface",cameras:"Cameras",clips:"Clips",display_mode:"Display mode",download:"Download",enabled:"Button enabled",expand:"Expand",fullscreen:"Fullscreen",icon:"Icon",image:"Image",iris:"Iris / Default View / Unhide menu",live:"Live",media_player:"Send to media player",microphone:"Microphone",mute:"Mute / Unmute",permanent:"Show when the menu is hidden",play:"Play / Pause",priority:"Priority",ptz_controls:"Show PTZ controls",ptz_home:"PTZ Home",recordings:"Recordings",screenshot:"Screenshot",snapshots:"Snapshots",substreams:"Substream(s)",timeline:"Timeline",type:"Button type",types:{momentary:"Momentary",toggle:"Toggle"}},position:"Menu position",positions:{bottom:"Positioned on the bottom",left:"Positioned on the left",right:"Positioned on the right",top:"Positioned on the top"},style:"Menu style",styles:{hidden:"Hidden menu",hover:"Hover menu","hover-card":"Hover menu (card-wide)",none:"No menu",outside:"Outside menu",overlay:"Overlay menu"}},overrides:{info:"This card configuration has manually specified overrides configured which may override values shown in the visual editor, please consult the code editor to view/modify these overrides"},performance:{features:{animated_progress_indicator:"Animated Progress Indicator",card_loading_indicator:"Card Loading Indicator",editor_label:"Feature Options",max_simultaneous_engine_requests:"Max simultaneous camera engine requests",media_chunk_size:"Media chunk size"},style:{border_radius:"Curves",box_shadow:"Shadows",editor_label:"Style Options"},warning:"This card is in low profile mode so defaults have changed to optimize performance"},profiles:{casting:"Casting",editor_label:"Configuration profiles","low-performance":"Low performance",scrubbing:"Video scrubbing"},status_bar:{height:"Status bar height in pixels",items:{enabled:"Item enabled",engine:"Camera engine",live_provider:"Live provider",priority:"Item priority",resolution:"Resolution",technology:"Technology",title:"Title"},popup_seconds:"Status bar popup seconds",position:"Status bar position",positions:{bottom:"Positioned on the bottom",top:"Positioned on the top"},style:"Status bar style",styles:{hover:"Hover status bar","hover-card":"Hover status bar (card-wide)",none:"No status bar",outside:"Outside status bar",overlay:"Overlay status bar",popup:"Popup status bar"}},view:{camera_select:"View for newly selected cameras",default:"Default view",default_cycle_camera:"Cycle through cameras when default view updates",default_reset:{after_interaction:"Reset to the default view after user interaction ends",editor_label:"Default view reset behavior",entities:"Reset to the default view on entity state change",every_seconds:"Reset to default view every X seconds (0=never)",interaction_mode:"How default reset behaves when the card has human interaction",interaction_modes:{active:"Only allow reset when card has active human interaction",all:"Reset regardless of human interaction",inactive:"Only reset when card has no human interaction"}},dim:"Dim when no interaction",interaction_seconds:"Seconds after user action to remain interacted with (0=never)",keyboard_shortcuts:{editor_label:"Keyboard shortcuts",enabled:"Keyboard shortcuts enabled",ptz_down:"PTZ Down",ptz_home:"PTZ Home",ptz_left:"PTZ Left",ptz_right:"PTZ Right",ptz_up:"PTZ Up",ptz_zoom_in:"PTZ Zoom In",ptz_zoom_out:"PTZ Zoom Out"},theme:{themes:{dark:"Dark",ha:"Home Assistant",editor_label:"Themes",light:"Light",traditional:"Traditional"}},triggers:{actions:{editor_label:"Trigger actions",interaction_mode:"How to handle actions when the card has human interaction",interaction_modes:{active:"Only trigger actions when card has human interaction",all:"Trigger actions regardless of human interaction",inactive:"Only trigger actions when card has no human interaction"},trigger:"Trigger action",triggers:{default:"Change to or update default view",live:"Change to or update live view",media:"Change to the relevant media view for new media",none:"No action"},untrigger:"Untrigger action",untriggers:{default:"Change to default view/camera",none:"No action"}},editor_label:"Trigger behavior",filter_selected_camera:"Only trigger on selected camera",show_trigger_status:"Show pulsing border when triggered",untrigger_seconds:"Seconds after inactive state change to untrigger"},views:{clip:"Most recent clip",clips:"Clips gallery",current:"Current view",image:"Static image",live:"Live view",recording:"Most recent recording",recordings:"Recordings gallery",snapshot:"Most recent snapshot",snapshots:"Snapshots gallery",timeline:"Timeline view"}}},z_={grid:"Show media viewer for each camera in a grid",single:"Show single media viewer"},j_={add_new_camera:"Add new camera",button:"Button",camera:"Camera",cameras:"Cameras",cameras_secondary:"What cameras to render on this card",delete:"Delete",dimensions:"Card dimensions",dimensions_secondary:"Card dimensions & shape options",image:"Image",image_secondary:"Static image view options",live:"Live",live_secondary:"Live camera view options",media_gallery:"Media gallery",media_gallery_secondary:"Media gallery options",media_viewer:"Media viewer",media_viewer_secondary:"Viewer for static media (clips, snapshots or recordings)",menu:"Menu",menu_secondary:"Menu look & feel options",move_down:"Move down",move_up:"Move up",overrides:"Overrides are active",overrides_secondary:"Dynamic configuration overrides detected",performance:"Performance",performance_secondary:"Card performance options",profiles:"Configuration profiles",profiles_secondary:"Choose pre-configured sets of defaults",status_bar:"Status bar",status_bar_secondary:"Status bar look & feel options",timeline:"Timeline",timeline_secondary:"Event timeline options",upgrade:"Upgrade",upgrade_available:"An automatic card configuration upgrade is available",view:"View",view_secondary:"What the card should show and how to show it"},O_={ptz:{down:"Down",home:"Home",left:"Left",right:"Right",up:"Up",zoom_in:"Zoom In",zoom_out:"Zoom Out"}},D_={awaiting_live:"Waiting for live stream to load ...",awaiting_media:"Waiting for media to load",camera_initialization:"Camera initialization failed",camera_initialization_reolink:"Could not initialize Reolink camera",could_not_render_elements:"Could not render picture elements",could_not_resolve:"Could not resolve media URL",diagnostics:"Card diagnostics. Please review for confidential information prior to sharing",download_no_media:"No media to download",download_sign_failed:"Could not sign media URL for download",duplicate_camera_id:"Duplicate camera id for the following camera, use the 'id' parameter to uniquely identify cameras",empty_response:"Received empty response from Home Assistant for request",failed_response:"Failed to receive response from Home Assistant for request",failed_retain:"Could not retain event",failed_sign:"Could not sign Home Assistant URL",fetching_diagnostics:"Fetching diagnostics",image_load_error:"The image could not be loaded",invalid_configuration:"Invalid configuration",invalid_configuration_no_hint:"No location hint available (bad or missing type?)",invalid_configuration_override:"Invalid override configuration",invalid_elements_config:"Invalid picture elements configuration",invalid_response:"Received invalid response from Home Assistant for request",jsmpeg_no_player:"Could not start JSMPEG player",live_camera_no_endpoint:"Could not get camera endpoint for this live provider (incomplete configuration?)",live_camera_not_found:"The configured camera_entity was not found",live_camera_unavailable:"Camera unavailable",no_camera_engine:"Could not determine suitable engine for camera",no_camera_entity:"Could not find camera entity",no_camera_entity_for_triggers:"A camera entity is required in order to autodetect triggers",no_camera_id:"Could not determine camera id for the following camera, may need to set 'id' parameter manually",no_dashboard_or_view:"Both 'dashboard_path' and 'view_path' parameters are required for the 'dashboard' cast method",no_live_camera:"The camera_entity parameter must be set and valid for this live provider",no_supported_camera:"The selected camera does not support this view",no_supported_cameras:"No cameras support this view",reconnecting:"Reconnecting",stream_not_loading:"The video stream has not yet loaded. This is could for any number of reasons. If configured (and by default), there will be an image refreshing every second until the stream loads correctly",too_many_automations:"Too many nested automation calls, please check your configuration for loops",troubleshooting:"Check troubleshooting",unknown:"Unknown error",upgrade_available:"An automated card configuration upgrade is available, please visit the visual card editor",webrtc_card_reported_error:"WebRTC Card reported an error",webrtc_card_waiting:"Waiting for WebRTC Card to load ..."},P_={camera:"Camera",duration:"Duration",in_progress:"In Progress",score:"Score",seek:"Seek",start:"Start",tag:"Tag",what:"What",where:"Where"},R_={assign:"Assign",modifiers:{alt:"Alt",ctrl:"Ctrl",meta:"Meta",shift:"Shift"},unassign:"Unassign"},L_={all:"All",camera:"Camera",favorite:"Favorite",media_type:"Media Type",media_types:{clips:"Clips",recordings:"Recordings",snapshots:"Snapshots"},not_favorite:"Not Favorite",select_camera:"Select camera...",select_favorite:"Select favorite...",select_media_type:"Select media type...",select_tag:"Select tag...",select_what:"Select what...",select_when:"Select when...",select_where:"Select where...",tag:"Tag",what:"What",when:"When",whens:{custom:"Custom",past_month:"Past Month",past_week:"Past Week",today:"Today",yesterday:"Yesterday"},where:"Where"},N_={unseekable:"Seek time not found in media"},F_={camera:"Camera",duration:"Duration",events:"Events",in_progress:"In Progress",seek:"Seek",start:"Start"},V_={download:"Download media",no_thumbnail:"No thumbnail available",retain_indefinitely:"Media will be indefinitely retained",timeline:"See media in timeline"},H_={select_date:"Choose date"},B_={common:I_,config:T_,display_modes:z_,editor:j_,elements:O_,error:D_,event:P_,key_assigner:R_,media_filter:L_,media_viewer:N_,recording:F_,thumbnail:V_,timeline:H_},q_=Object.freeze({__proto__:null,common:I_,config:T_,default:B_,display_modes:z_,editor:j_,elements:O_,error:D_,event:P_,key_assigner:R_,media_filter:L_,media_viewer:N_,recording:F_,thumbnail:V_,timeline:H_});const U_="en",Z_={[U_]:q_};let W_;function Q_(e){const t=e=>e.replace("-","_"),n=e?.language??e?.selectedLanguage;if(n)return t(n);const a=localStorage.getItem("selectedLanguage");if(a){const e=JSON.parse(a);if(e)return t(e)}for(const e of navigator.languages){const n=t(e);if(n&&n in Z_)return n}return U_}function K_(e,t="",n=""){let a="";try{a=e.split(".").reduce(((e,t)=>e[t]),Z_[W_??U_])}catch(e){}return a||(a=e.split(".").reduce(((e,t)=>e[t]),Z_[U_])),""!==t&&""!==n&&(a=a.replace(t,n)),a}function Y_(e){return"string"==typeof e?.id&&e.id||"string"==typeof e?.camera_entity&&e.camera_entity||"object"==typeof e?.webrtc_card&&e.webrtc_card&&("string"==typeof e.webrtc_card.entity&&e.webrtc_card.entity||"string"==typeof e.webrtc_card.url&&e.webrtc_card.url)||"object"==typeof e?.go2rtc&&e.go2rtc&&"string"==typeof e.go2rtc.url&&"string"==typeof e.go2rtc.stream&&`${e.go2rtc.url}#${e.go2rtc.stream}`||"object"==typeof e?.frigate&&e.frigate&&"string"==typeof e?.frigate.camera_name&&e.frigate.camera_name||""}const G_=(e,...t)=>{e?.debug?.logging&&console.debug(...t)},X_=(e,t,n)=>"preset"===t?(n?.preset?e.ptz.presets?.[n.preset]:null)??null:n?.phase?e.ptz[`actions_${t}_${n.phase}`]??null:e.ptz[`actions_${t}`]??null,J_=(e,t,n)=>!!X_(e,t,n),ev=(e,t)=>{const n=J_(e,t,{phase:"start"})&&J_(e,t,{phase:"stop"}),a=J_(e,t);return n||a?[...n?["continuous"]:[],...a?["relative"]:[]]:null},tv=e=>{const t=ev(e,"left"),n=ev(e,"right"),a=ev(e,"up"),i=ev(e,"down"),r=ev(e,"zoom_in"),s=ev(e,"zoom_out"),o=e.ptz.presets?Object.keys(e.ptz.presets):void 0;return t?.length||n?.length||a?.length||i?.length||r?.length||s?.length||o?.length?{...t?{left:t}:{},...n?{right:n}:{},...a?{up:a}:{},...i?{down:i}:{},...r?{zoomIn:r}:{},...s?{zoomOut:s}:{},...o?{presets:o}:{}}:null};class nv{constructor(e,t){this._capabilities=e;for(const e of t?.disable??[])this._disable(e);for(const e of Oo)t?.disableExcept?.length&&!t.disableExcept.includes(e)&&this._disable(e)}_disable(e){delete this._capabilities[e]}matches(e){let t=!0;return"string"==typeof e&&(t&&=this.has(e)),"object"==typeof e&&e.allCapabilities&&(t&&=e.allCapabilities.every((e=>this.has(e)))),"object"==typeof e&&e.anyCapabilities&&(t&&=e.anyCapabilities.some((e=>this.has(e)))),t}has(e){return!!this._capabilities[e]}getPTZCapabilities(){return this._capabilities.ptz??null}hasPTZCapability(){return!!(this._capabilities.ptz?.down?.length||this._capabilities.ptz?.up?.length||this._capabilities.ptz?.left?.length||this._capabilities.ptz?.right?.length||this._capabilities.ptz?.zoomIn?.length||this._capabilities.ptz?.zoomOut?.length||this._capabilities.ptz?.presets?.length)}getRawCapabilities(){return this._capabilities}}function av(e,t,n){var a=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var r=Array(i);++a<i;)r[a]=e[a+t];return r}var iv=Math.ceil,rv=Math.max;var sv=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ov=/^\w*$/;function cv(e,t){if(vm(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Sg(e))||(ov.test(e)||!sv.test(e)||null!=t&&e in Object(t))}var lv="Expected a function";function dv(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(lv);var n=function(){var a=arguments,i=t?t.apply(this,a):a[0],r=n.cache;if(r.has(i))return r.get(i);var s=e.apply(this,a);return n.cache=r.set(i,s)||r,s};return n.cache=new(dv.Cache||Uh),n}dv.Cache=Uh;var uv=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hv=/\\(\\)?/g,mv=function(e){var t=dv(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(uv,(function(e,n,a,i){t.push(a?i.replace(hv,"$1"):n||e)})),t})),pv=mv;function gv(e,t){return vm(e)?e:cv(e,t)?[e]:pv(Fg(e))}var fv=1/0;function _v(e){if("string"==typeof e||Sg(e))return e;var t=e+"";return"0"==t&&1/e==-fv?"-0":t}function vv(e,t){for(var n=0,a=(t=gv(t,e)).length;null!=e&&n<a;)e=e[_v(t[n++])];return n&&n==a?e:void 0}var yv=1,bv=2;function wv(e){return e==e&&!bh(e)}function xv(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function Cv(e){var t=function(e){for(var t=np(e),n=t.length;n--;){var a=t[n],i=e[a];t[n]=[a,i,wv(i)]}return t}(e);return 1==t.length&&t[0][2]?xv(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,a){var i=n.length,r=i,s=!a;if(null==e)return!r;for(e=Object(e);i--;){var o=n[i];if(s&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++i<r;){var c=(o=n[i])[0],l=e[c],d=o[1];if(s&&o[2]){if(void 0===l&&!(c in e))return!1}else{var u=new Zh;if(a)var h=a(l,d,c,e,t,u);if(!(void 0===h?Ep(d,l,yv|bv,a,u):h))return!1}}return!0}(n,e,t)}}function Mv(e,t,n){var a=null==e?void 0:vv(e,t);return void 0===a?n:a}function Sv(e,t){return null!=e&&t in Object(e)}function kv(e,t){return null!=e&&function(e,t,n){for(var a=-1,i=(t=gv(t,e)).length,r=!1;++a<i;){var s=_v(t[a]);if(!(r=null!=e&&n(e,s)))break;e=e[s]}return r||++a!=i?r:!!(i=null==e?0:e.length)&&Lm(i)&&Pm(s,i)&&(vm(e)||Am(e))}(e,t,Sv)}var $v=1,Ev=2;function Av(e){return cv(e)?(t=_v(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return vv(t,e)}}(e);var t}function Iv(e){return"function"==typeof e?e:null==e?cg:"object"==typeof e?vm(e)?(t=e[0],n=e[1],cv(t)&&wv(n)?xv(_v(t),n):function(e){var a=Mv(e,t);return void 0===a&&a===n?kv(e,t):Ep(n,a,$v|Ev)}):Cv(e):Av(e);var t,n}var Tv=function(e,t){return function(n,a){if(null==n)return n;if(!tp(n))return e(n,a);for(var i=n.length,r=t?i:-1,s=Object(n);(t?r--:++r<i)&&!1!==a(s[r],r,s););return n}}((function(e,t){return e&&Op(e,t,np)})),zv=Tv;function jv(e,t){if(e!==t){var n=void 0!==e,a=null===e,i=e==e,r=Sg(e),s=void 0!==t,o=null===t,c=t==t,l=Sg(t);if(!o&&!l&&!r&&e>t||r&&s&&c&&!o&&!l||a&&s&&c||!n&&c||!i)return 1;if(!a&&!r&&!l&&e<t||l&&n&&i&&!a&&!r||o&&n&&i||!s&&i||!c)return-1}return 0}function Ov(e,t,n){t=t.length?Dg(t,(function(e){return vm(e)?function(t){return vv(t,1===e.length?e[0]:e)}:e})):[cg];var a=-1;t=Dg(t,Fm(Iv));var i=function(e,t){var n=-1,a=tp(e)?Array(e.length):[];return zv(e,(function(e,i,r){a[++n]=t(e,i,r)})),a}(e,(function(e,n,i){return{criteria:Dg(t,(function(t){return t(e)})),index:++a,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){for(var a=-1,i=e.criteria,r=t.criteria,s=i.length,o=n.length;++a<s;){var c=jv(i[a],r[a]);if(c)return a>=o?c:c*("desc"==n[a]?-1:1)}return e.index-t.index}(e,t,n)}))}function Dv(e,t,n,a){return null==e?[]:(vm(t)||(t=null==t?[]:[t]),vm(n=a?void 0:n)||(n=null==n?[]:[n]),Ov(e,t,n))}async function Pv(e,t,n,a=!1){let i;try{i=await e.callWS(n)}catch(e){if(!(e instanceof Error))throw new jo(K_("error.failed_response"),{request:n,response:e});throw e}if(!i)throw new jo(K_("error.empty_response"),{request:n});const r=a?t.safeParse(JSON.parse(i)):t.safeParse(i);if(!r.success)throw new jo(K_("error.invalid_response"),{request:n,response:i,invalid_keys:Lo(r.error)});return r.data}const Rv=ya.lazy((()=>ya.object({title:ya.string(),media_class:ya.string(),media_content_type:ya.string(),media_content_id:ya.string(),can_play:ya.boolean(),can_expand:ya.boolean(),children_media_class:ya.string().nullable().optional(),thumbnail:ya.string().nullable(),children:ya.array(Rv).nullable().optional()}))),Lv="video",Nv="image",Fv=60,Vv=e=>Dv(e,(e=>e._metadata?.startDate),"desc");class Hv{async walkBrowseMedias(e,t,n){return t&&t.length?(await df(t,(async t=>await this._walkBrowseMedia(e,t,n)))).flat():[]}async _walkBrowseMedia(e,t,n){let a=[];for(const i of function(e,t,n){t=(n?vg(e,t,n):void 0===t)?1:rv(Og(t),0);var a=null==e?0:e.length;if(!a||t<1)return[];for(var i=0,r=0,s=Array(iv(a/t));i<a;)s[r++]=av(e,i,i+=t);return s}(t.targets,t.concurrency??1/0)){const r=await df(i,(async a=>await this._browseMedia(e,a,{cache:n?.cache,metadataGenerator:t.metadataGenerator})));for(const e of r)for(const n of e.children??[])t.matcher(n)&&a.push(n);if(t.sorter&&(a=t.sorter(a)),t.earlyExit&&t.earlyExit(a))break}const i=t.advance?t.advance(a):null;return i?.length?await this.walkBrowseMedias(e,i,n):a}async _browseMedia(e,t,n){const a="object"==typeof t?t.media_content_id:t,i=n?.cache?n.cache.get(a):null;if(i)return i;const r={type:"media_source/browse_media",media_content_id:a},s=await Pv(e,Rv,r);if(n?.metadataGenerator)for(const e of s.children??[])e._metadata=n.metadataGenerator(e,"object"==typeof t?t:void 0)??void 0;return n?.cache&&n.cache.set(a,s,Jd(new Date,{seconds:60})),s}}function Bv(e,t){return Ep(e,t)}function qv(e,t){return e&&e.length?function(e,t){for(var n=-1,a=e.length,i=0,r=[];++n<a;){var s=e[n],o=t?t(s):s;if(!n||!ah(o,c)){var c=o;r[i++]=0===s?0:s}}return r}(e,Iv(t)):[]}class Uv{constructor(e){this._ranges=e??[]}hasCoverage(e){return this._ranges.some((t=>Wv(t,e)))}add(e){this._ranges.push(e),this._ranges=Kv(this._ranges)}clear(){this._ranges=[]}}class Zv{constructor(e){this._ranges=e??[]}hasCoverage(e){const t=new Date;return this._ranges.some((n=>t<n.expires&&Wv(n,e)))}add(e){this._ranges.push(e),this._expireOldRanges()}_expireOldRanges(){const e=new Date;this._ranges=this._ranges.filter((t=>e<t.expires))}clear(){this._ranges=[]}}const Wv=(e,t)=>t.start>=e.start&&t.end<=e.end,Qv=(e,t)=>e.start>=t.start&&e.start<=t.end||e.end>=t.start&&e.end<=t.end||e.start<=t.start&&e.end>=t.end,Kv=(e,t=0)=>{const n=[];e=Dv(e,(e=>e.start),"asc");let a=null;for(const i of e){const e=i.start instanceof Date?i.start.getTime():i.start;if(!a){a={...i};continue}(a.end instanceof Date?a.end.getTime():a.end)+1e3*t>=e?i.end>a.end&&(a.end=i.end):(n.push(a),a={...i})}return a&&n.push(a),n};class Yv{constructor(){this._data=[]}get(e){const t=new Date;for(const n of this._data)if((!n.expires||t<=n.expires)&&this._contains(e,n.request))return n.response;return null}clear(){this._data=[]}has(e){return!!this.get(e)}set(e,t,n){this._data.push({request:e,response:t,expires:n}),this._expireOldRequests()}_contains(e,t){return Bv(e,t)}_expireOldRequests(){const e=new Date;this._data=this._data.filter((t=>!t.expires||e<t.expires))}}class Gv extends Yv{}class Xv{constructor(e,t){this._ranges=new Uv,this._data=[],this._timeFunc=e,this._idFunc=t}add(e,t){this._ranges.add(e),this._data=qv(Dv(this._data.concat(t),this._timeFunc,"asc"),this._idFunc)}hasCoverage(e){return this._ranges.hasCoverage(e)}get(e){if(!this.hasCoverage(e))return null;const t=[];for(const n of this._data){const a=this._timeFunc(n);if(a>=e.start.getTime()){if(a>e.end.getTime())break;t.push(n)}}return t}getSize(){return this._data.length}expireMatches(e){this._data=this._data.filter((t=>!e(t)))}}class Jv{constructor(){this._segments=new Map}add(e,t,n){let a=this._segments.get(e);a||(a=new Xv((e=>1e3*e.start_time),(e=>e.id)),this._segments.set(e,a)),a.add(t,n)}clear(){this._segments.clear()}hasCoverage(e,t){return!!this._segments.get(e)?.hasCoverage(t)}get(e,t){return this._segments.get(e)?.get(t)??null}getSize(e){return this._segments.get(e)?.getSize()??null}getCameraIDs(){return[...this._segments.keys()]}expireMatches(e,t){this._segments.get(e)?.expireMatches(t)}}class ey extends jo{}class ty extends jo{}var ny,ay,iy;!function(e){e.Event="event-query",e.Recording="recording-query",e.RecordingSegments="recording-segments-query",e.MediaMetadata="media-metadata"}(ny||(ny={})),function(e){e.Event="event-results",e.Recording="recording-results",e.RecordingSegments="recording-segments-results",e.MediaMetadata="media-metadata-results"}(ay||(ay={})),function(e){e.Frigate="frigate",e.Generic="generic",e.MotionEye="motioneye",e.Reolink="reolink"}(iy||(iy={}));const ry=e=>e?.camera_entity??e?.webrtc_card?.entity??null;class sy{constructor(e){this._entityRegistryManager=e}async createEngine(e,t){let n;switch(e){case iy.Generic:const{GenericCameraManagerEngine:e}=await import("./engine-generic-230c71cc.js").then((function(e){return e.e}));n=new e(t.stateWatcher,t.eventCallback);break;case iy.Frigate:const{FrigateCameraManagerEngine:a}=await import("./engine-frigate-84c26527.js");n=new a(this._entityRegistryManager,t.stateWatcher,new Jv,new Gv,t.eventCallback);break;case iy.MotionEye:const{MotionEyeCameraManagerEngine:i}=await import("./engine-motioneye-3aa4e871.js");n=new i(this._entityRegistryManager,t.stateWatcher,new Hv,t.resolvedMediaCache,new Gv,t.eventCallback);break;case iy.Reolink:const{ReolinkCameraManagerEngine:r}=await import("./engine-reolink-38a5e1ba.js");n=new r(this._entityRegistryManager,t.stateWatcher,new Hv,t.resolvedMediaCache,new Gv,t.eventCallback)}return n}async getEngineForCamera(e,t){let n=null;if("frigate"===t.engine)n=iy.Frigate;else if("motioneye"===t.engine)n=iy.MotionEye;else if("generic"===t.engine)n=iy.Generic;else if("reolink"===t.engine)n=iy.Reolink;else{const a=ry(t);if(a){const i=await this._entityRegistryManager.getEntity(e,a);if(!i){if(e.states[a])return iy.Generic;throw new ey(K_("error.no_camera_entity"),t)}switch(i?.platform){case"frigate":n=iy.Frigate;break;case"motioneye":n=iy.MotionEye;break;case"reolink":n=iy.Reolink;break;default:n=iy.Generic}}else t.frigate.camera_name?n=iy.Frigate:(t.webrtc_card?.url||t.go2rtc?.url&&t.go2rtc?.stream)&&(n=iy.Generic)}return n}}class oy{constructor(){this._cameras=new Map,this._enginesByType=new Map}addCamera(e){this._cameras.set(e.getID(),e),this._enginesByType.set(e.getEngine().getEngineType(),e.getEngine())}async setCameras(e){for(const t of e){const e=this._cameras.get(t.getID());e!==t&&(this.addCamera(t),await(e?.destroy()))}for(const t of this._cameras.values())e.includes(t)||(await t.destroy(),this._cameras.delete(t.getID()))}async reset(){await df(this._cameras.values(),(e=>e.destroy())),this._cameras.clear(),this._enginesByType.clear()}getCamera(e){return this._cameras.get(e)??null}getCameras(){return this._cameras}getCameraConfig(e){return this._cameras.get(e)?.getConfig()??null}hasCameraID(e){return this._cameras.has(e)}getCameraCount(){return this._cameras.size}getDefaultCameraID(){return this._cameras.keys().next().value??null}*getCameraConfigs(e){for(const[t,n]of this.getCameraConfigEntries(e))yield n}*getCameraConfigEntries(e){for(const t of e??this._cameras.keys()){const e=this.getCameraConfig(t);e&&(yield[t,e])}}getCameraIDs(){return new Set(this._cameras.keys())}getCameraIDsWithCapability(e){const t=new Set;for(const n of this._cameras.values())n.getCapabilities()?.matches(e)&&t.add(n.getID());return t}getCameraConfigForMedia(e){return this.getCameraConfig(e.getCameraID())}getEngineOfType(e){return this._enginesByType.get(e)??null}getEngineForCameraID(e){return this._cameras.get(e)?.getEngine()??null}getEnginesForCameraIDs(e){const t=new Map;for(const n of e){const e=this.getEngineForCameraID(n);e&&(t.has(e)||t.set(e,new Set),t.get(e)?.add(n))}return t.size?t:null}getEngineForMedia(e){return this.getEngineForCameraID(e.getCameraID())}getAllDependentCameras(e,t){const n=new Set,a=new Set,i=e=>{n.add(e);const r=this.getCamera(e),s=r?.getConfig();if(r&&s){t&&!r.getCapabilities()?.matches(t)||a.add(e);const o=new Set;s.dependencies.cameras.forEach((e=>o.add(e))),s.dependencies.all_cameras&&this.getCameraIDs().forEach((e=>o.add(e)));for(const e of o)n.has(e)||i(e)}};return i(e),a}}const cy=e=>{return Dv((n=e=>e.getID()??e,(t=e)&&t.length?Yg(t,Iv(n)):[]),(e=>e.getStartTime()??e.getID()),"asc");var t,n};class ly{static isEventQuery(e){return e.type===ny.Event}static isRecordingQuery(e){return e.type===ny.Recording}static isRecordingSegmentsQuery(e){return e.type===ny.RecordingSegments}static isMediaMetadataQuery(e){return e.type===ny.MediaMetadata}}class dy{static isEventQueryResult(e){return e.type===ay.Event}static isRecordingQueryResult(e){return e.type===ay.Recording}static isRecordingSegmentsQueryResult(e){return e.type===ay.RecordingSegments}static isMediaMetadataQueryResult(e){return e.type===ay.MediaMetadata}}class uy{constructor(e,t){this._requestLimit=new A_,this._api=e,this._engineFactory=t?.factory??new sy(this._api.getEntityRegistryManager()),this._store=t?.store??new oy}async initializeCamerasFromConfig(){const e=this._api.getConfigManager().getConfig(),t=this._api.getHASSManager().getHASS();if(!e||!t)return!1;this._requestLimit.concurrency=e.performance.features.max_simultaneous_engine_requests??1/0;const n=e.cameras.map((t=>{return n={},a=y_(e?.cameras_global),bg(n,a,t,((e,t)=>Array.isArray(t)?t:void 0));var n,a}));try{await this._initializeCameras(n)}catch(e){return this._api.getMessageManager().setErrorIfHigherPriority(e,K_("error.camera_initialization")),!1}return!0}async destroy(){await this._store.reset()}async _getEnginesForCameras(e){const t=new Map,n=new Map,a=this._api.getHASSManager().getHASS();
/* istanbul ignore if: the if path cannot be reached -- @preserve */
if(!a)return t;const i=await(async e=>await df(e,(e=>this._engineFactory.getEngineForCamera(a,e))))(e);for(const[a,r]of e.entries()){const e=i[a],s=e?n.get(e)??await this._engineFactory.createEngine(e,{eventCallback:e=>this._api.getTriggersManager().handleCameraEvent(e),stateWatcher:this._api.getHASSManager().getStateWatcher(),resolvedMediaCache:this._api.getResolvedMediaCache()}):null;if(!s||!e)throw new ey(K_("error.no_camera_engine"),y_(r));n.set(e,s),t.set(r,s)}return t}async _initializeCameras(e){const t=new Date,n=this._api.getHASSManager().getHASS();
/* istanbul ignore if: the if path cannot be reached -- @preserve */
if(!n)return;e.some((e=>(e=>e.triggers.motion||e.triggers.occupancy)(e)))&&await this._api.getEntityRegistryManager().fetchEntityList(n);const a=await this._getEnginesForCameras(e),i=await df(a.entries(),(async([e,t])=>await t.createCamera(n,e))),r=async()=>{i.forEach((e=>e.destroy()))},s=new Set;for(const e of i){const t=Y_(e.getConfig());if(!t)throw await r(),new ey(K_("error.no_camera_id"),e.getConfig());if(s.has(t))throw await r(),new ey(K_("error.duplicate_camera_id"),e.getConfig());e.setID(t),s.add(t)}await this._store.setCameras(i),G_(this._api.getConfigManager().getCardWideConfig(),"Advanced Camera Card CameraManager initialized (Cameras: ",this._store.getCameras(),`, Duration: ${((new Date).getTime()-t.getTime())/1e3}s,`,")")}isInitialized(){return this._store.getCameraCount()>0}getStore(){return this._store}generateDefaultEventQueries(e,t){return this._generateDefaultQueries(e,{type:ny.Event,...t})}generateDefaultRecordingQueries(e,t){return this._generateDefaultQueries(e,{type:ny.Recording,...t})}generateDefaultRecordingSegmentsQueries(e,t){return this._generateDefaultQueries(e,{type:ny.RecordingSegments,...t})}_generateDefaultQueries(e,t){const n=[],a=tf(e),i=this._store.getEnginesForCameraIDs(a);if(!i)return null;for(const[e,a]of i){let i=null;
/* istanbul ignore else: the else path cannot be reached -- @preserve */ly.isEventQuery(t)?i=e.generateDefaultEventQuery(this._store,a,t):ly.isRecordingQuery(t)?i=e.generateDefaultRecordingQuery(this._store,a,t):ly.isRecordingSegmentsQuery(t)&&(i=e.generateDefaultRecordingSegmentsQuery(this._store,a,t));for(const e of i??[])n.push(e)}return n.length?n:null}async getMediaMetadata(){const e=new Set,t=new Set,n=new Set,a=new Set,i={type:ny.MediaMetadata,cameraIDs:this._store.getCameraIDs()},r=await this._handleQuery(i);for(const i of r.values())i.metadata.tags&&i.metadata.tags.forEach(e.add,e),i.metadata.what&&i.metadata.what.forEach(t.add,t),i.metadata.where&&i.metadata.where.forEach(n.add,n),i.metadata.days&&i.metadata.days.forEach(a.add,a);return t.size||n.size||a.size||e.size?{...e.size&&{tags:e},...t.size&&{what:t},...n.size&&{where:n},...a.size&&{days:a}}:null}async getEvents(e,t){return await this._handleQuery(e,t)}async getRecordings(e,t){return await this._handleQuery(e,t)}async getRecordingSegments(e,t){return await this._handleQuery(e,t)}async executeMediaQueries(e,t){return this._convertQueryResultsToMedia(await this._handleQuery(e,t))}async extendMediaQueries(e,t,n,a){if(!this._api.getHASSManager().getHASS())return null;const i=e=>{let n=null;for(const a of t){const t=a.getStartTime();t&&(!n||"earliest"===e&&t<n||"latest"===e&&t>n)&&(n=t)}return n},r=this._api.getConfigManager().getCardWideConfig()?.performance?.features.media_chunk_size??50,s=[],o=[];for(const t of e){const e={...t};
/* istanbul ignore else: the else path cannot be reached -- @preserve */if("later"===n){const t=i("latest");t&&(e.start=t,delete e.end)}else if("earlier"===n){const t=i("earliest");t&&(e.end=t,delete e.start)}e.limit=r,o.push({...t,limit:(t.limit??0)+r}),s.push(e)}const c=this._convertQueryResultsToMedia(await this._handleQuery(s,a));if(!c.length)return null;const l=cy(t.concat(c));return l.length===t.length?null:{queries:o,results:l}}async getMediaDownloadPath(e){const t=this._store.getCameraConfigForMedia(e),n=this._store.getEngineForMedia(e),a=this._api.getHASSManager().getHASS();return t&&n&&a?await n.getMediaDownloadPath(a,t,e):null}getMediaCapabilities(e){const t=this._store.getEngineForMedia(e);return t?t.getMediaCapabilities(e):null}async favoriteMedia(e,t){const n=this._store.getCameraConfigForMedia(e),a=this._store.getEngineForMedia(e),i=this._api.getHASSManager().getHASS();if(!n||!a||!i)return;const r=new Date;await this._requestLimit.add((()=>a.favoriteMedia(i,n,e,t))),G_(this._api.getConfigManager().getCardWideConfig(),"Advanced Camera Card CameraManager favorite request (",`Duration: ${((new Date).getTime()-r.getTime())/1e3}s,`,"Media:",e.getID(),", Favorite:",t,")")}areMediaQueriesResultsFresh(e,t){const n=new Date;for(const a of e){const e=this._store.getEnginesForCameraIDs(a.cameraIDs);for(const[i,r]of e??[]){const e=i.getQueryResultMaxAge({...a,cameraIDs:r});if(null!==e&&Jd(t,{seconds:e})<n)return!1}}return!0}async getMediaSeekTime(e,t){const n=e.getStartTime(),a=e.getEndTime(),i=this._store.getEngineForMedia(e),r=this._api.getHASSManager().getHASS();return!r||!i||!n||!a||t<n||t>a?null:await this._requestLimit.add((()=>i.getMediaSeekTime(r,this._store,e,t)))??null}async _handleQuery(e,t){const n=ef(e),a=new Map,i=new Date,r=this._api.getHASSManager().getHASS();if(!r)return a;const s=async(e,n)=>{let i=null;
/* istanbul ignore else: the else path cannot be reached -- @preserve */ly.isEventQuery(n)?i=await e.getEvents(r,this._store,n,t):ly.isRecordingQuery(n)?i=await e.getRecordings(r,this._store,n,t):ly.isRecordingSegmentsQuery(n)?i=await e.getRecordingSegments(r,this._store,n,t):ly.isMediaMetadataQuery(n)&&(i=await e.getMediaMetadata(r,this._store,n,t)),i?.forEach(((e,t)=>a.set(t,e)))},o=async e=>{const t=this._store.getEnginesForCameraIDs(e.cameraIDs);t&&await Promise.all(Array.from(t.keys()).map((n=>this._requestLimit.add((()=>s(n,{...e,cameraIDs:t.get(n)}))))))};await Promise.all(n.map((e=>o(e))));const c=(l=Array.from(a.values()).map((e=>Number(e.cached??0))))&&l.length?function(e,t){for(var n,a=-1,i=e.length;++a<i;){var r=t(e[a]);void 0!==r&&(n=void 0===n?r:n+r)}return n}(l,cg):0;var l;return G_(this._api.getConfigManager().getCardWideConfig(),"Advanced Camera Card CameraManager request [Input queries:",n.length,", Cached output queries:",c,", Total output queries:",a.size,", Duration:",((new Date).getTime()-i.getTime())/1e3+"s,",", Queries:",n,", Results:",a,", Options:",t??{},"]"),a}_convertQueryResultsToMedia(e){const t=[],n=this._api.getHASSManager().getHASS();if(!n)return t;for(const[a,i]of e.entries()){const e=this._store.getEngineOfType(i.engine);if(e){let r=null;
/* istanbul ignore else: the else path cannot be reached -- @preserve */ly.isEventQuery(a)&&dy.isEventQueryResult(i)?r=e.generateMediaFromEvents(n,this._store,a,i):ly.isRecordingQuery(a)&&dy.isRecordingQueryResult(i)&&(r=e.generateMediaFromRecordings(n,this._store,a,i)),r&&t.push(...r)}}return cy(t)}getCameraEndpoints(e,t){const n=this._store.getCameraConfig(e),a=this._store.getEngineForCameraID(e);return n&&a?a.getCameraEndpoints(n,t):null}getCameraMetadata(e){const t=this._store.getCameraConfig(e),n=this._store.getEngineForCameraID(e),a=this._api.getHASSManager().getHASS();return t&&n&&a?n.getCameraMetadata(a,t):null}getCameraCapabilities(e){return this._store.getCamera(e)?.getCapabilities()??null}getAggregateCameraCapabilities(e){const t=[...e??this._store.getCameraIDs()].map((e=>this._store.getCamera(e))).filter(gf);return new nv({live:t.some((e=>e.getCapabilities()?.has("live"))),clips:t.some((e=>e.getCapabilities()?.has("clips"))),recordings:t.some((e=>e.getCapabilities()?.has("recordings"))),snapshots:t.some((e=>e.getCapabilities()?.has("snapshots"))),"favorite-events":t.some((e=>e.getCapabilities()?.has("favorite-events"))),"favorite-recordings":t.some((e=>e.getCapabilities()?.has("favorite-recordings"))),seek:t.some((e=>e.getCapabilities()?.has("seek"))),menu:t.some((e=>e.getCapabilities()?.has("menu")))})}async executePTZAction(e,t,n){const a=this._store.getCameraConfig(e);if(!a)return;const i=X_(a,t,n);if(i)return await this._api.getActionsManager().executeActions(i);const r=this._api.getHASSManager().getHASS(),s=this._store.getEngineForCameraID(e);return s&&r?await this._requestLimit.add((()=>s.executePTZAction(r,a,t,n))):void 0}}class hy{constructor(e){this._cache=new Map,this._keyCallback=e}has(e){return this._cache.has(e)}getMatches(e){return[...this._cache.values()].filter(e)}get(e){return this._cache.get(e)??null}add(e){const t=e=>this._cache.set(this._keyCallback(e),e);Array.isArray(e)?e.forEach(t):t(e)}}const my=ya.object({id:ya.string(),model:ya.string().nullable(),config_entries:ya.string().array(),manufacturer:ya.string().nullable()}).array();class py{constructor(e){this._fetchedDeviceList=!1,this._cache=e}async getDevice(e,t){return this._cache.has(t)?this._cache.get(t):(await this._fetchDeviceList(e),this._cache.get(t)??null)}async getMatchingDevices(e,t){return await this._fetchDeviceList(e),this._cache.getMatches(t)}async _fetchDeviceList(e){if(this._fetchedDeviceList)return;let t=null;try{t=await Pv(e,my,{type:"config/device_registry/list"})}catch(e){return void af(e)}this._cache.add(t),this._fetchedDeviceList=!0}}const gy=ya.object({config_entry_id:ya.string().nullable(),device_id:ya.string().nullable(),disabled_by:ya.string().nullable(),entity_id:ya.string(),hidden_by:ya.string().nullable(),platform:ya.string(),translation_key:ya.string().nullable(),unique_id:ya.string().or(ya.number()).optional()}),fy=gy.array();class _y{constructor(e){this._fetchedEntityList=!1,this._cache=e}async getEntity(e,t){const n=this._cache.get(t);if(n)return n;let a=null;try{a=await Pv(e,gy,{type:"config/entity_registry/get",entity_id:t})}catch(e){return af(e),null}return this._cache.add(a),a}async getMatchingEntities(e,t){return await this.fetchEntityList(e),this._cache.getMatches(t)}async getEntities(e,t){const n=new Map;return await Promise.all(t.map((async t=>{const a=await this.getEntity(e,t);a&&n.set(t,a)}))),n}async fetchEntityList(e){if(this._fetchedEntityList)return;let t=null;try{t=await Pv(e,fy,{type:"config/entity_registry/list"})}catch(e){return void af(e)}this._cache.add(t),this._fetchedEntityList=!0}}class vy extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if("number"==typeof e.maxAge&&0===e.maxAge)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if("function"==typeof this.onEviction)for(const[t,n]of e)this.onEviction(t,n.value)}_deleteIfExpired(e,t){return"number"==typeof t.expiry&&t.expiry<=Date.now()&&("function"==typeof this.onEviction&&this.onEviction(e,t.value),this.delete(e))}_getOrDeleteIfExpired(e,t){if(!1===this._deleteIfExpired(e,t))return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){const n=t.get(e);return this._getItemValue(e,n)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(const e of this.oldCache){const[t,n]=e;if(!this.cache.has(t)){!1===this._deleteIfExpired(t,n)&&(yield e)}}for(const e of this.cache){const[t,n]=e;!1===this._deleteIfExpired(t,n)&&(yield e)}}get(e){if(this.cache.has(e)){const t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){const t=this.oldCache.get(e);if(!1===this._deleteIfExpired(e,t))return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:n=this.maxAge}={}){const a="number"==typeof n&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;return this.cache.has(e)?this.cache.set(e,{value:t,expiry:a}):this._set(e,{value:t,expiry:a}),this}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):!!this.oldCache.has(e)&&!this._deleteIfExpired(e,this.oldCache.get(e))}peek(e){return this.cache.has(e)?this._peek(e,this.cache):this.oldCache.has(e)?this._peek(e,this.oldCache):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const t=[...this._entriesAscending()],n=t.length-e;n<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(n>0&&this._emitEvictions(t.slice(0,n)),this.oldCache=new Map(t.slice(n)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[t,n]=e;!1===this._deleteIfExpired(t,n)&&(yield[t,n.value])}for(const e of this.oldCache){const[t,n]=e;if(!this.cache.has(t)){!1===this._deleteIfExpired(t,n)&&(yield[t,n.value])}}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){const n=e[t],[a,i]=n;!1===this._deleteIfExpired(a,i)&&(yield[a,i.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){const n=e[t],[a,i]=n;if(!this.cache.has(a)){!1===this._deleteIfExpired(a,i)&&(yield[a,i.value])}}}*entriesAscending(){for(const[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(const[n,a]of this.entriesAscending())e.call(t,a,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}class yy{constructor(){this._cache=new vy({maxSize:1e3})}has(e){return this._cache.has(e)}get(e){return this._cache.get(e)}set(e,t){this._cache.set(e,t)}}const by=async(e,t,n)=>{const a=n?n.get(t):void 0;if(a)return a;const i={type:"media_source/resolve_media",media_content_id:t};let r=null;try{r=await Pv(e,Do,i)}catch(e){af(e)}return n&&r&&n.set(t,r),r};class wy{constructor(e,t,n){this._context=e,this._action=t,this._config=n}async execute(e){}async stop(){}}class xy extends wy{}class Cy extends xy{async execute(e){const t=this._action.camera??(this._action.triggered?e.getTriggersManager().getMostRecentlyTriggeredCameraID():null),n=e.getViewManager().getView(),a=e.getConfigManager().getConfig();if(t&&n){const i=a?.view.camera_select??"current",r="current"===i?n.view:i;await e.getViewManager().setViewByParametersWithNewQuery({params:{view:r,camera:t},failSafe:!0})}}}class My extends xy{async execute(e){e.getCameraURLManager().openURL()}}class Sy extends xy{async execute(e){await e.getViewManager().setViewDefaultWithNewQuery()}}class ky extends xy{async execute(e){await e.getViewManager().setViewByParametersWithNewQuery({params:{displayMode:this._action.display_mode}})}}class $y extends xy{async execute(e){await e.getDownloadManager().downloadViewerMedia()}}class Ey extends xy{async execute(e){e.getExpandManager().toggleExpanded()}}class Ay extends xy{async execute(e){e.getFullscreenManager().toggleFullscreen()}}class Iy extends wy{async execute(e){const t=e.getHASSManager().getHASS();t&&nt(e.getCardElementManager().getElement(),t,this._config??{},this._action)}}class Ty extends xy{async execute(e){console[this._action.level](this._action.message)}}const zy=(e,t)=>e.context?.live?.overrides?.get(t??e.camera)??t??e.camera,jy=e=>zy(e)!==e.camera,Oy=(e,t)=>{const n=e.context?.live?.overrides??new Map;n.set(e.camera,t),e.mergeInContext({live:{overrides:n}})};class Dy extends xy{async execute(e){const t=this._action.media_player,n=e.getMediaPlayerManager(),a=e.getViewManager().getView(),i=a?.queryResults?.getSelectedResult()??null;"stop"===this._action.media_player_action?await n.stop(t):a?.is("live")?await n.playLive(t,zy(a)):a?.isViewerView()&&i&&await n.playMedia(t,i)}}class Py extends xy{async execute(e){e.getCardElementManager().toggleMenu()}}class Ry extends xy{async execute(e){await e.getMicrophoneManager().connect()}}class Ly extends xy{async execute(e){e.getMicrophoneManager().disconnect()}}class Ny extends xy{async execute(e){e.getMicrophoneManager().mute()}}class Fy extends xy{async execute(e){await e.getMicrophoneManager().unmute()}}class Vy extends xy{async execute(e){await(e.getMediaLoadedInfoManager().get()?.player?.mute())}}class Hy extends xy{async execute(e){await(e.getMediaLoadedInfoManager().get()?.player?.pause())}}class By extends xy{async execute(e){await(e.getMediaLoadedInfoManager().get()?.player?.play())}}const qy=(e,t)=>{if(e.isViewerView()){const n=e.queryResults?.getSelectedResult()?.getID()??null;return"ptz"!==t?.type&&n?{targetID:n,type:"digital"}:null}if(e.is("live")){const n=zy(e);let a="digital";return"digital"!==t?.type&&t?.cameraManager&&(Uy(t.cameraManager,n)&&(a="ptz"),"ptz"!==a&&"ptz"===t?.type)?null:{targetID:n,type:a}}return e.is("image")?{targetID:zo,type:"digital"}:null},Uy=(e,t)=>!!e.getStore().getCamera(t)?.getCapabilities()?.hasPTZCapability();var Zy=yg((function(e,t,n){og(e,t,n)}));const Wy=(e,t)=>{t?.[e]?.inProgressAction?.stop()},Qy=(e,t,n,a)=>{Zy(t,{[n]:{[e]:{inProgressAction:a}}})};class Ky extends xy{constructor(){super(...arguments),this._timer=new If}async stop(){this._timer.stop()}async execute(e){const t=e.getViewManager().getView();if(!t)return;const n=this._action.camera??qy(t,{type:"ptz",cameraManager:e.getCameraManager()})?.targetID??null,a=n?e.getCameraManager().getCameraCapabilities(n)?.getPTZCapabilities():null,i=n?e.getCameraManager().getStore().getCameraConfig(n)?.ptz:null;if(!n||!a||!i)return;if(!this._action.ptz_action)return void(a.presets&&a.presets.length>=1&&await e.getCameraManager().executePTZAction(n,"preset",{phase:this._action.ptz_phase,preset:a.presets[0]}));const r=(e=>{switch(e){case"left":case"right":case"up":case"down":return e;case"zoom_in":return"zoomIn";case"zoom_out":return"zoomOut"}return null})(this._action.ptz_action);if(r&&a[r]?.includes(this._action.ptz_phase?"continuous":"relative")||"preset"===this._action.ptz_action)return await e.getCameraManager().executePTZAction(n,this._action.ptz_action,{phase:this._action.ptz_phase,preset:this._action.ptz_preset});if("start"===this._action.ptz_phase){Wy(n,this._context.ptz),Qy(n,this._context,"ptz",this);const t=async()=>{this._action.ptz_action&&await e.getCameraManager().executePTZAction(n,this._action.ptz_action,{preset:this._action.ptz_preset}),this._timer.start(i.r2c_delay_between_calls_seconds,t)};await t()}else"stop"===this._action.ptz_phase?Wy(n,this._context.ptz):(await e.getCameraManager().executePTZAction(n,this._action.ptz_action,{preset:this._action.ptz_preset,phase:"start"}),this._timer.start(i.c2r_delay_between_calls_seconds,(async()=>{this._action.ptz_action&&await e.getCameraManager().executePTZAction(n,this._action.ptz_action,{preset:this._action.ptz_preset,phase:"stop"})})))}}class Yy extends xy{async execute(e){e.getViewManager().setViewWithMergedContext({ptzControls:{enabled:this._action.enabled}})}}function Gy(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=Tg(n))==n?n:0),void 0!==t&&(t=(t=Tg(t))==t?t:0),function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}(Tg(e),t,n)}const Xy=50,Jy=50,eb=1,tb=4,nb=e=>void 0===e?.pan?.x&&void 0===e?.pan?.y&&void 0===e?.zoom;class ab{constructor(e){this._context=e}modify(e){e.mergeInContext(this._context)}}const ib=(e,t)=>({zoom:{[e]:{observed:t?.observed??void 0,requested:t?.requested??null}}}),rb=(e,t,n)=>{t&&n&&t.setViewByParameters({modifiers:[new ab(ib(n,{observed:e.detail}))]})};class sb extends xy{constructor(){super(...arguments),this._timer=new If}async _stepChange(e,t){e.getViewManager().setViewWithMergedContext(ib(t,{requested:this._convertActionToZoomSettings(e.getViewManager().getView()?.context?.zoom?.[t]?.observed)}))}async stop(){this._timer.stop()}async execute(e){const t=e.getViewManager().getView();if(!t)return;const n=this._action.target_id??qy(t,{type:"digital",cameraManager:e.getCameraManager()})?.targetID;return n?this._action.absolute||!this._action.ptz_phase?await this._stepChange(e,n):
/* istanbul ignore else: the else path cannot be reached -- @preserve */
void("start"===this._action.ptz_phase?(Wy(n,this._context.ptzDigital),Qy(n,this._context,"ptzDigital",this),await this._stepChange(e,n),this._timer.startRepeated(.1,(()=>this._stepChange(e,n)))):"stop"===this._action.ptz_phase&&(Wy(n,this._context.ptzDigital),delete this._context.ptzDigital?.[n])):void 0}_convertActionToZoomSettings(e){if(!this._action.absolute&&!this._action.ptz_action)return{};if(this._action.absolute)return this._action.absolute;const t=e?.zoom??1,n=e?.pan?.x??50,a=e?.pan?.y??50,i="zoom_in"===this._action.ptz_action?.1:"zoom_out"===this._action.ptz_action?-.1:0,r="left"===this._action.ptz_action?-5:"right"===this._action.ptz_action?5:0,s="up"===this._action.ptz_action?-5:"down"===this._action.ptz_action?5:0;return{zoom:Gy(t+i,1,10),pan:{x:Gy(n+r,0,100),y:Gy(a+s,0,100)}}}}class ob extends xy{async execute(e){const t=e.getViewManager().getView();let n=null,a=null;if(this._action.target_id)n=this._action.target_id,a=Uy(e.getCameraManager(),n)?"ptz":"digital";else if(t){const i=qy(t,{cameraManager:e.getCameraManager()});n=i?.targetID??null,a=i?.type??null}n&&null!==a&&("ptz"===a?this._toPTZAction(n):this._toPTZDigitalAction(n)).execute(e)}_toPTZAction(e){return new Ky(this._context,(t={cardID:this._action.card_id,cameraID:e,ptzAction:this._action.ptz_action,ptzPhase:this._action.ptz_phase,ptzPreset:this._action.ptz_preset},{action:"fire-dom-event",advanced_camera_card_action:"ptz",...t?.cardID&&{card_id:t.cardID},...t?.ptzAction&&{ptz_action:t.ptzAction},...t?.ptzPhase&&{ptz_phase:t.ptzPhase},...t?.ptzPreset&&{ptz_preset:t.ptzPreset},...t?.cameraID&&{camera:t.cameraID}}),this._config);var t}_toPTZDigitalAction(e){return new sb(this._context,(t={cardID:this._action.card_id,ptzPhase:this._action.ptz_phase,ptzAction:this._action.ptz_action,targetID:e},{action:"fire-dom-event",advanced_camera_card_action:"ptz_digital",...t?.cardID&&{card_id:t.cardID},...t?.ptzAction&&{ptz_action:t.ptzAction},...t?.ptzPhase&&{ptz_phase:t.ptzPhase},...t?.absolute&&{absolute:t.absolute},...t?.targetID&&{target_id:t.targetID}}),this._config);var t}}class cb extends xy{async execute(e){await e.getDownloadManager().downloadScreenshot()}}class lb extends xy{async execute(e){var t;await hf((t=this._action.duration,3600*(t.h??0)+60*(t.m??0)+(t.s??0)+(t.ms??0)/1e3))}}class db extends xy{async execute(e){switch(this._action.status_bar_action){case"reset":e.getStatusBarItemManager().removeAllDynamicStatusBarItems();break;case"add":this._action.items?.forEach((t=>e.getStatusBarItemManager().addDynamicStatusBarItem(t)));break;case"remove":this._action.items?.forEach((t=>e.getStatusBarItemManager().removeDynamicStatusBarItem(t)))}}}class ub{modify(e){(e=>{const t=e.context?.live?.overrides;t&&t.has(e.camera)&&e.context?.live?.overrides?.delete(e.camera)})(e)}}class hb extends xy{async execute(e){e.getViewManager().setViewByParameters({modifiers:[new ub]})}}class mb{constructor(e){this._api=e}modify(e){const t=[...this._api.getCameraManager().getStore().getAllDependentCameras(e.camera,"substream")];if(t.length<=1)return;const n=zy(e),a=t.indexOf(n),i=a<0?0:(a+1)%t.length;Oy(e,t[i])}}class pb extends xy{async execute(e){e.getViewManager().setViewByParameters({modifiers:[new mb(e)]})}}class gb{constructor(e){this._substreamID=e}modify(e){Oy(e,this._substreamID)}}class fb extends xy{async execute(e){e.getViewManager().setViewByParameters({modifiers:[new gb(this._action.camera)]})}}class _b extends xy{async execute(e){await(e.getMediaLoadedInfoManager().get()?.player?.unmute())}}class vb extends xy{async execute(e){await e.getViewManager().setViewByParametersWithNewQuery({params:{view:this._action.advanced_camera_card_action}})}}class yb{createAction(e,t,n){const a=xf(t);if("fire-dom-event"!==t.action||!a)return new Iy(e,t,n?.config);if(a.card_id&&a.card_id!==n?.cardID)return null;switch(a.advanced_camera_card_action){case"default":return new Sy(e,a,n?.config);case"clip":case"clips":case"image":case"live":case"recording":case"recordings":case"snapshot":case"snapshots":case"timeline":case"diagnostics":return new vb(e,a,n?.config);case"sleep":return new lb(e,a,n?.config);case"download":return new $y(e,a,n?.config);case"camera_ui":return new My(e,a,n?.config);case"expand":return new Ey(e,a,n?.config);case"fullscreen":return new Ay(e,a,n?.config);case"menu_toggle":return new Py(e,a,n?.config);case"camera_select":return new Cy(e,a,n?.config);case"live_substream_select":return new fb(e,a,n?.config);case"live_substream_off":return new hb(e,a,n?.config);case"live_substream_on":return new pb(e,a,n?.config);case"media_player":return new Dy(e,a,n?.config);case"microphone_connect":return new Ry(e,a,n?.config);case"microphone_disconnect":return new Ly(e,a,n?.config);case"microphone_mute":return new Ny(e,a,n?.config);case"microphone_unmute":return new Fy(e,a,n?.config);case"mute":return new Vy(e,a,n?.config);case"unmute":return new _b(e,a,n?.config);case"play":return new By(e,a,n?.config);case"pause":return new Hy(e,a,n?.config);case"screenshot":return new cb(e,a,n?.config);case"display_mode_select":return new ky(e,a,n?.config);case"ptz":return new Ky(e,a,n?.config);case"ptz_digital":return new sb(e,a,n?.config);case"ptz_multi":return new ob(e,a,n?.config);case"ptz_controls":return new Yy(e,a,n?.config);case"log":return new Ty(e,a,n?.config);case"status_bar":return new db(e,a,n?.config)}
/* istanbul ignore next: this path cannot be reached -- @preserve */
/* istanbul ignore next: this path cannot be reached -- @preserve */
return console.warn(`Advanced Camera Card received unknown card action: ${a.advanced_camera_card_action}`),null}}class bb{constructor(e,t,n){this._actions=[],this._factory=new yb,this._stopped=!1,this._context=e;for(const a of ef(t)){const t=this._factory.createAction(e,a,n);t&&this._actions.push(t)}}async execute(e){for(const t of this._actions){if(this._stopped)break;await t.execute(e)}}async stop(){this._stopped=!0}}const wb=ya.object({action:ya.enum(["tap","double_tap","hold","start_tap","end_tap"])}),xb=ya.object({detail:wb});class Cb{constructor(e){this._actionsInFlight=[],this._actionContext={},this.handleInteractionEvent=e=>{const t=xb.safeParse(e);if(!t.success)return;const n=t.data.detail.action,a=this.getMergedActions(),i=$f(n,a);a&&n&&i&&this.executeActions(i,a)},this.handleCustomActionEvent=e=>{"detail"in e&&this.executeActions(e.detail)},this.handleActionExecutionRequestEvent=async e=>{await this.executeActions(e.detail.action,e.detail.config)},this._api=e}getMergedActions(){const e=this._api.getViewManager().getView();if(this._api.getMessageManager().hasMessage())return{};const t=this._api.getConfigManager().getConfig();let n;if(e?.is("live"))n=t?.live.actions;else if(e?.isGalleryView())n=t?.media_gallery?.actions;else if(e?.isViewerView())n=t?.media_viewer.actions;else{if(!e?.is("image"))return{};n=t?.image?.actions}return{...t?.view.actions,...n}}uninitialize(){this._actionsInFlight.forEach((e=>e.stop()))}async executeActions(e,t){const n=new bb(this._actionContext,e,{config:t,cardID:this._api.getConfigManager().getConfig()?.card_id});this._actionsInFlight.push(n),await n.execute(this._api),this._actionsInFlight=this._actionsInFlight.filter((e=>e!==n))}}class Mb{constructor(e){this._automations=[],this._priorEvaluations=new Map,this._nestedAutomationExecutions=0,this._api=e}deleteAutomations(e){this._automations=this._automations.filter((t=>t.tag!==e))}addAutomations(e){this._automations.push(...e)}execute(){if(!this._api.getHASSManager().hasHASS()||!this._api.getInitializationManager().isInitializedMandatory()||this._api.getMessageManager().hasErrorMessage())return;const e=[];for(const t of this._automations){const n=this._api.getConditionsManager().evaluateConditions(t.conditions),a=n?t.actions:t.actions_not,i=this._priorEvaluations.get(t);this._priorEvaluations.set(t,n),n!==i&&a&&e.push(...a)}if(!e.length)return;(async e=>{++this._nestedAutomationExecutions,this._nestedAutomationExecutions>10?this._api.getMessageManager().setMessageIfHigherPriority({type:"error",message:K_("error.too_many_automations")}):(await this._api.getActionsManager().executeActions(e),--this._nestedAutomationExecutions)})(e)}}class Sb{constructor(e){this._api=e}openURL(){const e=this.getCameraURL();e&&window.open(e)}hasCameraURL(){return!!this.getCameraURL()}getCameraURL(){const e=this._api.getViewManager().getView(),t=e?.queryResults?.getSelectedResult()??null,n=e?.camera?this._api.getCameraManager().getCameraEndpoints(e.camera,{view:e.view,...t&&{media:t}})??null:null;return n?.ui?.endpoint??null}}const kb=()=>!!navigator.userAgent.match(/CrKey\//);async function $b(e,t,n){const a={type:"auth/sign_path",path:t,expires:n},i=await Pv(e,Po,a);return i?e.hassUrl(i.path):null}function Eb(e,t,n,a){if(!e||!n||!n.length)return[];const i=[];for(const r of n){const n=t?.states[r],s=e.states[r];if((a?.stateOnly&&n?.state!==s?.state||!a?.stateOnly&&n!==s)&&(i.push({entityID:r,oldState:n,newState:s}),a?.firstOnly))break}return i}function Ab(e,t,n,a){return!!Eb(e,t,n,{...a,firstOnly:!0}).length}function Ib(e,t){return t?e?.states[t]?.attributes?.friendly_name??null:null}const Tb=async()=>{if(["ha-button-menu","ha-button","ha-camera-stream","ha-card","ha-circular-progress","ha-combo-box","ha-hls-player","ha-icon-button","ha-icon","ha-menu-button","ha-selector","ha-state-icon","ha-web-rtc-player","mwc-button","mwc-list-item","state-badge"].every((e=>customElements.get(e))))return!0;const e=await window.loadCardHelpers();await e.createCardElement({type:"picture-glance",entities:[],camera_image:"dummy-to-load-editor-components"}),await customElements.whenDefined("hui-picture-glance-card");const t=customElements.get("hui-picture-glance-card");if(!t)return!1;const n=new t;return await n.constructor.getConfigElement(),!0},zb=e=>!!e&&["on","open"].includes(e),jb=(e,t)=>{if(!e)return[];const n=Object.keys(e.states).filter((e=>!t||e.substr(0,e.indexOf("."))===t));return n.sort(),n};function Ob(e){return!!e?.startsWith("/")}function Db(e,t){return Ob(t)?e.hassUrl(t):t??null}const Pb=(e,t)=>!!((e.attributes.supported_features??0)&t);class Rb{constructor(){this._initialized=new Set}async initializeMultipleIfNecessary(e){return(await df(Object.entries(e),(async([e,t])=>await this.initializeIfNecessary(e,t)))).every(Boolean)}async initializeIfNecessary(e,t){return!!this._initialized.has(e)||(t?!!await t()&&(this._initialized.add(e),!0):(this._initialized.add(e),!0))}uninitialize(e){this._initialized.delete(e)}isInitialized(e){return this._initialized.has(e)}isInitializedMultiple(e){return e.every((e=>this.isInitialized(e)))}}var Lb;!function(e){e.LANGUAGES="languages",e.SIDE_LOAD_ELEMENTS="side-load-elements",e.CAMERAS="cameras",e.MICROPHONE_CONNECT="microphone-connect",e.VIEW="view"}(Lb||(Lb={}));class Nb{constructor(e,t){this._initializationQueue=new A_({concurrency:1}),this._everInitialized=!1,this._api=e,this._initializer=t??new Rb}wasEverInitialized(){return this._everInitialized}isInitializedMandatory(){return!!this._api.getConfigManager().getConfig()&&this._initializer.isInitializedMultiple([Lb.LANGUAGES,Lb.SIDE_LOAD_ELEMENTS,Lb.CAMERAS,...this._api.getMicrophoneManager().shouldConnectOnInitialization()?[Lb.MICROPHONE_CONNECT]:[],Lb.VIEW])}async initializeMandatory(){await this._initializationQueue.add((()=>this._initializeMandatory()))}async _initializeMandatory(){const e=this._api.getHASSManager().getHASS();if(!e||this.isInitializedMandatory())return;if(!await this._initializer.initializeMultipleIfNecessary({[Lb.LANGUAGES]:async()=>await(async e=>{const t=Q_(e);return"ca"===t?Z_[t]=await import("./lang-ca-fa11ff49.js"):"it"===t?Z_[t]=await import("./lang-it-32dff42e.js"):"pt"===t?Z_[t]=await import("./lang-pt-PT-ee20d920.js"):"pt_BR"===t?Z_[t]=await import("./lang-pt-BR-4b00e70c.js"):"fr"===t&&(Z_[t]=await import("./lang-fr-f4373d96.js")),t&&(W_=t),!0})(e),[Lb.SIDE_LOAD_ELEMENTS]:async()=>await Tb()}))return;this._api.getConfigManager().getConfig()&&await this._initializer.initializeMultipleIfNecessary({[Lb.CAMERAS]:async()=>(this._api.createCameraManager(),await this._api.getCameraManager().initializeCamerasFromConfig()),...this._api.getMicrophoneManager().shouldConnectOnInitialization()&&{[Lb.MICROPHONE_CONNECT]:async()=>(this._api.createMicrophoneManager(),await this._api.getMicrophoneManager().connect())}})&&!this._api.getMessageManager().hasMessage()&&await this._initializer.initializeIfNecessary(Lb.VIEW,this._api.getViewManager().initialize)&&(this._everInitialized=!0,this._api.getCardElementManager().update())}uninitialize(e){this._initializer.uninitialize(e)}}class Fb{constructor(e,t,n,a){this.update=()=>{this._element.requestUpdate()},this._api=e,this._element=t,this._scrollCallback=n,this._menuToggleCallback=a}getElement(){return this._element}scrollReset(){this._scrollCallback()}toggleMenu(){this._menuToggleCallback()}hasUpdated(){return this._element.hasUpdated}elementConnected(){this._api.getInteractionManager().initialize(),this._api.getFullscreenManager().initialize(),this._api.getExpandManager().initialize(),this._api.getMediaLoadedInfoManager().initialize(),this._api.getMicrophoneManager().initialize(),this._api.getKeyboardStateManager().initialize(),this._api.getDefaultManager().initialize(),this._api.getMediaPlayerManager().initialize(),this._api.getHASSManager().getStateWatcher()?.subscribe(this.update,[...this._api.getConfigManager().getConfig()?.view.render_entities??[],...this._api.getMediaPlayerManager().getMediaPlayers()??[]]),pf(this._element,(e=>{const t=e.getRootNode();return!!(t&&t instanceof ShadowRoot&&"HUI-PANEL-VIEW"===t.host.tagName)})(this._element),"panel"),pf(this._element,kb(),"casted"),this._api.getFullscreenManager().connect(),this._element.addEventListener("mousemove",this._api.getInteractionManager().reportInteraction),this._element.addEventListener("wheel",this._api.getInteractionManager().reportInteraction),this._element.addEventListener("ll-custom",this._api.getActionsManager().handleCustomActionEvent),this._element.addEventListener("action",this._api.getActionsManager().handleInteractionEvent),this._element.addEventListener("action",this._api.getInteractionManager().reportInteraction),this._element.addEventListener("advanced-camera-card:action:execution-request",this._api.getActionsManager().handleActionExecutionRequestEvent),window.addEventListener("location-changed",this._api.getQueryStringManager().requestExecution),window.addEventListener("popstate",this._api.getQueryStringManager().requestExecution),this._api.getConditionsManager()?.setState({userAgent:navigator.userAgent}),this._api.getQueryStringManager().requestExecution(),this._element.requestUpdate()}elementDisconnected(){pf(this._element,!1,"panel"),pf(this._element,!1,"tabindex"),pf(this._element,!1,"casted"),this._api.getMediaLoadedInfoManager().clear(),this._api.getFullscreenManager().disconnect(),this._api.getKeyboardStateManager().uninitialize(),this._api.getActionsManager().uninitialize(),this._api.getDefaultManager().uninitialize(),this._api.getHASSManager().getStateWatcher()?.unsubscribe(this.update),this._api.getInitializationManager().uninitialize(Lb.CAMERAS),this._api.getCameraManager().destroy(),this._element.removeEventListener("mousemove",this._api.getInteractionManager().reportInteraction),this._element.removeEventListener("wheel",this._api.getInteractionManager().reportInteraction),this._element.removeEventListener("ll-custom",this._api.getActionsManager().handleCustomActionEvent),this._element.removeEventListener("action",this._api.getActionsManager().handleInteractionEvent),this._element.removeEventListener("action",this._api.getInteractionManager().reportInteraction),this._element.removeEventListener("advanced-camera-card:action:execution-request",this._api.getActionsManager().handleActionExecutionRequestEvent),window.removeEventListener("location-changed",this._api.getQueryStringManager().requestExecution),window.removeEventListener("popstate",this._api.getQueryStringManager().requestExecution)}}function Vb(e,t,n){return null==e?e:function(e,t,n,a){if(!bh(e))return e;for(var i=-1,r=(t=gv(t,e)).length,s=r-1,o=e;null!=o&&++i<r;){var c=_v(t[i]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(i!=s){var d=o[c];void 0===(l=a?a(d,c,o):void 0)&&(l=bh(d)?d:Pm(t[i+1])?[]:{})}tg(o,c,l),o=o[c]}return e}(e,t,n)}function Hb(e,t){return null==(e=function(e,t){return t.length<2?e:vv(e,av(t,0,-1))}(e,t=gv(t,e)))||delete e[_v((n=t,a=null==n?0:n.length,a?n[a-1]:void 0))];var n,a}const Bb=(e,t,n)=>{Vb(e,t,n)},qb=(e,t,n)=>Mv(e,t,n),Ub=(e,t)=>{!function(e,t){null==e||Hb(e,t)}(e,t)},Zb=e=>y_(e),Wb=(e,t)=>e.replace("#",`[${t.toString()}]`),Qb=function(e){let t=!1;for(let n=0;n<sw.length;n++)t=sw[n](e)||t;return t},Kb=function(e){return Qb(Zb(e))},Yb=function(e,t,n){return function(a){return((e,t,n,a)=>{const i=qb(e,t);if(void 0===i)return!1;const r=a?.transform?a.transform(i):i;return!(t===n&&Bv(i,r)||(null===r?a?.keepOriginal||(Ub(e,t),0):void 0===r||(a?.keepOriginal||Ub(e,t),Bb(e,n,r),0)))})(a,e,t,n)}},Gb=function(e,t,n){return function(a){let i=Yb(e,t,n)(a);return i=ew(wo,Yb(e,t,n),(e=>e.merge&&"object"==typeof e.merge?e.merge:void 0))(a)||i,i=ew(wo,Yb(e,t,n),(e=>e.set&&"object"==typeof e.set?e.set:void 0))(a)||i,i}},Xb=function(e,t){return Gb(e,e,{transform:t})},Jb=function(e){return Gb(e,e,{transform:e=>null})},ew=function(e,t,n){return function(a){let i=!1;const r=qb(a,e);return Array.isArray(r)&&r.forEach((e=>{const a=n?n(e):e;a&&"object"==typeof a&&(i=t(a)||i)})),i}},tw=(e,t)=>{const n=a=>{let i=!1;if(a&&"object"==typeof a){const r=t?t(a):a;r&&(i=e(r)||i),Array.isArray(a)?a.forEach((e=>{i=n(e)||i})):Object.keys(a).forEach((e=>{i=n(a[e])||i}))}return i};return n},nw=e=>{if("object"!=typeof e||!e||"object"!=typeof e.conditions||!e.conditions)return!1;const t=e.conditions,n=[];if(void 0!==t.view&&n.push({condition:"view",views:t.view}),void 0!==t.fullscreen&&n.push({condition:"fullscreen",fullscreen:t.fullscreen}),void 0!==t.expand&&n.push({condition:"expand",expand:t.expand}),void 0!==t.camera&&n.push({condition:"camera",cameras:t.camera}),void 0!==t.media_loaded&&n.push({condition:"media_loaded",media_loaded:t.media_loaded}),void 0!==t.state&&Array.isArray(t.state))for(const e of t.state)"object"!=typeof e||!e||void 0===e.state&&void 0===e.state_not&&void 0===e.entity||n.push({condition:"state",...e.state&&{state:e.state},...e.state_not&&{state_not:e.state_not},...e.entity&&{entity:e.entity}});return void 0!==t.media_query&&n.push({condition:"screen",media_query:t.media_query}),!!n.length&&(e.conditions=n,!0)},aw=e=>!("object"!=typeof e||!e||"call-service"!==e.action||"string"!=typeof e.service)&&(e.action="perform-action",e.perform_action=e.service,delete e.service,!0),iw=e=>!("object"!=typeof e||!e||"call-service"!==e.action||void 0===e.service||void 0===e.service_data||void 0!==e.data)&&(e.data=e.service_data,delete e.service_data,!0),rw=e=>{const t=[{oldKey:"type",oldValue:"custom:frigate-card",newValue:"custom:advanced-camera-card"},{oldKey:"action",oldValue:"custom:frigate-card-action",newValue:"custom:advanced-camera-card-action"},{oldKey:"type",oldValue:"custom:frigate-card-menu-icon",newValue:"custom:advanced-camera-card-menu-icon"},{oldKey:"type",oldValue:"custom:frigate-card-menu-state-icon",newValue:"custom:advanced-camera-card-menu-state-icon"},{oldKey:"type",oldValue:"custom:frigate-card-menu-submenu",newValue:"custom:advanced-camera-card-menu-submenu"},{oldKey:"type",oldValue:"custom:frigate-card-menu-submenu-select",newValue:"custom:advanced-camera-card-menu-submenu-select"},{oldKey:"type",oldValue:"custom:frigate-card-status-bar-icon",newValue:"custom:advanced-camera-card-status-bar-icon"},{oldKey:"type",oldValue:"custom:frigate-card-status-bar-image",newValue:"custom:advanced-camera-card-status-bar-image"},{oldKey:"type",oldValue:"custom:frigate-card-status-bar-string",newValue:"custom:advanced-camera-card-status-bar-string"},{oldKey:"type",oldValue:"custom:frigate-card-conditional",newValue:"custom:advanced-camera-card-conditional"},{oldKey:"type",oldValue:"custom:frigate-card-conditional",newValue:"custom:advanced-camera-card-conditional"},{oldKey:"frigate_card_action",newKey:"advanced_camera_card_action"}];let n=!1;for(const a of t)a.oldValue&&a.newValue&&e[a.oldKey]===a.oldValue&&(e[a.newKey??a.oldKey]=a.newValue,n=!0),a.oldKey in e&&a.newKey&&(e[a.newKey]=e[a.oldKey],delete e[a.oldKey],n=!0);return n},sw=[e=>tw(iw)("object"==typeof e&&e?e:{}),function(e){if("object"!=typeof e||!e||!(Ai in e)||!Array.isArray(e[Ai]))return!1;let t=!1;const n=n=>{if(!t){if(!Mv(e,"live.controls.ptz")){const{type:t,...a}=n;Vb(e,"live.controls.ptz",a)}t=!0}},a=e=>{const t=[];for(const i of e)if("custom:advanced-camera-card-ptz"===i.type)n(i);else if("conditional"!==i.type&&"custom:advanced-camera-card-conditional"!==i.type||!Array.isArray(i.elements))t.push(i);else{const e=a(i.elements);e.length&&(i.elements=e,t.push(i))}return t},i=a(e[Ai]);return t&&(i.length?e[Ai]=i:delete e[Ai]),t},Gb("view.timeout_seconds",Oi),Xb("live.lazy_unload",(e=>"all"===e?["unselected","hidden"]:"never"===e?null:ef(e))),Xb("live.auto_play",(e=>"all"===e?null:"never"===e?[]:ef(e))),Xb("live.auto_pause",(e=>"all"===e?["unselected","hidden"]:"never"===e?null:ef(e))),Xb("live.auto_mute",(e=>"all"===e?null:"never"===e?[]:ef(e))),Xb("live.auto_unmute",(e=>"all"===e?["selected","visible","microphone"]:"never"===e?null:ef(e))),Xb("media_viewer.auto_play",(e=>"all"===e?null:"never"===e?[]:ef(e))),Xb("media_viewer.auto_pause",(e=>"all"===e?null:"never"===e?[]:ef(e))),Xb("media_viewer.auto_mute",(e=>"all"===e?null:"never"===e?[]:ef(e))),Xb("media_viewer.auto_unmute",(e=>"all"===e?["selected","visible"]:"never"===e?null:ef(e))),Gb("live.controls.thumbnails.media",is),Gb("timeline.media",Hs),Gb("live.controls.timeline.media",hs),Gb("media_viewer.controls.timeline.media",Dr),Gb("view.scan",Gi),Gb("view.triggers.enabled",nr,{transform:e=>!0===e?"live":null,keepOriginal:!0}),Gb("view.triggers.enabled",Ji,{transform:e=>!0!==e&&null}),Gb("view.triggers.untrigger_reset",ar,{transform:e=>e?"default":null}),Gb("live.layout",$i),Jb("media_viewer.layout"),Jb("image.layout"),ew(wo,nw),e=>tw(nw)("object"==typeof e&&e?e[Ai]:{}),e=>tw(nw)("object"==typeof e&&e?e.automations:{}),ew(xa,Gb("hide","capabilities",{transform:e=>!0===e?{disable_except:["substream"]}:null})),Gb("performance.profile",Io,{transform:e=>"low"===e?["low-performance"]:null}),ew(wo,Yb("overrides","merge")),Gb("live.controls.ptz",Ei,{transform:e=>{if("object"!=typeof e||!e)return;const t=["data_left","data_right","data_up","data_down","data_zoom_in","data_zoom_out","service"],n=["actions_left","actions_right","actions_up","actions_down","actions_zoom_in","actions_zoom_out"],a=[...t,...n,"data_home","actions_home"];if(!Object.keys(e).some((e=>a.includes(e))))return;const i={};t.filter((t=>t in e)).reduce(((t,n)=>(t[n]=e[n],t)),i),n.filter((t=>t in e)).reduce(((t,n)=>("object"==typeof e[n]&&"tap_action"in e[n]&&(t[n]=e[n].tap_action),t)),i);const r=()=>{i.presets="presets"in e&&"object"==typeof e.presets&&e.presets?e.presets:{}};return"actions_home"in e&&"object"==typeof e.actions_home&&e.actions_home&&"tap_action"in e.actions_home?(r(),i.presets.home=e.actions_home.tap_action):"data_home"in e&&"object"==typeof e.data_home&&e.data_home&&"string"==typeof e.service&&(r(),i.presets.service=e.service,i.presets.data_home=e.data_home),i},keepOriginal:!0}),Xb("live.controls.ptz",(e=>{if("object"!=typeof e||!e)return e;const t=["mode","position","orientation","hide_pan_tilt","hide_zoom","hide_home","style"],n=Object.keys(e);return n.some((e=>!t.includes(e)))?n.filter((e=>t.includes(e))).reduce(((t,n)=>(t[n]=e[n],t)),{}):void 0})),Gb("view.update_cycle_camera",qi),Gb("view.update_force",Zi,{transform:e=>!0===e?"all":null}),Gb("view.update_seconds",Wi),Gb("view.update_entities",Qi),Yb("live.controls.title",uo,{transform:e=>"object"==typeof e&&e&&"string"==typeof e.mode?"none"===e.mode?{style:"none"}:e.mode.includes("bottom")?{position:"bottom"}:e.mode.includes("top")?{position:"top"}:null:null}),Jb("live.controls.title"),Jb("media_viewer.controls.title"),e=>tw(aw)("object"==typeof e&&e?e:{}),Gb("dimensions.max_height",bo),Jb("dimensions.min_height"),Gb("view.dark_mode",ji,{transform:e=>"on"===e}),e=>tw(rw)("object"==typeof e&&e?e:{}),Xb("view.theme.overrides",(e=>{if("object"!=typeof e||!e||Array.isArray(e))return e;const t={...e},n=new RegExp(/^--frigate-card-/);for(const a of Object.keys(e))if(a.match(n)){t[a.replace(n,"--advanced-camera-card-")]=e[a],delete t[a]}return t})),Gb("menu.buttons.frigate","menu.buttons.iris")];class ow extends jo{}class cw extends Event{constructor(e,t){super("advanced-camera-card:conditions:evaluate",t),this.conditions=e}}function lw(e,t,n){let a=Zb(t),i=!1;if(n?.configOverrides)for(const t of n.configOverrides)e.evaluateConditions(t.conditions,n?.stateOverrides)&&(t.delete?.forEach((e=>{Ub(a,e)})),Object.keys(t.set??{}).forEach((e=>{Bb(a,e,t.set?.[e])})),Object.keys(t.merge??{}).forEach((e=>{Bb(a,e,Zy({},qb(a,e),t.merge?.[e]))})),i=!0);if(!i)return t;if(n?.configOverrides?.some((e=>e.delete?.length))&&(a=bf(a)),n?.schema){const e=n.schema.safeParse(a);if(!e.success)throw new ow(K_("error.invalid_configuration_override"),[e.error.errors,a]);return e.data}return a}class dw{constructor(e,t){this._state={},this._epoch=this._createEpoch(),this._hasHAStateConditions=!1,this._mediaQueries=[],this._mediaQueryTrigger=()=>this._triggerChange(this._state),this._api=e,this._listeners=[()=>this._api.getConfigManager().computeOverrideConfig(),()=>this._api.getAutomationsManager().execute(),...t?[t]:[]]}addListener(e){this._listeners.push(e)}removeListener(e){this._listeners=this._listeners.filter((t=>t!==e))}removeConditions(){this._mediaQueries.forEach((e=>e.removeEventListener("change",this._mediaQueryTrigger))),this._mediaQueries=[]}setConditionsFromConfig(){this.removeConditions();const e=(()=>{const e=this._api.getConfigManager().getConfig(),t=[];e?.overrides?.forEach((e=>t.push(...e.conditions))),e?.automations?.forEach((e=>t.push(...e.conditions)));const n=e=>{const a=Cl.safeParse(e);a.success?(t.push(...a.data.conditions),a.data.elements?.forEach(n)):e&&"object"==typeof e&&Object.keys(e).forEach((t=>n(e[t])))};return e?.elements?.forEach(n),t})();this._hasHAStateConditions=e.some((e=>!e.condition||["state","numeric_state","user"].includes(e.condition))),e.forEach((e=>{if("screen"===e.condition){const t=window.matchMedia(e.media_query);t.addEventListener("change",this._mediaQueryTrigger),this._mediaQueries.push(t)}}))}setState(e){if(Object.keys(e).every((t=>Bv(e[t],this._state[t]))))return;const t=this._state;this._state={...t,...e},this._triggerChange(t)}getState(){return this._state}hasHAStateConditions(){return this._hasHAStateConditions}getEpoch(){return this._epoch}evaluateConditions(e,t){return e.every((e=>this._evaluateCondition(e,t)))}_evaluateCondition(e,t){const n={...this._state,...t};switch(e.condition){case void 0:case"state":return!!n.state&&(!e.state&&!e.state_not||e.entity in n.state&&(!e.state||(Array.isArray(e.state)?e.state.includes(n.state[e.entity].state):e.state===n.state[e.entity].state))&&(!e.state_not||(Array.isArray(e.state_not)?!e.state_not.includes(n.state[e.entity].state):e.state_not!==n.state[e.entity].state)));case"view":return!!n?.view&&e.views.includes(n.view);case"fullscreen":return void 0!==n.fullscreen&&e.fullscreen===n.fullscreen;case"expand":return void 0!==n.expand&&e.expand===n.expand;case"camera":return!!n.camera&&e.cameras.includes(n.camera);case"numeric_state":return!!n.state&&e.entity in n.state&&void 0!==n.state[e.entity].state&&(void 0===e.above||Number(n.state[e.entity].state)>e.above)&&(void 0===e.below||Number(n.state[e.entity].state)<e.below);case"user":return!!n.user&&e.users.includes(n.user.id);case"media_loaded":return void 0!==n.mediaLoadedInfo&&e.media_loaded===!!n.mediaLoadedInfo;case"screen":return window.matchMedia(e.media_query).matches;case"display_mode":return!!n.displayMode&&e.display_mode===n.displayMode;case"triggered":return e.triggered.some((e=>n.triggered?.has(e)));case"interaction":return void 0!==n.interaction&&e.interaction===n.interaction;case"microphone":return!(void 0!==e.connected&&n.microphone?.connected!==e.connected||void 0!==e.muted&&n.microphone?.muted!==e.muted);case"key":return!(!n.keys||!(e.key in n.keys)||(e.state??"down")!==n.keys[e.key].state||void 0!==e.ctrl&&e.ctrl!==!!n.keys[e.key].ctrl||void 0!==e.alt&&e.alt!==!!n.keys[e.key].alt||void 0!==e.meta&&e.meta!==!!n.keys[e.key].meta||void 0!==e.shift&&e.shift!==!!n.keys[e.key].shift);case"user_agent":return!!n.userAgent&&(!e.user_agent||e.user_agent===n.userAgent)&&(void 0===e.companion||e.companion===!!n.userAgent.match(/Home ?Assistant/))&&(void 0===e.user_agent_re||new RegExp(e.user_agent_re).test(n.userAgent))}}_createEpoch(){return{manager:this}}_triggerChange(e){this._epoch=this._createEpoch(),this._listeners.forEach((t=>t(this._state,e)))}}const uw={casting:{[Qr]:!1,[Sr]:!1,[to]:"none",[`${so}.enabled`]:!0,[`${oo}.enabled`]:!0,[`${io}.enabled`]:!1,[`${co}.enabled`]:!1,[Wr]:["selected","visible"],[yo]:"static",[vo]:"16:9",[ki]:1,[Es]:!0},"low-performance":{[rs]:"none",[Er]:"none",[Zs]:"none",[fs]:!1,[Nr]:!1,[qs]:!1,[Zr]:[],[mr]:[],[pr]:[],[gr]:[],[Ss]:["unselected","hidden"],[Cs]:!1,[wr]:!1,[$s]:"none",[Mr]:"none",[Es]:!1,[kr]:"chevrons",[mo]:"none",[to]:"outside",[`${ro}.enabled`]:!1,[`${lo}.enabled`]:!1,[`${lo}.enabled`]:!1,[`${co}.enabled`]:!1,[cr]:!1,[lr]:!1,[dr]:!1,[or]:!1,[cs]:!1,[ls]:!1,[ds]:!1,[os]:!1,[Ir]:!1,[Tr]:!1,[zr]:!1,[Ar]:!1,[Ks]:!1,[Ys]:!1,[Gs]:!1,[Qs]:!1,[Co]:!1,[Mo]:!1,[So]:10,[Ao]:!1,[Eo]:!1,[Cr]:!1,[Si]:!1,[Mi]:"image",[ki]:10,[nr]:"none",[ko]:1},scrubbing:{[ps]:"below",[_s]:"ribbon",[gs]:"seek",[Rr]:"below",[Fr]:"ribbon",[Lr]:"seek"}},hw=(e,t,n)=>{const a=Ro(Wd).safeParse(e);if(!a.success)return t;const i=a.data;for(const e of n??[])e in uw&&Object.entries(uw[e]).forEach((([e,n])=>{return r=n,void(void 0===qb(i,a=e)&&Bb(t,a,r));var a,r}));return t},mw=e=>{switch(e){case"ptz_left":return"left";case"ptz_right":return"right";case"ptz_up":return"up";case"ptz_down":return"down";case"ptz_zoom_in":return"zoom_in";case"ptz_zoom_out":return"zoom_out"}
/* istanbul ignore next: No (current) way to reach this code -- @preserve */return null},pw=(e,t)=>{if(!t.enabled)return[];const n=[];for(const a of["ptz_down","ptz_left","ptz_right","ptz_up","ptz_zoom_in","ptz_zoom_out"]){const i=t[a],r=mw(a);i&&r&&(n.push({conditions:[{condition:"key",key:i.key,state:"down",shift:i.shift,ctrl:i.ctrl,alt:i.alt,meta:i.meta}],actions:[kf({ptzAction:r,ptzPhase:"start"})],tag:e}),n.push({conditions:[{condition:"key",key:i.key,state:"up"}],actions:[kf({ptzAction:r,ptzPhase:"stop"})],tag:e}))}const a=t.ptz_home;return a&&n.push({conditions:[{condition:"key",key:a.key,state:"down",shift:a.shift,ctrl:a.ctrl,alt:a.alt,meta:a.meta}],actions:[kf()],tag:e}),n};class gw{constructor(e){this._config=null,this._overriddenConfig=null,this._rawConfig=null,this._cardWideConfig=null,this._api=e}hasConfig(){return!!this.getConfig()}getConfig(){return this._overriddenConfig??this._config}getCardWideConfig(){return this._cardWideConfig}getNonOverriddenConfig(){return this._config}getRawConfig(){return this._rawConfig}setConfig(e){if(!e)throw new Error(K_("error.invalid_configuration"));const t=Wd.safeParse(e);if(!t.success){const n=Kb(e),a=No(t.error);let i="";throw n&&(i=`${K_("error.upgrade_available")}. `),new Error(i+`${K_("error.invalid_configuration")}: `+(a&&a.size?JSON.stringify([...a],null," "):K_("error.invalid_configuration_no_hint")))}const n=hw(e,t.data,t.data.profiles);var a;(this._rawConfig=e,Bv(this._config,n))||(this._config=n,this._cardWideConfig={performance:n.performance,debug:n.debug},this._api.getConditionsManager().setConditionsFromConfig(),this._api.getConditionsManager().setState({view:void 0,displayMode:void 0,camera:void 0}),this._api.getMediaLoadedInfoManager().clear(),this._api.getInitializationManager().uninitialize(Lb.VIEW),this._api.getViewManager().reset(),this._api.getMessageManager().reset(),this._api.getStatusBarItemManager().removeAllDynamicStatusBarItems(),((e,t)=>{e.getAutomationsManager().deleteAutomations(t);const n=e.getConfigManager().getConfig()?.view.keyboard_shortcuts;if(!n)return;const a=pw(t,n);a.length&&e.getAutomationsManager().addAutomations(a)})(this._api,this),(a=this._api).getAutomationsManager().deleteAutomations(),a.getAutomationsManager().addAutomations(a.getConfigManager().getNonOverriddenConfig()?.automations??[]),this.computeOverrideConfig(),this._api.getCardElementManager().update())}computeOverrideConfig(){const e=this._api.getConditionsManager();if(!this._config)return;let t=null;try{t=lw(e,this._config,{configOverrides:this._config.overrides,schema:Wd})}catch(e){return void this._api.getMessageManager().setErrorIfHigherPriority(e)}if(Bv(t,this._overriddenConfig))return;const n=this._overriddenConfig;this._overriddenConfig=t,this._api.getStyleManager().updateFromConfig(),!n||Bv(n?.cameras,this._overriddenConfig?.cameras)&&Bv(n?.cameras_global,this._overriddenConfig?.cameras_global)||(this._api.getInitializationManager().uninitialize(Lb.CAMERAS),this._api.getCameraManager().destroy()),n&&n?.live.microphone.always_connected!==this._overriddenConfig?.live.microphone.always_connected&&this._api.getInitializationManager().uninitialize(Lb.MICROPHONE_CONNECT),this._initializeBackground(n)}async _initializeBackground(e){await this._api.getDefaultManager().initializeIfNecessary(e),await this._api.getMediaPlayerManager().initializeIfNecessary(e),this._api.getCardElementManager().update()}}class fw{constructor(e){this._timer=new If,this._stateChangeHandler=()=>{this._setToDefaultIfAllowed()},this._api=e}async initializeIfNecessary(e){Bv(e?.view.default_reset,this._api.getConfigManager().getConfig()?.view.default_reset)||await this.initialize()}async initialize(){this.uninitialize();const e=this._api.getConfigManager().getConfig()?.view.default_reset;e?.entities.length&&this._api.getHASSManager().getStateWatcher().subscribe(this._stateChangeHandler,e.entities);const t=this._api.getConfigManager().getConfig()?.view.default_reset.every_seconds;return t&&this._timer.startRepeated(t,(()=>this._setToDefaultIfAllowed())),this._api.getConfigManager().getConfig()?.view.default_reset.after_interaction&&this._api.getAutomationsManager().addAutomations([{actions:[Cf("default")],conditions:[{condition:"interaction",interaction:!1}],tag:this}]),!0}uninitialize(){this._timer.stop(),this._api.getHASSManager().getStateWatcher().unsubscribe(this._stateChangeHandler),this._api.getAutomationsManager().deleteAutomations(this)}_setToDefaultIfAllowed(){this._isAutomatedUpdateAllowed()&&this._api.getViewManager().setViewDefault()}_isAutomatedUpdateAllowed(){const e=this._api.getConfigManager().getConfig()?.view.default_reset.interaction_mode;return!!e&&((e,t)=>{switch(e){case"all":return!0;case"active":return t;case"inactive":return!t}})(e,this._api.getInteractionManager().hasInteraction())}}const _w=(e,t="download")=>{const n=new URL(e).origin===window.location.origin,a=e.startsWith("data:");if(!n&&!a)return void window.open(e,"_blank");const i=document.createElement("a");i.setAttribute("download",t),i.href=e,i.click(),i.remove()},vw=async(e,t,n)=>{const a=await t.getMediaDownloadPath(n);if(!a)throw new jo(K_("error.download_no_media"));let i=a.endpoint;if(a.sign){let t;try{t=await $b(e,a.endpoint)}catch(e){af(e)}if(!t)throw new jo(K_("error.download_sign_failed"));i=t}_w(i)},yw=e=>{const t=document.createElement("canvas");t.width=e.videoWidth,t.height=e.videoHeight;const n=t.getContext("2d");return n?(n.drawImage(e,0,0,t.width,t.height),t.toDataURL("image/jpeg")):null};class bw{constructor(e){this._api=e}async downloadViewerMedia(){const e=this._api.getViewManager().getView()?.queryResults?.getSelectedResult(),t=this._api.getHASSManager().getHASS();if(!e||!t)return!1;try{await vw(t,this._api.getCameraManager(),e)}catch(e){return this._api.getMessageManager().setErrorIfHigherPriority(e),!1}return!0}async downloadScreenshot(){const e=await(this._api.getMediaLoadedInfoManager().get()?.player?.getScreenshotURL());e&&_w(e,(e=>{if(e?.is("live")||e?.is("image"))return`${e.view}-${e.camera}-${eh(new Date,"yyyy-MM-dd-HH-mm-ss")}.jpg`;if(e?.isViewerView()){const t=e.queryResults?.getSelectedResult(),n=t?.getID()??null;return`${e.view}-${e.camera}${n?`-${n}`:""}.jpg`}return"screenshot.jpg"})(this._api.getViewManager().getView()))}}class ww{constructor(e){this._expanded=!1,this._api=e}initialize(){this._setConditionState()}isExpanded(){return this._expanded}toggleExpanded(){this.setExpanded(!this._expanded)}setExpanded(e){e&&this._api.getFullscreenManager().isInFullscreen()&&this._api.getFullscreenManager().setFullscreen(!1),this._expanded=e,this._setConditionState(),this._api.getCardElementManager().update()}_setConditionState(){this._api.getConditionsManager()?.setState({expand:this._expanded})}}const xw=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Cw=(()=>{if("undefined"==typeof document)return!1;const e=xw[0],t={};for(const n of xw){const a=n?.[1];if(a in document){for(const[a,i]of n.entries())t[e[a]]=i;return t}}return!1})(),Mw={change:Cw.fullscreenchange,error:Cw.fullscreenerror};let Sw={request:(e=document.documentElement,t)=>new Promise(((n,a)=>{const i=()=>{Sw.off("change",i),n()};Sw.on("change",i);const r=e[Cw.requestFullscreen](t);r instanceof Promise&&r.then(i).catch(a)})),exit:()=>new Promise(((e,t)=>{if(!Sw.isFullscreen)return void e();const n=()=>{Sw.off("change",n),e()};Sw.on("change",n);const a=document[Cw.exitFullscreen]();a instanceof Promise&&a.then(n).catch(t)})),toggle:(e,t)=>Sw.isFullscreen?Sw.exit():Sw.request(e,t),onchange(e){Sw.on("change",e)},onerror(e){Sw.on("error",e)},on(e,t){const n=Mw[e];n&&document.addEventListener(n,t,!1)},off(e,t){const n=Mw[e];n&&document.removeEventListener(n,t,!1)},raw:Cw};Object.defineProperties(Sw,{isFullscreen:{get:()=>Boolean(document[Cw.fullscreenElement])},element:{enumerable:!0,get:()=>document[Cw.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>Boolean(document[Cw.fullscreenEnabled])}}),Cw||(Sw={isEnabled:!1});var kw=Sw;class $w{constructor(e,t){this._api=e,this._handler=t}}class Ew extends $w{connect(){kw.isEnabled&&kw.on("change",this._handler)}disconnect(){kw.isEnabled&&kw.off("change",this._handler)}isInFullscreen(){return kw.isEnabled&&kw.isFullscreen}isSupported(){return kw.isEnabled}setFullscreen(e){this.isSupported()&&(e?kw.request(this._api.getCardElementManager().getElement()):kw.exit())}}class Aw extends $w{constructor(){super(...arguments),this._playTimer=new If,this._conditionChangeHandler=(e,t)=>{if(e.mediaLoadedInfo?.player?.getFullscreenElement()!==t?.mediaLoadedInfo?.player?.getFullscreenElement()){const n=t?.mediaLoadedInfo?.player?.getFullscreenElement();n?.removeEventListener("webkitbeginfullscreen",this._handler),n?.removeEventListener("webkitendfullscreen",this._endHandler);const a=e.mediaLoadedInfo?.player?.getFullscreenElement();a?.addEventListener("webkitbeginfullscreen",this._handler),a?.addEventListener("webkitendfullscreen",this._endHandler)}},this._endHandler=()=>{this._handler(),this._playTimer.start(.5,(()=>{this._getVideoElement()?.play()}))}}connect(){this._api.getConditionsManager().addListener(this._conditionChangeHandler)}disconnect(){this._api.getConditionsManager().removeListener(this._conditionChangeHandler)}_getVideoElement(){const e=this._api.getMediaLoadedInfoManager().get()?.player?.getFullscreenElement();return e instanceof HTMLVideoElement?e:null}isInFullscreen(){return!!this._getVideoElement()?.webkitDisplayingFullscreen}isSupported(){return!!this._getVideoElement()?.webkitSupportsFullscreen}setFullscreen(e){if(!this.isSupported())return;const t=this._getVideoElement();e?t?.webkitEnterFullscreen?.():t?.webkitExitFullscreen?.()}}class Iw{static create(e,t){if(kw.isEnabled)return new Ew(e,t);return document.createElement("video").webkitEnterFullscreen?new Aw(e,t):null}}class Tw{constructor(e,t){this._fullscreenHandler=()=>{this._api.getExpandManager().setExpanded(!1),this._setConditionState(),this._api.getCardElementManager().update()},this._api=e,this._provider=t??Iw.create(e,this._fullscreenHandler)}connect(){this._provider?.connect()}disconnect(){this._provider?.disconnect()}setFullscreen(e){this._provider?.setFullscreen(e)}isInFullscreen(){return this._provider?.isInFullscreen()??!1}isSupported(){return!kb()&&(this._provider?.isSupported()??!1)}initialize(){this._setConditionState()}toggleFullscreen(){this._provider?.isInFullscreen()?this._provider.setFullscreen(!1):this._provider?.setFullscreen(!0)}_setConditionState(){this._api.getConditionsManager()?.setState({fullscreen:this.isInFullscreen()})}}class zw{constructor(){this._watcherCallbacks=new Map}setHASS(e,t){if(e)for(const[n,a]of this._watcherCallbacks.entries()){const i=Eb(t,e,a,{stateOnly:!0,firstOnly:!0});i.length&&n(i[0])}}subscribe(e,t){return!!t.length&&(this._watcherCallbacks.has(e)?this._watcherCallbacks.get(e)?.push(...t):this._watcherCallbacks.set(e,t),!0)}unsubscribe(e){this._watcherCallbacks.delete(e)}}class jw{constructor(e){this._hass=null,this._stateWatcher=new zw,this._api=e}getHASS(){return this._hass}hasHASS(){return!!this._hass}getStateWatcher(){return this._stateWatcher}setHASS(e){if(((e,t)=>e?.connected!==t?.connected)(this._hass,e)&&(e?.connected?this._api.getMessageManager().resetType("connection"):this._api.getMessageManager().setMessageIfHigherPriority({message:K_("error.reconnecting"),icon:"mdi:lan-disconnect",type:"connection",dotdotdot:!0})),!e)return;const t=this._hass;this._hass=e,this._api.getConditionsManager().hasHAStateConditions()&&this._api.getConditionsManager().setState({state:this._hass.states,user:this._hass.user}),this._api.getStyleManager().applyTheme(),this._stateWatcher.setHASS(t,e)}}var Ow=function(){return lh.Date.now()},Dw="Expected a function",Pw=Math.max,Rw=Math.min;function Lw(e,t,n){var a,i,r,s,o,c,l=0,d=!1,u=!1,h=!0;if("function"!=typeof e)throw new TypeError(Dw);function m(t){var n=a,r=i;return a=i=void 0,l=t,s=e.apply(r,n)}function p(e){var n=e-c;return void 0===c||n>=t||n<0||u&&e-l>=r}function g(){var e=Ow();if(p(e))return f(e);o=setTimeout(g,function(e){var n=t-(e-c);return u?Rw(n,r-(e-l)):n}(e))}function f(e){return o=void 0,h&&a?m(e):(a=i=void 0,s)}function _(){var e=Ow(),n=p(e);if(a=arguments,i=this,c=e,n){if(void 0===o)return function(e){return l=e,o=setTimeout(g,t),d?m(e):s}(c);if(u)return clearTimeout(o),o=setTimeout(g,t),m(c)}return void 0===o&&(o=setTimeout(g,t)),s}return t=Tg(t)||0,bh(n)&&(d=!!n.leading,r=(u="maxWait"in n)?Pw(Tg(n.maxWait)||0,t):r,h="trailing"in n?!!n.trailing:h),_.cancel=function(){void 0!==o&&clearTimeout(o),l=0,a=c=i=o=void 0},_.flush=function(){return void 0===o?s:f(Ow())},_}function Nw(e,t,n){var a=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return bh(n)&&(a="leading"in n?!!n.leading:a,i="trailing"in n?!!n.trailing:i),Lw(e,t,{leading:a,maxWait:t,trailing:i})}class Fw{constructor(e){this._timer=new If,this._interacted=!1,this.reportInteraction=Nw((()=>{this._reportInteraction()}),1e3),this._api=e}initialize(){this._setInteraction(!1)}hasInteraction(){return this._interacted}_setInteraction(e){this._interacted=e,pf(this._api.getCardElementManager().getElement(),e,"interaction"),this._api.getConditionsManager().setState({interaction:e})}_reportInteraction(){this._timer.stop(),this._setInteraction(!0);const e=this._api.getConfigManager().getConfig()?.view.interaction_seconds;e&&this._timer.start(e,(()=>{this._setInteraction(!1)}))}}class Vw{constructor(e){this._state={},this._handleKeydown=e=>{const t={state:"down",ctrl:e.ctrlKey,alt:e.altKey,meta:e.metaKey,shift:e.shiftKey};Bv(this._state[e.key],t)||(this._state[e.key]=t,this._processStateChange())},this._handleKeyup=e=>{e.key in this._state&&"down"===this._state[e.key].state&&(this._state[e.key].state="up",this._processStateChange())},this._handleBlur=()=>{Object.keys(this._state).length&&(this._state={},this._processStateChange())},this._api=e}initialize(){const e=this._api.getCardElementManager().getElement();e.addEventListener("keydown",this._handleKeydown),e.addEventListener("keyup",this._handleKeyup),e.addEventListener("blur",this._handleBlur)}uninitialize(){const e=this._api.getCardElementManager().getElement();e.removeEventListener("keydown",this._handleKeydown),e.removeEventListener("keyup",this._handleKeyup),e.removeEventListener("blur",this._handleBlur)}_processStateChange(){this._api.getConditionsManager().setState({keys:this._state})}}function Hw(e,t){let n;return n=e instanceof Event?e.composedPath()[0]:e,n instanceof HTMLImageElement?{width:n.naturalWidth,height:n.naturalHeight,...t}:n instanceof HTMLVideoElement?{width:n.videoWidth,height:n.videoHeight,...t}:n instanceof HTMLCanvasElement?{width:n.width,height:n.height,player:t?.player,...t}:null}function Bw(e,t,n){const a=Hw(t,n);a&&qw(e,a)}function qw(e,t){Gg(e,"media:loaded",t)}function Uw(e){Gg(e,"media:unloaded")}function Zw(e){Gg(e,"media:volumechange")}function Ww(e){Gg(e,"media:play")}function Qw(e){Gg(e,"media:pause")}class Kw{constructor(e){this._current=null,this._lastKnown=null,this._api=e}initialize(){this.clear()}set(e){var t;(t=e).height>=50&&t.width>=50&&(G_(this._api.getConfigManager().getCardWideConfig(),"Advanced Camera Card media load: ",e),this._current=e,this._lastKnown=e,this._api.getConditionsManager().setState({mediaLoadedInfo:e}),this._api.getStyleManager().setExpandedMode(),this._api.getCardElementManager().update())}get(){return this._current}getLastKnown(){return this._lastKnown}clear(){this._current=null,this._api.getConditionsManager().setState({mediaLoadedInfo:null})}has(){return!!this._current}}class Yw{static isEvent(e){return this.isClip(e)||this.isSnapshot(e)}static isRecording(e){return"recording"===e.getMediaType()}static isClip(e){return"clip"===e.getMediaType()}static isSnapshot(e){return"snapshot"===e.getMediaType()}static isVideo(e){return this.isClip(e)||this.isRecording(e)}}class Gw{constructor(e){this._mediaPlayers=[],this._api=e}getMediaPlayers(){return this._mediaPlayers}hasMediaPlayers(){return this._mediaPlayers.length>0}async initializeIfNecessary(e){e?.menu.buttons.media_player.enabled!==this._api.getConfigManager().getConfig()?.menu.buttons.media_player.enabled&&await this.initialize()}async initialize(){const e=this._api.getHASSManager().getHASS();if(!e||!this._api.getConfigManager().getConfig()?.menu.buttons.media_player.enabled)return!1;const t=Object.keys(e.states).filter((t=>{if(t.startsWith("media_player.")){const n=e.states[t];if(n&&"unavailable"!==n.state&&Pb(n,131072))return!0}return!1}));let n=null;try{n=await this._api.getEntityRegistryManager().getEntities(e,t)}catch(e){af(e)}return this._mediaPlayers=t.filter((e=>{const t=n?.get(e);return!t||!t.hidden_by})),!0}async stop(e){const t=this._api.getHASSManager().getHASS(),n=t?.states[e];if(!n)return;let a;if(Pb(n,4096))a="media_stop";else{if(!Pb(n,256))return;a="turn_off"}await t.callService("media_player",a,{entity_id:e})}async playLive(e,t){const n=this._api.getCameraManager().getStore().getCameraConfig(t);n&&("dashboard"===n.cast?.method?await this._playLiveDashboard(e,n):await this._playLiveStandard(e,t,n))}async _playLiveStandard(e,t,n){const a=this._api.getHASSManager().getHASS(),i=n?.camera_entity??null;if(!a||!i)return;const r=this._api.getCameraManager().getCameraMetadata(t)?.title??null,s=a.states[i]?.attributes?.entity_picture??null;await a.callService("media_player","play_media",{entity_id:e,media_content_id:`media-source://camera/${i}`,media_content_type:"application/vnd.apple.mpegurl",extra:{...r&&{title:r},...s&&{thumb:s}}})}async _playLiveDashboard(e,t){const n=this._api.getHASSManager().getHASS();if(!n)return;const a=t.cast?.dashboard;a?.dashboard_path&&a?.view_path?await n.callService("cast","show_lovelace_view",{entity_id:e,dashboard_path:a.dashboard_path,view_path:a.view_path}):this._api.getMessageManager().setMessageIfHigherPriority({type:"error",icon:"mdi:cast",message:K_("error.no_dashboard_or_view")})}async playMedia(e,t){const n=this._api.getHASSManager().getHASS();if(!n||!t)return;const a=t.getTitle(),i=t.getThumbnail();await n.callService("media_player","play_media",{entity_id:e,media_content_id:t.getContentID(),media_content_type:Yw.isVideo(t)?"video":"image",extra:{...a&&{title:a},...i&&{thumb:i}}})}}const Xw={info:10,error:20,connection:30,diagnostics:40};class Jw{constructor(e){this._message=null,this._api=e}getMessage(){return this._message}hasMessage(){return!!this._message}hasErrorMessage(){return"error"===this._message?.type}reset(){const e=this.hasMessage();this._message=null,e&&this._api.getCardElementManager().update()}resetType(e){this._message?.type===e&&this.reset()}setErrorIfHigherPriority(e,t){e&&"object"==typeof e&&"message"in e&&(af(e),this.setMessageIfHigherPriority({message:t?`${t}: ${e.message}`:String(e.message),type:"error",...e instanceof jo&&{context:e.context}}))}setMessageIfHigherPriority(e){const t=e=>e.type??"info",n=this._message?Xw[t(this._message)]:0,a=Xw[t(e)];return!(this._message&&a<n)&&(this._message=e,this._api.getMediaLoadedInfoManager().clear(),this._api.getCardElementManager().scrollReset(),this._api.getCardElementManager().update(),!0)}}class ex{constructor(e){this._timer=new If,this._state={connected:!1,muted:!0,forbidden:!1},this._desireMute=!0,this._api=e}getState(){return this._state}initialize(){this._setState()}shouldConnectOnInitialization(){return!!this._api.getConfigManager().getConfig()?.live.microphone?.always_connected&&this.isSupported()}isSupported(){return!!navigator.mediaDevices?.getUserMedia}async connect(){if(!this.isSupported())return!1;try{this._stream=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1})}catch(e){return af(e),this._stream=null,this._setState(),!1}return this._setDesiredMuteOnStream(),this._setState(),!0}disconnect(){this._stream?.getTracks().forEach((e=>e.stop())),this._stream=void 0,this._setState()}getStream(){return this._stream??void 0}mute(){this._desireMute=!0,this._setDesiredMuteOnStream(),this._setState()}async unmute(){this.isSupported()&&(this._desireMute=!1,this.isConnected()||this.isForbidden()?this.isConnected()&&(this._setDesiredMuteOnStream(),this._setState()):await this.connect())}isConnected(){return!!this._stream}isForbidden(){return null===this._stream}isMuted(){return!this._stream||this._stream.getTracks().every((e=>!e.enabled))}_setDesiredMuteOnStream(){this._stream?.getTracks().forEach((e=>{e.enabled=!this._desireMute})),this._startDisconnectTimer()}_startDisconnectTimer(){const e=this._api.getConfigManager().getConfig()?.live.microphone;if(e?.always_connected)return;const t=e?.disconnect_seconds??0;t&&this._timer.start(t,(()=>{this.disconnect()}))}_setState(){this._state={stream:this._stream,connected:this.isConnected(),muted:this.isMuted(),forbidden:this.isForbidden()},this._api.getConditionsManager().setState({microphone:this._state}),this._api.getCardElementManager().update()}}class tx{constructor(e){this._shouldRun=!0,this.requestExecution=()=>{this._shouldRun=!0,this._api.getCardElementManager().update()},this.executeIfNecessary=async()=>{this._shouldRun&&(this._shouldRun=!1,await this._executeViewRelated(this._calculateIntent()),await this._executeNonViewRelated(this._calculateIntent()))},this._isViewAction=e=>{switch(e.advanced_camera_card_action){case"clip":case"clips":case"diagnostics":case"image":case"live":case"recording":case"recordings":case"snapshot":case"snapshots":case"timeline":return!0}return!1},this._api=e}hasViewRelatedActionsToRun(){return!!this._calculateIntent().view&&this._shouldRun}async _executeViewRelated(e){e.view&&(e.view.default?await this._api.getViewManager().setViewDefaultWithNewQuery({params:{camera:e.view.camera},...e.view.substream&&{modifiers:[new gb(e.view.substream)]}}):await this._api.getViewManager().setViewByParametersWithNewQuery({params:{...e.view.view&&{view:e.view.view},...e.view.camera&&{camera:e.view.camera}},...e.view.substream&&{modifiers:[new gb(e.view.substream)]}}))}async _executeNonViewRelated(e){e.other&&await this._api.getActionsManager().executeActions(e.other)}_calculateIntent(){const e={};for(const t of this._getActions())this._isViewAction(t)?((e.view??={}).view=t.advanced_camera_card_action,(e.view??={}).default=void 0):"default"===t.advanced_camera_card_action?((e.view??={}).default=!0,(e.view??={}).view=void 0):"camera_select"===t.advanced_camera_card_action?(e.view??={}).camera=t.camera:"live_substream_select"===t.advanced_camera_card_action?(e.view??={}).substream=t.camera:(e.other??=[]).push(t);return e}_getActions(){const e=new URLSearchParams(window.location.search),t=[],n=new RegExp(/^(advanced-camera-card|frigate-card)-action([.:](?<cardID>\w+))?[.:](?<action>\w+)/);for(const[a,i]of e.entries()){const e=a.match(n);if(!e||!e.groups)continue;const r=e.groups.cardID,s=e.groups.action;let o=null;switch(s){case"camera_select":case"live_substream_select":i&&(o=Mf(s,i,{cardID:r}));break;case"camera_ui":case"clip":case"clips":case"default":case"diagnostics":case"download":case"expand":case"image":case"live":case"menu_toggle":case"recording":case"recordings":case"snapshot":case"snapshots":case"timeline":o=Cf(s,{cardID:r});break;default:console.warn(`Advanced Camera Card received unknown card action in query string: ${s}`)}o&&t.push(o)}return t}}class nx{constructor(e){this._items=[],this._dynamicItems=[],this._api=e}addDynamicStatusBarItem(e){this._dynamicItems.includes(e)||this._dynamicItems.push(e),this._api.getCardElementManager().update()}removeDynamicStatusBarItem(e){this._dynamicItems=this._dynamicItems.filter((t=>!Bv(t,e))),this._api.getCardElementManager().update()}removeAllDynamicStatusBarItems(){this._dynamicItems=[],this._api.getCardElementManager().update()}calculateItems(e){const t=e?.view?e?.cameraManager?.getCameraMetadata(e?.view?.camera):null,n=t?.engineIcon??null,a=e?.view?.is("live")?t?.title??null:e?.view?.isViewerView()?e?.view.queryResults?.getSelectedResult()?.getTitle()??null:null,i=e?.mediaLoadedInfo?this._calculateResolution(e?.mediaLoadedInfo):null,r=e?.mediaLoadedInfo?.technology?.length?e?.mediaLoadedInfo.technology[0]:null;return[...a?[{type:"custom:advanced-camera-card-status-bar-string",string:a,expand:!0,sufficient:!0,...e?.statusConfig?.items.title}]:[],...i?[{type:"custom:advanced-camera-card-status-bar-string",string:i,...e?.statusConfig?.items.resolution}]:[],...r&&"webrtc"===r?[{type:"custom:advanced-camera-card-status-bar-icon",icon:"mdi:webrtc",...e?.statusConfig?.items.technology}]:r?[{type:"custom:advanced-camera-card-status-bar-string",string:r.toUpperCase(),...e?.statusConfig?.items.technology}]:[],...n?[{type:"custom:advanced-camera-card-status-bar-icon",icon:n,...e?.statusConfig?.items.engine}]:[],...this._dynamicItems]}_matchesWidthHeight(e,t,n){const a=.99*t,i=1.01*t,r=.99*n,s=1.01*n,o=(e,t,n)=>e>=t&&e<=n;return!!e&&(o(e.width,a,i)&&o(e.height,r,s)||o(e.height,a,i)&&o(e.width,r,s))}_calculateResolution(e){return this._matchesWidthHeight(e,1920,1080)?"1080p":this._matchesWidthHeight(e,1280,720)?"720p":this._matchesWidthHeight(e,640,480)?"VGA":this._matchesWidthHeight(e,3840,2160)?"4K":this._matchesWidthHeight(e,720,480)?"480p":this._matchesWidthHeight(e,720,576)?"576p":this._matchesWidthHeight(e,7680,4320)?"8K":`${e.width}x${e.height}`}}class ax{constructor(e){this._api=e}setExpandedMode(){const e=this._api.getCardElementManager().getElement(),t=this._api.getViewManager().getView(),n=this._api.getMediaLoadedInfoManager().getLastKnown();e.style.setProperty("--advanced-camera-card-expand-aspect-ratio",t?.isAnyMediaView()&&n?`${n.width} / ${n.height}`:"unset");const a=t?.isGrid();e.style.setProperty("--advanced-camera-card-expand-width",!a&&t?.isAnyMediaView()?"none":"var(--advanced-camera-card-expand-max-width)"),e.style.setProperty("--advanced-camera-card-expand-height",!a&&t?.isAnyMediaView()?"none":"var(--advanced-camera-card-expand-max-height)")}updateFromConfig(){this.applyTheme(),this._setMinMaxHeight(),this._setPerformance(),this._setDimmable()}applyTheme(){const e=this._api.getConfigManager().getConfig()?.view.theme;if(!e)return;const t=this._api.getCardElementManager().getElement(),n=this._getThemeNames(e);if(pf(t,!!n,"themes",n?.join(" ")),e.overrides)for(const[n,a]of Object.entries(e.overrides))t.style.setProperty(n,a)}_getThemeNames(e){return e.themes.length?e.themes:Qd.view.theme.themes}_setDimmable(){const e=this._api.getConfigManager().getConfig();pf(this._api.getCardElementManager().getElement(),!!e?.view.dim,"dimmable")}_setMinMaxHeight(){const e=this._api.getConfigManager().getConfig();if(e){this._api.getCardElementManager().getElement().style.setProperty("--advanced-camera-card-height",e.dimensions.height)}}_setPerformance(){const e={box_shadow:"none",border_radius:"0px"},t=this._api.getCardElementManager().getElement(),n=this._api.getConfigManager().getCardWideConfig()?.performance,a=n?.style??{};for(const n of Object.keys(a)){const i=`--advanced-camera-card-css-${n.replaceAll("_","-")}`;!1===a[n]?t.style.setProperty(i,e[n]):t.style.removeProperty(i)}}_isAspectRatioEnforced(e,t){const n=e.dimensions.aspect_ratio_mode;return!(this._api.getFullscreenManager().isInFullscreen()||this._api.getExpandManager().isExpanded()||"unconstrained"===n||"dynamic"===n&&(!t||t?.isAnyMediaView()||t?.is("timeline")||t?.is("diagnostics")))}getAspectRatioStyle(){const e=this._api.getConfigManager().getConfig(),t=this._api.getViewManager().getView();if(e){if(!this._isAspectRatioEnforced(e,t))return yf();const n=e.dimensions.aspect_ratio_mode,a=this._api.getMediaLoadedInfoManager().getLastKnown();return yf(a&&"dynamic"===n?{ratio:[a.width,a.height]}:{ratio:e.dimensions.aspect_ratio})}return yf({defaultStatic:!0})}}class ix{constructor(e){this._triggeredCameras=new Map,this._triggeredCameraTimers=new Map,this._throttledTriggerAction=Nw(this._triggerAction.bind(this),1e3,{trailing:!0}),this._api=e}getTriggeredCameraIDs(){return new Set(this._triggeredCameras.keys())}isTriggered(){return!!this._triggeredCameras.size}getMostRecentlyTriggeredCameraID(){const e=Dv([...this._triggeredCameras.entries()],(e=>e[1].getTime()),"desc");return e.length?e[0][0]:null}async handleCameraEvent(e){const t=this._api.getConfigManager().getConfig()?.view.triggers,n=this._api.getViewManager().getView()?.camera;if(!t||!n)return;const a=this._api.getCameraManager().getStore().getAllDependentCameras(n);t.filter_selected_camera&&!a.has(e.cameraID)||("end"!==e.type?(this._triggeredCameras.set(e.cameraID,new Date),this._setConditionStateIfNecessary(),await this._throttledTriggerAction(e)):this._startUntriggerTimer(e.cameraID))}_hasAllowableInteractionStateForAction(){const e=this._api.getConfigManager().getConfig()?.view.triggers,t=this._api.getInteractionManager().hasInteraction();return!!e&&("all"===e.actions.interaction_mode||"active"===e.actions.interaction_mode&&t||"inactive"===e.actions.interaction_mode&&!t)}async _triggerAction(e){const t=this._api.getConfigManager().getConfig()?.view.triggers.actions.trigger,n=this._api.getConfigManager().getConfig()?.view.default;("high"!==e.fidelity||e.snapshot||e.clip||"live"===t||"default"===t&&"live"===n)&&(this._hasAllowableInteractionStateForAction()&&("update"===t?await this._api.getViewManager().setViewByParametersWithNewQuery({queryExecutorOptions:{useCache:!1}}):"live"===t?await this._api.getViewManager().setViewByParametersWithNewQuery({params:{view:"live",camera:e.cameraID}}):"default"===t?await this._api.getViewManager().setViewDefaultWithNewQuery({params:{camera:e.cameraID}}):"high"===e.fidelity&&"media"===t&&await this._api.getViewManager().setViewByParametersWithNewQuery({params:{view:e.clip?"clip":"snapshot",camera:e.cameraID}})),this._api.getCardElementManager().update())}_setConditionStateIfNecessary(){const e=new Set(this._triggeredCameras.keys()),t=e.size?e:void 0;Bv(t,this._api.getConditionsManager().getState().triggered)||this._api.getConditionsManager().setState({triggered:t})}async _untriggerAction(e){const t=this._api.getConfigManager().getConfig()?.view.triggers.actions.untrigger;"default"===t&&this._hasAllowableInteractionStateForAction()&&await this._api.getViewManager().setViewDefaultWithNewQuery(),this._triggeredCameras.delete(e),this._deleteTimer(e),this._setConditionStateIfNecessary(),this._api.getCardElementManager().update()}_startUntriggerTimer(e){this._deleteTimer(e);const t=new If;this._triggeredCameraTimers.set(e,t),t.start(
/* istanbul ignore next: the case of config being null here cannot be
           reached, as there's no way to have the untrigger call happen without
           a config. -- @preserve */
this._api.getConfigManager().getConfig()?.view.triggers.untrigger_seconds??0,(async()=>{await this._untriggerAction(e)}))}_deleteTimer(e){this._triggeredCameraTimers.get(e)?.stop(),this._triggeredCameraTimers.delete(e)}}function rx(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Yg(e,void 0,t):[]}class sx{constructor(e){this._queries=null,e&&(this._queries=e)}clone(){return y_(this)}getQueries(){return this._queries}setQueries(e){return this._queries=e,this}getQueryCameraIDs(){if(!this._queries)return null;const e=new Set;return this._queries.forEach((t=>[...t.cameraIDs].forEach((t=>e.add(t))))),e}setQueryCameraIDs(e){if(!this._queries)return this;const t=[];return this._queries.forEach((n=>t.push({...n,cameraIDs:tf(e)}))),this._queries=rx(t,Bv),this}hasQueriesForCameraIDs(e){for(const t of e)if(!this._queries?.some((e=>e.cameraIDs.has(t))))return!1;return!0}}class ox extends sx{convertToClipsQueries(){for(const e of this._queries??[])delete e.hasSnapshot,e.hasClip=!0;return this}}class cx extends sx{}class lx{static areEventQueries(e){return e instanceof ox}static areRecordingQueries(e){return e instanceof cx}static areClipsQueries(e){return this.areEventQueries(e)&&!!e?.getQueries()?.every((e=>e.hasClip))}static areSnapshotQueries(e){return this.areEventQueries(e)&&!!e?.getQueries()?.every((e=>e.hasSnapshot))}static getQueriesType(e){return this.areEventQueries(e)?"event":this.areRecordingQueries(e)?"recording":null}static getMediaType(e){return this.areClipsQueries(e)?"clips":this.areSnapshotQueries(e)?"snapshots":this.areRecordingQueries(e)?"recordings":null}}const dx=(e,t,n)=>{const a={anyCapabilities:["clips","snapshots","recordings"]};switch(t){case"image":case"diagnostics":return e.getStore().getCameraIDs();case"live":case"clip":case"clips":case"snapshot":case"snapshots":case"recording":case"recordings":const i="clip"===t?"clips":"snapshot"===t?"snapshots":"recording"===t?"recordings":t;return n?e.getStore().getAllDependentCameras(n,i):e.getStore().getCameraIDsWithCapability(i);case"timeline":return e.getStore().getCameraIDsWithCapability(a);case"media":return n?e.getStore().getAllDependentCameras(n,a):e.getStore().getCameraIDsWithCapability(a)}},ux=(e,t)=>Zy({},e,t);class hx{constructor(e){this.view=e.view,this.camera=e.camera,this.query=e.query??null,this.queryResults=e.queryResults??null,this.context=e.context??null,this.displayMode=e.displayMode??null}clone(){return new hx({view:this.view,camera:this.camera,query:this.query?.clone()??null,queryResults:this.queryResults?.clone()??null,context:this.context,displayMode:this.displayMode})}evolve(e){return new hx({view:void 0!==e.view?e.view:this.view,camera:void 0!==e.camera?e.camera:this.camera,query:void 0!==e.query?e.query:this.query?.clone()??null,queryResults:void 0!==e.queryResults?e.queryResults:this.queryResults?.clone()??null,context:void 0!==e.context?e.context:this.context,displayMode:void 0!==e.displayMode?e.displayMode:this.displayMode})}mergeInContext(e){return this.context=ux(this.context,e),this}removeContext(e){return this.context&&delete this.context[e],this}removeContextProperty(e,t){const n=this.context?.[e];return n&&delete n[t],this}is(e){return this.view==e}isGalleryView(){return["clips","snapshots","recordings"].includes(this.view)}isAnyMediaView(){return this.isViewerView()||this.is("live")||this.is("image")}isViewerView(){return["media","clip","snapshot","recording"].includes(this.view)}supportsMultipleDisplayModes(){return this.isViewerView()||this.is("live")}getDefaultMediaType(){return["clip","clips"].includes(this.view)?"clips":["snapshot","snapshots"].includes(this.view)?"snapshots":["recording","recordings"].includes(this.view)?"recordings":null}isGrid(){return"grid"===this.displayMode}}const mx=(e,t)=>{t?.forEach((t=>t.modify(e)))};class px extends jo{}class gx extends jo{}class fx{constructor(e){this._api=e}getViewDefault(e){const t=this._api.getConfigManager().getConfig();if(!t)return null;let n=null;const a=e?.params?.view??t.view.default;if(e?.params?.camera)n=e.params.camera;else{const i=[...dx(this._api.getCameraManager(),a)];if(!i.length)return null;if(e?.baseView?.camera&&t.view.default_cycle_camera){const t=i.indexOf(e.baseView.camera);n=i[t+1>=i.length?0:t+1]}else n=i[0]}return this.getViewByParameters({params:{...e?.params,view:a,camera:n},baseView:e?.baseView})}getViewByParameters(e){const t=this._api.getConfigManager().getConfig();if(!t)return null;let n=e?.params?.camera??e?.baseView?.camera??null,a=e?.params?.view??e?.baseView?.view??t.view.default;const i=this._api.getCameraManager().getStore().getCameraIDs();if(!n||!i.has(n)){n=dx(this._api.getCameraManager(),a).keys().next().value??null}if(!n){const e=[...this._api.getCameraManager().getStore().getCameras()].reduce(((e,[t,n])=>{const a=n.getCapabilities()?.getRawCapabilities();return a&&(e[t]=a),e}),{});throw new px(K_("error.no_supported_cameras"),{view:a,cameras_capabilities:e})}if(!this.isViewSupportedByCamera(n,a)){if(!e?.failSafe||!this.isViewSupportedByCamera(n,Yo)){const e=this._api.getCameraManager().getStore().getCamera(n)?.getCapabilities()?.getRawCapabilities();throw new gx(K_("error.no_supported_camera"),{view:a,camera:n,...e&&{camera_capabilities:e}})}a=Yo}const r=this._getDefaultDisplayModeForView(a,t),s=(a!==e?.baseView?.view?r:null)??e?.params?.displayMode??e?.baseView?.displayMode??r??"single",o={...e?.params,view:a,camera:n,displayMode:s},c=e?.baseView?e.baseView.evolve(o):new hx(o);return mx(c,e?.modifiers),c}isViewSupportedByCamera(e,t){return!!dx(this._api.getCameraManager(),t,e).size}_getDefaultDisplayModeForView(e,t){let n=null;switch(e){case"media":case"clip":case"recording":case"snapshot":n=t.media_viewer.display?.mode??null;break;case"live":n=t.live.display?.mode??null}return n}}class _x{constructor(e,t){this._key=e,this._property=t}modify(e){e.removeContextProperty(this._key,this._property)}}class vx{constructor(e){this._query=e?.query,this._queryResults=e?.queryResults}modify(e){void 0!==this._query&&(e.query=this._query),void 0!==this._queryResults&&(e.queryResults=this._queryResults)}}const yx=(e,t,n)=>{let a;for(const[i,r]of e.entries()){const e=r.getStartTime(),s=r.getUsableEndTime();if(r.includesTime(t)&&e&&s){const t=s.getTime()-e.getTime();(!a||n&&a.cameraID!==n&&r.getCameraID()===n||t>a.duration&&(!n||a.cameraID!==n||r.getCameraID()===n))&&(a={index:i,duration:t,cameraID:r.getCameraID()})}}return a?a.index:null};class bx{constructor(e){this._results=e?.results??[],this._selectedIndex=this._getInitialSelectedIndex(e)}_getInitialSelectedIndex(e){return null!=e?.selectedIndex?e.selectedIndex:e?.results&&e.results.length?e?.selectApproach&&"last"!==e?.selectApproach?0:e.results.length-1:null}clone(){return new bx({results:this._results,selectedIndex:this._selectedIndex})}getResults(){return this._results}getSelectedIndex(){return this._selectedIndex}getResultsCount(){return this.getResults().length}hasResults(){return 0!==this.getResultsCount()}getResult(e){return void 0===e?null:this._results[e]}getSelectedResult(){const e=this.getSelectedIndex();return null!==e?this.getResult(e):null}hasSelectedResult(){return null!==this.getSelectedResult()}resetSelectedResult(){this._selectedIndex=null}selectIndex(e){(null===e||e>=0&&e<this._results.length)&&(this._selectedIndex=e)}selectResultIfFound(e){for(const[t,n]of this._results.entries())if(e(n)){this.selectIndex(t);break}}selectBestResult(e){const t=e(this._results);null!==t&&this.selectIndex(t)}}class wx{constructor(e){this._resultsTimestamp=null,this._cameras=new Map,this._resultsTimestamp=new Date,this._main=new bx(e),this._buildByCameraSlices(e?.selectApproach)}_buildByCameraSlices(e){const t=new Map;for(const e of this._main.getResults()){const n=e.getCameraID(),a=t.get(n)??[];a.push(e),t.set(n,a)}for(const[n,a]of t.entries())this._cameras.set(n,new bx({results:a,selectApproach:e}))}clone(){const e=new wx;e._resultsTimestamp=this._resultsTimestamp,e._main=this._main.clone();for(const[t,n]of this._cameras.entries())e._cameras.set(t,n.clone());return e}isSupersetOf(e){const t=new Set(this._main.getResults()?.map((e=>e.getID()))),n=new Set(e._main.getResults()?.map((e=>e.getID())));return!(!t.size||!n.size||t.has(null)||n.has(null))&&((e,t)=>{for(const n of t)if(!e.has(n))return!1;return!0})(t,n)}getCameraIDs(){return new Set(this._cameras.keys())}getSlice(e){return e?this._cameras.get(e)??null:this._main}getResults(e){return this.getSlice(e)?.getResults()??null}getResultsCount(e){return this.getSlice(e)?.getResultsCount()??0}hasResults(e){return 0!==this.getSlice(e)?.getResultsCount()}getResult(e,t){return this.getSlice(t)?.getResult(e)??null}getSelectedIndex(e){return this.getSlice(e)?.getSelectedIndex()??null}getSelectedResult(e){return this.getSlice(e)?.getSelectedResult()??null}getMultipleSelectedResults(e){const t=[];if(!e||e.main){const e=this.getSelectedResult();e&&t.push(e)}const n=this._getCameraIDsFromCriteria(e);for(const e of n??[]){const n=this.getSelectedResult(e);n&&t.push(n)}return t}hasSelectedResult(e){return this.getSlice(e)?.hasSelectedResult()??!1}resetSelectedResult(e){return this.getSlice(e)?.resetSelectedResult(),this}getResultsTimestamp(){return this._resultsTimestamp}selectIndex(e,t){return this.getSlice(t)?.selectIndex(e),t||this.demoteMainSelectionToCameraSelection(),this}demoteMainSelectionToCameraSelection(){const e=this.getSelectedResult();if(e){const t=e.getCameraID();this.resetSelectedResult(t),this.selectResultIfFound((t=>t===e),{cameraID:t})}return this}promoteCameraSelectionToMainSelection(e){const t=this.getSelectedResult(e);return this.resetSelectedResult(),this.selectResultIfFound((e=>e===t)),this}_getCameraIDsFromCriteria(e){return e?.allCameras?this.getCameraIDs():e?.cameraID?new Set([e.cameraID]):null}selectResultIfFound(e,t){t&&!t?.main||(this._main.selectResultIfFound(e),this.demoteMainSelectionToCameraSelection());const n=this._getCameraIDsFromCriteria(t);for(const t of n??[])this.getSlice(t)?.selectResultIfFound(e);return this}selectBestResult(e,t){t&&!t.main||(this._main.selectBestResult(e),this.demoteMainSelectionToCameraSelection());const n=this._getCameraIDsFromCriteria(t);for(const t of n??[])this.getSlice(t)?.selectBestResult(e);return this}}class xx{constructor(e){this._api=e}async executeDefaultEventQuery(e){const t=e?.eventsMediaType&&"all"!==e?.eventsMediaType?e.eventsMediaType:{anyCapabilities:["clips","snapshots"]},n=this._api.getCameraManager(),a=e?.cameraID?n.getStore().getAllDependentCameras(e.cameraID,t):n.getStore().getCameraIDsWithCapability(t);if(!a.size)return null;const i=n.generateDefaultEventQueries(a,{limit:this._getChunkLimit(),..."clips"===e?.eventsMediaType&&{hasClip:!0},..."snapshots"===e?.eventsMediaType&&{hasSnapshot:!0}});if(!i)return null;const r=new ox(i),s=await this.execute(r,e?.executorOptions);return s?{query:r,queryResults:s}:null}async executeDefaultRecordingQuery(e){const t=this._api.getCameraManager(),n=e?.cameraID?t.getStore().getAllDependentCameras(e.cameraID,"recordings"):t.getStore().getCameraIDsWithCapability("recordings");if(!n.size)return null;const a=t.generateDefaultRecordingQueries(n,{limit:this._getChunkLimit()});if(!a)return null;const i=new cx(a),r=await this.execute(i,e?.executorOptions);return r?{query:i,queryResults:r}:null}async execute(e,t){const n=e.getQueries();if(!n)return null;const a=await this._api.getCameraManager().executeMediaQueries(n,{useCache:t?.useCache});if(!a)return null;const i=new wx({results:a});return t?.rejectResults?.(i)?null:(t?.selectResult?.id?i.selectBestResult((e=>e.findIndex((e=>e.getID()===t.selectResult?.id)))):t?.selectResult?.func?i.selectResultIfFound(t.selectResult.func):t?.selectResult?.time&&i.selectBestResult((e=>yx(e,t.selectResult?.time?.time,t.selectResult?.time?.favorCameraID))),i)}_getChunkLimit(){const e=this._api.getConfigManager().getCardWideConfig();return e?.performance?.features.media_chunk_size??50}}class Cx{constructor(e,t){this._api=e,this._executor=t??new xx(e)}async getExistingQueryModifiers(e,t){return e.query?[new vx({queryResults:await this._executor.execute(e.query,t)})]:[]}async getNewQueryModifiers(e,t){return await this._executeNewQuery(e,{useCache:!1,...t})}async _executeNewQuery(e,t){const n=this._api.getConfigManager().getConfig();if(!n)return null;const a=e?.getDefaultMediaType(),i=[],r=async n=>{
/* istanbul ignore if: this path cannot be reached -- @preserve */
if(!n)return[];const a="recordings"===n?await this._executor.executeDefaultRecordingQuery({...!e.isGrid()&&{cameraID:e.camera},executorOptions:t}):"clips"===n||"snapshots"===n||"all"===n?await this._executor.executeDefaultEventQuery({...!e.isGrid()&&{cameraID:e.camera},eventsMediaType:n,executorOptions:t}):/* istanbul ignore next -- @preserve */
null;return a?[new vx(a)]:[]};switch(e.view){case"live":"none"!==n.live.controls.thumbnails.mode&&i.push(...await r("recordings"===n.live.controls.thumbnails.media_type?"recordings":n.live.controls.thumbnails.events_media_type));break;case"media":i.push(...await r("clips"));break;case"clip":case"clips":case"snapshot":case"snapshots":case"recording":case"recordings":i.push(...await r(a))}return i.push(...this._getTimelineWindowViewModifier(e)),i.push(...this._getSeekTimeModifier(t?.selectResult?.time?.time)),i}_getTimelineWindowViewModifier(e){if(e.is("live")){const e=new Date,t=this._api.getConfigManager().getConfig()?.live;
/* istanbul ignore if: this if branch cannot be reached as if the config is
               empty this function is never called -- @preserve */
return t?[new ab({timeline:{window:{start:nh(e,{seconds:t.controls.timeline.window_seconds}),end:e}}})]:[]}return[new _x("timeline","window")]}_getSeekTimeModifier(e){return e?[new ab({mediaViewer:{seek:e}})]:[new _x("mediaViewer","seek")]}}class Mx{constructor(e,t){this._view=null,this._epoch=this._createEpoch(),this._loadingIndex=1,this.setViewDefault=e=>this._setViewGeneric(this._viewFactory.getViewDefault.bind(this._viewFactory),e),this.setViewByParameters=e=>this._setViewGeneric(this._viewFactory.getViewByParameters.bind(this._viewFactory),e),this.setViewDefaultWithNewQuery=async e=>await this._setViewThenModifyAsync(this._viewFactory.getViewDefault.bind(this._viewFactory),this._viewQueryExecutor.getNewQueryModifiers.bind(this._viewQueryExecutor),e),this.setViewByParametersWithNewQuery=async e=>await this._setViewThenModifyAsync(this._viewFactory.getViewByParameters.bind(this._viewFactory),this._viewQueryExecutor.getNewQueryModifiers.bind(this._viewQueryExecutor),e),this.setViewByParametersWithExistingQuery=async e=>await this._setViewThenModifyAsync(this._viewFactory.getViewByParameters.bind(this._viewFactory),this._viewQueryExecutor.getExistingQueryModifiers.bind(this._viewQueryExecutor),e),this.initialize=async()=>(this._api.getQueryStringManager().hasViewRelatedActionsToRun()||this.setViewDefaultWithNewQuery({failSafe:!0}),!0),this._api=e,this._viewFactory=t?.viewFactory??new fx(e),this._viewQueryExecutor=t?.viewQueryExecutor??new Cx(e)}getEpoch(){return this._epoch}_createEpoch(e){return{manager:this,...e&&{oldView:e}}}getView(){return this._view}hasView(){return!!this.getView()}reset(){this._view&&this._setView(null)}_setViewGeneric(e,t){let n=null;try{n=e({baseView:this._view,...t})}catch(e){this._api.getMessageManager().setErrorIfHigherPriority(e)}n&&this._setView(n)}_markViewLoadingQuery(e,t){return e.mergeInContext({loading:{query:t}})}_markViewAsNotLoadingQuery(e){return e.removeContextProperty("loading","query")}async _setViewThenModifyAsync(e,t,n){let a=null;try{a=e({baseView:this._view,...n,params:{query:null,queryResults:null,...n?.params}})}catch(e){this._api.getMessageManager().setErrorIfHigherPriority(e)}if(!a)return;if(this._view&&this._shouldAdoptQueryAndResults(a))return a.query=this._view.query,a.queryResults=this._view.queryResults,this._markViewAsNotLoadingQuery(a),void this._setView(a);const i=this._loadingIndex++;this._markViewLoadingQuery(a,i),this._setView(a);let r=null,s=null;try{r=await t(a,n?.queryExecutorOptions)}catch(e){s=e}if(this._view&&this.hasMajorMediaChange(this._view,a))return void(this._view.context?.loading?.query===i&&this._setView(this._markViewAsNotLoadingQuery(this._view.clone())));if(s)return void this._api.getMessageManager().setErrorIfHigherPriority(s);
/* istanbul ignore if: the if path cannot be reached as the view is set
        above -- @preserve */if(!this._view)return;const o=this._view.clone();this._view.context?.loading?.query===i&&this._markViewAsNotLoadingQuery(o),mx(o,r),this._setView(o)}_shouldAdoptQueryAndResults(e){const t=this._view?.isViewerView()&&e?.isGalleryView(),n=e?.getDefaultMediaType(),a=lx.getMediaType(this._view?.query)===n;return!!t&&a}setViewWithMergedContext(e){if(this._view)return this._setView(this._view?.clone().mergeInContext(e))}isViewSupportedByCamera(e,t){return!!dx(this._api.getCameraManager(),t,e).size}hasMajorMediaChange(e,t){const n=t??this._view;return!!e!=!!n||e?.view!==n?.view||e?.camera!==n?.camera||"live"===n?.view&&e&&zy(e)!==zy(n)||"live"!==n?.view&&e?.queryResults!==n?.queryResults}_setView(e){const t=this._view;G_(this._api.getConfigManager().getCardWideConfig(),"Advanced Camera Card view change: ",e),this._view=e,this._epoch=this._createEpoch(t),this.hasMajorMediaChange(t)&&this._api.getMediaLoadedInfoManager().clear(),t?.view!==e?.view&&this._api.getCardElementManager().scrollReset(),this._api.getMessageManager().reset(),this._api.getStyleManager().setExpandedMode(),this._api.getConditionsManager()?.setState({view:e?.view,camera:e?.camera,displayMode:e?.displayMode??void 0}),this._api.getCardElementManager().update()}}class Sx{constructor(e,t,n,a){this._deviceRegistryManager=new py(new hy((e=>e.id))),this._entityRegistryManager=new _y(new hy((e=>e.entity_id))),this._resolvedMediaCache=new yy,this._actionsManager=new Cb(this),this._automationsManager=new Mb(this),this._cameraManager=new uy(this),this._cameraURLManager=new Sb(this),this._configManager=new gw(this),this._defaultManager=new fw(this),this._downloadManager=new bw(this),this._expandManager=new ww(this),this._fullscreenManager=new Tw(this),this._hassManager=new jw(this),this._initializationManager=new Nb(this),this._interactionManager=new Fw(this),this._keyboardStateManager=new Vw(this),this._mediaLoadedInfoManager=new Kw(this),this._mediaPlayerManager=new Gw(this),this._messageManager=new Jw(this),this._microphoneManager=new ex(this),this._queryStringManager=new tx(this),this._statusBarItemManager=new nx(this),this._styleManager=new ax(this),this._triggersManager=new ix(this),this._viewManager=new Mx(this),e.addController(this),this._conditionsManager=new dw(this,a),this._cardElementManager=new Fb(this,e,t,n)}getActionsManager(){return this._actionsManager}getAutomationsManager(){return this._automationsManager}getCameraManager(){return this._cameraManager}createCameraManager(){this._cameraManager=new uy(this)}getCameraURLManager(){return this._cameraURLManager}getCardElementManager(){return this._cardElementManager}getConditionsManager(){return this._conditionsManager}static async getConfigElement(){return await import("./editor-692c0c6b.js"),document.createElement("advanced-camera-card-editor")}getConfigManager(){return this._configManager}getDefaultManager(){return this._defaultManager}getDeviceRegistryManager(){return this._deviceRegistryManager}getDownloadManager(){return this._downloadManager}getEntityRegistryManager(){return this._entityRegistryManager}getExpandManager(){return this._expandManager}getFullscreenManager(){return this._fullscreenManager}getHASSManager(){return this._hassManager}getInitializationManager(){return this._initializationManager}getInteractionManager(){return this._interactionManager}getKeyboardStateManager(){return this._keyboardStateManager}getMediaLoadedInfoManager(){return this._mediaLoadedInfoManager}getMediaPlayerManager(){return this._mediaPlayerManager}getMessageManager(){return this._messageManager}getMicrophoneManager(){return this._microphoneManager}createMicrophoneManager(){this._microphoneManager=new ex(this)}getQueryStringManager(){return this._queryStringManager}getResolvedMediaCache(){return this._resolvedMediaCache}getStatusBarItemManager(){return this._statusBarItemManager}static getStubConfig(e){return{cameras:[{camera_entity:e.find((e=>e.startsWith("camera.")))??"camera.demo"}]}}getStyleManager(){return this._styleManager}getTriggersManager(){return this._triggersManager}getViewManager(){return this._viewManager}hostConnected(){this.getCardElementManager().elementConnected()}hostDisconnected(){this.getCardElementManager().elementDisconnected()}}class kx{constructor(){this._dynamicMenuButtons=[]}addDynamicMenuButton(e){this._dynamicMenuButtons.includes(e)||this._dynamicMenuButtons.push(e)}removeDynamicMenuButton(e){this._dynamicMenuButtons=this._dynamicMenuButtons.filter((t=>t!=e))}calculateButtons(e,t,n,a){return[this._getIrisButton(t),this._getCamerasButton(t,n,a?.view),this._getSubstreamsButton(t,n,a?.view),this._getLiveButton(t,a?.view,a?.viewManager),this._getClipsButton(t,a?.view,a?.viewManager),this._getSnapshotsButton(t,a?.view,a?.viewManager),this._getRecordingsButton(t,a?.view,a?.viewManager),this._getImageButton(t,a?.view,a?.viewManager),this._getTimelineButton(t,a?.view,a?.viewManager),this._getDownloadButton(t,n,a?.view),this._getCameraUIButton(t,a?.showCameraUIButton),this._getMicrophoneButton(t,a?.microphoneManager,a?.currentMediaLoadedInfo),this._getExpandButton(t,a?.inExpandedMode),this._getFullscreenButton(t,a?.fullscreenManager),this._getCastButton(e,t,n,a?.view,a?.mediaPlayerController),this._getPlayPauseButton(t,a?.currentMediaLoadedInfo),this._getMuteUnmuteButton(t,a?.currentMediaLoadedInfo),this._getScreenshotButton(t,a?.currentMediaLoadedInfo),this._getDisplayModeButton(t,n,a?.view),this._getPTZControlsButton(t,n,a?.view),this._getPTZHomeButton(t,n,a?.view),...this._dynamicMenuButtons.map((e=>({style:this._getStyleFromActions(t,e,a),...e})))].filter(gf)}_getIrisButton(e){return{icon:"iris",...e.menu.buttons.iris,type:"custom:advanced-camera-card-menu-icon",title:K_("config.menu.buttons.iris"),permanent:!0,tap_action:"hidden"===e.menu?.style?Cf("menu_toggle"):Cf("default"),hold_action:Cf("diagnostics")}}_getCamerasButton(e,t,n){const a=t.getStore().getCameraIDsWithCapability("menu");if(a.size>1){const i=Array.from(a,(e=>{const a=Mf("camera_select",e),i=t.getCameraMetadata(e);return{enabled:!0,icon:i?.icon.icon,entity:i?.icon.entity,state_color:!0,title:i?.title,selected:n?.camera===e,...a&&{tap_action:a}}}));return{icon:"mdi:video-switch",...e.menu.buttons.cameras,type:"custom:advanced-camera-card-menu-submenu",title:K_("config.menu.buttons.cameras"),items:i}}return null}_getSubstreamsButton(e,t,n){if(!n)return null;const a=t.getStore().getAllDependentCameras(n.camera,"substream");if(a.size&&n.is("live")){const i=[...a].filter((e=>e!==n.camera)),r=[n.camera,...i],s=zy(n);if(2===r.length)return{icon:"mdi:video-input-component",style:s!==n.camera?this._getEmphasizedStyle():{},title:K_("config.menu.buttons.substreams"),...e.menu.buttons.substreams,type:"custom:advanced-camera-card-menu-icon",tap_action:Cf(jy(n)?"live_substream_off":"live_substream_on")};if(r.length>2){const a=Array.from(r,(e=>{const n=Mf("live_substream_select",e),a=t.getCameraMetadata(e)??void 0;return{enabled:!0,icon:a?.icon.icon,entity:a?.icon.entity,state_color:!0,title:a?.title,selected:s===e,...n&&{tap_action:n}}}));return{icon:"mdi:video-input-component",title:K_("config.menu.buttons.substreams"),style:s!==n.camera?this._getEmphasizedStyle():{},...e.menu.buttons.substreams,type:"custom:advanced-camera-card-menu-submenu",items:a}}}return null}_getLiveButton(e,t,n){return t&&n?.isViewSupportedByCamera(t.camera,"live")?{icon:"mdi:cctv",...e.menu.buttons.live,type:"custom:advanced-camera-card-menu-icon",title:K_("config.view.views.live"),style:t.is("live")?this._getEmphasizedStyle():{},tap_action:Cf("live")}:null}_getClipsButton(e,t,n){return t&&n?.isViewSupportedByCamera(t.camera,"clips")?{icon:"mdi:filmstrip",...e.menu.buttons.clips,type:"custom:advanced-camera-card-menu-icon",title:K_("config.view.views.clips"),style:t?.is("clips")?this._getEmphasizedStyle():{},tap_action:Cf("clips"),hold_action:Cf("clip")}:null}_getSnapshotsButton(e,t,n){return t&&n?.isViewSupportedByCamera(t.camera,"snapshots")?{icon:"mdi:camera",...e.menu.buttons.snapshots,type:"custom:advanced-camera-card-menu-icon",title:K_("config.view.views.snapshots"),style:t?.is("snapshots")?this._getEmphasizedStyle():{},tap_action:Cf("snapshots"),hold_action:Cf("snapshot")}:null}_getRecordingsButton(e,t,n){return t&&n?.isViewSupportedByCamera(t.camera,"recordings")?{icon:"mdi:album",...e.menu.buttons.recordings,type:"custom:advanced-camera-card-menu-icon",title:K_("config.view.views.recordings"),style:t.is("recordings")?this._getEmphasizedStyle():{},tap_action:Cf("recordings"),hold_action:Cf("recording")}:null}_getImageButton(e,t,n){return t&&n?.isViewSupportedByCamera(t.camera,"image")?{icon:"mdi:image",...e.menu.buttons.image,type:"custom:advanced-camera-card-menu-icon",title:K_("config.view.views.image"),style:t?.is("image")?this._getEmphasizedStyle():{},tap_action:Cf("image")}:null}_getTimelineButton(e,t,n){return t&&n?.isViewSupportedByCamera(t.camera,"timeline")?{icon:"mdi:chart-gantt",...e.menu.buttons.timeline,type:"custom:advanced-camera-card-menu-icon",title:K_("config.view.views.timeline"),style:t.is("timeline")?this._getEmphasizedStyle():{},tap_action:Cf("timeline")}:null}_getDownloadButton(e,t,n){const a=n?.queryResults?.getSelectedResult(),i=a?t?.getMediaCapabilities(a):null;return n?.isViewerView()&&i?.canDownload&&!kb()?{icon:"mdi:download",...e.menu.buttons.download,type:"custom:advanced-camera-card-menu-icon",title:K_("config.menu.buttons.download"),tap_action:Cf("download")}:null}_getCameraUIButton(e,t){return t?{icon:"mdi:web",...e.menu.buttons.camera_ui,type:"custom:advanced-camera-card-menu-icon",title:K_("config.menu.buttons.camera_ui"),tap_action:Cf("camera_ui")}:null}_getMicrophoneButton(e,t,n){if(t&&n?.capabilities?.supports2WayAudio){const n=t.isForbidden()||!t.isSupported(),a=t.isMuted(),i=e.menu.buttons.microphone.type;return{icon:n?"mdi:microphone-message-off":a?"mdi:microphone-off":"mdi:microphone",...e.menu.buttons.microphone,type:"custom:advanced-camera-card-menu-icon",title:K_("config.menu.buttons.microphone"),style:n||a?{}:this._getEmphasizedStyle(!0),...!n&&"momentary"===i&&{start_tap_action:Cf("microphone_unmute"),end_tap_action:Cf("microphone_mute")},...!n&&"toggle"===i&&{tap_action:Cf(a?"microphone_unmute":"microphone_mute")}}}return null}_getExpandButton(e,t){return{icon:t?"mdi:arrow-collapse-all":"mdi:arrow-expand-all",...e.menu.buttons.expand,type:"custom:advanced-camera-card-menu-icon",title:K_("config.menu.buttons.expand"),tap_action:Cf("expand"),style:t?this._getEmphasizedStyle():{}}}_getFullscreenButton(e,t){const n=t?.isInFullscreen();return t?.isSupported()?{icon:n?"mdi:fullscreen-exit":"mdi:fullscreen",...e.menu.buttons.fullscreen,type:"custom:advanced-camera-card-menu-icon",title:K_("config.menu.buttons.fullscreen"),tap_action:Cf("fullscreen"),style:n?this._getEmphasizedStyle():{}}:null}_getCastButton(e,t,n,a,i){if(!a)return null;const r=n.getStore().getCameraConfig(a.camera);if(i?.hasMediaPlayers()&&(a.isViewerView()||a.is("live")&&r?.camera_entity)){const n=i.getMediaPlayers().map((t=>{const n=Ib(e,t)||t,a=e.states[t],i=Sf(t,"play"),r=Sf(t,"stop"),s=!a||"unavailable"===a.state;return{enabled:!0,selected:!1,entity:t,state_color:!1,title:n,disabled:s,...!s&&i&&{tap_action:i},...!s&&r&&{hold_action:r}}}));return{icon:"mdi:cast",...t.menu.buttons.media_player,type:"custom:advanced-camera-card-menu-submenu",title:K_("config.menu.buttons.media_player"),items:n}}return null}_getPlayPauseButton(e,t){if(t&&t.player&&t.capabilities?.supportsPause){const n=t.player.isPaused();return{icon:n?"mdi:play":"mdi:pause",...e.menu.buttons.play,type:"custom:advanced-camera-card-menu-icon",title:K_("config.menu.buttons.play"),tap_action:Cf(n?"play":"pause")}}return null}_getMuteUnmuteButton(e,t){if(t&&t.player&&t?.capabilities?.hasAudio){const n=t.player.isMuted();return{icon:n?"mdi:volume-off":"mdi:volume-high",...e.menu.buttons.mute,type:"custom:advanced-camera-card-menu-icon",title:K_("config.menu.buttons.mute"),tap_action:Cf(n?"unmute":"mute")}}return null}_getScreenshotButton(e,t){return t&&t.player?{icon:"mdi:monitor-screenshot",...e.menu.buttons.screenshot,type:"custom:advanced-camera-card-menu-icon",title:K_("config.menu.buttons.screenshot"),tap_action:Cf("screenshot")}:null}_getDisplayModeButton(e,t,n){const a=n?dx(t,n.view):null;if(n?.supportsMultipleDisplayModes()&&a&&a.size>1){const t=n.isGrid();return{icon:t?"mdi:grid-off":"mdi:grid",...e.menu.buttons.display_mode,style:t?this._getEmphasizedStyle():{},type:"custom:advanced-camera-card-menu-icon",title:K_(t?"display_modes.single":"display_modes.grid"),tap_action:(i=t?"single":"grid",{action:"fire-dom-event",advanced_camera_card_action:"display_mode_select",display_mode:i,...r?.cardID&&{card_id:r.cardID}})}}var i,r;return null}_getPTZControlsButton(e,t,n){const a=n?.is("live")?e.live.controls.ptz:n?.isViewerView()?e.media_viewer.controls.ptz:null;if(!n||!a)return null;const i=qy(n,{cameraManager:t});if(i){const t=void 0!==n.context?.ptzControls?.enabled?n.context.ptzControls.enabled:"on"===a.mode||"auto"===a.mode&&"ptz"===i.type;return{icon:"mdi:pan",...e.menu.buttons.ptz_controls,style:t?this._getEmphasizedStyle():{},type:"custom:advanced-camera-card-menu-icon",title:K_("config.menu.buttons.ptz_controls"),tap_action:(r=!t,{action:"fire-dom-event",advanced_camera_card_action:"ptz_controls",enabled:r,...s?.cardID&&{card_id:s.cardID}})}}var r,s;return null}_getPTZHomeButton(e,t,n){const a=n?qy(n,{cameraManager:t}):null;return!a||(("digital"===a.type&&n?.context?.zoom?.[a.targetID]?.observed?.isDefault)??1)?null:{icon:"mdi:home",...e.menu.buttons.ptz_home,type:"custom:advanced-camera-card-menu-icon",title:K_("config.menu.buttons.ptz_home"),tap_action:kf({targetID:a.targetID})}}_getEmphasizedStyle(e){return e?{animation:"pulse 3s infinite",color:"var(--advanced-camera-card-menu-button-critical-color)"}:{color:"var(--advanced-camera-card-menu-button-active-color)"}}_getStyleFromActions(e,t,n){for(const a of[t.tap_action,t.double_tap_action,t.hold_action,t.start_tap_action,t.end_tap_action]){const t=Array.isArray(a)?a:[a];for(const a of t){if(!a||"fire-dom-event"!==a.action||!("advanced_camera_card_action"in a))continue;const t=a;if(Ko.some((e=>e===t.advanced_camera_card_action&&n?.view?.is(t.advanced_camera_card_action)))||"default"===t.advanced_camera_card_action&&n?.view?.is(e.view.default)||"fullscreen"===t.advanced_camera_card_action&&n?.fullscreenManager?.isInFullscreen()||"camera_select"===t.advanced_camera_card_action&&n?.view?.camera===t.camera)return this._getEmphasizedStyle()}}return{}}}const $x=(e,t)=>{t instanceof Error&&Gg(e,"message",{message:t.message,type:"error",...t instanceof jo&&{context:t.context}})};let Ex=class extends oe{constructor(){super(...arguments),this._root=null}createRenderRoot(){return this}_createRoot(){const e=customElements.get("hui-conditional-element");if(!e||!this.hass)throw new Error(K_("error.could_not_render_elements"));const t=new e;t.hass=this.hass;const n={type:"conditional",conditions:[],elements:this.elements};try{t.setConfig(n)}catch(e){throw af(e,console.error),new jo(K_("error.invalid_elements_config"))}return t}willUpdate(e){try{!this.elements||this._root&&!e.has("elements")||(this._root=this._createRoot())}catch(e){return $x(this,e)}}render(){return q`${this._root||""}`}updated(){this.hass&&this._root&&(this._root.hass=this.hass)}};e([he({attribute:!1})],Ex.prototype,"elements",void 0),e([he({attribute:!1})],Ex.prototype,"conditionsManagerEpoch",void 0),e([he({attribute:!1})],Ex.prototype,"hass",void 0),Ex=e([le("advanced-camera-card-elements-core")],Ex);let Ax=class extends oe{constructor(){super(...arguments),this._menuRemoveHandler=e=>{Gg(this,"menu:remove",e.detail)},this._statusBarRemoveHandler=e=>{Gg(this,"status-bar:remove",e.detail)},this._menuAddHandler=e=>{const t=e.composedPath();t.length&&this._addHandler(t[0],"advanced-camera-card:menu:remove",this._menuRemoveHandler)},this._statusBarAddHandler=e=>{const t=e.composedPath();t.length&&this._addHandler(t[0],"advanced-camera-card:status-bar:add",this._statusBarRemoveHandler)}}_addHandler(e,t,n){e.removeEventListener(t,n),e.addEventListener(t,n)}connectedCallback(){super.connectedCallback(),this.addEventListener("advanced-camera-card:menu:add",this._menuAddHandler),this.addEventListener("advanced-camera-card:status-bar:add",this._statusBarAddHandler)}disconnectedCallback(){this.removeEventListener("advanced-camera-card:menu:add",this._menuAddHandler),this.addEventListener("advanced-camera-card:status-bar:add",this._statusBarAddHandler),super.disconnectedCallback()}render(){return q`<advanced-camera-card-elements-core
      .hass=${this.hass}
      .conditionsManagerEpoch=${this.conditionsManagerEpoch}
      .elements=${this.elements}
    >
    </advanced-camera-card-elements-core>`}static get styles(){return s(":host {\n  position: absolute;\n  inset: 0;\n  overflow: hidden;\n  pointer-events: none;\n}\n\n.element {\n  position: absolute;\n  transform: translate(-50%, -50%);\n  pointer-events: auto;\n}\n\nhui-error-card.element {\n  inset: 0px;\n  transform: unset;\n}")}};e([he({attribute:!1})],Ax.prototype,"hass",void 0),e([he({attribute:!1})],Ax.prototype,"conditionsManagerEpoch",void 0),e([he({attribute:!1})],Ax.prototype,"elements",void 0),Ax=e([le("advanced-camera-card-elements")],Ax);let Ix=class extends oe{setConfig(e){this._config=e}createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),this.className=""}render(){if(function(e,t){if(!t)return!0;const n=new cw(t,{bubbles:!0,composed:!0});return e.dispatchEvent(n),n.evaluation??!1}(this,this._config?.conditions))return q` <advanced-camera-card-elements-core
        .hass=${this.hass}
        .elements=${this._config?.elements}
      >
      </advanced-camera-card-elements-core>`}};e([he({attribute:!1,hasChanged:()=>!0})],Ix.prototype,"hass",void 0),Ix=e([le("advanced-camera-card-conditional")],Ix);class Tx extends oe{constructor(e){super(),this._config=null,this._eventCategory=e}setConfig(e){this._config=e}connectedCallback(){super.connectedCallback(),this._config&&Gg(this,`${this._eventCategory}:add`,this._config)}disconnectedCallback(){this._config&&Gg(this,`${this._eventCategory}:remove`,this._config),super.disconnectedCallback()}}e([me()],Tx.prototype,"_config",void 0);class zx extends Tx{constructor(){super("menu")}}let jx=class extends zx{};jx=e([le("advanced-camera-card-menu-icon")],jx);let Ox=class extends zx{};Ox=e([le("advanced-camera-card-menu-state-icon")],Ox);let Dx=class extends zx{};Dx=e([le("advanced-camera-card-menu-submenu")],Dx);let Px=class extends zx{};Px=e([le("advanced-camera-card-menu-submenu-select")],Px);class Rx extends Tx{constructor(){super("status-bar")}}let Lx=class extends Rx{};Lx=e([le("advanced-camera-card-status-bar-icon")],Lx);let Nx=class extends Rx{};Nx=e([le("advanced-camera-card-status-bar-image")],Nx);let Fx=class extends Rx{};Fx=e([le("advanced-camera-card-status-bar-string")],Fx);var Vx="Fri, 07 Feb 2025 03:33:44 GMT",Hx="cc376a8",Bx="Thu, 6 Feb 2025 19:32:32 -0800";const qx=ya.object({domain:ya.string(),version:ya.string().optional()}).passthrough(),Ux="hass_web_proxy",Zx=(e,t)=>`/api/${Ux}/v${t??0}/?url=${encodeURIComponent(e)}`,Wx=(e,t,n="media")=>(e=>e.config.components.includes(Ux))(e)&&!!t[n];async function Qx(e,t,n){await e.callService(Ux,"create_proxied_url",{url_pattern:t,...n&&{url_id:n.urlID,ssl_verification:n.sslVerification,ssl_ciphers:n.sslCiphers,open_limit:n.openLimit,ttl:n.ttl,allow_unauthenticated:n.allowUnauthenticated}})}const Kx=async(e,t)=>{let n=null;if(t)try{n=await(async(e,t)=>await Pv(e,qx,{type:"manifest/get",integration:t}))(t,e)}catch(e){}return{detected:!!n,...n?.version&&{version:n.version}}};class Yx{getCustomIcon(e){switch(e?.icon){case"frigate":return'<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.876 22.744c.087.692.812 1.163.379 1.271-.433.109-2.327-3.436-2.76-4.952-.433-1.515-.677-3.22-.569-4.194.109-.974 5.71-2.49 5.71-2.895 0-.406-1.813-.028-1.894-.352-.081-.325 1.37-.13 1.759-.65.609-.811 1.38-.676 1.867-1.11.487-.432 1.082-2.083 1.19-2.786.109-.704-1.082-1.516-1.407-2.057-.324-.541.704-.92 3.194-1.948C14.835 2.042 22.735-.231 22.844.04c.108.27-2.598 1.407-4.492 2.11-1.894.704-4.98 2.057-4.98 2.436s.163.677.055 1.543c-.108.866-.121 1.27-.325 1.84-.135.379-.27 1.272 0 2.083.217.65.92 1.137 1.245 1.245.27.018 1.017.043 1.84 0 1.028-.054 2.49.054 2.49.325 0 .27-2.22.108-2.22.487s2.274-.054 2.22.325c-.054.378-1.895.216-2.869.216-.78 0-1.93-.036-2.435-.216l-.108.378c-.18 0-.558.109-.948.109-.487 0-.514.162-1.407.162s-.622-.054-1.434-.108c-.812-.054-3.842 2.273-4.384 3.03-.54.758-.216 2.598-.216 3.437 0 .754-.108 2.436 0 3.302z" fill="#000" style="fill:#fff;fill-opacity:1;stroke:none;stroke-width:.1;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"/></svg>';case"motioneye":return'<svg xml:space="preserve" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><defs><linearGradient id="d"><stop style="stop-color:#fff;stop-opacity:1" offset="0"/><stop style="stop-color:#585858;stop-opacity:1" offset="1"/></linearGradient><linearGradient id="b"><stop style="stop-color:#fff;stop-opacity:1" offset="0"/><stop style="stop-color:gray;stop-opacity:1" offset="1"/></linearGradient><linearGradient id="a"><stop style="stop-color:#4aa3e0;stop-opacity:1" offset="0"/><stop style="stop-color:#3096db;stop-opacity:1" offset="1"/></linearGradient><linearGradient id="c"><stop style="stop-color:#fff;stop-opacity:1" offset="0"/><stop style="stop-color:#585858;stop-opacity:1" offset="1"/></linearGradient><linearGradient xlink:href="#a" id="i" x1="26.602" y1="43.035" x2="26.602" y2="29.466" gradientUnits="userSpaceOnUse" gradientTransform="matrix(.96429 0 0 .96429 .914 .914)"/><linearGradient xlink:href="#b" id="e" gradientUnits="userSpaceOnUse" x1="26.446" y1="47.518" x2="26.446" y2="3.818"/><linearGradient xlink:href="#c" id="f" gradientUnits="userSpaceOnUse" x1="26.446" y1="47.518" x2="26.446" y2="3.818"/><linearGradient xlink:href="#d" id="g" gradientUnits="userSpaceOnUse" x1="26.446" y1="47.518" x2="26.446" y2="3.818"/><filter style="color-interpolation-filters:sRGB" id="h" x="-.02" y="-.14" width="1.041" height="1.208"><feFlood flood-opacity=".588" flood-color="#000" result="flood"/><feComposite in="flood" in2="SourceGraphic" operator="in" result="composite1"/><feGaussianBlur in="composite1" stdDeviation=".2" result="blur"/><feOffset dy="-.5" result="offset"/><feComposite in="SourceGraphic" in2="offset" result="composite2"/></filter></defs><path d="M8.935 40.515C5.365 36.547 3.2 31.358 3.2 25.6c0-12.371 10.029-22.4 22.4-22.4C37.971 3.2 48 13.229 48 25.6c0 5.737-2.161 10.952-5.708 14.915-1.696-.623-3.388-1.349-5.061-2.288a7.777 7.777 0 0 0 5.6-7.458c0-4.26-3.47-7.754-7.754-7.754-3.634 0-6.69 2.51-7.539 5.87h-3.876a7.784 7.784 0 0 0-7.539-5.87c-4.284 0-7.78 3.494-7.78 7.754 0 3.561 2.456 6.586 5.76 7.485-1.675.912-3.404 1.62-5.168 2.261zM25.6 26.462c.533-1.982 1.102-3.948 3.446-5.17L25.6 16.123l-3.446 5.17c2.053 1.454 3 3.237 3.446 5.169z" style="fill:url(#e);fill-opacity:1;stroke:none;filter:url(#filter4327)" transform="matrix(.49239 0 0 -.49239 -.605 24.564)"/><path d="M16.123 33.354a2.585 2.585 0 1 1 0-5.17 2.585 2.585 0 0 1 0 5.17z" style="fill:url(#f);fill-opacity:1;stroke:none;filter:url(#filter4327)" transform="matrix(.49239 0 0 -.49239 -.605 24.564)"/><path d="M35.077 33.354a2.585 2.585 0 1 1 0-5.17 2.585 2.585 0 0 1 0 5.17z" style="fill:url(#g);fill-opacity:1;stroke:none;filter:url(#filter4327)" transform="matrix(.49239 0 0 -.49239 -.605 24.564)"/><path style="fill:#d9d9d9;fill-opacity:1;stroke:none;filter:url(#h)" d="M25.6 47.2c-4.374 0-8.437-1.4-11.838-3.635 3.677-.394 7.305-1.343 11.423-3.375 4.166 2.123 8.434 3.01 12.28 3.453A21.465 21.465 0 0 1 25.6 47.2Z" transform="matrix(.51063 0 0 -.51063 -1.072 25.031)"/><path style="fill:url(#i);fill-opacity:1;stroke:none;filter:url(#filter4315)" d="M39.723 42.553c-4.329-.029-10.243-2.156-14.538-4.12-4.516 1.631-9.15 4.216-14.383 4.094a20.537 20.537 0 0 1-1.039-.052l-4.101-.337 3.894-1.299c5.342-1.74 10.04-2.85 14.175-10.026h3.738c4.12 7.134 9.06 8.325 14.15 10.026l3.842 1.247-3.998.389c-.545.052-1.121.082-1.74.078z" transform="matrix(.51063 0 0 -.51063 -1.072 25.031)"/></svg>';case"reolink":return'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path style="fill:#fff;stroke-width:.0393282;fill-opacity:1" d="M17.037 23.965a1.724 1.724 0 0 1-.711-.285c-.13-.086-1.782-1.727-4.108-4.078-2.14-2.164-3.998-4.02-4.128-4.123a3.023 3.023 0 0 0-1.591-.677c-.185-.021-1.42-.039-2.745-.039H1.345l.007-7.394V-.025h6.204c3.98 0 6.36.015 6.637.041a7.269 7.269 0 0 1 5.579 3.501c.686 1.131 1.02 2.278 1.067 3.655.063 1.885-.574 3.66-1.831 5.1a7.592 7.592 0 0 1-2.93 2.025l-.319.118-1.951-1.98-1.951-1.979 1.046-.023c.576-.013 1.1-.037 1.165-.053.596-.151.95-.314 1.322-.611a3.05 3.05 0 0 0 1.138-2.067c.168-1.506-.771-2.87-2.263-3.29l-.315-.089-4.152-.012-4.159-.013V10.437h1.419c1.627.001 1.779.02 2.31.28.31.152.39.22 1.082.915 3.027 3.043 12.194 12.309 12.205 12.337.016.044-5.365.04-5.618-.004z"/></svg>';case"iris":return'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g style="fill-opacity:.05;fill:#fff;stroke-width:1.0015748;stroke-dasharray:none"><path d="m13.73 15-3.9 6.76a9.984 9.984 0 0 0 8.49-2.01l-3.66-6.35M2.46 15c.92 2.92 3.15 5.26 5.99 6.34L12.12 15m-3.58-3-3.9-6.75A9.855 9.855 0 0 0 2 12c0 .68.07 1.35.2 2h7.49m12.11-4h-7.49l.29.5 4.76 8.25A9.93 9.93 0 0 0 22 12c0-.69-.07-1.36-.2-2m-.26-1c-.92-2.93-3.15-5.26-5.99-6.34L11.88 9M9.4 10.5l4.77-8.26C13.47 2.09 12.75 2 12 2c-2.4 0-4.6.84-6.32 2.25l3.66 6.35z" style="fill-opacity:1;fill:#fff;opacity:1;stroke-width:1.0015748;stroke-dasharray:none"/></g></svg>';default:return null}}createStateObjectForStateBadge(e,t){return e.states[t]?{...e.states[t],attributes:{...e.states[t].attributes,entity_picture:void 0,entity_picture_local:void 0}}:null}}let Gx=class extends oe{constructor(){super(...arguments),this.allowOverrideNonActiveStyles=!1,this._controller=new Yx,this._svg=null}willUpdate(e){if(e.has("icon")){const e=this._controller.getCustomIcon(this.icon);if(e){const t=document.createElement("svg");t.innerHTML=e,this._svg=t}else this._svg=null}}render(){if(this._svg)return q`${this._svg}`;if(this.hass&&this.icon?.entity){const e=this._controller.createStateObjectForStateBadge(this.hass,this.icon.entity);if(e)return q`<state-badge
          .color="${this.style.color??void 0}"
          .stateColor=${this.icon.stateColor??!0}
          .hass=${this.hass}
          .stateObj=${e}
          .overrideIcon=${this.icon.icon}
        ></state-badge>`}return this.icon?.icon?q`<ha-icon icon="${this.icon.icon}"></ha-icon>`:this.icon?.fallback?q`<ha-icon icon="${this.icon.fallback}"></ha-icon>`:q``}static get styles(){return s(":host {\n  display: inline-block;\n  width: var(--mdc-icon-size, 24px);\n  height: var(--mdc-icon-size, 24px);\n  --ha-icon-display: block;\n}\n\nha-icon,\nstate-badge,\nsvg {\n  display: block;\n  height: 100%;\n  width: 100%;\n  box-sizing: border-box;\n}\n\nsvg path {\n  fill: currentColor !important;\n}\n\n:host([allow-override-non-active-styles]) state-badge {\n  --state-inactive-color: inherit;\n  --state-unavailable-color: inherit;\n}")}};e([he({attribute:!1})],Gx.prototype,"hass",void 0),e([he({attribute:!1})],Gx.prototype,"icon",void 0),e([he({attribute:"allow-override-non-active-styles",type:Boolean})],Gx.prototype,"allowOverrideNonActiveStyles",void 0),Gx=e([le("advanced-camera-card-icon")],Gx);let Xx=class extends oe{render(){return q`<advanced-camera-card-icon
        .icon=${{icon:"iris"}}
      ></advanced-camera-card-icon
      ><span>${"7.0.0"}</span>`}static get styles(){return s(":host {\n  width: intrinsic;\n  height: intrinsic;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  pointer-events: none;\n  background-color: var(--advanced-camera-card-loading-background-color);\n  color: var(--advanced-camera-card-loading-foreground-color);\n  transition: opacity 1.5s ease-in;\n  opacity: 1;\n}\n\n:host([loaded]) {\n  opacity: 0;\n}\n\nadvanced-camera-card-icon {\n  margin-bottom: 20px;\n  height: 25%;\n  width: auto;\n  animation: rotate 8s linear infinite;\n}\n\n@keyframes rotate {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\nspan {\n  font-size: x-large;\n}")}};Xx=e([le("advanced-camera-card-loading")],Xx);const Jx=(e,t)=>{Gg(e,"action:execution-request",t)};class eC{constructor(e){this._config=null,this._buttons=[],this._expanded=!1,this._host=e}setMenuConfig(e){this._config=e,this._host.style.setProperty("--advanced-camera-card-menu-button-size",`${e.button_size}px`),this._host.setAttribute("data-style",e.style),this._host.setAttribute("data-position",e.position),this._host.setAttribute("data-alignment",e.alignment),this._sortButtons(),this._host.requestUpdate()}getMenuConfig(){return this._config}isExpanded(){return this._expanded}setButtons(e){this._buttons=e,this._sortButtons(),this._host.requestUpdate()}getButtons(e){const t=e=>!this._isHidingMenu()||this._expanded||!!e.permanent;return this._buttons.filter((n=>(e=>!1!==e.enabled)(n)&&(t=>t.alignment===e||"matching"===e&&!t.alignment)(n)&&t(n)))}setExpanded(e){this._expanded=e,pf(this._host,e,"expanded"),this._host.requestUpdate()}toggleExpanded(){this.setExpanded(!this._expanded)}actionHandler(e,t){if(e.stopPropagation(),e.detail.config&&(t=e.detail.config),!t)return;const n=e.detail.action,a=$f(n,t);if(!a)return;const i=ef(a);let r=!1;const s=i.filter((e=>gf(e)&&!this._isUnknownActionMenuToggleAction(e)));if(s.length!=i.length&&(r=!0),s.length&&Jx(this._host,{action:i,config:t}),this._isHidingMenu())if(r)this.setExpanded(!this._expanded);else{const e=$f("hold",t),a=$f("double_tap",t),i=$f("tap",t),r=$f("end_tap",t);"end_tap"!==n&&("start_tap"!==n||e||a||i||r)&&("end_tap"===n||r)||this.setExpanded(!1)}}_sortButtons(){this._buttons=Dv(this._buttons,(e=>(e.priority??0)+(this._isHidingMenu()&&e.permanent?Wo:0)),["desc"])}_isHidingMenu(){return"hidden"===this._config?.style}_isUnknownActionMenuToggleAction(e){const t=xf(e);return!!t&&"menu_toggle"==t.advanced_camera_card_action}}const tC=(e,t,n)=>{const a=e.states[t],i=n?.state?n.state:a?a.state:null;if(!i)return null;const r=Ke(t),s=a?a.attributes:null;return n?.entity?.translation_key&&e.localize(`component.${n.entity.platform}.entity.${r}.${n.entity.translation_key}.state.${i}`)||s?.device_class&&e.localize(`component.${r}.state.${s.device_class}.${i}`)||e.localize(`component.${r}.state._.${i}`)||i};let nC=class extends oe{_renderItem(e){if(!this.hass)return;const t=e.title??Ib(this.hass,e.entity),n=De(e.style||{});return q`
      <mwc-list-item
        graphic=${ve(e.icon||e.entity?"icon":void 0)}
        ?twoline=${!!e.subtitle}
        ?selected=${e.selected}
        ?activated=${e.selected}
        ?disabled=${!1===e.enabled}
        aria-label="${t??""}"
        @action=${t=>{t.detail.config=e}}
        .actionHandler=${jf({hasHold:Ef(e.hold_action),hasDoubleClick:Ef(e.double_tap_action)})}
      >
        <span style="${n}">${t??""}</span>
        ${e.subtitle?q`<span slot="secondary" style="${n}">${e.subtitle}</span>`:""}
        <advanced-camera-card-icon
          slot="graphic"
          .hass=${this.hass}
          .icon=${{icon:e.icon,entity:e.entity}}
          style="${n}"
        ></advanced-camera-card-icon>
      </mwc-list-item>
    `}render(){if(!this.submenu)return q``;const e=this.submenu.items,t=De(this.submenu.style||{});return q`
      <ha-button-menu
        corner=${"BOTTOM_LEFT"}
        @closed=${e=>e.stopPropagation()}
        @click=${e=>Af(e)}
      >
        <ha-icon-button
          style="${t}"
          slot="trigger"
          .label=${this.submenu.title||""}
          .actionHandler=${jf({allowPropagation:!0,hasHold:Ef(this.submenu.hold_action),hasDoubleClick:Ef(this.submenu.double_tap_action)})}
        >
          <advanced-camera-card-icon
            ?allow-override-non-active-styles=${!0}
            style="${t}"
            .hass=${this.hass}
            .icon=${"string"==typeof this.submenu.icon?{icon:this.submenu.icon}:this.submenu.icon}
          ></advanced-camera-card-icon>
        </ha-icon-button>
        ${e.map(this._renderItem.bind(this))}
      </ha-button-menu>
    `}static get styles(){return s("ha-icon-button {\n  color: var(--advanced-camera-card-button-color);\n  background-color: var(--advanced-camera-card-button-background);\n  border-radius: 50%;\n  padding: 0px;\n  margin: 3px;\n  --ha-icon-display: block;\n  /* Buttons can always be clicked */\n  pointer-events: auto;\n}\n\n:host {\n  pointer-events: auto;\n}\n\nmwc-list-item {\n  z-index: 20;\n}\n\nha-icon-button {\n  --state-unavailable-color: var(--advanced-camera-card-button-color);\n  --state-inactive-color: var(--advanced-camera-card-button-color);\n  color: var(--advanced-camera-card-menu-button-inactive-color);\n  background-color: var(--advanced-camera-card-menu-button-background);\n}")}};e([he({attribute:!1})],nC.prototype,"hass",void 0),e([he({attribute:!1})],nC.prototype,"submenu",void 0),nC=e([le("advanced-camera-card-submenu")],nC);let aC=class extends oe{shouldUpdate(e){const t=e.get("hass");return!e.has("hass")||!t||!this.submenuSelect||Ab(this.hass,t,[this.submenuSelect.entity])}async _refreshOptionTitles(){if(!this.hass||!this.submenuSelect)return;const e=this.submenuSelect.entity,t=this.hass.states[e],n=t?.attributes?.options,a=await(this.entityRegistryManager?.getEntity(this.hass,e))??null,i={};for(const t of n){const n=tC(this.hass,e,{...a&&{entity:a},state:t});n&&(i[t]=n)}this._optionTitles=i}willUpdate(){if(!this.submenuSelect||!this.hass)return;this._optionTitles||this._refreshOptionTitles();const e=this.submenuSelect.entity,t=this.hass.states[e],n=t?.attributes?.options;if(!t||!n)return;const a=Ib(this.hass,e),i={...a&&{title:a},...this.submenuSelect,icon:{icon:this.submenuSelect.icon,entity:e,fallback:"mdi:format-list-bulleted"},type:"custom:advanced-camera-card-menu-submenu",items:[]};delete i.options;const r=i.items;for(const a of n){const n=this._optionTitles?.[a]??a;r.push({state_color:!0,selected:t.state===a,enabled:!0,title:n||a,...(e.startsWith("select.")||e.startsWith("input_select."))&&{tap_action:{action:"perform-action",perform_action:e.startsWith("select.")?"select.select_option":"input_select.select_option",target:{entity_id:e},data:{option:a}}},...this.submenuSelect.options&&this.submenuSelect.options[a]})}this._generatedSubmenu=i}render(){return q` <advanced-camera-card-submenu
      .hass=${this.hass}
      .submenu=${this._generatedSubmenu}
    ></advanced-camera-card-submenu>`}};e([he({attribute:!1})],aC.prototype,"hass",void 0),e([he({attribute:!1})],aC.prototype,"submenuSelect",void 0),e([he({attribute:!1})],aC.prototype,"entityRegistryManager",void 0),e([me()],aC.prototype,"_optionTitles",void 0),aC=e([le("advanced-camera-card-submenu-select")],aC);let iC=class extends oe{constructor(){super(...arguments),this._controller=new eC(this)}set menuConfig(e){this._controller.setMenuConfig(e)}set buttons(e){this._controller.setButtons(e)}set expanded(e){this._controller.setExpanded(e)}toggleMenu(){this._controller.toggleExpanded()}_renderButton(e){if(!this.hass)return;if("custom:advanced-camera-card-menu-submenu"===e.type)return q` <advanced-camera-card-submenu
        .hass=${this.hass}
        .submenu=${e}
        @action=${e=>this._controller.actionHandler(e)}
      >
      </advanced-camera-card-submenu>`;if("custom:advanced-camera-card-menu-submenu-select"===e.type)return q` <advanced-camera-card-submenu-select
        .hass=${this.hass}
        .submenuSelect=${e}
        .entityRegistryManager=${this.entityRegistryManager}
        @action=${e=>this._controller.actionHandler(e)}
      >
      </advanced-camera-card-submenu-select>`;const t=this.hass&&"custom:advanced-camera-card-menu-state-icon"===e.type&&!e.title?Ib(this.hass,e.entity):e.title;return q` <ha-icon-button
      .actionHandler=${jf({hasHold:Ef(e.hold_action),hasDoubleClick:Ef(e.double_tap_action)})}
      .label=${t??""}
      @action=${t=>this._controller.actionHandler(t,e)}
    >
      <advanced-camera-card-icon
        ?allow-override-non-active-styles=${!0}
        style="${De(e.style||{})}"
        .hass=${this.hass}
        .icon=${{icon:e.icon,entity:e.entity,stateColor:e.state_color,fallback:"mdi:gesture-tap-button"}}
      ></advanced-camera-card-icon>
    </ha-icon-button>`}_renderPerInstanceStyle(){const e=this._controller.getMenuConfig();if(!e)return;const t=e.position,n=e.style,a=e.alignment,i=e=>`\n        var(--advanced-camera-card-menu-override-${e},\n        var(--advanced-camera-card-menu-position-${t}-alignment-${a}-style-${n}-${e},\n        var(--advanced-camera-card-menu-position-${t}-alignment-${a}-${e},\n        var(--advanced-camera-card-menu-position-${t}-${e},\n        var(--advanced-camera-card-menu-style-${n}-${e},\n        var(--advanced-camera-card-menu-alignment-${a}-${e},\n        var(--advanced-camera-card-menu-${e})))))))`;return q`<style>
      :host(${`[data-position='${t}'][data-style='${n}'][data-alignment='${a}']`+("hidden"===n?"[expanded]":"")}) {
        background: ${i("background")};

        ha-icon-button {
          color: ${i("button-inactive-color")};
          background: ${i("button-background")};
        }
      }
    </style>`}render(){const e=this._controller.getMenuConfig(),t=e?.style;if(!e||"none"===t)return;const n=this._controller.getButtons("matching"),a=this._controller.getButtons("opposing");return q` ${this._renderPerInstanceStyle()}
      <div
        class="matching"
        style="${De({flex:String(n.length)})}"
      >
        ${n.map((e=>this._renderButton(e)))}
      </div>
      <div
        class="opposing"
        style="${De({flex:String(a.length)})}"
      >
        ${a.map((e=>this._renderButton(e)))}
      </div>`}static get styles(){return s('ha-icon-button {\n  color: var(--advanced-camera-card-button-color);\n  background-color: var(--advanced-camera-card-button-background);\n  border-radius: 50%;\n  padding: 0px;\n  margin: 3px;\n  --ha-icon-display: block;\n  /* Buttons can always be clicked */\n  pointer-events: auto;\n}\n\n:host {\n  --advanced-camera-card-menu-button-size: 40px;\n  --mdc-icon-button-size: var(--advanced-camera-card-menu-button-size);\n  --mdc-icon-size: calc(var(--mdc-icon-button-size) / 2);\n  pointer-events: auto;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  overflow: visible;\n}\n\n:host([data-style=outside]) {\n  width: 100%;\n}\n\n/*******************************************************\n * Non-hover styles should not interact with the pointer\n *******************************************************/\n:host(:not([data-style*=hover])) {\n  pointer-events: none;\n}\n\n/***********************************\n * Aligned divs: matching & opposing\n ***********************************/\ndiv.matching,\ndiv.opposing {\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: row;\n  align-items: flex-start;\n  min-width: 0px;\n  min-height: 0px;\n}\n\ndiv.matching {\n  justify-content: flex-start;\n}\n\ndiv.opposing {\n  justify-content: flex-end;\n}\n\n/********************************************************\n * Hack: Ensure host & div expand for column flex layouts\n ********************************************************/\n:host(:not([data-style=outside])[data-position=left]) {\n  writing-mode: vertical-lr;\n}\n\n:host(:not([data-style=outside])[data-position=right]) {\n  writing-mode: vertical-rl;\n}\n\n:host(:not([data-style=outside])[data-style=overlay][data-position=left]) div > *,\n:host(:not([data-style=outside])[data-style=overlay][data-position=right]) div > *,\n:host(:not([data-style=outside])[data-style*=hover][data-position=left]) div > *,\n:host(:not([data-style=outside])[data-style*=hover][data-position=right]) div > *,\n:host(:not([data-style=outside])[data-style=hidden][data-position=left]) div > *,\n:host(:not([data-style=outside])[data-style=hidden][data-position=right]) div > * {\n  writing-mode: horizontal-tb;\n}\n\n/**********************\n * "Reverse" alignments\n **********************/\n:host(:not([data-style=outside])[data-position=left][data-alignment=bottom]),\n:host(:not([data-style=outside])[data-position=right][data-alignment=bottom]),\n:host([data-position=top][data-alignment=right]),\n:host([data-position=bottom][data-alignment=right]),\n:host(:not([data-style=outside])[data-position=left][data-alignment=bottom]) div,\n:host(:not([data-style=outside])[data-position=right][data-alignment=bottom]) div,\n:host([data-position=top][data-alignment=right]) div,\n:host([data-position=bottom][data-alignment=right]) div {\n  flex-direction: row-reverse;\n}\n\n/****************************\n * Wrap upwards on the bottom\n ****************************/\n:host(:not([data-style=outside])[data-position=bottom]) div {\n  flex-wrap: wrap-reverse;\n}\n\n/********************************************\n * Positioning for absolute based menu styles\n ********************************************/\n:host([data-style=overlay][data-position=top]),\n:host([data-style=overlay][data-position=bottom]),\n:host([data-style*=hover][data-position=top]),\n:host([data-style*=hover][data-position=bottom]),\n:host([data-style=hidden][data-position=top]),\n:host([data-style=hidden][data-position=bottom]) {\n  width: 100%;\n  height: auto;\n}\n\n:host([data-style=overlay][data-position=left]),\n:host([data-style=overlay][data-position=right]),\n:host([data-style*=hover][data-position=left]),\n:host([data-style*=hover][data-position=right]),\n:host([data-style=hidden][data-position=left]),\n:host([data-style=hidden][data-position=right]) {\n  width: auto;\n  height: 100%;\n}\n\n/************\n * Menu theme\n ************/\n:host([data-style=hidden]:not([expanded])) ha-icon-button {\n  background: var(--advanced-camera-card-menu-background);\n}\n\n:host ha-icon-button {\n  --state-unavailable-color: var(--advanced-camera-card-button-color);\n  --state-inactive-color: var(--advanced-camera-card-button-color);\n}')}};
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
function rC(e){return null==e}e([he({attribute:!1})],iC.prototype,"entityRegistryManager",void 0),e([he({attribute:!1})],iC.prototype,"hass",void 0),iC=e([le("advanced-camera-card-menu")],iC);var sC=function(e,t){var n,a="";for(n=0;n<t;n+=1)a+=e;return a},oC={isNothing:rC,isObject:function(e){return"object"==typeof e&&null!==e},toArray:function(e){return Array.isArray(e)?e:rC(e)?[]:[e]},repeat:sC,isNegativeZero:function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},extend:function(e,t){var n,a,i,r;if(t)for(n=0,a=(r=Object.keys(t)).length;n<a;n+=1)e[i=r[n]]=t[i];return e}};function cC(e,t){var n="",a=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+="\n\n"+e.mark.snippet),a+" "+n):a}function lC(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=cC(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}lC.prototype=Object.create(Error.prototype),lC.prototype.constructor=lC,lC.prototype.toString=function(e){return this.name+": "+cC(this,e)};var dC=lC;function uC(e,t,n,a,i){var r="",s="",o=Math.floor(i/2)-1;return a-t>o&&(t=a-o+(r=" ... ").length),n-a>o&&(n=a+o-(s=" ...").length),{str:r+e.slice(t,n).replace(/\t/g,"→")+s,pos:a-t+r.length}}function hC(e,t){return oC.repeat(" ",t-e.length)+e}var mC=function(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),"number"!=typeof t.indent&&(t.indent=1),"number"!=typeof t.linesBefore&&(t.linesBefore=3),"number"!=typeof t.linesAfter&&(t.linesAfter=2);for(var n,a=/\r?\n|\r|\0/g,i=[0],r=[],s=-1;n=a.exec(e.buffer);)r.push(n.index),i.push(n.index+n[0].length),e.position<=n.index&&s<0&&(s=i.length-2);s<0&&(s=i.length-1);var o,c,l="",d=Math.min(e.line+t.linesAfter,r.length).toString().length,u=t.maxLength-(t.indent+d+3);for(o=1;o<=t.linesBefore&&!(s-o<0);o++)c=uC(e.buffer,i[s-o],r[s-o],e.position-(i[s]-i[s-o]),u),l=oC.repeat(" ",t.indent)+hC((e.line-o+1).toString(),d)+" | "+c.str+"\n"+l;for(c=uC(e.buffer,i[s],r[s],e.position,u),l+=oC.repeat(" ",t.indent)+hC((e.line+1).toString(),d)+" | "+c.str+"\n",l+=oC.repeat("-",t.indent+d+3+c.pos)+"^\n",o=1;o<=t.linesAfter&&!(s+o>=r.length);o++)c=uC(e.buffer,i[s+o],r[s+o],e.position-(i[s]-i[s+o]),u),l+=oC.repeat(" ",t.indent)+hC((e.line+o+1).toString(),d)+" | "+c.str+"\n";return l.replace(/\n$/,"")},pC=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],gC=["scalar","sequence","mapping"];var fC=function(e,t){if(t=t||{},Object.keys(t).forEach((function(t){if(-1===pC.indexOf(t))throw new dC('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=function(e){var t={};return null!==e&&Object.keys(e).forEach((function(n){e[n].forEach((function(e){t[String(e)]=n}))})),t}(t.styleAliases||null),-1===gC.indexOf(this.kind))throw new dC('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')};function _C(e,t){var n=[];return e[t].forEach((function(e){var t=n.length;n.forEach((function(n,a){n.tag===e.tag&&n.kind===e.kind&&n.multi===e.multi&&(t=a)})),n[t]=e})),n}function vC(e){return this.extend(e)}vC.prototype.extend=function(e){var t=[],n=[];if(e instanceof fC)n.push(e);else if(Array.isArray(e))n=n.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new dC("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit))}t.forEach((function(e){if(!(e instanceof fC))throw new dC("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new dC("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new dC("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),n.forEach((function(e){if(!(e instanceof fC))throw new dC("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var a=Object.create(vC.prototype);return a.implicit=(this.implicit||[]).concat(t),a.explicit=(this.explicit||[]).concat(n),a.compiledImplicit=_C(a,"implicit"),a.compiledExplicit=_C(a,"explicit"),a.compiledTypeMap=function(){var e,t,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function a(e){e.multi?(n.multi[e.kind].push(e),n.multi.fallback.push(e)):n[e.kind][e.tag]=n.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(a);return n}(a.compiledImplicit,a.compiledExplicit),a};var yC=vC,bC=new fC("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),wC=new fC("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),xC=new fC("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}}),CC=new yC({explicit:[bC,wC,xC]});var MC=new fC("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});var SC=new fC("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function kC(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function $C(e){return 48<=e&&e<=55}function EC(e){return 48<=e&&e<=57}var AC=new fC("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n=e.length,a=0,i=!1;if(!n)return!1;if("-"!==(t=e[a])&&"+"!==t||(t=e[++a]),"0"===t){if(a+1===n)return!0;if("b"===(t=e[++a])){for(a++;a<n;a++)if("_"!==(t=e[a])){if("0"!==t&&"1"!==t)return!1;i=!0}return i&&"_"!==t}if("x"===t){for(a++;a<n;a++)if("_"!==(t=e[a])){if(!kC(e.charCodeAt(a)))return!1;i=!0}return i&&"_"!==t}if("o"===t){for(a++;a<n;a++)if("_"!==(t=e[a])){if(!$C(e.charCodeAt(a)))return!1;i=!0}return i&&"_"!==t}}if("_"===t)return!1;for(;a<n;a++)if("_"!==(t=e[a])){if(!EC(e.charCodeAt(a)))return!1;i=!0}return!(!i||"_"===t)},construct:function(e){var t,n=e,a=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(a=-1),t=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===t){if("b"===n[1])return a*parseInt(n.slice(2),2);if("x"===n[1])return a*parseInt(n.slice(2),16);if("o"===n[1])return a*parseInt(n.slice(2),8)}return a*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!oC.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),IC=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var TC=/^[-+]?[0-9]+e/;var zC=new fC("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!IC.test(e)||"_"===e[e.length-1])},construct:function(e){var t,n;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:n*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||oC.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(oC.isNegativeZero(e))return"-0.0";return n=e.toString(10),TC.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"}),jC=CC.extend({implicit:[MC,SC,AC,zC]}),OC=jC,DC=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),PC=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");var RC=new fC("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==DC.exec(e)||null!==PC.exec(e))},construct:function(e){var t,n,a,i,r,s,o,c,l=0,d=null;if(null===(t=DC.exec(e))&&(t=PC.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],a=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,a,i));if(r=+t[4],s=+t[5],o=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(d=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(d=-d)),c=new Date(Date.UTC(n,a,i,r,s,o,l)),d&&c.setTime(c.getTime()-d),c},instanceOf:Date,represent:function(e){return e.toISOString()}});var LC=new fC("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}}),NC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";var FC=new fC("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,a=0,i=e.length,r=NC;for(n=0;n<i;n++)if(!((t=r.indexOf(e.charAt(n)))>64)){if(t<0)return!1;a+=6}return a%8==0},construct:function(e){var t,n,a=e.replace(/[\r\n=]/g,""),i=a.length,r=NC,s=0,o=[];for(t=0;t<i;t++)t%4==0&&t&&(o.push(s>>16&255),o.push(s>>8&255),o.push(255&s)),s=s<<6|r.indexOf(a.charAt(t));return 0===(n=i%4*6)?(o.push(s>>16&255),o.push(s>>8&255),o.push(255&s)):18===n?(o.push(s>>10&255),o.push(s>>2&255)):12===n&&o.push(s>>4&255),new Uint8Array(o)},predicate:function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},represent:function(e){var t,n,a="",i=0,r=e.length,s=NC;for(t=0;t<r;t++)t%3==0&&t&&(a+=s[i>>18&63],a+=s[i>>12&63],a+=s[i>>6&63],a+=s[63&i]),i=(i<<8)+e[t];return 0===(n=r%3)?(a+=s[i>>18&63],a+=s[i>>12&63],a+=s[i>>6&63],a+=s[63&i]):2===n?(a+=s[i>>10&63],a+=s[i>>4&63],a+=s[i<<2&63],a+=s[64]):1===n&&(a+=s[i>>2&63],a+=s[i<<4&63],a+=s[64],a+=s[64]),a}}),VC=Object.prototype.hasOwnProperty,HC=Object.prototype.toString;var BC=new fC("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,a,i,r,s=[],o=e;for(t=0,n=o.length;t<n;t+=1){if(a=o[t],r=!1,"[object Object]"!==HC.call(a))return!1;for(i in a)if(VC.call(a,i)){if(r)return!1;r=!0}if(!r)return!1;if(-1!==s.indexOf(i))return!1;s.push(i)}return!0},construct:function(e){return null!==e?e:[]}}),qC=Object.prototype.toString;var UC=new fC("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,a,i,r,s=e;for(r=new Array(s.length),t=0,n=s.length;t<n;t+=1){if(a=s[t],"[object Object]"!==qC.call(a))return!1;if(1!==(i=Object.keys(a)).length)return!1;r[t]=[i[0],a[i[0]]]}return!0},construct:function(e){if(null===e)return[];var t,n,a,i,r,s=e;for(r=new Array(s.length),t=0,n=s.length;t<n;t+=1)a=s[t],i=Object.keys(a),r[t]=[i[0],a[i[0]]];return r}}),ZC=Object.prototype.hasOwnProperty;var WC=new fC("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,n=e;for(t in n)if(ZC.call(n,t)&&null!==n[t])return!1;return!0},construct:function(e){return null!==e?e:{}}}),QC=OC.extend({implicit:[RC,LC],explicit:[FC,BC,UC,WC]}),KC=Object.prototype.hasOwnProperty,YC=1,GC=2,XC=3,JC=4,eM=1,tM=2,nM=3,aM=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,iM=/[\x85\u2028\u2029]/,rM=/[,\[\]\{\}]/,sM=/^(?:!|!!|![a-z\-]+!)$/i,oM=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function cM(e){return Object.prototype.toString.call(e)}function lM(e){return 10===e||13===e}function dM(e){return 9===e||32===e}function uM(e){return 9===e||32===e||10===e||13===e}function hM(e){return 44===e||91===e||93===e||123===e||125===e}function mM(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function pM(e){return 120===e?2:117===e?4:85===e?8:0}function gM(e){return 48<=e&&e<=57?e-48:-1}function fM(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?" ":76===e?"\u2028":80===e?"\u2029":""}function _M(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var vM=new Array(256),yM=new Array(256),bM=0;bM<256;bM++)vM[bM]=fM(bM)?1:0,yM[bM]=fM(bM);function wM(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||QC,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function xM(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=mC(n),new dC(t,n)}function CM(e,t){throw xM(e,t)}function MM(e,t){e.onWarning&&e.onWarning.call(null,xM(e,t))}var SM={YAML:function(e,t,n){var a,i,r;null!==e.version&&CM(e,"duplication of %YAML directive"),1!==n.length&&CM(e,"YAML directive accepts exactly one argument"),null===(a=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&CM(e,"ill-formed argument of the YAML directive"),i=parseInt(a[1],10),r=parseInt(a[2],10),1!==i&&CM(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=r<2,1!==r&&2!==r&&MM(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var a,i;2!==n.length&&CM(e,"TAG directive accepts exactly two arguments"),a=n[0],i=n[1],sM.test(a)||CM(e,"ill-formed tag handle (first argument) of the TAG directive"),KC.call(e.tagMap,a)&&CM(e,'there is a previously declared suffix for "'+a+'" tag handle'),oM.test(i)||CM(e,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch(t){CM(e,"tag prefix is malformed: "+i)}e.tagMap[a]=i}};function kM(e,t,n,a){var i,r,s,o;if(t<n){if(o=e.input.slice(t,n),a)for(i=0,r=o.length;i<r;i+=1)9===(s=o.charCodeAt(i))||32<=s&&s<=1114111||CM(e,"expected valid JSON character");else aM.test(o)&&CM(e,"the stream contains non-printable characters");e.result+=o}}function $M(e,t,n,a){var i,r,s,o;for(oC.isObject(n)||CM(e,"cannot merge mappings; the provided source object is unacceptable"),s=0,o=(i=Object.keys(n)).length;s<o;s+=1)r=i[s],KC.call(t,r)||(t[r]=n[r],a[r]=!0)}function EM(e,t,n,a,i,r,s,o,c){var l,d;if(Array.isArray(i))for(l=0,d=(i=Array.prototype.slice.call(i)).length;l<d;l+=1)Array.isArray(i[l])&&CM(e,"nested arrays are not supported inside keys"),"object"==typeof i&&"[object Object]"===cM(i[l])&&(i[l]="[object Object]");if("object"==typeof i&&"[object Object]"===cM(i)&&(i="[object Object]"),i=String(i),null===t&&(t={}),"tag:yaml.org,2002:merge"===a)if(Array.isArray(r))for(l=0,d=r.length;l<d;l+=1)$M(e,t,r[l],n);else $M(e,t,r,n);else e.json||KC.call(n,i)||!KC.call(t,i)||(e.line=s||e.line,e.lineStart=o||e.lineStart,e.position=c||e.position,CM(e,"duplicated mapping key")),"__proto__"===i?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:r}):t[i]=r,delete n[i];return t}function AM(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):CM(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function IM(e,t,n){for(var a=0,i=e.input.charCodeAt(e.position);0!==i;){for(;dM(i);)9===i&&-1===e.firstTabInLine&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&35===i)do{i=e.input.charCodeAt(++e.position)}while(10!==i&&13!==i&&0!==i);if(!lM(i))break;for(AM(e),i=e.input.charCodeAt(e.position),a++,e.lineIndent=0;32===i;)e.lineIndent++,i=e.input.charCodeAt(++e.position)}return-1!==n&&0!==a&&e.lineIndent<n&&MM(e,"deficient indentation"),a}function TM(e){var t,n=e.position;return!(45!==(t=e.input.charCodeAt(n))&&46!==t||t!==e.input.charCodeAt(n+1)||t!==e.input.charCodeAt(n+2)||(n+=3,0!==(t=e.input.charCodeAt(n))&&!uM(t)))}function zM(e,t){1===t?e.result+=" ":t>1&&(e.result+=oC.repeat("\n",t-1))}function jM(e,t){var n,a,i=e.tag,r=e.anchor,s=[],o=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=s),a=e.input.charCodeAt(e.position);0!==a&&(-1!==e.firstTabInLine&&(e.position=e.firstTabInLine,CM(e,"tab characters must not be used in indentation")),45===a)&&uM(e.input.charCodeAt(e.position+1));)if(o=!0,e.position++,IM(e,!0,-1)&&e.lineIndent<=t)s.push(null),a=e.input.charCodeAt(e.position);else if(n=e.line,PM(e,t,XC,!1,!0),s.push(e.result),IM(e,!0,-1),a=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==a)CM(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!o&&(e.tag=i,e.anchor=r,e.kind="sequence",e.result=s,!0)}function OM(e){var t,n,a,i,r=!1,s=!1;if(33!==(i=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&CM(e,"duplication of a tag property"),60===(i=e.input.charCodeAt(++e.position))?(r=!0,i=e.input.charCodeAt(++e.position)):33===i?(s=!0,n="!!",i=e.input.charCodeAt(++e.position)):n="!",t=e.position,r){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&62!==i);e.position<e.length?(a=e.input.slice(t,e.position),i=e.input.charCodeAt(++e.position)):CM(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==i&&!uM(i);)33===i&&(s?CM(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),sM.test(n)||CM(e,"named tag handle cannot contain such characters"),s=!0,t=e.position+1)),i=e.input.charCodeAt(++e.position);a=e.input.slice(t,e.position),rM.test(a)&&CM(e,"tag suffix cannot contain flow indicator characters")}a&&!oM.test(a)&&CM(e,"tag name cannot contain such characters: "+a);try{a=decodeURIComponent(a)}catch(t){CM(e,"tag name is malformed: "+a)}return r?e.tag=a:KC.call(e.tagMap,n)?e.tag=e.tagMap[n]+a:"!"===n?e.tag="!"+a:"!!"===n?e.tag="tag:yaml.org,2002:"+a:CM(e,'undeclared tag handle "'+n+'"'),!0}function DM(e){var t,n;if(38!==(n=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&CM(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!uM(n)&&!hM(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&CM(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function PM(e,t,n,a,i){var r,s,o,c,l,d,u,h,m,p=1,g=!1,f=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,r=s=o=JC===n||XC===n,a&&IM(e,!0,-1)&&(g=!0,e.lineIndent>t?p=1:e.lineIndent===t?p=0:e.lineIndent<t&&(p=-1)),1===p)for(;OM(e)||DM(e);)IM(e,!0,-1)?(g=!0,o=r,e.lineIndent>t?p=1:e.lineIndent===t?p=0:e.lineIndent<t&&(p=-1)):o=!1;if(o&&(o=g||i),1!==p&&JC!==n||(h=YC===n||GC===n?t:t+1,m=e.position-e.lineStart,1===p?o&&(jM(e,m)||function(e,t,n){var a,i,r,s,o,c,l,d=e.tag,u=e.anchor,h={},m=Object.create(null),p=null,g=null,f=null,_=!1,v=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=h),l=e.input.charCodeAt(e.position);0!==l;){if(_||-1===e.firstTabInLine||(e.position=e.firstTabInLine,CM(e,"tab characters must not be used in indentation")),a=e.input.charCodeAt(e.position+1),r=e.line,63!==l&&58!==l||!uM(a)){if(s=e.line,o=e.lineStart,c=e.position,!PM(e,n,GC,!1,!0))break;if(e.line===r){for(l=e.input.charCodeAt(e.position);dM(l);)l=e.input.charCodeAt(++e.position);if(58===l)uM(l=e.input.charCodeAt(++e.position))||CM(e,"a whitespace character is expected after the key-value separator within a block mapping"),_&&(EM(e,h,m,p,g,null,s,o,c),p=g=f=null),v=!0,_=!1,i=!1,p=e.tag,g=e.result;else{if(!v)return e.tag=d,e.anchor=u,!0;CM(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!v)return e.tag=d,e.anchor=u,!0;CM(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===l?(_&&(EM(e,h,m,p,g,null,s,o,c),p=g=f=null),v=!0,_=!0,i=!0):_?(_=!1,i=!0):CM(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,l=a;if((e.line===r||e.lineIndent>t)&&(_&&(s=e.line,o=e.lineStart,c=e.position),PM(e,t,JC,!0,i)&&(_?g=e.result:f=e.result),_||(EM(e,h,m,p,g,f,s,o,c),p=g=f=null),IM(e,!0,-1),l=e.input.charCodeAt(e.position)),(e.line===r||e.lineIndent>t)&&0!==l)CM(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return _&&EM(e,h,m,p,g,null,s,o,c),v&&(e.tag=d,e.anchor=u,e.kind="mapping",e.result=h),v}(e,m,h))||function(e,t){var n,a,i,r,s,o,c,l,d,u,h,m,p=!0,g=e.tag,f=e.anchor,_=Object.create(null);if(91===(m=e.input.charCodeAt(e.position)))s=93,l=!1,r=[];else{if(123!==m)return!1;s=125,l=!0,r={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=r),m=e.input.charCodeAt(++e.position);0!==m;){if(IM(e,!0,t),(m=e.input.charCodeAt(e.position))===s)return e.position++,e.tag=g,e.anchor=f,e.kind=l?"mapping":"sequence",e.result=r,!0;p?44===m&&CM(e,"expected the node content, but found ','"):CM(e,"missed comma between flow collection entries"),h=null,o=c=!1,63===m&&uM(e.input.charCodeAt(e.position+1))&&(o=c=!0,e.position++,IM(e,!0,t)),n=e.line,a=e.lineStart,i=e.position,PM(e,t,YC,!1,!0),u=e.tag,d=e.result,IM(e,!0,t),m=e.input.charCodeAt(e.position),!c&&e.line!==n||58!==m||(o=!0,m=e.input.charCodeAt(++e.position),IM(e,!0,t),PM(e,t,YC,!1,!0),h=e.result),l?EM(e,r,_,u,d,h,n,a,i):o?r.push(EM(e,null,_,u,d,h,n,a,i)):r.push(d),IM(e,!0,t),44===(m=e.input.charCodeAt(e.position))?(p=!0,m=e.input.charCodeAt(++e.position)):p=!1}CM(e,"unexpected end of the stream within a flow collection")}(e,h)?f=!0:(s&&function(e,t){var n,a,i,r,s=eM,o=!1,c=!1,l=t,d=0,u=!1;if(124===(r=e.input.charCodeAt(e.position)))a=!1;else{if(62!==r)return!1;a=!0}for(e.kind="scalar",e.result="";0!==r;)if(43===(r=e.input.charCodeAt(++e.position))||45===r)eM===s?s=43===r?nM:tM:CM(e,"repeat of a chomping mode identifier");else{if(!((i=gM(r))>=0))break;0===i?CM(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?CM(e,"repeat of an indentation width identifier"):(l=t+i-1,c=!0)}if(dM(r)){do{r=e.input.charCodeAt(++e.position)}while(dM(r));if(35===r)do{r=e.input.charCodeAt(++e.position)}while(!lM(r)&&0!==r)}for(;0!==r;){for(AM(e),e.lineIndent=0,r=e.input.charCodeAt(e.position);(!c||e.lineIndent<l)&&32===r;)e.lineIndent++,r=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>l&&(l=e.lineIndent),lM(r))d++;else{if(e.lineIndent<l){s===nM?e.result+=oC.repeat("\n",o?1+d:d):s===eM&&o&&(e.result+="\n");break}for(a?dM(r)?(u=!0,e.result+=oC.repeat("\n",o?1+d:d)):u?(u=!1,e.result+=oC.repeat("\n",d+1)):0===d?o&&(e.result+=" "):e.result+=oC.repeat("\n",d):e.result+=oC.repeat("\n",o?1+d:d),o=!0,c=!0,d=0,n=e.position;!lM(r)&&0!==r;)r=e.input.charCodeAt(++e.position);kM(e,n,e.position,!1)}}return!0}(e,h)||function(e,t){var n,a,i;if(39!==(n=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,a=i=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(kM(e,a,e.position,!0),39!==(n=e.input.charCodeAt(++e.position)))return!0;a=e.position,e.position++,i=e.position}else lM(n)?(kM(e,a,i,!0),zM(e,IM(e,!1,t)),a=i=e.position):e.position===e.lineStart&&TM(e)?CM(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);CM(e,"unexpected end of the stream within a single quoted scalar")}(e,h)||function(e,t){var n,a,i,r,s,o;if(34!==(o=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=a=e.position;0!==(o=e.input.charCodeAt(e.position));){if(34===o)return kM(e,n,e.position,!0),e.position++,!0;if(92===o){if(kM(e,n,e.position,!0),lM(o=e.input.charCodeAt(++e.position)))IM(e,!1,t);else if(o<256&&vM[o])e.result+=yM[o],e.position++;else if((s=pM(o))>0){for(i=s,r=0;i>0;i--)(s=mM(o=e.input.charCodeAt(++e.position)))>=0?r=(r<<4)+s:CM(e,"expected hexadecimal character");e.result+=_M(r),e.position++}else CM(e,"unknown escape sequence");n=a=e.position}else lM(o)?(kM(e,n,a,!0),zM(e,IM(e,!1,t)),n=a=e.position):e.position===e.lineStart&&TM(e)?CM(e,"unexpected end of the document within a double quoted scalar"):(e.position++,a=e.position)}CM(e,"unexpected end of the stream within a double quoted scalar")}(e,h)?f=!0:!function(e){var t,n,a;if(42!==(a=e.input.charCodeAt(e.position)))return!1;for(a=e.input.charCodeAt(++e.position),t=e.position;0!==a&&!uM(a)&&!hM(a);)a=e.input.charCodeAt(++e.position);return e.position===t&&CM(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),KC.call(e.anchorMap,n)||CM(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],IM(e,!0,-1),!0}(e)?function(e,t,n){var a,i,r,s,o,c,l,d,u=e.kind,h=e.result;if(uM(d=e.input.charCodeAt(e.position))||hM(d)||35===d||38===d||42===d||33===d||124===d||62===d||39===d||34===d||37===d||64===d||96===d)return!1;if((63===d||45===d)&&(uM(a=e.input.charCodeAt(e.position+1))||n&&hM(a)))return!1;for(e.kind="scalar",e.result="",i=r=e.position,s=!1;0!==d;){if(58===d){if(uM(a=e.input.charCodeAt(e.position+1))||n&&hM(a))break}else if(35===d){if(uM(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&TM(e)||n&&hM(d))break;if(lM(d)){if(o=e.line,c=e.lineStart,l=e.lineIndent,IM(e,!1,-1),e.lineIndent>=t){s=!0,d=e.input.charCodeAt(e.position);continue}e.position=r,e.line=o,e.lineStart=c,e.lineIndent=l;break}}s&&(kM(e,i,r,!1),zM(e,e.line-o),i=r=e.position,s=!1),dM(d)||(r=e.position+1),d=e.input.charCodeAt(++e.position)}return kM(e,i,r,!1),!!e.result||(e.kind=u,e.result=h,!1)}(e,h,YC===n)&&(f=!0,null===e.tag&&(e.tag="?")):(f=!0,null===e.tag&&null===e.anchor||CM(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===p&&(f=o&&jM(e,m))),null===e.tag)null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);else if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&CM(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),c=0,l=e.implicitTypes.length;c<l;c+=1)if((u=e.implicitTypes[c]).resolve(e.result)){e.result=u.construct(e.result),e.tag=u.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else if("!"!==e.tag){if(KC.call(e.typeMap[e.kind||"fallback"],e.tag))u=e.typeMap[e.kind||"fallback"][e.tag];else for(u=null,c=0,l=(d=e.typeMap.multi[e.kind||"fallback"]).length;c<l;c+=1)if(e.tag.slice(0,d[c].tag.length)===d[c].tag){u=d[c];break}u||CM(e,"unknown tag !<"+e.tag+">"),null!==e.result&&u.kind!==e.kind&&CM(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+u.kind+'", not "'+e.kind+'"'),u.resolve(e.result,e.tag)?(e.result=u.construct(e.result,e.tag),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):CM(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||f}function RM(e){var t,n,a,i,r=e.position,s=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);0!==(i=e.input.charCodeAt(e.position))&&(IM(e,!0,-1),i=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==i));){for(s=!0,i=e.input.charCodeAt(++e.position),t=e.position;0!==i&&!uM(i);)i=e.input.charCodeAt(++e.position);for(a=[],(n=e.input.slice(t,e.position)).length<1&&CM(e,"directive name must not be less than one character in length");0!==i;){for(;dM(i);)i=e.input.charCodeAt(++e.position);if(35===i){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&!lM(i));break}if(lM(i))break;for(t=e.position;0!==i&&!uM(i);)i=e.input.charCodeAt(++e.position);a.push(e.input.slice(t,e.position))}0!==i&&AM(e),KC.call(SM,n)?SM[n](e,n,a):MM(e,'unknown document directive "'+n+'"')}IM(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,IM(e,!0,-1)):s&&CM(e,"directives end mark is expected"),PM(e,e.lineIndent-1,JC,!1,!0),IM(e,!0,-1),e.checkLineBreaks&&iM.test(e.input.slice(r,e.position))&&MM(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&TM(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,IM(e,!0,-1)):e.position<e.length-1&&CM(e,"end of the stream or a document separator is expected")}function LM(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new wM(e,t),a=e.indexOf("\0");for(-1!==a&&(n.position=a,CM(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)RM(n);return n.documents}var NM={loadAll:function(e,t,n){null!==t&&"object"==typeof t&&void 0===n&&(n=t,t=null);var a=LM(e,n);if("function"!=typeof t)return a;for(var i=0,r=a.length;i<r;i+=1)t(a[i])},load:function(e,t){var n=LM(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new dC("expected a single document in the stream, but found more")}}},FM=Object.prototype.toString,VM=Object.prototype.hasOwnProperty,HM=65279,BM=9,qM=10,UM=13,ZM=32,WM=33,QM=34,KM=35,YM=37,GM=38,XM=39,JM=42,eS=44,tS=45,nS=58,aS=61,iS=62,rS=63,sS=64,oS=91,cS=93,lS=96,dS=123,uS=124,hS=125,mS={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},pS=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],gS=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function fS(e){var t,n,a;if(t=e.toString(16).toUpperCase(),e<=255)n="x",a=2;else if(e<=65535)n="u",a=4;else{if(!(e<=4294967295))throw new dC("code point within a string may not be greater than 0xFFFFFFFF");n="U",a=8}return"\\"+n+oC.repeat("0",a-t.length)+t}var _S=1,vS=2;function yS(e){this.schema=e.schema||QC,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=oC.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var n,a,i,r,s,o,c;if(null===t)return{};for(n={},i=0,r=(a=Object.keys(t)).length;i<r;i+=1)s=a[i],o=String(t[s]),"!!"===s.slice(0,2)&&(s="tag:yaml.org,2002:"+s.slice(2)),(c=e.compiledTypeMap.fallback[s])&&VM.call(c.styleAliases,o)&&(o=c.styleAliases[o]),n[s]=o;return n}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType='"'===e.quotingType?vS:_S,this.forceQuotes=e.forceQuotes||!1,this.replacer="function"==typeof e.replacer?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function bS(e,t){for(var n,a=oC.repeat(" ",t),i=0,r=-1,s="",o=e.length;i<o;)-1===(r=e.indexOf("\n",i))?(n=e.slice(i),i=o):(n=e.slice(i,r+1),i=r+1),n.length&&"\n"!==n&&(s+=a),s+=n;return s}function wS(e,t){return"\n"+oC.repeat(" ",e.indent*t)}function xS(e){return e===ZM||e===BM}function CS(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&e!==HM||65536<=e&&e<=1114111}function MS(e){return CS(e)&&e!==HM&&e!==UM&&e!==qM}function SS(e,t,n){var a=MS(e),i=a&&!xS(e);return(n?a:a&&e!==eS&&e!==oS&&e!==cS&&e!==dS&&e!==hS)&&e!==KM&&!(t===nS&&!i)||MS(t)&&!xS(t)&&e===KM||t===nS&&i}function kS(e,t){var n,a=e.charCodeAt(t);return a>=55296&&a<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(a-55296)+n-56320+65536:a}function $S(e){return/^\n* /.test(e)}var ES=1,AS=2,IS=3,TS=4,zS=5;function jS(e,t,n,a,i,r,s,o){var c,l=0,d=null,u=!1,h=!1,m=-1!==a,p=-1,g=function(e){return CS(e)&&e!==HM&&!xS(e)&&e!==tS&&e!==rS&&e!==nS&&e!==eS&&e!==oS&&e!==cS&&e!==dS&&e!==hS&&e!==KM&&e!==GM&&e!==JM&&e!==WM&&e!==uS&&e!==aS&&e!==iS&&e!==XM&&e!==QM&&e!==YM&&e!==sS&&e!==lS}(kS(e,0))&&function(e){return!xS(e)&&e!==nS}(kS(e,e.length-1));if(t||s)for(c=0;c<e.length;l>=65536?c+=2:c++){if(!CS(l=kS(e,c)))return zS;g=g&&SS(l,d,o),d=l}else{for(c=0;c<e.length;l>=65536?c+=2:c++){if((l=kS(e,c))===qM)u=!0,m&&(h=h||c-p-1>a&&" "!==e[p+1],p=c);else if(!CS(l))return zS;g=g&&SS(l,d,o),d=l}h=h||m&&c-p-1>a&&" "!==e[p+1]}return u||h?n>9&&$S(e)?zS:s?r===vS?zS:AS:h?TS:IS:!g||s||i(e)?r===vS?zS:AS:ES}function OS(e,t,n,a,i){e.dump=function(){if(0===t.length)return e.quotingType===vS?'""':"''";if(!e.noCompatMode&&(-1!==pS.indexOf(t)||gS.test(t)))return e.quotingType===vS?'"'+t+'"':"'"+t+"'";var r=e.indent*Math.max(1,n),s=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-r),o=a||e.flowLevel>-1&&n>=e.flowLevel;switch(jS(t,o,e.indent,s,(function(t){return function(e,t){var n,a;for(n=0,a=e.implicitTypes.length;n<a;n+=1)if(e.implicitTypes[n].resolve(t))return!0;return!1}(e,t)}),e.quotingType,e.forceQuotes&&!a,i)){case ES:return t;case AS:return"'"+t.replace(/'/g,"''")+"'";case IS:return"|"+DS(t,e.indent)+PS(bS(t,r));case TS:return">"+DS(t,e.indent)+PS(bS(function(e,t){var n,a,i=/(\n+)([^\n]*)/g,r=(o=e.indexOf("\n"),o=-1!==o?o:e.length,i.lastIndex=o,RS(e.slice(0,o),t)),s="\n"===e[0]||" "===e[0];var o;for(;a=i.exec(e);){var c=a[1],l=a[2];n=" "===l[0],r+=c+(s||n||""===l?"":"\n")+RS(l,t),s=n}return r}(t,s),r));case zS:return'"'+function(e){for(var t,n="",a=0,i=0;i<e.length;a>=65536?i+=2:i++)a=kS(e,i),!(t=mS[a])&&CS(a)?(n+=e[i],a>=65536&&(n+=e[i+1])):n+=t||fS(a);return n}(t)+'"';default:throw new dC("impossible error: invalid scalar style")}}()}function DS(e,t){var n=$S(e)?String(t):"",a="\n"===e[e.length-1];return n+(a&&("\n"===e[e.length-2]||"\n"===e)?"+":a?"":"-")+"\n"}function PS(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function RS(e,t){if(""===e||" "===e[0])return e;for(var n,a,i=/ [^ ]/g,r=0,s=0,o=0,c="";n=i.exec(e);)(o=n.index)-r>t&&(a=s>r?s:o,c+="\n"+e.slice(r,a),r=a+1),s=o;return c+="\n",e.length-r>t&&s>r?c+=e.slice(r,s)+"\n"+e.slice(s+1):c+=e.slice(r),c.slice(1)}function LS(e,t,n,a){var i,r,s,o="",c=e.tag;for(i=0,r=n.length;i<r;i+=1)s=n[i],e.replacer&&(s=e.replacer.call(n,String(i),s)),(FS(e,t+1,s,!0,!0,!1,!0)||void 0===s&&FS(e,t+1,null,!0,!0,!1,!0))&&(a&&""===o||(o+=wS(e,t)),e.dump&&qM===e.dump.charCodeAt(0)?o+="-":o+="- ",o+=e.dump);e.tag=c,e.dump=o||"[]"}function NS(e,t,n){var a,i,r,s,o,c;for(r=0,s=(i=n?e.explicitTypes:e.implicitTypes).length;r<s;r+=1)if(((o=i[r]).instanceOf||o.predicate)&&(!o.instanceOf||"object"==typeof t&&t instanceof o.instanceOf)&&(!o.predicate||o.predicate(t))){if(n?o.multi&&o.representName?e.tag=o.representName(t):e.tag=o.tag:e.tag="?",o.represent){if(c=e.styleMap[o.tag]||o.defaultStyle,"[object Function]"===FM.call(o.represent))a=o.represent(t,c);else{if(!VM.call(o.represent,c))throw new dC("!<"+o.tag+'> tag resolver accepts not "'+c+'" style');a=o.represent[c](t,c)}e.dump=a}return!0}return!1}function FS(e,t,n,a,i,r,s){e.tag=null,e.dump=n,NS(e,n,!1)||NS(e,n,!0);var o,c=FM.call(e.dump),l=a;a&&(a=e.flowLevel<0||e.flowLevel>t);var d,u,h="[object Object]"===c||"[object Array]"===c;if(h&&(u=-1!==(d=e.duplicates.indexOf(n))),(null!==e.tag&&"?"!==e.tag||u||2!==e.indent&&t>0)&&(i=!1),u&&e.usedDuplicates[d])e.dump="*ref_"+d;else{if(h&&u&&!e.usedDuplicates[d]&&(e.usedDuplicates[d]=!0),"[object Object]"===c)a&&0!==Object.keys(e.dump).length?(!function(e,t,n,a){var i,r,s,o,c,l,d="",u=e.tag,h=Object.keys(n);if(!0===e.sortKeys)h.sort();else if("function"==typeof e.sortKeys)h.sort(e.sortKeys);else if(e.sortKeys)throw new dC("sortKeys must be a boolean or a function");for(i=0,r=h.length;i<r;i+=1)l="",a&&""===d||(l+=wS(e,t)),o=n[s=h[i]],e.replacer&&(o=e.replacer.call(n,s,o)),FS(e,t+1,s,!0,!0,!0)&&((c=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&qM===e.dump.charCodeAt(0)?l+="?":l+="? "),l+=e.dump,c&&(l+=wS(e,t)),FS(e,t+1,o,!0,c)&&(e.dump&&qM===e.dump.charCodeAt(0)?l+=":":l+=": ",d+=l+=e.dump));e.tag=u,e.dump=d||"{}"}(e,t,e.dump,i),u&&(e.dump="&ref_"+d+e.dump)):(!function(e,t,n){var a,i,r,s,o,c="",l=e.tag,d=Object.keys(n);for(a=0,i=d.length;a<i;a+=1)o="",""!==c&&(o+=", "),e.condenseFlow&&(o+='"'),s=n[r=d[a]],e.replacer&&(s=e.replacer.call(n,r,s)),FS(e,t,r,!1,!1)&&(e.dump.length>1024&&(o+="? "),o+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),FS(e,t,s,!1,!1)&&(c+=o+=e.dump));e.tag=l,e.dump="{"+c+"}"}(e,t,e.dump),u&&(e.dump="&ref_"+d+" "+e.dump));else if("[object Array]"===c)a&&0!==e.dump.length?(e.noArrayIndent&&!s&&t>0?LS(e,t-1,e.dump,i):LS(e,t,e.dump,i),u&&(e.dump="&ref_"+d+e.dump)):(!function(e,t,n){var a,i,r,s="",o=e.tag;for(a=0,i=n.length;a<i;a+=1)r=n[a],e.replacer&&(r=e.replacer.call(n,String(a),r)),(FS(e,t,r,!1,!1)||void 0===r&&FS(e,t,null,!1,!1))&&(""!==s&&(s+=","+(e.condenseFlow?"":" ")),s+=e.dump);e.tag=o,e.dump="["+s+"]"}(e,t,e.dump),u&&(e.dump="&ref_"+d+" "+e.dump));else{if("[object String]"!==c){if("[object Undefined]"===c)return!1;if(e.skipInvalid)return!1;throw new dC("unacceptable kind of an object to dump "+c)}"?"!==e.tag&&OS(e,e.dump,t,r,l)}null!==e.tag&&"?"!==e.tag&&(o=encodeURI("!"===e.tag[0]?e.tag.slice(1):e.tag).replace(/!/g,"%21"),o="!"===e.tag[0]?"!"+o:"tag:yaml.org,2002:"===o.slice(0,18)?"!!"+o.slice(18):"!<"+o+">",e.dump=o+" "+e.dump)}return!0}function VS(e,t){var n,a,i=[],r=[];for(HS(e,i,r),n=0,a=r.length;n<a;n+=1)t.duplicates.push(i[r[n]]);t.usedDuplicates=new Array(a)}function HS(e,t,n){var a,i,r;if(null!==e&&"object"==typeof e)if(-1!==(i=t.indexOf(e)))-1===n.indexOf(i)&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,r=e.length;i<r;i+=1)HS(e[i],t,n);else for(i=0,r=(a=Object.keys(e)).length;i<r;i+=1)HS(e[a[i]],t,n)}function BS(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var qS={Type:fC,Schema:yC,FAILSAFE_SCHEMA:CC,JSON_SCHEMA:jC,CORE_SCHEMA:OC,DEFAULT_SCHEMA:QC,load:NM.load,loadAll:NM.loadAll,dump:{dump:function(e,t){var n=new yS(t=t||{});n.noRefs||VS(e,n);var a=e;return n.replacer&&(a=n.replacer.call({"":a},"",a)),FS(n,0,a,!0,!0)?n.dump+"\n":""}}.dump,YAMLException:dC,types:{binary:FC,float:zC,map:xC,null:MC,pairs:UC,set:WC,timestamp:RC,bool:SC,int:AC,merge:LC,omap:BC,seq:wC,str:bC},safeLoad:BS("safeLoad","load"),safeLoadAll:BS("safeLoadAll","loadAll"),safeDump:BS("safeDump","dump")};class US{getMessageString(e){return e.message+(e.context&&"string"==typeof e.context?": "+e.context:"")}getIcon(e){return e.icon?e.icon:"error"===e.type?"mdi:alert-circle":"mdi:information-outline"}shouldShowTroubleshootingURL(e){return"error"===e.type}getTroubleshootingURL(e){return e.troubleshootingURL??ba}getContextStrings(e){return Array.isArray(e.context)?e.context.map((e=>qS.dump(e))):"object"==typeof e.context?[qS.dump(e.context)]:"string"==typeof e.context?[e.context]:[]}}var ZS='.dotdotdot:after {\n  animation: dots 2s linear infinite;\n  content: "";\n  display: inline-block;\n  width: 3em;\n}\n@keyframes dots {\n  0%, 20% {\n    content: ".";\n  }\n  40% {\n    content: "..";\n  }\n  60% {\n    content: "...";\n  }\n  90%, 100% {\n    content: "";\n  }\n}\n\n:host {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  user-select: text;\n  -webkit-user-select: text;\n}\n\n:host(:not([overlay])) {\n  height: 100%;\n  width: 100%;\n  background: var(--advanced-camera-card-message-background);\n  color: var(--advanced-camera-card-message-color);\n}\n\n:host([overlay]) {\n  position: absolute;\n  inset: 5%;\n  background: var(--advanced-camera-card-message-overlay-background);\n  color: var(--advanced-camera-card-message-overlay-color);\n}\n\ndiv.wrapper {\n  height: 100%;\n}\n\ndiv.message {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  box-sizing: border-box;\n  height: 100%;\n}\n\ndiv.message.padded {\n  padding: 20px;\n}\n\ndiv.message div.contents {\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n  margin-top: auto;\n  margin-bottom: auto;\n  min-width: 0;\n}\n\ndiv.message div.icon {\n  padding: 10px;\n}\n\n.vertical {\n  flex-direction: column;\n}\n\na {\n  word-break: break-word;\n}\n\n:host(:not([overlay])) a {\n  color: var(--advanced-camera-card-message-color);\n}\n\n:host([overlay]) a {\n  color: var(--advanced-camera-card-message-overlay-color);\n}\n\n.message pre {\n  margin-top: 20px;\n  overflow-x: auto;\n  border: 1px dotted var(--advanced-camera-card-divider-color);\n  padding: 1em;\n}';function WS(e,t){return q` <advanced-camera-card-message
    .message=${e}
    ?overlay=${!!t?.overlay}
  ></advanced-camera-card-message>`}let QS=class extends oe{constructor(){super(...arguments),this.overlay=!1,this._controller=new US}render(){if(!this.message)return;const e=q`
      ${this._controller.getMessageString(this.message)}
      ${this._controller.shouldShowTroubleshootingURL(this.message)?q`.
            <a href="${this._controller.getTroubleshootingURL(this.message)}"
              >${K_("error.troubleshooting")}</a
            >`:""}
    `,t=this._controller.getIcon(this.message),n={dotdotdot:!!this.message?.dotdotdot};return q` <div class="wrapper">
      <div class="message padded">
        <div class="icon">
          <advanced-camera-card-icon
            .icon="${{icon:t}}"
          ></advanced-camera-card-icon>
        </div>
        <div class="contents">
          <span class="${_e(n)}">${e}</span>
          ${this._controller.getContextStrings(this.message).map((e=>q`<pre>${e}</pre>`))}
        </div>
      </div>
    </div>`}static get styles(){return s(ZS)}};e([he({attribute:!1})],QS.prototype,"message",void 0),e([he({attribute:!0,type:Boolean})],QS.prototype,"overlay",void 0),QS=e([le("advanced-camera-card-message")],QS);let KS=class extends oe{render(){return q`
      <slot name="top"></slot>
      <slot name="left"></slot>
      <slot name="right"></slot>
      <slot name="bottom"></slot>
    `}static get styles(){return s("ha-icon-button {\n  color: var(--advanced-camera-card-button-color);\n  background-color: var(--advanced-camera-card-button-background);\n  border-radius: 50%;\n  padding: 0px;\n  margin: 3px;\n  --ha-icon-display: block;\n  /* Buttons can always be clicked */\n  pointer-events: auto;\n}\n\n:host {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n\nslot {\n  position: absolute;\n  display: flex;\n}\n\n/***************\n * Slot position\n ***************/\nslot[name=top] {\n  top: 0px;\n}\n\nslot[name=bottom] {\n  bottom: 0px;\n}\n\nslot[name=left] {\n  left: 0px;\n}\n\nslot[name=right] {\n  right: 0px;\n}\n\n/***********\n * Slot size\n ***********/\nslot[name=top],\nslot[name=bottom] {\n  width: 100%;\n  flex-direction: column;\n}\n\nslot[name=left],\nslot[name=right] {\n  height: 100%;\n  flex-direction: row;\n}\n\nslot[name=top],\nslot[name=left] {\n  justify-content: flex-start;\n}\n\nslot[name=bottom],\nslot[name=right] {\n  justify-content: flex-end;\n}\n\n/*******************************\n * Match rounded corners to card\n *******************************/\n::slotted([slot=top]:first-child),\n::slotted([slot=left]:first-child) {\n  border-top-left-radius: var(--ha-card-border-radius, 4px);\n}\n\n::slotted([slot=top]:first-child),\n::slotted([slot=right]:first-child) {\n  border-top-right-radius: var(--ha-card-border-radius, 4px);\n}\n\n::slotted([slot=bottom]:last-child),\n::slotted([slot=left]:last-child) {\n  border-bottom-left-radius: var(--ha-card-border-radius, 4px);\n}\n\n::slotted([slot=bottom]:last-child),\n::slotted([slot=right]:last-child) {\n  border-bottom-right-radius: var(--ha-card-border-radius, 4px);\n}")}};KS=e([le("advanced-camera-card-overlay")],KS);class YS{constructor(e){this._config=null,this._popupTimer=new If,this._items=[],this._host=e}getRenderItems(){return this._items}setItems(e){const t=e.filter((e=>!!e.exclusive)),n=Dv(t.length?t:e,(e=>e.priority??50),"desc"),a=this._getSufficientValues(this._items),i=this._getSufficientValues(n);this._items=n,"popup"!==this._config?.style||Bv(a,i)||(this._show(),this._popupTimer.start(this._config.popup_seconds,(()=>this._hide()))),this._host.requestUpdate()}setConfig(e){this._config=e,this._host.style.setProperty("--advanced-camera-card-status-bar-height",`${e.height}px`),this._host.setAttribute("data-style",e.style),this._host.setAttribute("data-position",e.position),"popup"!==this._config?.style&&this._show(),this._host.requestUpdate()}getConfig(){return this._config}shouldRender(){return this._items.some((e=>!1!==e.enabled&&e.sufficient))}actionHandler(e,t){e.stopPropagation();const n=$f(e.detail.action,t);n&&Jx(this._host,{action:ef(n),config:t})}_getSufficientValue(e){
/* istanbul ignore else: cannot happen -- @preserve */
return"custom:advanced-camera-card-status-bar-icon"===e.type?e.icon:"custom:advanced-camera-card-status-bar-string"===e.type?e.string:"custom:advanced-camera-card-status-bar-image"===e.type?e.image:null}_getSufficientValues(e){return e.filter((e=>!1!==e.enabled&&e.sufficient)).map((e=>this._getSufficientValue(e)))}_show(){pf(this._host,!1,"hide")}_hide(){pf(this._host,!0,"hide")}}let GS=class extends oe{constructor(){super(...arguments),this._controller=new YS(this)}willUpdate(e){e.has("config")&&this.config&&this._controller.setConfig(this.config),e.has("items")&&this._controller.setItems(this.items??[])}_renderPerInstanceStyle(){const e=this._controller.getConfig();if(!e)return;const t=e.position,n=e.style,a=e=>`\n        var(--advanced-camera-card-status-bar-override-${e},\n        var(--advanced-camera-card-status-bar-position-${t}-style-${n}-${e},\n        var(--advanced-camera-card-status-bar-position-${t}-${e},\n        var(--advanced-camera-card-status-bar-style-${n}-${e},\n        var(--advanced-camera-card-status-bar-${e})))))`;return q`<style>
      :host(${`[data-position='${t}'][data-style='${n}']`}) {
        color: ${a("color")};
        background: ${a("background")};
      }
    </style>`}render(){if(this._controller.shouldRender())return q`
      ${this._renderPerInstanceStyle()}
      <div class="status">
        ${this._controller.getRenderItems().map((e=>{if(!1===e.enabled)return;const t=_e({item:!0,expand:!!e.expand,action:!!Object.keys(e.actions??{}).length}),n=jf({hasHold:Ef(e.actions?.hold_action),hasDoubleClick:Ef(e.actions?.double_tap_action)});return"custom:advanced-camera-card-status-bar-string"===e.type?q`<div
              .actionHandler=${n}
              class="${t}"
              @action=${t=>this._controller.actionHandler(t,e.actions)}
            >
              ${e.string}
            </div>`:"custom:advanced-camera-card-status-bar-icon"===e.type?q`<advanced-camera-card-icon
              .actionHandler=${n}
              .icon=${{icon:e.icon}}
              class="${t}"
              @action=${t=>this._controller.actionHandler(t,e.actions)}
            ></advanced-camera-card-icon>`:"custom:advanced-camera-card-status-bar-image"===e.type?q`<img
              .actionHandler=${n}
              class="${t}"
              src="${e.image}"
              @action=${t=>this._controller.actionHandler(t,e.actions)}
            />`:void 0}))}
      </div>
    `}static get styles(){return s("ha-icon-button {\n  color: var(--advanced-camera-card-button-color);\n  background-color: var(--advanced-camera-card-button-background);\n  border-radius: 50%;\n  padding: 0px;\n  margin: 3px;\n  --ha-icon-display: block;\n  /* Buttons can always be clicked */\n  pointer-events: auto;\n}\n\n:host {\n  --mdc-icon-size: calc(var(--advanced-camera-card-status-bar-height) / 2);\n  display: block;\n  width: 100%;\n  pointer-events: auto;\n  opacity: 1;\n  transition: opacity 1s;\n}\n\n/*******************************************************\n * Non-hover styles should not interact with the pointer\n *******************************************************/\n:host(:not([data-style*=hover])) {\n  pointer-events: none;\n}\n\n/**********************\n * Popup style behavior\n **********************/\n:host([data-style=popup][hide]) {\n  opacity: 0;\n}\n\n/*********************\n * Status bar contents\n *********************/\n.status {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  overflow: hidden;\n  width: 100%;\n  height: var(--advanced-camera-card-status-bar-height);\n}\n\n.item {\n  display: inline-block;\n  margin: 3px 5px;\n  align-content: center;\n}\n\n.item:first-child {\n  margin-left: 10px;\n}\n\n.item:last-child {\n  margin-right: 10px;\n}\n\n.item.expand {\n  flex: 1;\n}\n\n.item.action {\n  cursor: pointer;\n}\n\nimg.item,\nadvanced-camera-card-icon.item {\n  display: block;\n  height: var(--mdc-icon-size, 24px);\n  width: auto;\n}\n\n/************************\n * Status bar theme hooks\n ************************/")}};e([he({attribute:!1})],GS.prototype,"items",void 0),e([he({attribute:!1})],GS.prototype,"config",void 0),GS=e([le("advanced-camera-card-status-bar")],GS);function XS(e){return"number"==typeof e}function JS(e){return"string"==typeof e}function ek(e){return"boolean"==typeof e}function tk(e){return"[object Object]"===Object.prototype.toString.call(e)}function nk(e){return Math.abs(e)}function ak(e){return Math.sign(e)}function ik(e,t){return nk(e-t)}function rk(e){return dk(e).map(Number)}function sk(e){return e[ok(e)]}function ok(e){return Math.max(0,e.length-1)}function ck(e,t){return t===ok(e)}function lk(e,t=0){return Array.from(Array(e),((e,n)=>t+n))}function dk(e){return Object.keys(e)}function uk(e,t){return[e,t].reduce(((e,t)=>(dk(t).forEach((n=>{const a=e[n],i=t[n],r=tk(a)&&tk(i);e[n]=r?uk(a,i):i})),e)),{})}function hk(e,t){return void 0!==t.MouseEvent&&e instanceof t.MouseEvent}function mk(){let e=[];const t={add:function(n,a,i,r={passive:!0}){let s;if("addEventListener"in n)n.addEventListener(a,i,r),s=()=>n.removeEventListener(a,i,r);else{const e=n;e.addListener(i),s=()=>e.removeListener(i)}return e.push(s),t},clear:function(){e=e.filter((e=>e()))}};return t}function pk(e,t,n,a){const i=mk(),r=1e3/60;let s=null,o=0,c=0;function l(e){if(!c)return;s||(s=e);const i=e-s;for(s=e,o+=i;o>=r;)n(r),o-=r;a(o/r),c&&t.requestAnimationFrame(l)}function d(){t.cancelAnimationFrame(c),s=null,o=0,c=0}return{init:function(){i.add(e,"visibilitychange",(()=>{e.hidden&&(s=null,o=0)}))},destroy:function(){d(),i.clear()},start:function(){c||(c=t.requestAnimationFrame(l))},stop:d,update:()=>n(r),render:a}}function gk(e=0,t=0){const n=nk(e-t);function a(t){return t<e}function i(e){return e>t}function r(e){return a(e)||i(e)}const s={length:n,max:t,min:e,constrain:function(n){return r(n)?a(n)?e:t:n},reachedAny:r,reachedMax:i,reachedMin:a,removeOffset:function(e){return n?e-n*Math.ceil((e-t)/n):e}};return s}function fk(e,t,n){const{constrain:a}=gk(0,e),i=e+1;let r=s(t);function s(e){return n?nk((i+e)%i):a(e)}function o(){return r}function c(){return fk(e,o(),n)}const l={get:o,set:function(e){return r=s(e),l},add:function(e){return c().set(o()+e)},clone:c};return l}function _k(e,t,n,a,i,r,s,o,c,l,d,u,h,m,p,g,f,_,v){const{cross:y,direction:b}=e,w=["INPUT","SELECT","TEXTAREA"],x={passive:!1},C=mk(),M=mk(),S=gk(50,225).constrain(m.measure(20)),k={mouse:300,touch:400},$={mouse:500,touch:600},E=p?43:25;let A=!1,I=0,T=0,z=!1,j=!1,O=!1,D=!1;function P(e){if(!hk(e,a)&&e.touches.length>=2)return R(e);const t=r.readPoint(e),n=r.readPoint(e,y),s=ik(t,I),c=ik(n,T);if(!j&&!D){if(!e.cancelable)return R(e);if(j=s>c,!j)return R(e)}const d=r.pointerMove(e);s>g&&(O=!0),l.useFriction(.3).useDuration(.75),o.start(),i.add(b(d)),e.preventDefault()}function R(e){const t=d.byDistance(0,!1).index!==u.get(),n=r.pointerUp(e)*(p?$:k)[D?"mouse":"touch"],a=function(e,t){const n=u.add(-1*ak(e)),a=d.byDistance(e,!p).distance;return p||nk(e)<S?a:f&&t?.5*a:d.byIndex(n.get(),0).distance}(b(n),t),i=function(e,t){if(0===e||0===t)return 0;if(nk(e)<=nk(t))return 0;const n=ik(nk(e),nk(t));return nk(n/e)}(n,a),s=E-10*i,o=_+i/50;j=!1,z=!1,M.clear(),l.useDuration(s).useFriction(o),c.distance(a,!p),D=!1,h.emit("pointerUp")}function L(e){O&&(e.stopPropagation(),e.preventDefault(),O=!1)}return{init:function(e){if(!v)return;function o(o){(ek(v)||v(e,o))&&function(e){const o=hk(e,a);if(D=o,O=p&&o&&!e.buttons&&A,A=ik(i.get(),s.get())>=2,o&&0!==e.button)return;if(function(e){const t=e.nodeName||"";return w.includes(t)}(e.target))return;z=!0,r.pointerDown(e),l.useFriction(0).useDuration(0),i.set(s),function(){const e=D?n:t;M.add(e,"touchmove",P,x).add(e,"touchend",R).add(e,"mousemove",P,x).add(e,"mouseup",R)}(),I=r.readPoint(e),T=r.readPoint(e,y),h.emit("pointerDown")}(o)}const c=t;C.add(c,"dragstart",(e=>e.preventDefault()),x).add(c,"touchmove",(()=>{}),x).add(c,"touchend",(()=>{})).add(c,"touchstart",o).add(c,"mousedown",o).add(c,"touchcancel",R).add(c,"contextmenu",R).add(c,"click",L,!0)},destroy:function(){C.clear(),M.clear()},pointerDown:function(){return z}}}function vk(e,t){let n,a;function i(e){return e.timeStamp}function r(n,a){const i="client"+("x"===(a||e.scroll)?"X":"Y");return(hk(n,t)?n:n.touches[0])[i]}return{pointerDown:function(e){return n=e,a=e,r(e)},pointerMove:function(e){const t=r(e)-r(a),s=i(e)-i(n)>170;return a=e,s&&(n=e),t},pointerUp:function(e){if(!n||!a)return 0;const t=r(a)-r(n),s=i(e)-i(n),o=i(e)-i(a)>170,c=t/s;return s&&!o&&nk(c)>.1?c:0},readPoint:r}}function yk(e,t,n,a,i,r,s){const o=[e].concat(a);let c,l,d=[],u=!1;function h(e){return i.measureSize(s.measure(e))}return{init:function(i){r&&(l=h(e),d=a.map(h),c=new ResizeObserver((n=>{(ek(r)||r(i,n))&&function(n){for(const r of n){if(u)return;const n=r.target===e,s=a.indexOf(r.target),o=n?l:d[s];if(nk(h(n?e:a[s])-o)>=.5){i.reInit(),t.emit("resize");break}}}(n)})),n.requestAnimationFrame((()=>{o.forEach((e=>c.observe(e)))})))},destroy:function(){u=!0,c&&c.disconnect()}}}function bk(e,t,n,a,i){const r=i.measure(10),s=i.measure(50),o=gk(.1,.99);let c=!1;function l(){return!c&&(!!e.reachedAny(n.get())&&!!e.reachedAny(t.get()))}return{shouldConstrain:l,constrain:function(i){if(!l())return;const c=e.reachedMin(t.get())?"min":"max",d=nk(e[c]-t.get()),u=n.get()-t.get(),h=o.constrain(d/s);n.subtract(u*h),!i&&nk(u)<r&&(n.set(e.constrain(n.get())),a.useDuration(25).useBaseFriction())},toggleActive:function(e){c=!e}}}function wk(e,t,n,a){const i=t.min+.1,r=t.max+.1,{reachedMin:s,reachedMax:o}=gk(i,r);const c={loop:function(t){if(!function(e){return 1===e?o(n.get()):-1===e&&s(n.get())}(t))return;const i=e*(-1*t);a.forEach((e=>e.add(i)))}};return c}function xk(e,t,n,a,i){const{reachedAny:r,removeOffset:s,constrain:o}=a;function c(e){return e.concat().sort(((e,t)=>nk(e)-nk(t)))[0]}function l(t,a){const i=[t,t+n,t-n];if(!e)return t;if(!a)return c(i);const r=i.filter((e=>ak(e)===a));return r.length?c(r):sk(i)-n}return{byDistance:function(n,a){const c=i.get()+n,{index:d,distance:u}=function(n){const a=e?s(n):o(n),i=t.map(((e,t)=>({diff:l(e-a,0),index:t}))).sort(((e,t)=>nk(e.diff)-nk(t.diff))),{index:r}=i[0];return{index:r,distance:a}}(c),h=!e&&r(c);return!a||h?{index:d,distance:n}:{index:d,distance:n+l(t[d]-u,0)}},byIndex:function(e,n){return{index:e,distance:l(t[e]-i.get(),n)}},shortcut:l}}function Ck(e,t,n,a,i,r,s,o){const c={passive:!0,capture:!0};let l=0;function d(e){"Tab"===e.code&&(l=(new Date).getTime())}return{init:function(u){o&&(r.add(document,"keydown",d,!1),t.forEach(((t,d)=>{r.add(t,"focus",(t=>{(ek(o)||o(u,t))&&function(t){if((new Date).getTime()-l>10)return;s.emit("slideFocusStart"),e.scrollLeft=0;const r=n.findIndex((e=>e.includes(t)));XS(r)&&(i.useDuration(0),a.index(r,0),s.emit("slideFocus"))}(d)}),c)})))}}}function Mk(e){let t=e;function n(e){return XS(e)?e:e.get()}const a={get:function(){return t},set:function(e){t=n(e)},add:function(e){t+=n(e)},subtract:function(e){t-=n(e)}};return a}function Sk(e,t){const n="x"===e.scroll?function(e){return`translate3d(${e}px,0px,0px)`}:function(e){return`translate3d(0px,${e}px,0px)`},a=t.style;let i=!1;return{clear:function(){i||(a.transform="",t.getAttribute("style")||t.removeAttribute("style"))},to:function(t){i||(a.transform=n(e.direction(t)))},toggleActive:function(e){i=!e}}}function kk(e,t,n,a,i,r,s,o,c){const l=.5,d=rk(i),u=rk(i).reverse(),h=function(){const e=s[0];return g(p(u,e),n,!1)}().concat(function(){const e=t-s[0]-1;return g(p(d,e),-n,!0)}());function m(e,t){return e.reduce(((e,t)=>e-i[t]),t)}function p(e,t){return e.reduce(((e,n)=>m(e,t)>0?e.concat([n]):e),[])}function g(i,s,d){const u=function(e){return r.map(((n,i)=>({start:n-a[i]+l+e,end:n+t-l+e})))}(s);return i.map((t=>{const a=d?0:-n,i=d?n:0,r=d?"end":"start",s=u[t][r];return{index:t,loopPoint:s,slideLocation:Mk(-1),translate:Sk(e,c[t]),target:()=>o.get()>s?a:i}}))}const f={canLoop:function(){return h.every((({index:e})=>{const n=d.filter((t=>t!==e));return m(n,t)<=.1}))},clear:function(){h.forEach((e=>e.translate.clear()))},loop:function(){h.forEach((e=>{const{target:t,translate:n,slideLocation:a}=e,i=t();i!==a.get()&&(n.to(i),a.set(i))}))},loopPoints:h};return f}function $k(e,t,n){let a,i=!1;return{init:function(r){n&&(a=new MutationObserver((e=>{i||(ek(n)||n(r,e))&&function(e){for(const n of e)if("childList"===n.type){r.reInit(),t.emit("slidesChanged");break}}(e)})),a.observe(e,{childList:!0}))},destroy:function(){a&&a.disconnect(),i=!0}}}function Ek(e,t,n,a){const i={};let r,s=null,o=null,c=!1;return{init:function(){r=new IntersectionObserver((e=>{c||(e.forEach((e=>{const n=t.indexOf(e.target);i[n]=e})),s=null,o=null,n.emit("slidesInView"))}),{root:e.parentElement,threshold:a}),t.forEach((e=>r.observe(e)))},destroy:function(){r&&r.disconnect(),c=!0},get:function(e=!0){if(e&&s)return s;if(!e&&o)return o;const t=function(e){return dk(i).reduce(((t,n)=>{const a=parseInt(n),{isIntersecting:r}=i[a];return(e&&r||!e&&!r)&&t.push(a),t}),[])}(e);return e&&(s=t),e||(o=t),t}}}function Ak(e,t,n,a,i,r,s,o,c){const{startEdge:l,endEdge:d,direction:u}=e,h=XS(n);const m={groupSlides:function(e){return h?function(e,t){return rk(e).filter((e=>e%t==0)).map((n=>e.slice(n,n+t)))}(e,n):function(e){return e.length?rk(e).reduce(((n,h,m)=>{const p=sk(n)||0,g=0===p,f=h===ok(e),_=i[l]-r[p][l],v=i[l]-r[h][d],y=!a&&g?u(s):0,b=nk(v-(!a&&f?u(o):0)-(_+y));return m&&b>t+c&&n.push(h),f&&n.push(e.length),n}),[]).map(((t,n,a)=>{const i=Math.max(a[n-1]||0);return e.slice(i,t)})):[]}(e)}};return m}function Ik(e,t,n,a,i,r,s){const{align:o,axis:c,direction:l,startIndex:d,loop:u,duration:h,dragFree:m,dragThreshold:p,inViewThreshold:g,slidesToScroll:f,skipSnaps:_,containScroll:v,watchResize:y,watchSlides:b,watchDrag:w,watchFocus:x}=r,C={measure:function(e){const{offsetTop:t,offsetLeft:n,offsetWidth:a,offsetHeight:i}=e;return{top:t,right:n+a,bottom:t+i,left:n,width:a,height:i}}},M=C.measure(t),S=n.map(C.measure),k=function(e,t){const n="rtl"===t,a="y"===e,i=!a&&n?-1:1,r={scroll:a?"y":"x",cross:a?"x":"y",startEdge:a?"top":n?"right":"left",endEdge:a?"bottom":n?"left":"right",measureSize:function(e){const{height:t,width:n}=e;return a?t:n},direction:function(e){return e*i}};return r}(c,l),$=k.measureSize(M),E=function(e){const t={measure:function(t){return e*(t/100)}};return t}($),A=function(e,t){const n={start:function(){return 0},center:function(e){return a(e)/2},end:a};function a(e){return t-e}const i={measure:function(a,i){return JS(e)?n[e](a):e(t,a,i)}};return i}(o,$),I=!u&&!!v,T=u||!!v,{slideSizes:z,slideSizesWithGaps:j,startGap:O,endGap:D}=function(e,t,n,a,i,r){const{measureSize:s,startEdge:o,endEdge:c}=e,l=n[0]&&i,d=function(){if(!l)return 0;const e=n[0];return nk(t[o]-e[o])}(),u=function(){if(!l)return 0;const e=r.getComputedStyle(sk(a));return parseFloat(e.getPropertyValue(`margin-${c}`))}(),h=n.map(s),m=n.map(((e,t,n)=>{const a=!t,i=ck(n,t);return a?h[t]+d:i?h[t]+u:n[t+1][o]-e[o]})).map(nk);return{slideSizes:h,slideSizesWithGaps:m,startGap:d,endGap:u}}(k,M,S,n,T,i),P=Ak(k,$,f,u,M,S,O,D,2),{snaps:R,snapsAligned:L}=function(e,t,n,a,i){const{startEdge:r,endEdge:s}=e,{groupSlides:o}=i,c=o(a).map((e=>sk(e)[s]-e[0][r])).map(nk).map(t.measure),l=a.map((e=>n[r]-e[r])).map((e=>-nk(e))),d=o(l).map((e=>e[0])).map(((e,t)=>e+c[t]));return{snaps:l,snapsAligned:d}}(k,A,M,S,P),N=-sk(R)+sk(j),{snapsContained:F,scrollContainLimit:V}=function(e,t,n,a,i){const r=gk(-t+e,0),s=n.map(((e,t)=>{const{min:a,max:i}=r,s=r.constrain(e),o=!t,l=ck(n,t);return o?i:l||c(a,s)?a:c(i,s)?i:s})).map((e=>parseFloat(e.toFixed(3)))),o=function(){const e=s[0],t=sk(s);return gk(s.lastIndexOf(e),s.indexOf(t)+1)}();function c(e,t){return ik(e,t)<1}return{snapsContained:function(){if(t<=e+i)return[r.max];if("keepSnaps"===a)return s;const{min:n,max:c}=o;return s.slice(n,c)}(),scrollContainLimit:o}}($,N,L,v,2),H=I?F:L,{limit:B}=function(e,t,n){const a=t[0];return{limit:gk(n?a-e:sk(t),a)}}(N,H,u),q=fk(ok(H),d,u),U=q.clone(),Z=rk(n),W=pk(a,i,(e=>(({dragHandler:e,scrollBody:t,scrollBounds:n,options:{loop:a}},i)=>{a||n.constrain(e.pointerDown()),t.seek(i)})(oe,e)),(e=>(({scrollBody:e,translate:t,location:n,offsetLocation:a,scrollLooper:i,slideLooper:r,dragHandler:s,animation:o,eventHandler:c,scrollBounds:l,options:{loop:d}},u)=>{const h=e.settled(),m=!l.shouldConstrain(),p=d?h:h&&m;p&&!s.pointerDown()&&(o.stop(),c.emit("settle")),p||c.emit("scroll");const g=n.get()*u+Y.get()*(1-u);a.set(g),d&&(i.loop(e.direction()),r.loop()),t.to(a.get())})(oe,e))),Q=H[q.get()],K=Mk(Q),Y=Mk(Q),G=Mk(Q),X=Mk(Q),J=function(e,t,n,a,i,r){let s=0,o=0,c=i,l=r,d=e.get(),u=0;function h(e){return c=e,p}function m(e){return l=e,p}const p={direction:function(){return o},duration:function(){return c},velocity:function(){return s},seek:function(t){const i=t/1e3,r=c*i,h=a.get()-e.get();let m=0;return c?(n.set(e),s+=h/r,s*=l,d+=s,e.add(s*i),m=d-u):(s=0,n.set(a),e.set(a),m=h),o=ak(m),u=d,p},settled:function(){return nk(a.get()-t.get())<.001},useBaseFriction:function(){return m(r)},useBaseDuration:function(){return h(i)},useFriction:m,useDuration:h};return p}(K,G,Y,X,h,.68),ee=xk(u,H,N,B,X),te=function(e,t,n,a,i,r,s){function o(i){const o=i.distance,c=i.index!==t.get();r.add(o),o&&(a.duration()?e.start():(e.update(),e.render(1),e.update())),c&&(n.set(t.get()),t.set(i.index),s.emit("select"))}const c={distance:function(e,t){o(i.byDistance(e,t))},index:function(e,n){const a=t.clone().set(e);o(i.byIndex(a.get(),n))}};return c}(W,q,U,J,ee,X,s),ne=function(e){const{max:t,length:n}=e,a={get:function(e){return n?(e-t)/-n:0}};return a}(B),ae=mk(),ie=Ek(t,n,s,g),{slideRegistry:re}=function(e,t,n,a,i,r){const{groupSlides:s}=i,{min:o,max:c}=a;return{slideRegistry:function(){const a=s(r),i=!e||"keepSnaps"===t;return 1===n.length?[r]:i?a:a.slice(o,c).map(((e,t,n)=>{const a=!t,i=ck(n,t);return a?lk(sk(n[0])+1):i?lk(ok(r)-sk(n)[0]+1,sk(n)[0]):e}))}()}}(I,v,H,V,P,Z),se=Ck(e,n,re,te,J,ae,s,x),oe={ownerDocument:a,ownerWindow:i,eventHandler:s,containerRect:M,slideRects:S,animation:W,axis:k,dragHandler:_k(k,e,a,i,X,vk(k,i),K,W,te,J,ee,q,s,E,m,p,_,.68,w),eventStore:ae,percentOfView:E,index:q,indexPrevious:U,limit:B,location:K,offsetLocation:G,previousLocation:Y,options:r,resizeHandler:yk(t,s,i,n,k,y,C),scrollBody:J,scrollBounds:bk(B,G,X,J,E),scrollLooper:wk(N,B,G,[K,G,Y,X]),scrollProgress:ne,scrollSnapList:H.map(ne.get),scrollSnaps:H,scrollTarget:ee,scrollTo:te,slideLooper:kk(k,$,N,z,j,R,H,G,n),slideFocus:se,slidesHandler:$k(t,s,b),slidesInView:ie,slideIndexes:Z,slideRegistry:re,slidesToScroll:P,target:X,translate:Sk(k,t)};return oe}const Tk={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function zk(e){function t(e,t){return uk(e,t||{})}const n={mergeOptions:t,optionsAtMedia:function(n){const a=n.breakpoints||{},i=dk(a).filter((t=>e.matchMedia(t).matches)).map((e=>a[e])).reduce(((e,n)=>t(e,n)),{});return t(n,i)},optionsMediaQueries:function(t){return t.map((e=>dk(e.breakpoints||{}))).reduce(((e,t)=>e.concat(t)),[]).map(e.matchMedia)}};return n}function jk(e,t,n){const a=e.ownerDocument,i=a.defaultView,r=zk(i),s=function(e){let t=[];const n={init:function(n,a){return t=a.filter((({options:t})=>!1!==e.optionsAtMedia(t).active)),t.forEach((t=>t.init(n,e))),a.reduce(((e,t)=>Object.assign(e,{[t.name]:t})),{})},destroy:function(){t=t.filter((e=>e.destroy()))}};return n}(r),o=mk(),c=function(){let e,t={};function n(e){return t[e]||[]}const a={init:function(t){e=t},emit:function(t){return n(t).forEach((n=>n(e,t))),a},off:function(e,i){return t[e]=n(e).filter((e=>e!==i)),a},on:function(e,i){return t[e]=n(e).concat([i]),a},clear:function(){t={}}};return a}(),{mergeOptions:l,optionsAtMedia:d,optionsMediaQueries:u}=r,{on:h,off:m,emit:p}=c,g=k;let f,_,v,y,b=!1,w=l(Tk,jk.globalOptions),x=l(w),C=[];function M(t){const n=Ik(e,v,y,a,i,t,c);if(t.loop&&!n.slideLooper.canLoop()){return M(Object.assign({},t,{loop:!1}))}return n}function S(t,n){b||(w=l(w,t),x=d(w),C=n||C,function(){const{container:t,slides:n}=x,a=JS(t)?e.querySelector(t):t;v=a||e.children[0];const i=JS(n)?v.querySelectorAll(n):n;y=[].slice.call(i||v.children)}(),f=M(x),u([w,...C.map((({options:e})=>e))]).forEach((e=>o.add(e,"change",k))),x.active&&(f.translate.to(f.location.get()),f.animation.init(),f.slidesInView.init(),f.slideFocus.init(I),f.eventHandler.init(I),f.resizeHandler.init(I),f.slidesHandler.init(I),f.options.loop&&f.slideLooper.loop(),v.offsetParent&&y.length&&f.dragHandler.init(I),_=s.init(I,C)))}function k(e,t){const n=A();$(),S(l({startIndex:n},e),t),c.emit("reInit")}function $(){f.dragHandler.destroy(),f.eventStore.clear(),f.translate.clear(),f.slideLooper.clear(),f.resizeHandler.destroy(),f.slidesHandler.destroy(),f.slidesInView.destroy(),f.animation.destroy(),s.destroy(),o.clear()}function E(e,t,n){x.active&&!b&&(f.scrollBody.useBaseFriction().useDuration(!0===t?0:x.duration),f.scrollTo.index(e,n||0))}function A(){return f.index.get()}const I={canScrollNext:function(){return f.index.add(1).get()!==A()},canScrollPrev:function(){return f.index.add(-1).get()!==A()},containerNode:function(){return v},internalEngine:function(){return f},destroy:function(){b||(b=!0,o.clear(),$(),c.emit("destroy"),c.clear())},off:m,on:h,emit:p,plugins:function(){return _},previousScrollSnap:function(){return f.indexPrevious.get()},reInit:g,rootNode:function(){return e},scrollNext:function(e){E(f.index.add(1).get(),e,-1)},scrollPrev:function(e){E(f.index.add(-1).get(),e,1)},scrollProgress:function(){return f.scrollProgress.get(f.location.get())},scrollSnapList:function(){return f.scrollSnapList},scrollTo:E,selectedScrollSnap:A,slideNodes:function(){return y},slidesInView:function(){return f.slidesInView.get()},slidesNotInView:function(){return f.slidesInView.get(!1)}};return S(t,n),setTimeout((()=>c.emit("init")),0),I}function Ok(){return Ok=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ok.apply(this,arguments)}jk.globalOptions=void 0;var Dk=function(e,t){return void 0===t&&(t=.996),e*t/(1-t)};function Pk(e,t){if(e.length!==t.length)throw new Error("vectors must be same length");return e.map((function(e,n){return e+t[n]}))}function Rk(e){return Math.max.apply(Math,e.map(Math.abs))}function Lk(e){return Object.freeze(e),Object.values(e).forEach((function(e){null===e||"object"!=typeof e||Object.isFrozen(e)||Lk(e)})),e}var Nk=[1,18,"undefined"!=typeof window&&window.innerHeight||800];var Fk=[-1,-1,-1];var Vk=function(e){return Ok({},e,{axisDelta:e.axisDelta.map((function(e){return t=e,n=-700,a=700,Math.min(Math.max(n,t),a);var t,n,a}))})},Hk=.6,Bk=.96,qk=2,Uk=5,Zk=Lk({preventWheelAction:!0,reverseSign:[!0,!0,!1]}),Wk=400;function Qk(){return{isStarted:!1,isStartPublished:!1,isMomentum:!1,startTime:0,lastAbsDelta:1/0,axisMovement:[0,0,0],axisVelocity:[0,0,0],accelerationFactors:[],scrollPoints:[],scrollPointsToMerge:[],willEndTimeout:Wk}}function Kk(e){void 0===e&&(e={});var t,n,a,i=function(){var e={};function t(t,n){e[t]=(e[t]||[]).filter((function(e){return e!==n}))}return Lk({on:function(n,a){return e[n]=(e[n]||[]).concat(a),function(){return t(n,a)}},off:t,dispatch:function(t,n){t in e&&e[t].forEach((function(e){return e(n)}))}})}(),r=i.on,s=i.off,o=i.dispatch,c=Zk,l=Qk(),d=!1,u=function(e){Array.isArray(e)?e.forEach((function(e){return p(e)})):p(e)},h=function(e){return void 0===e&&(e={}),Object.values(e).some((function(e){return null==e}))?c:c=Lk(Ok({},Zk,c,e))},m=function(e){var a=Ok({event:t,isStart:!1,isEnding:!1,isMomentumCancel:!1,isMomentum:l.isMomentum,axisDelta:[0,0,0],axisVelocity:l.axisVelocity,axisMovement:l.axisMovement,get axisMovementProjection(){return Pk(a.axisMovement,a.axisVelocity.map((function(e){return Dk(e)})))}},e);o("wheel",Ok({},a,{previous:n})),n=a},p=function(e){var n=Vk(function(e,t){if(!t)return e;var n=!0===t?Fk:t.map((function(e){return e?-1:1}));return Ok({},e,{axisDelta:e.axisDelta.map((function(e,t){return e*n[t]}))})}(function(e){var t=e.deltaX*Nk[e.deltaMode],n=e.deltaY*Nk[e.deltaMode],a=(e.deltaZ||0)*Nk[e.deltaMode];return{timeStamp:e.timeStamp,axisDelta:[t,n,a]}}(e),c.reverseSign)),a=n.axisDelta,i=n.timeStamp,r=Rk(a);e.preventDefault&&function(e,t){var n=c.preventWheelAction,a=t[0],i=t[1],r=t[2];if("boolean"==typeof n)return n;switch(n){case"x":return Math.abs(a)>=e;case"y":return Math.abs(i)>=e;case"z":return Math.abs(r)>=e;default:return!1}}(r,a)&&e.preventDefault(),l.isStarted?l.isMomentum&&r>Math.max(2,2*l.lastAbsDelta)&&(M(!0),x()):x(),0===r&&Object.is&&Object.is(e.deltaX,-0)?d=!0:(t=e,l.axisMovement=Pk(l.axisMovement,a),l.lastAbsDelta=r,l.scrollPointsToMerge.push({axisDelta:a,timeStamp:i}),g(),m({axisDelta:a,isStart:!l.isStartPublished}),l.isStartPublished=!0,C())},g=function(){var e;l.scrollPointsToMerge.length===qk?(l.scrollPoints.unshift({axisDeltaSum:l.scrollPointsToMerge.map((function(e){return e.axisDelta})).reduce(Pk),timeStamp:(e=l.scrollPointsToMerge.map((function(e){return e.timeStamp})),e.reduce((function(e,t){return e+t}))/e.length)}),_(),l.scrollPointsToMerge.length=0,l.scrollPoints.length=1,l.isMomentum||b()):l.isStartPublished||f()},f=function(){var e;l.axisVelocity=(e=l.scrollPointsToMerge,e[e.length-1]).axisDelta.map((function(e){return e/l.willEndTimeout}))},_=function(){var e=l.scrollPoints,t=e[0],n=e[1];if(n&&t){var a=t.timeStamp-n.timeStamp;if(!(a<=0)){var i=t.axisDeltaSum.map((function(e){return e/a})),r=i.map((function(e,t){return e/(l.axisVelocity[t]||1)}));l.axisVelocity=i,l.accelerationFactors.push(r),v(a)}}},v=function(e){var t=10*Math.ceil(e/10)*1.2;l.isMomentum||(t=Math.max(100,2*t)),l.willEndTimeout=Math.min(1e3,Math.round(t))},y=function(e){return 0===e||e<=Bk&&e>=Hk},b=function(){if(l.accelerationFactors.length>=Uk){if(d&&(d=!1,Rk(l.axisVelocity)>=.2))return void w();var e=l.accelerationFactors.slice(-1*Uk);e.every((function(e){var t=!!e.reduce((function(e,t){return e&&e<1&&e===t?1:0})),n=e.filter(y).length===e.length;return t||n}))&&w(),l.accelerationFactors=e}},w=function(){l.isMomentum=!0},x=function(){(l=Qk()).isStarted=!0,l.startTime=Date.now(),n=void 0,d=!1},C=function(){clearTimeout(a),a=setTimeout(M,l.willEndTimeout)},M=function(e){void 0===e&&(e=!1),l.isStarted&&(l.isMomentum&&e?m({isEnding:!0,isMomentumCancel:!0}):m({isEnding:!0}),l.isMomentum=!1,l.isStarted=!1)},S=function(e){var t=[],n=function(n){n.removeEventListener("wheel",e),t=t.filter((function(e){return e!==n}))};return Lk({observe:function(a){return a.addEventListener("wheel",e,{passive:!1}),t.push(a),function(){return n(a)}},unobserve:n,disconnect:function(){t.forEach(n)}})}(u),k=S.observe,$=S.unobserve,E=S.disconnect;return h(e),Lk({on:r,off:s,observe:k,unobserve:$,disconnect:E,feedWheel:u,updateOptions:h})}var Yk={active:!0,breakpoints:{},wheelDraggingClass:"is-wheel-dragging",forceWheelAxis:void 0,target:void 0};function Gk(e){var t;void 0===e&&(e={});var n=function(){};var a={name:"wheelGestures",options:e,init:function(a,i){var r,s,o=i.mergeOptions,c=i.optionsAtMedia,l=o(Yk,Gk.globalOptions),d=o(l,e);t=c(d);var u,h=a.internalEngine(),m=null!=(r=t.target)?r:a.containerNode().parentNode,p=null!=(s=t.forceWheelAxis)?s:h.options.axis,g=Kk({preventWheelAction:p,reverseSign:[!0,!0,!1]}),f=g.observe(m),_=g.on("wheel",(function(e){var a=e.axisDelta,i=a[0],r=a[1],s="x"===p?i:r,o="x"===p?r:i,c=e.isMomentum&&e.previous&&!e.previous.isMomentum,l=e.isEnding&&!e.isMomentum||c;Math.abs(s)>Math.abs(o)&&!v&&!e.isMomentum&&function(e){try{x(u=new MouseEvent("mousedown",e.event))}catch(e){return n()}v=!0,document.documentElement.addEventListener("mousemove",b,!0),document.documentElement.addEventListener("mouseup",b,!0),void document.documentElement.addEventListener("mousedown",b,!0),t.wheelDraggingClass&&m.classList.add(t.wheelDraggingClass)}(e);if(!v)return;l?function(e){v=!1,x(w("mouseup",e)),y(),t.wheelDraggingClass&&m.classList.remove(t.wheelDraggingClass)}(e):x(w("mousemove",e))})),v=!1;function y(){document.documentElement.removeEventListener("mousemove",b,!0),document.documentElement.removeEventListener("mouseup",b,!0),document.documentElement.removeEventListener("mousedown",b,!0)}function b(e){v&&e.isTrusted&&e.stopImmediatePropagation()}function w(e,t){var n,a;if(p===h.options.axis){var i=t.axisMovement;n=i[0],a=i[1]}else{var r=t.axisMovement;a=r[0],n=r[1]}if(!h.options.skipSnaps&&!h.options.dragFree){var s=h.containerRect.width,o=h.containerRect.height;n=n<0?Math.max(n,-s):Math.min(n,s),a=a<0?Math.max(a,-o):Math.min(a,o)}return new MouseEvent(e,{clientX:u.clientX+n,clientY:u.clientY+a,screenX:u.screenX+n,screenY:u.screenY+a,movementX:n,movementY:a,button:0,bubbles:!0,cancelable:!0,composed:!0})}function x(e){a.containerNode().dispatchEvent(e)}n=function(){f(),_(),y()}},destroy:function(){return n()}};return a}Gk.globalOptions=void 0;class Xk{constructor(e,t,n){this._mutationObserver=new MutationObserver(((e,t)=>this._refreshCarouselContents())),this._refreshCarouselContents=()=>{const e=_f(this._parent);!Bv(this._carousel.slideNodes(),e)&&(this._carousel.destroy(),this._carousel=this._createCarousel(e))},this._root=e,this._parent=t,this._direction=n?.direction??"horizontal",this._transitionEffect=n?.transitionEffect??"slide",this._startIndex=n?.startIndex??0,this._dragFree=n?.dragFree??!1,this._loop=n?.loop??!1,this._draggable=n?.dragEnabled??!0,this._plugins=n?.plugins??[],this._textDirection=n?.textDirection??"ltr",this._carousel=this._createCarousel(_f(this._parent)),t instanceof HTMLSlotElement&&t.addEventListener("slotchange",this._refreshCarouselContents),this._mutationObserver.observe(this._parent,{childList:!0})}destroy(){this._parent instanceof HTMLSlotElement&&this._parent.removeEventListener("slotchange",this._refreshCarouselContents),this._mutationObserver.disconnect(),this._carousel.destroy()}getSlide(e){return this._carousel.slideNodes()[e]??null}getSelectedSlide(){return this.getSlide(this.getSelectedIndex())}getSelectedIndex(){return this._carousel.selectedScrollSnap()}selectSlide(e){this._carousel.scrollTo(e,"none"===this._transitionEffect);const t=this.getSlide(e);t&&Gg(this._parent,"carousel:force-select",{index:e,element:t})}_createCarousel(e){const t=jk(this._root,{slides:e,axis:"horizontal"===this._direction?"x":"y",duration:20,startIndex:this._startIndex,dragFree:this._dragFree,loop:this._loop,containScroll:"trimSnaps",watchSlides:!1,watchResize:!0,watchDrag:this._draggable,direction:this._textDirection},[...this._plugins,...e.length>1?[Gk({forceWheelAxis:"y"})]:[]]),n=()=>{const e=(()=>{const e=t.selectedScrollSnap(),n=t.slideNodes()[e]??null;return n?{index:e,element:n}:null})();e&&Gg(this._parent,"carousel:select",e)};return t.on("select",(()=>n())),t}}const Jk=e=>"rtl"===getComputedStyle(e).direction?"rtl":"ltr";let e$=class extends oe{constructor(){super(...arguments),this.direction="horizontal",this.dragEnabled=!0,this.selected=0,this._refParent=Ae(),this._refRoot=Ae(),this._carousel=null}connectedCallback(){super.connectedCallback(),this.requestUpdate()}disconnectedCallback(){this._carousel?.destroy(),this._carousel=null,super.disconnectedCallback()}willUpdate(e){e.has("direction")&&this.setAttribute("direction",this.direction);["direction","dragEnabled","dragFree","loop","plugins","transitionEffect"].some((t=>e.has(t)))&&(this._carousel?.destroy(),this._carousel=null)}render(){return q` <div class="embla">
      <slot name="left"></slot>
      <div ${ze(this._refRoot)} class="embla__viewport">
        <div class="embla__container">
          <slot ${ze(this._refParent)}></slot>
        </div>
      </div>
      <slot name="right"></slot>
    </div>`}updated(e){!this._carousel&&this._refRoot.value&&this._refParent.value?this._carousel=new Xk(this._refRoot.value,this._refParent.value,{direction:this.direction,dragEnabled:this.dragEnabled,dragFree:this.dragFree,startIndex:this.selected,transitionEffect:this.transitionEffect,loop:this.loop,plugins:this.plugins,textDirection:Jk(this)}):e.has("selected")&&this._carousel?.selectSlide(this.selected)}static get styles(){return s(":host {\n  display: block;\n  height: 100%;\n  width: 100%;\n  position: relative;\n}\n\n.embla {\n  width: 100%;\n  height: 100%;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n.embla__container {\n  display: flex;\n  width: 100%;\n  height: 100%;\n  user-select: none;\n  -webkit-touch-callout: none;\n  -khtml-user-select: none;\n  -webkit-tap-highlight-color: transparent;\n}\n\n:host([direction=vertical]) .embla__container {\n  flex-direction: column;\n}\n\n:host([direction=horizontal]) .embla__container {\n  flex-direction: row;\n}\n\n.embla__viewport {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.embla__viewport.is-draggable {\n  cursor: move;\n  cursor: grab;\n}\n\n.embla__viewport.is-dragging {\n  cursor: grabbing;\n}\n\n:host([direction=vertical]) ::slotted(.embla__slide) {\n  margin-bottom: 5px;\n}\n\n:host([direction=horizontal]) ::slotted(.embla__slide) {\n  margin-right: 5px;\n}")}};e([he({attribute:!0,reflect:!0})],e$.prototype,"direction",void 0),e([he({attribute:!0})],e$.prototype,"transitionEffect",void 0),e([he({attribute:!1})],e$.prototype,"loop",void 0),e([he({attribute:!1})],e$.prototype,"dragFree",void 0),e([he({attribute:!1})],e$.prototype,"dragEnabled",void 0),e([he({attribute:!1})],e$.prototype,"plugins",void 0),e([he({attribute:!1})],e$.prototype,"selected",void 0),e$=e([le("advanced-camera-card-carousel")],e$);
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const t$=window,n$=t$.ShadowRoot&&(void 0===t$.ShadyCSS||t$.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,a$=Symbol(),i$=new WeakMap;let r$=class{constructor(e,t,n){if(this._$cssResult$=!0,n!==a$)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(n$&&void 0===e){const n=void 0!==t&&1===t.length;n&&(e=i$.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&i$.set(t,e))}return e}toString(){return this.cssText}};const s$=(e,t)=>{n$?e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):t.forEach((t=>{const n=document.createElement("style"),a=t$.litNonce;void 0!==a&&n.setAttribute("nonce",a),n.textContent=t.cssText,e.appendChild(n)}))},o$=n$?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return(e=>new r$("string"==typeof e?e:e+"",void 0,a$))(t)})(e):e
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var c$;const l$=window,d$=l$.trustedTypes,u$=d$?d$.emptyScript:"",h$=l$.reactiveElementPolyfillSupport,m$={toAttribute(e,t){switch(t){case Boolean:e=e?u$:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(e){n=null}}return n}},p$=(e,t)=>t!==e&&(t==t||e==e),g$={attribute:!0,type:String,converter:m$,reflect:!1,hasChanged:p$},f$="finalized";class _$ extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,n)=>{const a=this._$Ep(n,t);void 0!==a&&(this._$Ev.set(a,n),e.push(a))})),e}static createProperty(e,t=g$){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const n="symbol"==typeof e?Symbol():"__"+e,a=this.getPropertyDescriptor(e,n,t);void 0!==a&&Object.defineProperty(this.prototype,e,a)}}static getPropertyDescriptor(e,t,n){return{get(){return this[t]},set(a){const i=this[e];this[t]=a,this.requestUpdate(e,i,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||g$}static finalize(){if(this.hasOwnProperty(f$))return!1;this[f$]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const n of t)this.createProperty(n,e[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const e of n)t.unshift(o$(e))}else void 0!==e&&t.push(o$(e));return t}static _$Ep(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,n;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(n=e.hostConnected)||void 0===n||n.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return s$(t,this.constructor.elementStyles),t}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$EO(e,t,n=g$){var a;const i=this.constructor._$Ep(e,n);if(void 0!==i&&!0===n.reflect){const r=(void 0!==(null===(a=n.converter)||void 0===a?void 0:a.toAttribute)?n.converter:m$).toAttribute(t,n.type);this._$El=e,null==r?this.removeAttribute(i):this.setAttribute(i,r),this._$El=null}}_$AK(e,t){var n;const a=this.constructor,i=a._$Ev.get(e);if(void 0!==i&&this._$El!==i){const e=a.getPropertyOptions(i),r="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(n=e.converter)||void 0===n?void 0:n.fromAttribute)?e.converter:m$;this._$El=i,this[i]=r.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,n){let a=!0;void 0!==e&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||p$)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===n.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,n))):a=!1),!this.isUpdatePending&&a&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const n=this._$AL;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(n)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(n)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}_$[f$]=!0,_$.elementProperties=new Map,_$.elementStyles=[],_$.shadowRootOptions={mode:"open"},null==h$||h$({ReactiveElement:_$}),(null!==(c$=l$.reactiveElementVersions)&&void 0!==c$?c$:l$.reactiveElementVersions=[]).push("1.6.3");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const v$=0,y$=Symbol();let b$=class{constructor(e,t,n){this.o=0,this.status=0,this.autoRun=!0,this.i=e,this.i.addController(this);const a="object"==typeof t?t:{task:t,args:n};this.t=a.task,this.h=a.args,void 0!==a.autoRun&&(this.autoRun=a.autoRun),this.taskComplete=new Promise(((e,t)=>{this.l=e,this.u=t}))}hostUpdated(){this.performTask()}async performTask(){var e;const t=null===(e=this.h)||void 0===e?void 0:e.call(this);this.shouldRun(t)&&this.run(t)}shouldRun(e){return this.autoRun&&this.v(e)}async run(e){var t;let n,a;null!=e||(e=null===(t=this.h)||void 0===t?void 0:t.call(this)),2!==this.status&&3!==this.status||(this.taskComplete=new Promise(((e,t)=>{this.l=e,this.u=t}))),this.status=1,this._=void 0,this.m=void 0,this.i.requestUpdate();const i=++this.o;try{n=await this.t(e)}catch(e){a=e}this.o===i&&(n===y$?this.status=0:(void 0===a?(this.status=2,this.l(n)):(this.status=3,this.u(a)),this.m=n,this._=a),this.i.requestUpdate())}get value(){return this.m}get error(){return this._}render(e){var t,n,a,i;switch(this.status){case 0:return null===(t=e.initial)||void 0===t?void 0:t.call(e);case 1:return null===(n=e.pending)||void 0===n?void 0:n.call(e);case 2:return null===(a=e.complete)||void 0===a?void 0:a.call(e,this.value);case 3:return null===(i=e.error)||void 0===i?void 0:i.call(e,this.error);default:this.status}}v(e){const t=this.T;return this.T=e,Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.some(((e,n)=>p$(e,t[n]))):e!==t}};class w${constructor(e){this._keys=e}modify(e){this._keys.forEach((t=>e.removeContext(t)))}}var x$=":host {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  margin-left: 5px;\n  padding: 5px;\n  color: var(--advanced-camera-card-thumbnail-text-color);\n  overflow: hidden;\n  column-gap: 5%;\n}\n\ndiv.title {\n  font-size: 1.2rem;\n  font-weight: bold;\n}\n\ndiv.details {\n  flex: 1;\n  justify-content: center;\n  display: flex;\n  flex-direction: column;\n  flex-wrap: wrap;\n  --mdc-icon-size: 16px;\n  min-height: 0px;\n}\n\ndiv.details div {\n  display: flex;\n  align-items: center;\n}\n\ndiv.details div * {\n  margin: 0px 3px;\n}";function C$(e){return q`
    <advanced-camera-card-progress-indicator
      class="${_e(e?.classes??{})}"
      .size=${e?.size}
      ${e?.componentRef?ze(e.componentRef):""}
      .message=${e?.message||""}
      .animated=${e?.cardWideConfig?.performance?.features.animated_progress_indicator??!0}
    >
    </advanced-camera-card-progress-indicator>
  `}let M$=class extends oe{constructor(){super(...arguments),this.message="",this.animated=!1,this.size="large"}render(){return q` <div class="message vertical">
      ${this.animated?q`<ha-circular-progress indeterminate size="${this.size}">
          </ha-circular-progress>`:q`<advanced-camera-card-icon
            .icon=${{icon:"mdi:timer-sand"}}
          ></advanced-camera-card-icon>`}
      ${this.message?q`<span>${this.message}</span>`:q``}
    </div>`}static get styles(){return s(ZS)}};e([he({attribute:!1})],M$.prototype,"message",void 0),e([he({attribute:!1})],M$.prototype,"animated",void 0),e([he({attribute:!1})],M$.prototype,"size",void 0),M$=e([le("advanced-camera-card-progress-indicator")],M$);const S$=(e,t,n)=>{const a={...n?.cardWideConfig&&{cardWideConfig:n.cardWideConfig}};return q` ${e.render({initial:()=>n?.inProgressFunc?.()??C$(a),pending:()=>n?.inProgressFunc?.()??C$(a),error:e=>{af(e),n?.errorFunc&&n.errorFunc(e)},complete:t})}`},k$=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,$$=(e,t,n,a=!0)=>new b$(e,{args:()=>[!!t(),n()],task:async([e,n])=>{const a=t();return e&&a&&n?(async(e,t)=>e&&t?t.startsWith("data:")||t.match(k$)?t:new Promise(((n,a)=>{e?e.fetchWithAuth(t).then((e=>e.blob())).then((e=>{const t=new FileReader;t.onload=()=>{const e=t.result;n("string"==typeof e?e:null)},t.onerror=e=>a(e),t.readAsDataURL(e)})).catch((e=>a(e))):a()})):null)(a,n):null},autoRun:a}),E$=300;let A$=class extends oe{constructor(){super(),this._thumbnailError=!1,this._intersectionObserver=new IntersectionObserver(this._intersectionHandler.bind(this))}connectedCallback(){this._intersectionObserver.observe(this),super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this._intersectionObserver.disconnect()}willUpdate(e){e.has("thumbnail")&&(this._embedThumbnailTask=$$(this,(()=>this.hass),(()=>this.thumbnail),!1),this._intersectionObserver.unobserve(this),this._intersectionObserver.observe(this))}_intersectionHandler(e){this._embedThumbnailTask?.status===v$&&e.some((e=>e.isIntersecting))&&this._embedThumbnailTask?.run()}render(){const e=q`<advanced-camera-card-icon
      .icon=${{icon:"mdi:image-off"}}
      title=${K_("thumbnail.no_thumbnail")}
    ></advanced-camera-card-icon> `;return!this._embedThumbnailTask||this._thumbnailError?e:q`${this.thumbnail?S$(this._embedThumbnailTask,(e=>e?q`<img src="${e}" />`:q``),{inProgressFunc:()=>e,errorFunc:()=>{this._thumbnailError=!0}}):e} `}static get styles(){return s(":host {\n  display: block;\n  overflow: hidden;\n  aspect-ratio: 1/1;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\nimg {\n  display: block;\n}\n\nimg,\nadvanced-camera-card-icon {\n  display: inline-block;\n  vertical-align: top;\n  margin: 0;\n  border-radius: var(--advanced-camera-card-css-border-radius, var(--ha-card-border-radius, 4px));\n  width: var(--advanced-camera-card-thumbnail-size);\n  max-height: 100%;\n  aspect-ratio: 1/1;\n  object-fit: cover;\n}\n\nadvanced-camera-card-icon {\n  --mdc-icon-size: 50%;\n  color: var(--primary-text-color);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  box-sizing: border-box;\n  opacity: 0.2;\n}")}};e([he({attribute:!1})],A$.prototype,"thumbnail",void 0),e([he({attribute:!1})],A$.prototype,"hass",void 0),e([me()],A$.prototype,"_thumbnailError",void 0),A$=e([le("advanced-camera-card-thumbnail-feature-thumbnail")],A$);let I$=class extends oe{render(){if(this.date)return q`
      ${this.cameraMetadata?.engineIcon?q`<advanced-camera-card-icon
            class="background"
            .icon=${{icon:this.cameraMetadata.engineIcon}}
          ></advanced-camera-card-icon>`:""}
      <div class="content">
        <div class="title">${eh(this.date,"HH:mm")}</div>
        <div class="subtitle">${eh(this.date,"MMM do")}</div>
        ${this.showCameraTitle&&this.cameraMetadata?.title?q`<div class="camera">${this.cameraMetadata.title}</div>`:q``}
      </div>
    `}static get styles(){return s(":host {\n  display: block;\n  max-width: var(--advanced-camera-card-thumbnail-size);\n  max-height: var(--advanced-camera-card-thumbnail-size);\n  aspect-ratio: 1/1;\n  border: 1px solid var(--secondary-color);\n  background-color: var(--secondary-background-color);\n  border-radius: var(--advanced-camera-card-css-border-radius, var(--ha-card-border-radius, 4px));\n  overflow: hidden;\n  padding: 10px;\n  box-sizing: border-box;\n  position: relative;\n}\n\nadvanced-camera-card-icon.background {\n  display: block;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  inset: 0;\n  padding: 10%;\n  box-sizing: border-box;\n  pointer-events: none;\n  opacity: 0.1;\n}\n\ndiv.content {\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  color: var(--primary-text-color);\n}\n\ndiv {\n  text-align: center;\n}\n\ndiv.title {\n  font-size: 1.5rem;\n}\n\ndiv.camera {\n  font-size: 0.7em;\n}")}};e([he({attribute:!1})],I$.prototype,"date",void 0),e([he({attribute:!1})],I$.prototype,"cameraMetadata",void 0),e([he({attribute:!1})],I$.prototype,"showCameraTitle",void 0),I$=e([le("advanced-camera-card-thumbnail-feature-text")],I$);let T$=class extends oe{render(){if(!this.media)return;const e=this.media.getScore(),t=e?(100*e).toFixed(2)+"%":null,n=this.media.getStartTime(),a=n?sf(n):null,i=this.media.getEndTime(),r=n&&i?lf(n,i):null,s=this.media.inProgress()?K_("event.in_progress"):null,o=Xg(this.media.getWhat()?.join(", "))??null,c=Xg(this.media.getWhere()?.join(", "))??null,l=Xg(this.media.getTags()?.join(", "))??null,d=o||l?(o??"")+(o&&l?": ":"")+(l??""):null,u=this.seek?eh(this.seek,"HH:mm:ss"):null;return q`
      ${d?q` <div class="title">
            <span title=${d}>${d}</span>
            ${t?q`<span title="${t}">${t}</span>`:""}
          </div>`:""}
      <div class="details">
        ${a?q` <div>
                <advanced-camera-card-icon
                  title=${K_("event.start")}
                  .icon=${{icon:"mdi:calendar-clock-outline"}}
                ></advanced-camera-card-icon>
                <span title="${a}">${a}</span>
              </div>
              ${r||s?q` <div>
                    <advanced-camera-card-icon
                      title=${K_("event.duration")}
                      .icon=${{icon:"mdi:clock-outline"}}
                    ></advanced-camera-card-icon>
                    ${r?q`<span title="${r}">${r}</span>`:""}
                    ${s?q`<span title="${s}">${s}</span>`:""}
                  </div>`:""}`:""}
        ${this.cameraTitle?q` <div>
              <advanced-camera-card-icon
                title=${K_("event.camera")}
                .icon=${{icon:"mdi:cctv"}}
              ></advanced-camera-card-icon>
              <span title="${this.cameraTitle}">${this.cameraTitle}</span>
            </div>`:""}
        ${c?q` <div>
              <advanced-camera-card-icon
                title=${K_("event.where")}
                .icon=${{icon:"mdi:map-marker-outline"}}
              ></advanced-camera-card-icon>
              <span title="${c}">${c}</span>
            </div>`:q``}
        ${l?q` <div>
              <advanced-camera-card-icon
                title=${K_("event.tag")}
                .icon=${{icon:"mdi:tag"}}
              ></advanced-camera-card-icon>
              <span title="${l}">${l}</span>
            </div>`:q``}
        ${u?q` <div>
              <advanced-camera-card-icon
                title=${K_("event.seek")}
                .icon=${{icon:"mdi:clock-fast"}}
              ></advanced-camera-card-icon>
              <span title="${u}">${u}</span>
            </div>`:q``}
      </div>
    `}static get styles(){return s(x$)}};e([he({attribute:!1})],T$.prototype,"media",void 0),e([he({attribute:!1})],T$.prototype,"seek",void 0),e([he({attribute:!1})],T$.prototype,"cameraTitle",void 0),T$=e([le("advanced-camera-card-thumbnail-details-event")],T$);let z$=class extends oe{render(){if(!this.media)return;const e=this.media.getStartTime(),t=e?sf(e):null,n=this.media.getEndTime(),a=e&&n?lf(e,n):null,i=this.media.inProgress()?K_("recording.in_progress"):null,r=this.seek?eh(this.seek,"HH:mm:ss"):null,s=this.media.getEventCount();return q`
      ${this.cameraTitle?q` <div class="title">
            <span title="${this.cameraTitle}">${this.cameraTitle}</span>
          </div>`:""}
      <div class="details">
        ${t?q` <div>
                <advanced-camera-card-icon
                  title=${K_("recording.start")}
                  .icon=${{icon:"mdi:calendar-clock-outline"}}
                ></advanced-camera-card-icon>
                <span title="${t}">${t}</span>
              </div>
              ${a||i?q` <div>
                    <advanced-camera-card-icon
                      title=${K_("recording.duration")}
                      .icon=${{icon:"mdi:clock-outline"}}
                    ></advanced-camera-card-icon>
                    ${a?q`<span title="${a}">${a}</span>`:""}
                    ${i?q`<span title="${i}">${i}</span>`:""}
                  </div>`:""}`:""}
        ${r?q` <div>
              <advanced-camera-card-icon
                title=${K_("event.seek")}
                .icon=${{icon:"mdi:clock-fast"}}
              ></advanced-camera-card-icon>
              <span title="${r}">${r}</span>
            </div>`:q``}
        ${null!==s?q`<div>
              <advanced-camera-card-icon
                title=${K_("recording.events")}
                .icon=${{icon:"mdi:shield-alert"}}
              ></advanced-camera-card-icon>
              <span title="${s}">${s}</span>
            </div>`:""}
      </div>
    `}static get styles(){return s(x$)}};e([he({attribute:!1})],z$.prototype,"media",void 0),e([he({attribute:!1})],z$.prototype,"seek",void 0),e([he({attribute:!1})],z$.prototype,"cameraTitle",void 0),z$=e([le("advanced-camera-card-thumbnail-details-recording")],z$);let j$=class extends oe{constructor(){super(...arguments),this.details=!1,this.show_favorite_control=!1,this.show_timeline_control=!1,this.show_download_control=!1}render(){if(!this.media||!this.cameraManager||!this.hass)return;const e=this.media.getThumbnail(),t=this.media.getTitle()??"",n={star:!0,starred:!!this.media?.isFavorite()},a=this.show_timeline_control&&(!Yw.isRecording(this.media)||this.media.getStartTime()&&this.media.getEndTime()),i=this.cameraManager?.getMediaCapabilities(this.media),r=this.show_favorite_control&&this.media&&this.hass&&i?.canFavorite,s=this.show_download_control&&this.hass&&this.media.getID()&&i?.canDownload,o=this.cameraManager.getCameraMetadata(this.media.getCameraID());return q`
      ${Yw.isEvent(this.media)&&e?q`<advanced-camera-card-thumbnail-feature-thumbnail
            aria-label="${t??""}"
            title=${t}
            .hass=${this.hass}
            .date=${this.media.getStartTime()??void 0}
            .thumbnail=${e??void 0}
          ></advanced-camera-card-thumbnail-feature-thumbnail>`:Yw.isEvent(this.media)||Yw.isRecording(this.media)?q`<advanced-camera-card-thumbnail-feature-text
              aria-label="${t??""}"
              title="${t??""}"
              .cameraMetadata=${o}
              .showCameraTitle=${!this.details}
              .date=${this.media.getStartTime()??void 0}
            ></advanced-camera-card-thumbnail-feature-text>`:q``}
      ${r?q` <advanced-camera-card-icon
            class="${_e(n)}"
            title=${K_("thumbnail.retain_indefinitely")}
            .icon=${{icon:this.media.isFavorite()?"mdi:star":"mdi:star-outline"}}
            @click=${async e=>{if(Af(e),this.hass&&this.media){try{await(this.cameraManager?.favoriteMedia(this.media,!this.media?.isFavorite()))}catch(e){return void af(e)}this.requestUpdate()}}}
          /></advanced-camera-card-icon>`:""}
      ${this.details&&Yw.isEvent(this.media)?q`<advanced-camera-card-thumbnail-details-event
            .media=${this.media??void 0}
            .cameraTitle=${o?.title}
            .seek=${this.seek}
          ></advanced-camera-card-thumbnail-details-event>`:this.details&&Yw.isRecording(this.media)?q`<advanced-camera-card-thumbnail-details-recording
              .media=${this.media??void 0}
              .cameraTitle=${o?.title}
              .seek=${this.seek}
            ></advanced-camera-card-thumbnail-details-recording>`:q``}
      ${a?q`<advanced-camera-card-icon
            class="timeline"
            .icon=${{icon:"mdi:target"}}
            title=${K_("thumbnail.timeline")}
            @click=${e=>{Af(e),this.viewManagerEpoch&&this.media&&this.viewManagerEpoch.manager.setViewByParameters({params:{view:"timeline",queryResults:this.viewManagerEpoch?.manager.getView()?.queryResults?.clone().selectResultIfFound((e=>e===this.media))},modifiers:[new w$(["timeline"])]})}}
          ></advanced-camera-card-icon>`:""}
      ${s?q` <advanced-camera-card-icon
            class="download"
            .icon=${{icon:"mdi:download"}}
            title=${K_("thumbnail.download")}
            @click=${async e=>{if(Af(e),this.hass&&this.cameraManager&&this.media)try{await vw(this.hass,this.cameraManager,this.media)}catch(e){$x(this,e)}}}
          ></advanced-camera-card-icon>`:""}
    `}static get styles(){return s(":host {\n  display: flex;\n  flex-direction: row;\n  box-sizing: border-box;\n  position: relative;\n  overflow: hidden;\n  transition: transform 0.2s linear;\n}\n\n:host(:not([details])) {\n  aspect-ratio: 1/1;\n}\n\n:host([details]) {\n  border: 1px solid var(--advanced-camera-card-thumbnail-border-color);\n  border-radius: var(--advanced-camera-card-css-border-radius, var(--ha-card-border-radius, 4px));\n  padding: 2px;\n  background-color: var(--advanced-camera-card-thumbnail-background);\n}\n\n:host(:hover) {\n  transform: scale(1.04);\n}\n\nadvanced-camera-card-icon {\n  position: absolute;\n  border-radius: 50%;\n  color: var(--advanced-camera-card-thumbnail-icon-color);\n  cursor: pointer;\n  transition: opacity 0.2s ease-in-out, color 0.2s ease-in-out;\n}\n\nadvanced-camera-card-icon:hover {\n  opacity: 1;\n}\n\nadvanced-camera-card-icon.star {\n  top: 3px;\n  left: 3px;\n}\n\nadvanced-camera-card-icon.star.starred {\n  color: var(--advanced-camera-card-thumbnail-icon-favorite-color);\n}\n\nadvanced-camera-card-icon.timeline {\n  top: 3px;\n  right: 3px;\n}\n\nadvanced-camera-card-icon.download {\n  right: 3px;\n  bottom: 3px;\n}\n\nadvanced-camera-card-thumbnail-details-event,\nadvanced-camera-card-thumbnail-details-recording {\n  flex: 1;\n}")}};e([he({attribute:!1})],j$.prototype,"cameraManager",void 0),e([he({attribute:!1})],j$.prototype,"media",void 0),e([he({attribute:!0,type:Boolean})],j$.prototype,"details",void 0),e([he({attribute:!0,type:Boolean})],j$.prototype,"show_favorite_control",void 0),e([he({attribute:!0,type:Boolean})],j$.prototype,"show_timeline_control",void 0),e([he({attribute:!0,type:Boolean})],j$.prototype,"show_download_control",void 0),e([he({attribute:!1})],j$.prototype,"seek",void 0),j$=e([le("advanced-camera-card-thumbnail")],j$);let O$=class extends oe{constructor(){super(...arguments),this.fadeThumbnails=!1,this._thumbnailSlides=[]}willUpdate(e){if(e.has("config")){this.config?.size&&this.style.setProperty("--advanced-camera-card-thumbnail-size",`${this.config.size}px`);const e=this._getDirection();e?this.setAttribute("direction",e):this.removeAttribute("direction")}["cameraManager","config","transitionEffect","viewManagerEpoch"].some((t=>e.has(t)))&&(this._thumbnailSlides=this._renderSlides()),e.has("viewManagerEpoch")&&this.style.setProperty("--advanced-camera-card-carousel-thumbnail-opacity",this.fadeThumbnails&&null!==this._getSelectedSlide()?"0.4":"1.0")}_getSelectedSlide(){return this.viewManagerEpoch?.manager.getView()?.queryResults?.getSelectedIndex()??null}_renderSlides(){const e=[],t=this.viewManagerEpoch?.manager.getView(),n=t?.context?.mediaViewer?.seek,a=this._getSelectedSlide();for(const i of t?.queryResults?.getResults()??[]){const t=e.length,r={embla__slide:!0,"slide-selected":a===t};e.push(q` <advanced-camera-card-thumbnail
          class="${_e(r)}"
          .cameraManager=${this.cameraManager}
          .hass=${this.hass}
          .media=${i}
          .viewManagerEpoch=${this.viewManagerEpoch}
          .seek=${n&&i.includesTime(n)?n:void 0}
          ?details=${!!this.config?.show_details}
          ?show_favorite_control=${this.config?.show_favorite_control}
          ?show_timeline_control=${this.config?.show_timeline_control}
          ?show_download_control=${this.config?.show_download_control}
          @click=${e=>{const n=this.viewManagerEpoch?.manager.getView();n&&n.queryResults&&Gg(this,"thumbnail-carousel:tap",{queryResults:n.queryResults.clone().selectIndex(t)}),Af(e)}}
        >
        </advanced-camera-card-thumbnail>`)}return e}_getDirection(){return"left"===this.config?.mode||"right"===this.config?.mode?"vertical":"above"===this.config?.mode||"below"===this.config?.mode?"horizontal":null}render(){const e=this._getDirection();if(this._thumbnailSlides.length&&this.config&&e)return q`<advanced-camera-card-carousel
      direction=${e}
      .selected=${this._getSelectedSlide()??0}
      .dragFree=${!0}
    >
      ${this._thumbnailSlides}
    </advanced-camera-card-carousel>`}static get styles(){return s(":host {\n  --advanced-camera-card-thumbnail-size-max: 300px;\n  --advanced-camera-card-thumbnail-details-width: calc(\n    var(--advanced-camera-card-thumbnail-size) + 200px\n  );\n}\n\n:host {\n  display: block;\n  width: 100%;\n  height: 100%;\n  background-color: var(--advanced-camera-card-thumbnail-background);\n  --advanced-camera-card-carousel-thumbnail-opacity: 1;\n}\n\n:host([direction=vertical]) {\n  height: 100%;\n}\n\n:host([direction=horizontal]) {\n  height: auto;\n}\n\n.embla__slide {\n  flex: 0 0 auto;\n  opacity: var(--advanced-camera-card-carousel-thumbnail-opacity);\n}\n\n.embla__slide.slide-selected {\n  opacity: 1;\n}\n\nadvanced-camera-card-thumbnail {\n  width: var(--advanced-camera-card-thumbnail-size);\n  height: var(--advanced-camera-card-thumbnail-size);\n  max-width: 100%;\n}\n\nadvanced-camera-card-thumbnail[details] {\n  width: var(--advanced-camera-card-thumbnail-details-width);\n}")}};e([he({attribute:!1})],O$.prototype,"hass",void 0),e([he({attribute:!1})],O$.prototype,"viewManagerEpoch",void 0),e([he({attribute:!1})],O$.prototype,"cameraManager",void 0),e([he({attribute:!1})],O$.prototype,"config",void 0),e([he({attribute:!1})],O$.prototype,"fadeThumbnails",void 0),O$=e([le("advanced-camera-card-thumbnail-carousel")],O$);var D$=":host {\n  width: 100%;\n  height: 100%;\n  display: block;\n}";const P$=document.createElement("template");P$.innerHTML='<style>\n:host {\n  background-color: #ffffff;\n  width: 350px;\n  max-width: 75vw;\n\n  visibility: hidden;\n  transition: visibility 0.5s;\n}\n\n:host([open]) {\n  visibility: visible;\n}\n\n::slotted(div) {\n  box-sizing: border-box;\n}\n\n#d {\n  position: fixed;\n  z-index: 99;\n  background-color: inherit;\n  -webkit-overflow-scrolling: touch;\n  overflow: auto;\n  overscroll-behavior: contain;\n  backdrop-filter: var(--side-drawer-backdrop-filter, none);\n\n  top: 0;\n  bottom: 0;\n  left: 0;\n  height: 100%;\n  box-sizing: border-box;\n  transform: translateX(-100%);\n  transition: var(\n    --side-drawer-transition,\n    transform 0.25s ease-out\n  );\n  width: inherit;\n  max-width: inherit;\n  border-top-right-radius: inherit;\n  border-bottom-right-radius: inherit;\n}\n\n:host([open]) #d {\n  transform: none;\n  box-shadow: 0px 0px 25px 0px rgba(0, 0, 0, 0.5);\n}\n\n#fs {\n  position: fixed;\n  z-index: 98;\n  background-color: #000000;\n  backdrop-filter: var(--side-drawer-backdrop-filter, none);\n\n  top: 0;\n  bottom: 0;\n  right: -30px; /* hide scrollbar until overscroll bug is fixed */\n  height: 100vh;\n  transition: var(\n    --side-drawer-overlay-transition,\n    opacity linear 0.25s\n  );\n  width: calc(\n    100vw + 30px\n  ); /* put back to just 100vw once overscroll bug fixed */\n  opacity: 0;\n  visibility: hidden;\n\n  overflow: auto;\n  overscroll-behavior: contain;\n}\n\n:host([open]) #fs {\n  opacity: var(--side-drawer-overlay-opacity, 0.7);\n  visibility: visible;\n}\n\n/*\n   * Workaround for bug https://bugs.chromium.org/p/chromium/issues/detail?id=813094\n   * Once bug is fixed and in the wild we can remove this element and make #if overflow:hidden\n   * and set "right: 0; width: 100vw" for #fs\n   */\n#ifs {\n  height: calc(100vh + 1px);\n}\n</style>\n<div id="d"><slot></slot></div>\n<div id="fs"><div id="ifs"></div></div>\n';class R$ extends HTMLElement{constructor(){super();const e=this.attachShadow({mode:"open"});e.appendChild(P$.content.cloneNode(!0)),this._freeSpaceDiv=e.getElementById("fs")}connectedCallback(){this._freeSpaceDiv&&this._freeSpaceDiv.addEventListener("click",this.handleFreeSpaceDivClick),this.upgradeProperty("open")}disconnectedCallback(){document.removeEventListener("keyup",this.handleKeyUp)}upgradeProperty(e){if(this.hasOwnProperty(e)){let t=this[e];delete this[e],this[e]=t}}handleKeyUp=e=>{if(!e.altKey&&"Escape"===e.key)e.preventDefault(),this.open=!1};get open(){return this.hasAttribute("open")}set open(e){e?this.hasAttribute("open")||this.setAttribute("open",""):this.hasAttribute("open")&&this.removeAttribute("open")}static get observedAttributes(){return["open"]}attributeChangedCallback(e,t,n){"open"===e&&(this.open?(this.setAttribute("tabindex","0"),this.setAttribute("aria-disabled","false"),this.focus({preventScroll:!0}),document.addEventListener("keyup",this.handleKeyUp),this.dispatchEvent(new CustomEvent("open",{bubbles:!0}))):(this.setAttribute("tabindex","-1"),this.setAttribute("aria-disabled","true"),document.removeEventListener("keyup",this.handleKeyUp),this.dispatchEvent(new CustomEvent("close",{bubbles:!0}))))}handleFreeSpaceDivClick=()=>{this.open=!1}}customElements.define("side-drawer",R$);let L$=class extends oe{constructor(){super(...arguments),this.location="left",this.control=!0,this.open=!1,this.empty=!0,this._refDrawer=Ae(),this._refSlot=Ae(),this._resizeObserver=new ResizeObserver((()=>this._hideDrawerIfNecessary())),this._isHoverableDevice=rf()}firstUpdated(e){super.firstUpdated(e);const t=document.createElement("style");t.innerHTML=":host {\n  width: unset;\n}\n\n#fs {\n  display: none;\n  width: 100%;\n  inset: 0;\n}\n\n#d,\n#fs {\n  height: 100%;\n  position: absolute;\n}\n\n#d {\n  overflow: visible;\n  max-width: 90%;\n  z-index: 10;\n}\n\n:host([location=right]) #d {\n  left: unset;\n  right: 0;\n  transform: translateX(100%);\n}\n\n:host([location=right][open]) #d {\n  transform: none;\n  box-shadow: var(--advanced-camera-card-css-box-shadow, 0px 0px 25px 0px black);\n}\n\n#ifs {\n  height: 100%;\n}",this._refDrawer.value?.shadowRoot?.appendChild(t)}_slotChanged(){const e=this._refSlot.value?_f(this._refSlot.value):[];this._resizeObserver.disconnect();for(const t of e)this._resizeObserver.observe(t);this._hideDrawerIfNecessary()}_hideDrawerIfNecessary(){if(!this._refDrawer.value)return;const e=this._refSlot.value?_f(this._refSlot.value):null;this.empty=!e||!e.length||e.every((e=>{const t=e.getBoundingClientRect();return!t.width||!t.height}))}render(){return q`
      <side-drawer
        ${ze(this._refDrawer)}
        location="${this.location}"
        ?open=${this.open}
        @mouseleave=${()=>{this.open&&(this.open=!1)}}
      >
        ${this.control?q`
              <div
                class="control-surround"
                @click=${e=>{Af(e),this.open=!this.open}}
              >
                <advanced-camera-card-icon
                  class="control"
                  .icon="${{icon:this.open?this.icons?.open??"mdi:menu-open":this.icons?.closed??"mdi:menu"}}"
                  @mouseenter=${()=>{this._isHoverableDevice&&!this.open&&(this.open=!0)}}
                >
                </advanced-camera-card-icon>
              </div>
            `:""}
        <slot ${ze(this._refSlot)} @slotchange=${()=>this._slotChanged()}></slot>
      </side-drawer>
    `}static get styles(){return s("side-drawer {\n  background-color: var(--card-background-color);\n}\n\ndiv.control-surround {\n  position: absolute;\n  bottom: 50%;\n  transform: translateY(50%);\n  z-index: 0;\n  padding-top: 20px;\n  padding-bottom: 20px;\n}\n\n:host([location=left]) div.control-surround {\n  padding-right: 12px;\n  left: 100%;\n}\n\n:host([location=right]) div.control-surround {\n  padding-left: 12px;\n  right: 100%;\n}\n\n:host([empty]),\n:host([empty]) > * {\n  visibility: hidden;\n}\n\n:host(:not([empty])),\n:host(:not([empty])) > * {\n  visibility: visible;\n}\n\nadvanced-camera-card-icon.control {\n  color: var(--advanced-camera-card-button-color);\n  background-color: var(--advanced-camera-card-button-background);\n  pointer-events: all;\n  --mdc-icon-size: 20px;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  transition: opacity 0.5s ease;\n}\n\n:host([open]) advanced-camera-card-icon.control,\nadvanced-camera-card-icon.control:hover {\n  opacity: 1;\n}\n\n:host([location=left]) advanced-camera-card-icon.control {\n  border-top-right-radius: 20px;\n  border-bottom-right-radius: 20px;\n}\n\n:host([location=right]) advanced-camera-card-icon.control {\n  border-top-left-radius: 20px;\n  border-bottom-left-radius: 20px;\n}")}};e([he({attribute:!0,reflect:!0})],L$.prototype,"location",void 0),e([he({attribute:!0,reflect:!0,type:Boolean})],L$.prototype,"control",void 0),e([he({type:Boolean,reflect:!0,attribute:!0})],L$.prototype,"open",void 0),e([he({attribute:!1})],L$.prototype,"icons",void 0),e([he({type:Boolean,reflect:!0,attribute:!0})],L$.prototype,"empty",void 0),L$=e([le("advanced-camera-card-drawer")],L$);let N$=class extends oe{constructor(){super(...arguments),this._refDrawerLeft=Ae(),this._refDrawerRight=Ae(),this._boundDrawerHandler=this._drawerHandler.bind(this)}connectedCallback(){super.connectedCallback(),this.addEventListener("advanced-camera-card:drawer:open",this._boundDrawerHandler),this.addEventListener("advanced-camera-card:drawer:close",this._boundDrawerHandler)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("advanced-camera-card:drawer:open",this._boundDrawerHandler),this.removeEventListener("advanced-camera-card:drawer:close",this._boundDrawerHandler)}_drawerHandler(e){const t=e.detail.drawer,n=e.type.endsWith(":open");"left"===t&&this._refDrawerLeft.value?this._refDrawerLeft.value.open=n:"right"===t&&this._refDrawerRight.value&&(this._refDrawerRight.value.open=n)}render(){return q` <slot name="above"></slot>
      <slot></slot>
      <advanced-camera-card-drawer
        ${ze(this._refDrawerLeft)}
        location="left"
        .icons=${this.drawerIcons?.left}
      >
        <slot name="left"></slot>
      </advanced-camera-card-drawer>
      <advanced-camera-card-drawer
        ${ze(this._refDrawerRight)}
        location="right"
        .icons=${this.drawerIcons?.right}
      >
        <slot name="right"></slot>
      </advanced-camera-card-drawer>
      <slot name="below"></slot>`}static get styles(){return s(":host {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  overflow: hidden;\n}\n\n::slotted(:not([slot])) {\n  flex: 1;\n  min-height: 0px;\n}")}};e([he({attribute:!1})],N$.prototype,"drawerIcons",void 0),N$=e([le("advanced-camera-card-surround-basic")],N$);let F$=class extends oe{_hasDrawer(){return!!this.thumbnailConfig&&["left","right"].includes(this.thumbnailConfig.mode)}willUpdate(e){this.timelineConfig?.mode&&"none"!==this.timelineConfig.mode&&import("./timeline-core-023b9892.js");const t=this.viewManagerEpoch?.manager.getView();e.has("viewManagerEpoch")&&(this.viewManagerEpoch?.manager.hasMajorMediaChange(this.viewManagerEpoch?.oldView)||this.viewManagerEpoch?.oldView?.displayMode!==t?.displayMode)&&(this._cameraIDsForTimeline=this._getCameraIDsForTimeline()??void 0)}_getCameraIDsForTimeline(){const e=this.viewManagerEpoch?.manager.getView();if(!e||!this.cameraManager)return null;if(e.is("live")){const t={anyCapabilities:["clips","snapshots","recordings"]};return e.supportsMultipleDisplayModes()&&e.isGrid()?this.cameraManager.getStore().getCameraIDsWithCapability(t):this.cameraManager.getStore().getAllDependentCameras(e.camera,t)}return e.isViewerView()?e.query?.getQueryCameraIDs()??null:null}render(){const e=this.viewManagerEpoch?.manager.getView();if(!this.hass||!e)return;const t=(e,t)=>{this.thumbnailConfig&&this._hasDrawer()&&Gg(e.composedPath()[0],"drawer:"+t,{drawer:this.thumbnailConfig.mode})};return q` <advanced-camera-card-surround-basic
      @advanced-camera-card:thumbnails:open=${e=>t(e,"open")}
      @advanced-camera-card:thumbnails:close=${e=>t(e,"close")}
    >
      ${this.thumbnailConfig&&"none"!==this.thumbnailConfig.mode?q` <advanced-camera-card-thumbnail-carousel
            slot=${this.thumbnailConfig.mode}
            .hass=${this.hass}
            .config=${this.thumbnailConfig}
            .cameraManager=${this.cameraManager}
            .fadeThumbnails=${e.isViewerView()}
            .viewManagerEpoch=${this.viewManagerEpoch}
            .selected=${e.queryResults?.getSelectedIndex()??void 0}
            @advanced-camera-card:thumbnail-carousel:tap=${e=>{const n=e.detail.queryResults.getSelectedResult();n&&(this.viewManagerEpoch?.manager.setViewByParameters({params:{view:"media",queryResults:e.detail.queryResults,...n.getCameraID()&&{camera:n.getCameraID()}},modifiers:[new w$(["timeline","mediaViewer"])]}),t(e,"close"))}}
          >
          </advanced-camera-card-thumbnail-carousel>`:""}
      ${this.timelineConfig&&"none"!==this.timelineConfig.mode?q` <advanced-camera-card-timeline-core
            slot=${this.timelineConfig.mode}
            .hass=${this.hass}
            .viewManagerEpoch=${this.viewManagerEpoch}
            .itemClickAction=${e.isViewerView()||!this.thumbnailConfig||"none"===this.thumbnailConfig?.mode?"play":"select"}
            .cameraIDs=${this._cameraIDsForTimeline}
            .mini=${!0}
            .timelineConfig=${this.timelineConfig}
            .thumbnailConfig=${this.thumbnailConfig}
            .cameraManager=${this.cameraManager}
            .cardWideConfig=${this.cardWideConfig}
          >
          </advanced-camera-card-timeline-core>`:""}
      <slot></slot>
    </advanced-camera-card-surround-basic>`}static get styles(){return s(D$)}};e([he({attribute:!1})],F$.prototype,"hass",void 0),e([he({attribute:!1})],F$.prototype,"viewManagerEpoch",void 0),e([he({attribute:!1,hasChanged:nf})],F$.prototype,"thumbnailConfig",void 0),e([he({attribute:!1,hasChanged:nf})],F$.prototype,"timelineConfig",void 0),e([he({attribute:!1})],F$.prototype,"cameraManager",void 0),e([he({attribute:!1})],F$.prototype,"cardWideConfig",void 0),F$=e([le("advanced-camera-card-surround")],F$);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
class V${constructor(e){this.Y=e}disconnect(){this.Y=void 0}reconnect(e){this.Y=e}deref(){return this.Y}}class H${constructor(){this.Z=void 0,this.q=void 0}get(){return this.Z}pause(){this.Z??=new Promise((e=>this.q=e))}resume(){this.q?.(),this.Z=this.q=void 0}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const B$=e=>!(e=>null===e||"object"!=typeof e&&"function"!=typeof e)(e)&&"function"==typeof e.then,q$=1073741823;const U$=ge(class extends Ee{constructor(){super(...arguments),this._$Cwt=q$,this._$Cbt=[],this._$CK=new V$(this),this._$CX=new H$}render(...e){return e.find((e=>!B$(e)))??U}update(e,t){const n=this._$Cbt;let a=n.length;this._$Cbt=t;const i=this._$CK,r=this._$CX;this.isConnected||this.disconnected();for(let e=0;e<t.length&&!(e>this._$Cwt);e++){const s=t[e];if(!B$(s))return this._$Cwt=e,s;e<a&&s===n[e]||(this._$Cwt=q$,a=0,Promise.resolve(s).then((async e=>{for(;r.get();)await r.get();const t=i.deref();if(void 0!==t){const n=t._$Cbt.indexOf(s);n>-1&&n<t._$Cwt&&(t._$Cwt=n,t.setValue(e))}})))}return U}disconnected(){this._$CK.disconnect(),this._$CX.pause()}reconnected(){this._$CK.reconnect(this),this._$CX.resume()}});let Z$=class extends oe{async _renderDiagnostics(){const e=await(async(e,t,n)=>{const a=e&&t?await t.getMatchingDevices(e,(e=>"Frigate"===e.manufacturer)):[],i=new Map;return a?.forEach((e=>{e.config_entries.forEach((t=>{e.model&&i.set(t,e.model)}))})),{card_version:"7.0.0",browser:navigator.userAgent,date:new Date,lang:Q_(),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,git:{hash:Hx,build_date:Vx,commit_date:Bx},...e&&{ha_version:e.config.version},custom_integrations:{frigate:{...await Kx("frigate",e),...i.size&&{devices:Object.fromEntries(i)}},hass_web_proxy:await Kx(Ux,e)},...n&&{config:n}}})(this.hass,this.deviceRegistryManager,this.rawConfig);return WS({message:K_("error.diagnostics"),icon:"mdi:cogs",context:e})}render(){return q`${U$(this._renderDiagnostics(),WS({message:K_("error.fetching_diagnostics"),dotdotdot:!0,icon:"mdi:cogs"}))}`}static get styles(){return s(D$)}};e([he({attribute:!1})],Z$.prototype,"deviceRegistryManager",void 0),e([he({attribute:!1})],Z$.prototype,"rawConfig",void 0),Z$=e([le("advanced-camera-card-diagnostics")],Z$);let W$=class extends oe{willUpdate(e){if(e.has("viewManagerEpoch")||e.has("config")){const e=this.viewManagerEpoch?.manager.getView();(e?.is("live")||this._shouldLivePreload())&&import("./index-d224c57d.js"),e?.isGalleryView()?import("./gallery-15cb35d5.js"):e?.isViewerView()?import("./index-48ea51e7.js"):e?.is("image")?import("./image-27627d95.js"):e?.is("timeline")&&import("./timeline-0b2752f8.js")}e.has("hide")&&(this.hide?this.setAttribute("hidden",""):this.removeAttribute("hidden"))}shouldUpdate(e){return!0}_shouldLivePreload(){const e=this.viewManagerEpoch?.manager.getView();return!!this.overriddenConfig?.live.preload&&!e?.is("diagnostics")}render(){if(!(this.hass&&this.overriddenConfig&&this.nonOverriddenConfig&&this.cardWideConfig))return q``;const e=this.viewManagerEpoch?.manager.getView(),t={hidden:this._shouldLivePreload()&&!e?.is("live")},n={hidden:!!this.hide},a=e?.is("live")?this.overriddenConfig.live.controls.thumbnails:e?.isViewerView()?this.overriddenConfig.media_viewer.controls.thumbnails:e?.is("timeline")?this.overriddenConfig.timeline.controls.thumbnails:void 0,i=e?.is("live")?this.overriddenConfig.live.controls.timeline:e?.isViewerView()?this.overriddenConfig.media_viewer.controls.timeline:void 0,r=e?this.cameraManager?.getStore().getCameraConfig(e.camera)??null:null;return q` <advanced-camera-card-surround
      class="${_e(n)}"
      .hass=${this.hass}
      .viewManagerEpoch=${this.viewManagerEpoch}
      .thumbnailConfig=${this.hide?void 0:a}
      .timelineConfig=${this.hide?void 0:i}
      .cameraManager=${this.cameraManager}
      .cardWideConfig=${this.cardWideConfig}
    >
      ${!this.hide&&e?.is("image")&&r?q` <advanced-camera-card-image
            .imageConfig=${this.overriddenConfig.image}
            .viewManagerEpoch=${this.viewManagerEpoch}
            .hass=${this.hass}
            .cameraConfig=${r}
            .cameraManager=${this.cameraManager}
          >
          </advanced-camera-card-image>`:""}
      ${!this.hide&&e?.isGalleryView()?q` <advanced-camera-card-gallery
            .hass=${this.hass}
            .viewManagerEpoch=${this.viewManagerEpoch}
            .galleryConfig=${this.overriddenConfig.media_gallery}
            .cameraManager=${this.cameraManager}
            .cardWideConfig=${this.cardWideConfig}
          >
          </advanced-camera-card-gallery>`:""}
      ${!this.hide&&e?.isViewerView()?q`
            <advanced-camera-card-viewer
              .hass=${this.hass}
              .viewManagerEpoch=${this.viewManagerEpoch}
              .viewerConfig=${this.overriddenConfig.media_viewer}
              .resolvedMediaCache=${this.resolvedMediaCache}
              .cameraManager=${this.cameraManager}
              .cardWideConfig=${this.cardWideConfig}
            >
            </advanced-camera-card-viewer>
          `:""}
      ${!this.hide&&e?.is("timeline")?q` <advanced-camera-card-timeline
            .hass=${this.hass}
            .viewManagerEpoch=${this.viewManagerEpoch}
            .timelineConfig=${this.overriddenConfig.timeline}
            .cameraManager=${this.cameraManager}
            .cardWideConfig=${this.cardWideConfig}
          >
          </advanced-camera-card-timeline>`:""}
      ${!this.hide&&e?.is("diagnostics")?q` <advanced-camera-card-diagnostics
            .hass=${this.hass}
            .rawConfig=${this.rawConfig}
            .deviceRegistryManager=${this.deviceRegistryManager}
          >
          </advanced-camera-card-diagnostics>`:""}
      ${this._shouldLivePreload()||!this.hide&&e?.is("live")?q`
              <advanced-camera-card-live
                .hass=${this.hass}
                .viewManagerEpoch=${this.viewManagerEpoch}
                .nonOverriddenLiveConfig=${this.nonOverriddenConfig.live}
                .overriddenLiveConfig=${this.overriddenConfig.live}
                .conditionsManagerEpoch=${this.conditionsManagerEpoch}
                .overrides=${this.overriddenConfig.overrides}
                .cameraManager=${this.cameraManager}
                .cardWideConfig=${this.cardWideConfig}
                .microphoneState=${this.microphoneState}
                .triggeredCameraIDs=${this.triggeredCameraIDs}
                class="${_e(t)}"
              >
              </advanced-camera-card-live>
            `:""}
    </advanced-camera-card-surround>`}static get styles(){return s(":host {\n  width: 100%;\n  height: 100%;\n  display: block;\n}\n\n:host([hidden]),\n.hidden {\n  display: none;\n}")}};e([he({attribute:!1})],W$.prototype,"hass",void 0),e([he({attribute:!1})],W$.prototype,"viewManagerEpoch",void 0),e([he({attribute:!1})],W$.prototype,"cameraManager",void 0),e([he({attribute:!1})],W$.prototype,"nonOverriddenConfig",void 0),e([he({attribute:!1})],W$.prototype,"overriddenConfig",void 0),e([he({attribute:!1})],W$.prototype,"cardWideConfig",void 0),e([he({attribute:!1})],W$.prototype,"rawConfig",void 0),e([he({attribute:!1})],W$.prototype,"resolvedMediaCache",void 0),e([he({attribute:!1})],W$.prototype,"conditionsManagerEpoch",void 0),e([he({attribute:!1})],W$.prototype,"hide",void 0),e([he({attribute:!1})],W$.prototype,"microphoneState",void 0),e([he({attribute:!1})],W$.prototype,"triggeredCameraIDs",void 0),e([he({attribute:!1})],W$.prototype,"deviceRegistryManager",void 0),W$=e([le("advanced-camera-card-views")],W$);console.info("%c 📷 Advanced Camera Card %c 7.0.0 ","padding: 3px; color: black; background: pink;","padding: 3px; color: black; background: white;"),window.customCards=window.customCards||[],window.customCards.push({type:"advanced-camera-card",name:K_("common.advanced_camera_card"),description:K_("common.advanced_camera_card_description"),preview:!0,documentationURL:"https://github.com/dermotduffy/advanced-camera-card"});let Q$=class extends oe{constructor(){super(...arguments),this._controller=new Sx(this,(()=>this._refMain.value?.scroll({top:0})),(()=>this._refMenu.value?.toggleMenu()),this._requestUpdateForComponentsThatUseConditions.bind(this)),this._menuButtonController=new kx,this._refMenu=Ae(),this._refOverlay=Ae(),this._refMain=Ae(),this._refElements=Ae(),this._refViews=Ae()}get _config(){return this._controller.getConfigManager().getConfig()}get _hass(){return this._controller.getHASSManager().getHASS()}set hass(e){this._controller.getHASSManager().setHASS(e),this._refMenu.value&&(this._refMenu.value.hass=e),this._refElements.value&&(this._refElements.value.hass=e),this._refViews.value&&(this._refViews.value.hass=e)}static async getConfigElement(){return await Sx.getConfigElement()}static getStubConfig(e,t){return Sx.getStubConfig(t)}_requestUpdateForComponentsThatUseConditions(){this._refViews.value&&(this._refViews.value.conditionsManagerEpoch=this._controller.getConditionsManager().getEpoch()??void 0),this._refElements.value&&(this._refElements.value.conditionsManagerEpoch=this._controller.getConditionsManager().getEpoch()??void 0)}setConfig(e){this._controller.getConfigManager().setConfig(e)}shouldUpdate(){return!!this.isConnected&&(this._controller.getMessageManager().hasMessage()||this._controller.getInitializationManager().isInitializedMandatory()||this._controller.getInitializationManager().initializeMandatory(),!0)}_renderMenuStatusContainer(e){if(!this._config)return;const t=this._config.menu.style,n=this._config.menu.position,a=this._config.status_bar.style,i=this._config.status_bar.position;if("none"===t&&"none"===a||"overlay"===e&&"outside"===t&&"outside"===a||"overlay"!==e&&("outside"!==t||n!==e)&&("outside"!==a||i!==e))return;const r=r=>{const s="none"!==t&&("outside"===t&&"outerlay"===r&&n===e||"outside"!==t&&"overlay"===r),o="none"!==a&&("outside"===a&&"outerlay"===r&&i===e||"outside"!==a&&"overlay"===r),c="left"===n||"right"===n||"bottom"===n&&"hidden"===t&&"popup"!==a||"top"===n&&"popup"===a;return q`
        ${s&&c?this._renderMenu(n):""}
        ${o?this._renderStatusBar(i):""}
        ${s&&!c?this._renderMenu(n):""}
      `};return q`
      ${"overlay"===e?q`<advanced-camera-card-overlay
            >${r("overlay")}</advanced-camera-card-overlay
          >`:q`<div class="outerlay" data-position="${e}">
            ${r("outerlay")}
          </div>`}
    `}_renderMenu(e){const t=this._controller.getViewManager().getView();if(this._hass&&this._config)return q`
      <advanced-camera-card-menu
        ${ze(this._refMenu)}
        slot=${ve(e)}
        .hass=${this._hass}
        .menuConfig=${this._config.menu}
        .buttons=${this._menuButtonController.calculateButtons(this._hass,this._config,this._controller.getCameraManager(),{inExpandedMode:this._controller.getExpandManager().isExpanded(),fullscreenManager:this._controller.getFullscreenManager(),currentMediaLoadedInfo:this._controller.getMediaLoadedInfoManager().get(),showCameraUIButton:this._controller.getCameraURLManager().hasCameraURL(),mediaPlayerController:this._controller.getMediaPlayerManager(),microphoneManager:this._controller.getMicrophoneManager(),view:t,viewManager:this._controller.getViewManager()})}
        .entityRegistryManager=${this._controller.getEntityRegistryManager()}
      ></advanced-camera-card-menu>
    `}_renderStatusBar(e){if(this._config)return q`
      <advanced-camera-card-status-bar
        slot=${ve(e)}
        .items=${this._controller.getStatusBarItemManager().calculateItems({statusConfig:this._config.status_bar,cameraManager:this._controller.getCameraManager(),view:this._controller.getViewManager().getView(),mediaLoadedInfo:this._controller.getMediaLoadedInfoManager().get()})}
        .config=${this._config.status_bar}
      ></advanced-camera-card-status-bar>
    `}updated(){this._controller.getInitializationManager().isInitializedMandatory()&&this._controller.getQueryStringManager().executeIfNecessary()}_renderInDialogIfNecessary(e){return this._controller.getExpandManager().isExpanded()?q` <web-dialog
        open
        center
        @close=${()=>{this._controller.getExpandManager().setExpanded(!1)}}
      >
        ${e}
      </web-dialog>`:e}render(){if(!this._hass)return;const e="outside"===this._config?.menu.style||"outside"===this._config?.status_bar.style,t={main:!0,"curve-top":!e||"top"!==this._config?.menu.position&&"top"!==this._config?.status_bar.position,"curve-bottom":!e||"bottom"!==this._config?.menu.position&&"bottom"!==this._config?.status_bar.position},n=this._controller.getActionsManager().getMergedActions(),a=this._controller.getCameraManager(),i=!1!==this._config?.performance?.features.card_loading_indicator&&!this._controller.getMessageManager().hasMessage();return this._renderInDialogIfNecessary(q` <ha-card
        id="ha-card"
        .actionHandler=${jf({hasHold:Ef(n.hold_action),hasDoubleClick:Ef(n.double_tap_action)})}
        style="${De(this._controller.getStyleManager().getAspectRatioStyle())}"
        @advanced-camera-card:message=${e=>this._controller.getMessageManager().setMessageIfHigherPriority(e.detail)}
        @advanced-camera-card:media:loaded=${e=>this._controller.getMediaLoadedInfoManager().set(e.detail)}
        @advanced-camera-card:media:unloaded=${()=>this._controller.getMediaLoadedInfoManager().clear()}
        @advanced-camera-card:media:volumechange=${()=>this.requestUpdate()}
        @advanced-camera-card:media:play=${()=>this.requestUpdate()}
        @advanced-camera-card:media:pause=${()=>this.requestUpdate()}
        @advanced-camera-card:focus=${()=>this.focus()}
      >
        ${i?q`<advanced-camera-card-loading
              ?loaded=${this._controller.getInitializationManager().wasEverInitialized()}
            ></advanced-camera-card-loading>`:""}
        ${this._renderMenuStatusContainer("top")}
        ${this._renderMenuStatusContainer("overlay")}
        <div ${ze(this._refMain)} class="${_e(t)}">
          <advanced-camera-card-views
            ${ze(this._refViews)}
            .hass=${this._hass}
            .viewManagerEpoch=${this._controller.getViewManager().getEpoch()}
            .cameraManager=${a}
            .resolvedMediaCache=${this._controller.getResolvedMediaCache()}
            .nonOverriddenConfig=${this._controller.getConfigManager().getNonOverriddenConfig()}
            .overriddenConfig=${this._controller.getConfigManager().getConfig()}
            .cardWideConfig=${this._controller.getConfigManager().getCardWideConfig()}
            .rawConfig=${this._controller.getConfigManager().getRawConfig()}
            .configManager=${this._controller.getConfigManager()}
            .conditionsManagerEpoch=${this._controller.getConditionsManager()?.getEpoch()}
            .hide=${!!this._controller.getMessageManager().hasMessage()}
            .microphoneState=${this._controller.getMicrophoneManager().getState()}
            .triggeredCameraIDs=${this._config?.view.triggers.show_trigger_status?this._controller.getTriggersManager().getTriggeredCameraIDs():void 0}
            .deviceRegistryManager=${this._controller.getDeviceRegistryManager()}
          ></advanced-camera-card-views>
          ${this._controller.getMessageManager().hasMessage()?WS(this._controller.getMessageManager().getMessage()):""}
        </div>
        ${this._renderMenuStatusContainer("bottom")}
        ${this._config?.elements?q` <advanced-camera-card-elements
              ${ze(this._refElements)}
              .hass=${this._hass}
              .elements=${this._config?.elements}
              .conditionsManagerEpoch=${this._controller.getConditionsManager()?.getEpoch()}
              @advanced-camera-card:menu:add=${e=>{this._menuButtonController.addDynamicMenuButton(e.detail),this.requestUpdate()}}
              @advanced-camera-card:menu:remove=${e=>{this._menuButtonController.removeDynamicMenuButton(e.detail),this.requestUpdate()}}
              @advanced-camera-card:status-bar:add=${e=>{this._controller.getStatusBarItemManager().addDynamicStatusBarItem(e.detail)}}
              @advanced-camera-card:status-bar:remove=${e=>{this._controller.getStatusBarItemManager().removeDynamicStatusBarItem(e.detail)}}
              @advanced-camera-card:conditions:evaluate=${e=>{e.evaluation=this._controller.getConditionsManager()?.evaluateConditions(e.conditions)}}
            >
            </advanced-camera-card-elements>`:""}
      </ha-card>`)}static get styles(){return s(':host([themes~=dark]) {\n  --primary-background-color: #111111;\n  --secondary-background-color: #282828;\n  --primary-text-color: #e1e1e1;\n  --divider-color: rgba(225, 225, 225, 0.12);\n  --app-header-background-color: #101e24;\n  --app-header-text-color: #e1e1e1;\n}\n\n:host([themes~=light]) {\n  --primary-background-color: #fafafa;\n  --secondary-background-color: #e5e5e5;\n  --primary-text-color: #212121;\n  --divider-color: rgba(0, 0, 0, 0.12);\n  --app-header-text-color: #ffffff;\n  --app-header-background-color: #03a9f4;\n}\n\n:host([themes~=traditional]) {\n  /*********\n   * General\n   *********/\n  --advanced-camera-card-control-background: black;\n  /******\n   * Menu\n   ******/\n  --advanced-camera-card-menu-button-active-color: var(--primary-color, white);\n  --advanced-camera-card-menu-button-background: rgba(0, 0, 0, 0.6);\n  --advanced-camera-card-menu-position-left-alignment-top-background: linear-gradient(180deg, var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), color-mix(in oklab, var(--advanced-camera-card-menu-background), transparent 100%));\n  --advanced-camera-card-menu-position-left-alignment-bottom-background: linear-gradient(0deg, var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), color-mix(in oklab, var(--advanced-camera-card-menu-background), transparent 100%));\n  --advanced-camera-card-menu-position-right-alignment-top-background: linear-gradient(180deg, var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), color-mix(in oklab, var(--advanced-camera-card-menu-background), transparent 100%));\n  --advanced-camera-card-menu-position-right-alignment-bottom-background: linear-gradient(0deg, var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), color-mix(in oklab, var(--advanced-camera-card-menu-background), transparent 100%));\n  --advanced-camera-card-menu-position-top-alignment-left-background: linear-gradient(90deg, var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), color-mix(in oklab, var(--advanced-camera-card-menu-background), transparent 100%));\n  --advanced-camera-card-menu-position-top-alignment-right-background: linear-gradient(270deg, var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), color-mix(in oklab, var(--advanced-camera-card-menu-background), transparent 100%));\n  --advanced-camera-card-menu-position-bottom-alignment-left-background: linear-gradient(90deg, var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), color-mix(in oklab, var(--advanced-camera-card-menu-background), transparent 100%));\n  --advanced-camera-card-menu-position-bottom-alignment-right-background: linear-gradient(270deg, var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), color-mix(in oklab, var(--advanced-camera-card-menu-background), transparent 100%));\n  --advanced-camera-card-menu-position-top-alignment-left-style-outside-background: var(\n    --secondary-background-color\n  );\n  --advanced-camera-card-menu-position-top-alignment-right-style-outside-background: var(\n    --secondary-background-color\n  );\n  --advanced-camera-card-menu-position-bottom-alignment-left-style-outside-background: var(\n    --secondary-background-color\n  );\n  --advanced-camera-card-menu-position-bottom-alignment-right-style-outside-background: var(\n    --secondary-background-color\n  );\n  /************\n   * Status bar\n   ************/\n  --advanced-camera-card-status-bar-color: white;\n  --advanced-camera-card-status-bar-position-top-background: linear-gradient(90deg, var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), color-mix(in oklab, var(--advanced-camera-card-menu-background), transparent 100%));\n  --advanced-camera-card-status-bar-position-bottom-background: linear-gradient(90deg, var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), var(--advanced-camera-card-menu-background), color-mix(in oklab, var(--advanced-camera-card-menu-background), transparent 100%));\n  --advanced-camera-card-status-bar-position-top-style-outside-background: var(\n    --secondary-background-color\n  );\n  --advanced-camera-card-status-bar-position-bottom-style-outside-background: var(\n    --secondary-background-color\n  );\n  --advanced-camera-card-status-bar-position-top-style-outside-color: var(\n    --secondary-text-color\n  );\n  --advanced-camera-card-status-bar-position-bottom-style-outside-color: var(\n    --secondary-text-color\n  );\n}\n\n:host {\n  /*********\n   * General\n   *********/\n  --advanced-camera-card-exterior: var(--secondary-background-color, black);\n  --advanced-camera-card-background: var(--primary-background-color, white);\n  --advanced-camera-card-foreground-primary: var(--primary-color, black);\n  --advanced-camera-card-active-color: var(--accent-color, orange);\n  --advanced-camera-card-warning-color: var(--error-color, red);\n  --advanced-camera-card-text-color: var(--primary-text-color);\n  --advanced-camera-card-divider-color: var(--divider-color);\n  --advanced-camera-card-control-background: var(--app-header-background-color);\n  --advanced-camera-card-control-background-transparent: color-mix(\n    in oklab,\n    var(--advanced-camera-card-control-background),\n    transparent 60%\n  );\n  --advanced-camera-card-control-foreground: var(--app-header-text-color);\n  /*********\n   * Buttons\n   *********/\n  --advanced-camera-card-button-color: var(--advanced-camera-card-control-foreground);\n  --advanced-camera-card-button-background: var(\n    --advanced-camera-card-control-background-transparent\n  );\n  /******\n   * Menu\n   ******/\n  --advanced-camera-card-menu-button-active-color: var(\n    --advanced-camera-card-active-color\n  );\n  --advanced-camera-card-menu-button-inactive-color: var(\n    --advanced-camera-card-button-color\n  );\n  --advanced-camera-card-menu-button-critical-color: var(\n    --error-color,\n    var(--advanced-camera-card-warning-color)\n  );\n  --advanced-camera-card-menu-button-background: color-mix(\n    in oklab,\n    var(--advanced-camera-card-menu-button-inactive-color),\n    transparent 60%\n  );\n  --advanced-camera-card-menu-background: var(\n    --advanced-camera-card-control-background-transparent\n  );\n  --advanced-camera-card-menu-style-outside-background: var(\n    --advanced-camera-card-control-background\n  );\n  --advanced-camera-card-menu-override-background: unset;\n  --advanced-camera-card-menu-override-button-inactive-color: unset;\n  --advanced-camera-card-menu-override-button-background: unset;\n  /************\n   * Status bar\n   ************/\n  --advanced-camera-card-status-bar-override-background: unset;\n  --advanced-camera-card-status-bar-override-color: unset;\n  --advanced-camera-card-status-bar-color: var(\n    --advanced-camera-card-control-foreground\n  );\n  --advanced-camera-card-status-bar-background: var(\n    --advanced-camera-card-control-background-transparent\n  );\n  --advanced-camera-card-status-bar-style-outside-background: var(\n    --advanced-camera-card-control-background\n  );\n  /************\n   * Thumbnails\n   ************/\n  --advanced-camera-card-thumbnail-icon-color: var(\n    --advanced-camera-card-foreground-primary\n  );\n  --advanced-camera-card-thumbnail-border-color: var(\n    --advanced-camera-card-foreground-primary\n  );\n  --advanced-camera-card-thumbnail-background: var(--advanced-camera-card-background);\n  --advanced-camera-card-thumbnail-icon-favorite-color: color-mix(\n    in oklab,\n    gold,\n    transparent 25%\n  );\n  --advanced-camera-card-thumbnail-text-color: var(--advanced-camera-card-text-color);\n  /**********\n   * Timeline\n   **********/\n  --advanced-camera-card-timeline-text-color: var(--advanced-camera-card-text-color);\n  --advanced-camera-card-timeline-item-color: var(\n    --advanced-camera-card-foreground-primary\n  );\n  --advanced-camera-card-timeline-tool-color: var(\n    --advanced-camera-card-foreground-primary\n  );\n  --advanced-camera-card-timeline-background: var(--advanced-camera-card-background);\n  --advanced-camera-card-timeline-background-item-color: color-mix(\n    in oklab,\n    var(--advanced-camera-card-timeline-item-color),\n    transparent 90%\n  );\n  --advanced-camera-card-timeline-divider-color: var(\n    --advanced-camera-card-divider-color\n  );\n  --advanced-camera-card-timeline-target-bar-color: var(\n    --advanced-camera-card-active-color\n  );\n  /*******************\n   * Loading Indicator\n   *******************/\n  --advanced-camera-card-loading-background-color: var(\n    --advanced-camera-card-control-background-transparent\n  );\n  --advanced-camera-card-loading-foreground-color: var(\n    --advanced-camera-card-control-foreground\n  );\n  /*********\n   * Message\n   *********/\n  --advanced-camera-card-message-color: var(--advanced-camera-card-text-color);\n  --advanced-camera-card-message-background: var(--advanced-camera-card-background);\n  --advanced-camera-card-message-overlay-background: var(\n    --advanced-camera-card-control-background-transparent\n  );\n  --advanced-camera-card-message-overlay-color: var(\n    --advanced-camera-card-control-foreground\n  );\n}\n\n:host {\n  display: block;\n  position: relative;\n  background-color: var(--card-background-color);\n  border-radius: var(--ha-card-border-radius, 4px);\n  height: var(--advanced-camera-card-height);\n  min-height: 100px;\n  pointer-events: all;\n  --advanced-camera-card-expand-max-height: calc((100vh - (2 * 56px)) * 0.85);\n  --advanced-camera-card-expand-max-width: 85vw;\n  --advanced-camera-card-expand-width: none;\n  --advanced-camera-card-expand-height: none;\n  --advanced-camera-card-expand-aspect-ratio: unset;\n  --advanced-camera-card-height: auto;\n}\n\nadvanced-camera-card-loading {\n  position: absolute;\n  inset: 0;\n  z-index: 1;\n}\n\n:host([dimmable]:not([interaction])) {\n  filter: brightness(75%);\n}\n\n:host([panel]:not([casted])) {\n  height: calc(100vh - var(--kiosk-header-height, var(--header-height)));\n}\n\n:host([panel][casted]) {\n  height: 100%;\n}\n\ndiv.main {\n  position: relative;\n  overflow: auto;\n  width: 100%;\n  height: 100%;\n  margin: auto;\n  display: block;\n  transform: translateZ(0);\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n}\n\n/* Hide scrollbar for Chrome, Safari and Opera */\ndiv.main::-webkit-scrollbar {\n  display: none;\n}\n\ndiv.main.curve-top {\n  border-top-left-radius: var(--ha-card-border-radius, 4px);\n  border-top-right-radius: var(--ha-card-border-radius, 4px);\n}\n\ndiv.main.curve-bottom {\n  border-bottom-left-radius: var(--ha-card-border-radius, 4px);\n  border-bottom-right-radius: var(--ha-card-border-radius, 4px);\n}\n\nha-card {\n  display: flex;\n  flex-direction: column;\n  margin: auto;\n  border: 0px;\n  overflow: visible;\n  width: 100%;\n  height: 100%;\n  position: static;\n  color: var(--secondary-text-color, white);\n}\n\n/************\n * Fullscreen\n *************/\n:host(:fullscreen) #ha-card {\n  border-radius: 0px;\n  box-shadow: none;\n  margin: 0;\n}\n\n:host(:-webkit-full-screen) #ha-card {\n  border-radius: 0px;\n  box-shadow: none;\n  margin: 0;\n}\n\n:host(:fullscreen) div.main,\n:host(:fullscreen) advanced-camera-card-menu {\n  border-radius: 0px;\n}\n\n:host(:-webkit-full-screen) div.main,\n:host(:-webkit-full-screen) advanced-camera-card-menu {\n  border-radius: 0px;\n}\n\n/***************\n * Expanded mode\n ***************/\nweb-dialog {\n  --dialog-padding: 0px;\n  --dialog-container-padding: 0px;\n  --dialog-max-height: var(--advanced-camera-card-expand-max-height);\n  --dialog-max-width: var(--advanced-camera-card-expand-max-width);\n  --dialog-width: var(--advanced-camera-card-expand-width);\n  --dialog-height: var(--advanced-camera-card-expand-height);\n  --dialog-overflow-x: visible;\n  --dialog-overflow-y: visible;\n  max-height: 100vh;\n}\n\nweb-dialog::part(dialog) {\n  aspect-ratio: var(--advanced-camera-card-expand-aspect-ratio);\n  border-radius: 0px;\n  background: transparent;\n}\n\n/*************************************\n * "Outside" style for menu/status bar\n *************************************/\n.outerlay[data-position=top] > *:first-child {\n  border-top-left-radius: var(--ha-card-border-radius, 4px);\n  border-top-right-radius: var(--ha-card-border-radius, 4px);\n}\n\n.outerlay[data-position=bottom] > *:last-child {\n  border-bottom-left-radius: var(--ha-card-border-radius, 4px);\n  border-bottom-right-radius: var(--ha-card-border-radius, 4px);\n}\n\n/*******************\n * Menu hover styles\n *******************/\nadvanced-camera-card-menu {\n  z-index: 2;\n}\n\nadvanced-camera-card-menu[data-style*=hover] {\n  transition: opacity 0.5s ease;\n  opacity: 0;\n}\n\nadvanced-camera-card-menu[data-style*=hover]:hover,\nha-card:hover > advanced-camera-card-overlay > advanced-camera-card-menu[data-style=hover-card] {\n  opacity: 1;\n}\n\n/*************************\n * Status bar hover styles\n *************************/\nadvanced-camera-card-status-bar {\n  z-index: 1;\n}\n\nadvanced-camera-card-status-bar[data-style*=hover] {\n  transition: opacity 0.5s ease;\n  opacity: 0;\n}\n\nadvanced-camera-card-status-bar[data-style*=hover]:hover,\nha-card:hover > advanced-camera-card-overlay > advanced-camera-card-status-bar[data-style=hover-card] {\n  opacity: 1;\n}')}getCardSize(){return 6}};Q$=e([le("advanced-camera-card")],Q$);let K$=class extends Q${};K$=e([le("frigate-card")],K$);export{Uo as $,er as A,tr as B,Ui as C,nr as D,ar as E,ir as F,Di as G,Pi as H,Ri as I,Li as J,Ni as K,Fi as L,Vi as M,Hi as N,Bi as O,fo as P,ao as Q,Wo as R,Qo as S,rc as T,Us as U,Fs as V,Vs as W,Hs as X,qs as Y,ic as Z,e as _,oe as a,Ts as a$,Dl as a0,Pl as a1,Y_ as a2,Wb as a3,Je as a4,Qb as a5,Io as a6,zi as a7,Ti as a8,ji as a9,ws as aA,Qr as aB,Kr as aC,Yr as aD,ss as aE,os as aF,ls as aG,ds as aH,cs as aI,as as aJ,is as aK,rs as aL,ps as aM,_s as aN,vs as aO,us as aP,hs as aQ,fs as aR,ms as aS,gs as aT,es as aU,ns as aV,ts as aW,Xr as aX,Jr as aY,Gr as aZ,As as a_,Oi as aa,qi as ab,Yi as ac,to as ad,eo as ae,Js as af,no as ag,mo as ah,ho as ai,go as aj,Zo as ak,po as al,ks as am,Cs as an,zs as ao,Ms as ap,Ss as aq,qr as ar,Ur as as,Zr as at,Wr as au,$s as av,Es as aw,ys as ax,xs as ay,bs as az,me as b,ei as b$,Is as b0,ur as b1,or as b2,lr as b3,dr as b4,cr as b5,sr as b6,mr as b7,pr as b8,gr as b9,Lr as bA,Ps as bB,Ls as bC,Os as bD,Ds as bE,Rs as bF,Bs as bG,Ws as bH,Qs as bI,Ys as bJ,Gs as bK,Ks as bL,Zs as bM,yo as bN,vo as bO,bo as bP,Mo as bQ,Co as bR,So as bS,To as bT,ko as bU,Ao as bV,Eo as bW,Ub as bX,Bb as bY,Jg as bZ,Ma as b_,fr as ba,wr as bb,Hr as bc,xr as bd,Mr as be,Cr as bf,_r as bg,br as bh,vr as bi,yr as bj,Sr as bk,kr as bl,$r as bm,jr as bn,Ar as bo,Tr as bp,zr as bq,Ir as br,Er as bs,Rr as bt,Fr as bu,Vr as bv,Or as bw,Dr as bx,Nr as by,Pr as bz,Zb as c,lw as c$,Ga as c0,Na as c1,Fa as c2,Ca as c3,Sa as c4,Oa as c5,ja as c6,Da as c7,za as c8,Ya as c9,ai as cA,si as cB,oi as cC,ci as cD,li as cE,di as cF,ui as cG,hi as cH,ii as cI,ri as cJ,ka as cK,$a as cL,pi as cM,mi as cN,fi as cO,gi as cP,Qd as cQ,xa as cR,$o as cS,qw as cT,Ae as cU,Uw as cV,vf as cW,WS as cX,ze as cY,wa as cZ,nf as c_,Za as ca,Wa as cb,Qa as cc,Ka as cd,vi as ce,_i as cf,Pa as cg,Ra as ch,La as ci,Ba as cj,Ua as ck,Va as cl,Ha as cm,qa as cn,Xa as co,Ja as cp,ni as cq,ti as cr,bi as cs,yi as ct,wi as cu,xi as cv,Ea as cw,Aa as cx,Ia as cy,Ta as cz,Kb as d,yx as d$,od as d0,$x as d1,rb as d2,Jk as d3,Af as d4,zy as d5,ve as d6,D$ as d7,Kd as d8,du as d9,Zx as dA,Bw as dB,Zw as dC,Ww as dD,Qw as dE,_x as dF,If as dG,Lw as dH,$$ as dI,S$ as dJ,$f as dK,Jx as dL,kf as dM,jf as dN,Ef as dO,zo as dP,ge as dQ,fe as dR,U as dS,w_ as dT,b_ as dU,Uv as dV,Zv as dW,Jd as dX,Kv as dY,rf as dZ,sf as d_,c as da,ox as db,ny as dc,cx as dd,rx as de,lx as df,af as dg,Dv as dh,eh as di,of as dj,nh as dk,Gg as dl,Nw as dm,hf as dn,E$ as dp,wx as dq,C$ as dr,yw as ds,Yw as dt,by as du,Ob as dv,Db as dw,Wx as dx,Qx as dy,$b as dz,_e as e,ab as e0,ux as e1,gu as e2,gf as e3,Qv as e4,Yg as e5,ya as e6,uf as e7,Pv as e8,jo as e9,Cu as eA,Hu as eB,Wu as eC,Qu as eD,Zu as eE,zb as eF,ty as eG,_f as eH,pe as eI,ye as eJ,Z as eK,we as eL,Ab as eM,Hw as eN,Xy as eO,Jy as eP,eb as eQ,wf as eR,nb as eS,qg as eT,tb as eU,o as eV,U$ as eW,b$ as eX,ry as ea,ey as eb,tv as ec,nv as ed,iy as ee,cf as ef,df as eg,ay as eh,Yv as ei,mf as ej,Fv as ek,Nv as el,Lv as em,Vv as en,su as eo,Yd as ep,au as eq,nu as er,iu as es,ku as et,ou as eu,cu as ev,$u as ew,Su as ex,Gd as ey,uu as ez,hw as f,Tb as g,qb as h,Bv as i,Ib as j,Xg as k,K_ as l,Ki as m,he as n,Wi as o,Zd as p,Zi as q,s as r,pf as s,le as t,Qi as u,jb as v,Gi as w,q as x,Ji as y,Xi as z};
